import{u as N,e as O,r as c,j as e,O as k}from"./single-fetch-KR4tGc5K.js";import{C,a as E,b as A,c as M,B as S,d as x,e as I}from"./card-CeN47jPX.js";import{h as W,j as P,_,k as w,M as B,L as R,S as H}from"./components-Bxeh3RjV.js";/**
 * @remix-run/react v2.16.8
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */let y="positions";function L({getKey:n,...l}){let{isSpaMode:i}=W(),a=N(),d=O();P({getKey:n,storageKey:y});let m=c.useMemo(()=>{if(!n)return null;let s=n(a,d);return s!==a.key?s:null},[]);if(i)return null;let r=((s,h)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let p=JSON.parse(sessionStorage.getItem(s)||"{}")[h||window.history.state.key];typeof p=="number"&&window.scrollTo(0,p)}catch(u){console.error(u),sessionStorage.removeItem(s)}}).toString();return c.createElement("script",_({},l,{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${r})(${JSON.stringify(y)}, ${JSON.stringify(m)})`}}))}function F({isOpen:n,onAccept:l,onDecline:i}){const[a,d]=c.useState(""),[m,r]=c.useState(!1),[s,h]=c.useState(0);c.useEffect(()=>{fetch("/tos.txt").then(t=>t.text()).then(t=>d(t)).catch(t=>console.error("Error loading TOS:",t))},[]);const u=c.useCallback(t=>{const{scrollTop:o,scrollHeight:g,clientHeight:b}=t.currentTarget;requestAnimationFrame(()=>{const T=o/(g-b)*100,v=o+b>=g-10;h(Math.min(T,100)),r(v)})},[]),p=c.useMemo(()=>a?a.split(`
`).map((t,o)=>t.match(/^\d+\.\s+[A-Z\s]+$/)?e.jsx("h2",{className:"text-lg font-bold mt-6 mb-2 text-foreground",children:t},o):t.match(/^\d+\.\d+\s+/)?e.jsx("h3",{className:"text-md font-semibold mt-4 mb-2 text-foreground",children:t},o):t==="TERMS OF SERVICE"?e.jsx("h1",{className:"text-2xl font-bold text-center mb-2 text-foreground",children:t},o):t==="FloorMap Indoor Mapping Services"?e.jsx("p",{className:"text-lg text-center mb-4 text-muted-foreground",children:t},o):t.startsWith("Effective Date:")||t.startsWith("Last Updated:")?e.jsx("p",{className:"text-sm text-center mb-2 text-muted-foreground",children:t},o):t.trim().startsWith("â€¢")||t.trim().match(/^[A-Z][a-z\s]+and/)?e.jsx("li",{className:"ml-4 mb-1 text-sm text-foreground",children:t.trim()},o):t.startsWith("Company Name:")||t.startsWith("Address:")||t.startsWith("Legal Contact:")?e.jsx("p",{className:"text-sm mb-1 text-foreground font-medium",children:t},o):t.startsWith("BY USING THE SERVICE")?e.jsx("p",{className:"text-sm font-bold mt-6 mb-4 p-4 bg-muted rounded text-foreground border-l-4 border-primary",children:t},o):t.trim()&&!t.match(/^[\s]*$/)?e.jsx("p",{className:"mb-3 text-sm leading-relaxed text-foreground",children:t},o):e.jsx("div",{className:"mb-2"},o)):[],[a]);return n?e.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300",children:e.jsxs(C,{className:"w-full max-w-4xl max-h-[90vh] bg-background/95 backdrop-blur border shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-500 ease-out",children:[e.jsxs(E,{className:"text-center border-b py-4",children:[e.jsx(A,{className:"text-2xl text-foreground",children:"Terms of Service"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please read and accept our Terms of Service to continue using FloorMap"})]}),e.jsxs(M,{className:"p-0",children:[e.jsxs("div",{className:"h-[60vh] p-6 overflow-y-auto border-y bg-white dark:bg-gray-900 relative scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-transparent",onScroll:u,children:[e.jsx("div",{className:"prose prose-sm max-w-none",children:p}),!m&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-white dark:from-gray-900 to-transparent pointer-events-none"})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-out ${m?"max-h-0 opacity-0":"max-h-20 opacity-100"}`,children:e.jsx("div",{className:"px-6 py-2 bg-yellow-50 dark:bg-yellow-900/20 border-t border-yellow-200 dark:border-yellow-800",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 text-center",children:"Please scroll down to read the complete Terms of Service before accepting"})})}),e.jsxs("div",{className:"flex justify-between items-center p-6 border-t bg-muted/50",children:[e.jsx(S,{variant:"outline",onClick:i,className:"min-w-[120px]",children:"Decline"}),e.jsx("div",{className:"text-xs text-muted-foreground text-center flex-1 mx-4",children:'By clicking "Accept", you agree to be bound by these Terms of Service'}),e.jsx(S,{onClick:l,disabled:!m,className:"min-w-[120px] bg-primary hover:bg-primary/90 text-primary-foreground disabled:opacity-50 disabled:cursor-not-allowed",children:"Accept & Continue"})]})]})]})}):null}const f="floormap_tos_accepted",j="2025-07-31";function $(){const[n,l]=c.useState(null),[i,a]=c.useState(!1);return c.useEffect(()=>{if(!(typeof window>"u"))try{const r=localStorage.getItem(f),s=r?JSON.parse(r):null,h=(s==null?void 0:s.accepted)&&(s==null?void 0:s.version)===j;l(h),a(!h)}catch(r){console.error("Error checking TOS acceptance:",r),l(!1),a(!0)}},[]),{tosAccepted:n,showTOSOverlay:i,acceptTOS:()=>{try{const r={accepted:!0,version:j,timestamp:new Date().toISOString()};localStorage.setItem(f,JSON.stringify(r)),l(!0),a(!1)}catch(r){console.error("Error saving TOS acceptance:",r)}},declineTOS:()=>{try{localStorage.removeItem(f),l(!1),window.location.href="https://www.google.com"}catch(r){console.error("Error handling TOS decline:",r)}}}}const Y=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"},{rel:"icon",href:"/favicon.ico",sizes:"any"},{rel:"icon",href:"/favicon.png",type:"image/png"},{rel:"apple-touch-icon",href:"/apple-touch-icon.png"}];function z(){const n=w(),[l]=x.useTheme(),{showTOSOverlay:i,acceptTOS:a,declineTOS:d}=$();return e.jsxs("html",{lang:"en",className:I(l),children:[e.jsxs("head",{children:[e.jsx("meta",{charSet:"utf-8"}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),e.jsx("title",{children:"FloorMap"}),e.jsx("script",{async:!0,src:"https://tally.so/widgets/embed.js"}),e.jsx(B,{}),e.jsx(x.PreventFlashOnWrongTheme,{ssrTheme:!!n.theme}),e.jsx(R,{})]}),e.jsxs("body",{children:[e.jsx(k,{}),e.jsx(F,{isOpen:i,onAccept:a,onDecline:d}),e.jsx(L,{}),e.jsx(H,{})]})]})}function U(){const n=w();return e.jsx(x.ThemeProvider,{specifiedTheme:n.theme,themeAction:"/action/set-theme",children:e.jsx(z,{})})}export{U as default,Y as links};
