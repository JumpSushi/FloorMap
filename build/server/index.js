var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
import { jsx, jsxs, Fragment } from "react/jsx-runtime";
import { PassThrough } from "node:stream";
import { createReadableStreamFromReadable, createCookieSessionStorage, json } from "@remix-run/node";
import { RemixServer, useLoaderData, Meta, Links, Outlet, ScrollRestoration, Scripts } from "@remix-run/react";
import { isbot } from "isbot";
import { renderToPipeableStream } from "react-dom/server";
import { createThemeSessionResolver, ThemeProvider, useTheme, PreventFlashOnWrongTheme, createThemeAction } from "remix-themes";
import clsx$1, { clsx } from "clsx";
import * as React from "react";
import { useState, useEffect, useCallback, useMemo, useRef } from "react";
import { Slot } from "@radix-ui/react-slot";
import { cva } from "class-variance-authority";
import { twMerge } from "tailwind-merge";
import { create } from "zustand";
import { nanoid } from "nanoid";
import MiniSearch from "minisearch";
import { Building2, Map as Map$1, ArrowLeft, Search, SlidersVertical, ChevronRight, Check, Circle, Share2, QrCode, Link, X as X$1, Navigation2, MapPin, Globe, Building, Navigation, Dot, ArrowUpDown, Accessibility, Route } from "lucide-react";
import * as TogglePrimitive from "@radix-ui/react-toggle";
import { useTheme as useTheme$1, Theme } from "remix-themes/build/theme-provider.js";
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu";
import { booleanPointInPolygon } from "@turf/boolean-point-in-polygon";
import { Analytics } from "@vercel/analytics/remix";
const ABORT_DELAY = 5e3;
function handleRequest(request, responseStatusCode, responseHeaders, remixContext, loadContext) {
  return isbot(request.headers.get("user-agent") || "") ? handleBotRequest(
    request,
    responseStatusCode,
    responseHeaders,
    remixContext
  ) : handleBrowserRequest(
    request,
    responseStatusCode,
    responseHeaders,
    remixContext
  );
}
function handleBotRequest(request, responseStatusCode, responseHeaders, remixContext) {
  return new Promise((resolve, reject) => {
    let shellRendered = false;
    const { pipe, abort } = renderToPipeableStream(
      /* @__PURE__ */ jsx(
        RemixServer,
        {
          context: remixContext,
          url: request.url,
          abortDelay: ABORT_DELAY
        }
      ),
      {
        onAllReady() {
          shellRendered = true;
          const body = new PassThrough();
          const stream = createReadableStreamFromReadable(body);
          responseHeaders.set("Content-Type", "text/html");
          resolve(
            new Response(stream, {
              headers: responseHeaders,
              status: responseStatusCode
            })
          );
          pipe(body);
        },
        onShellError(error) {
          reject(error);
        },
        onError(error) {
          responseStatusCode = 500;
          if (shellRendered) {
            console.error(error);
          }
        }
      }
    );
    setTimeout(abort, ABORT_DELAY);
  });
}
function handleBrowserRequest(request, responseStatusCode, responseHeaders, remixContext) {
  return new Promise((resolve, reject) => {
    let shellRendered = false;
    const { pipe, abort } = renderToPipeableStream(
      /* @__PURE__ */ jsx(
        RemixServer,
        {
          context: remixContext,
          url: request.url,
          abortDelay: ABORT_DELAY
        }
      ),
      {
        onShellReady() {
          shellRendered = true;
          const body = new PassThrough();
          const stream = createReadableStreamFromReadable(body);
          responseHeaders.set("Content-Type", "text/html");
          resolve(
            new Response(stream, {
              headers: responseHeaders,
              status: responseStatusCode
            })
          );
          pipe(body);
        },
        onShellError(error) {
          reject(error);
        },
        onError(error) {
          responseStatusCode = 500;
          if (shellRendered) {
            console.error(error);
          }
        }
      }
    );
    setTimeout(abort, ABORT_DELAY);
  });
}
const entryServer = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: handleRequest
}, Symbol.toStringTag, { value: "Module" }));
const isProduction = process.env.NODE_ENV === "production";
const sessionStorage = createCookieSessionStorage({
  cookie: {
    name: "theme",
    path: "/",
    httpOnly: true,
    sameSite: "lax",
    secrets: [process.env.SESSION_SECRET || "fallback"],
    ...isProduction ? { domain: process.env.APP_URL, secure: true } : {}
  }
});
const themeSessionResolver = createThemeSessionResolver(sessionStorage);
function cn(...inputs) {
  return twMerge(clsx(inputs));
}
const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:text-gray-200",
  {
    variants: {
      variant: {
        default: "bg-transparent hover:bg-slate-100",
        primary: "bg-blue-500 text-primary-foreground hover:bg-blue-600",
        secondary: "bg-slate-500 text-primary-foreground hover:bg-slate-600",
        danger: "bg-rose-500 text-primary-foreground hover:bg-rose-600",
        success: "bg-emerald-500 text-primary-foreground hover:bg-green-600",
        outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
        ghost: "bg-transparent"
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "size-10"
      }
    },
    defaultVariants: {
      variant: "default",
      size: "default"
    }
  }
);
const Button = React.forwardRef(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button";
    return /* @__PURE__ */ jsx(
      Comp,
      {
        className: cn(buttonVariants({ variant, size, className })),
        ref,
        ...props
      }
    );
  }
);
Button.displayName = "Button";
const Card = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn(
      "rounded-lg border bg-card text-card-foreground shadow-sm",
      className
    ),
    ...props
  }
));
Card.displayName = "Card";
const CardHeader = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn("flex flex-col space-y-1.5 p-6", className),
    ...props
  }
));
CardHeader.displayName = "CardHeader";
const CardTitle = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn(
      "text-2xl font-semibold leading-none tracking-tight",
      className
    ),
    ...props
  }
));
CardTitle.displayName = "CardTitle";
const CardDescription = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn("text-sm text-muted-foreground", className),
    ...props
  }
));
CardDescription.displayName = "CardDescription";
const CardContent = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx("div", { ref, className: cn("p-6 pt-0", className), ...props }));
CardContent.displayName = "CardContent";
const CardFooter = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  "div",
  {
    ref,
    className: cn("flex items-center p-6 pt-0", className),
    ...props
  }
));
CardFooter.displayName = "CardFooter";
function TOSOverlay({ isOpen, onAccept, onDecline }) {
  const [tosContent, setTosContent] = useState("");
  const [hasScrolledToBottom, setHasScrolledToBottom] = useState(false);
  const [scrollProgress, setScrollProgress] = useState(0);
  useEffect(() => {
    fetch("/tos.txt").then((response) => response.text()).then((text) => setTosContent(text)).catch((error) => console.error("Error loading TOS:", error));
  }, []);
  const handleScroll = useCallback((e) => {
    const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;
    requestAnimationFrame(() => {
      const scrollPercent = scrollTop / (scrollHeight - clientHeight) * 100;
      const isScrolledToBottom = scrollTop + clientHeight >= scrollHeight - 10;
      setScrollProgress(Math.min(scrollPercent, 100));
      setHasScrolledToBottom(isScrolledToBottom);
    });
  }, []);
  const formatTosContent = useMemo(() => {
    if (!tosContent) return [];
    return tosContent.split("\n").map((line, index) => {
      if (line.match(/^\d+\.\s+[A-Z\s]+$/)) {
        return /* @__PURE__ */ jsx("h2", { className: "text-lg font-bold mt-6 mb-2 text-foreground", children: line }, index);
      }
      if (line.match(/^\d+\.\d+\s+/)) {
        return /* @__PURE__ */ jsx("h3", { className: "text-md font-semibold mt-4 mb-2 text-foreground", children: line }, index);
      }
      if (line === "TERMS OF SERVICE") {
        return /* @__PURE__ */ jsx("h1", { className: "text-2xl font-bold text-center mb-2 text-foreground", children: line }, index);
      }
      if (line === "FloorMap Indoor Mapping Services") {
        return /* @__PURE__ */ jsx("p", { className: "text-lg text-center mb-4 text-muted-foreground", children: line }, index);
      }
      if (line.startsWith("Effective Date:") || line.startsWith("Last Updated:")) {
        return /* @__PURE__ */ jsx("p", { className: "text-sm text-center mb-2 text-muted-foreground", children: line }, index);
      }
      if (line.trim().startsWith("â€¢") || line.trim().match(/^[A-Z][a-z\s]+and/)) {
        return /* @__PURE__ */ jsx("li", { className: "ml-4 mb-1 text-sm text-foreground", children: line.trim() }, index);
      }
      if (line.startsWith("Company Name:") || line.startsWith("Address:") || line.startsWith("Legal Contact:")) {
        return /* @__PURE__ */ jsx("p", { className: "text-sm mb-1 text-foreground font-medium", children: line }, index);
      }
      if (line.startsWith("BY USING THE SERVICE")) {
        return /* @__PURE__ */ jsx("p", { className: "text-sm font-bold mt-6 mb-4 p-4 bg-muted rounded text-foreground border-l-4 border-primary", children: line }, index);
      }
      if (line.trim() && !line.match(/^[\s]*$/)) {
        return /* @__PURE__ */ jsx("p", { className: "mb-3 text-sm leading-relaxed text-foreground", children: line }, index);
      }
      return /* @__PURE__ */ jsx("div", { className: "mb-2" }, index);
    });
  }, [tosContent]);
  if (!isOpen) return null;
  return /* @__PURE__ */ jsx("div", { className: "fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-300", children: /* @__PURE__ */ jsxs(Card, { className: "w-full max-w-4xl max-h-[90vh] bg-background/95 backdrop-blur border shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 duration-500 ease-out", children: [
    /* @__PURE__ */ jsxs(CardHeader, { className: "text-center border-b py-4", children: [
      /* @__PURE__ */ jsx(CardTitle, { className: "text-2xl text-foreground", children: "Terms of Service" }),
      /* @__PURE__ */ jsx("p", { className: "text-sm text-muted-foreground", children: "Please read and accept our Terms of Service to continue using FloorMap" })
    ] }),
    /* @__PURE__ */ jsxs(CardContent, { className: "p-0", children: [
      /* @__PURE__ */ jsxs(
        "div",
        {
          className: "h-[60vh] p-6 overflow-y-auto border-y bg-white dark:bg-gray-900 relative scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-transparent",
          onScroll: handleScroll,
          children: [
            /* @__PURE__ */ jsx("div", { className: "prose prose-sm max-w-none", children: formatTosContent }),
            !hasScrolledToBottom && /* @__PURE__ */ jsx("div", { className: "absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-white dark:from-gray-900 to-transparent pointer-events-none" })
          ]
        }
      ),
      /* @__PURE__ */ jsx(
        "div",
        {
          className: `overflow-hidden transition-all duration-500 ease-out ${!hasScrolledToBottom ? "max-h-20 opacity-100" : "max-h-0 opacity-0"}`,
          children: /* @__PURE__ */ jsx("div", { className: "px-6 py-2 bg-yellow-50 dark:bg-yellow-900/20 border-t border-yellow-200 dark:border-yellow-800", children: /* @__PURE__ */ jsx("p", { className: "text-sm text-yellow-800 dark:text-yellow-200 text-center", children: "Please scroll down to read the complete Terms of Service before accepting" }) })
        }
      ),
      /* @__PURE__ */ jsxs("div", { className: "flex justify-between items-center p-6 border-t bg-muted/50", children: [
        /* @__PURE__ */ jsx(
          Button,
          {
            variant: "outline",
            onClick: onDecline,
            className: "min-w-[120px]",
            children: "Decline"
          }
        ),
        /* @__PURE__ */ jsx("div", { className: "text-xs text-muted-foreground text-center flex-1 mx-4", children: 'By clicking "Accept", you agree to be bound by these Terms of Service' }),
        /* @__PURE__ */ jsx(
          Button,
          {
            onClick: onAccept,
            disabled: !hasScrolledToBottom,
            className: "min-w-[120px] bg-primary hover:bg-primary/90 text-primary-foreground disabled:opacity-50 disabled:cursor-not-allowed",
            children: "Accept & Continue"
          }
        )
      ] })
    ] })
  ] }) });
}
const TOS_ACCEPTED_KEY = "floormap_tos_accepted";
const TOS_VERSION = "2025-07-31";
function useTOSAcceptance() {
  const [tosAccepted, setTosAccepted] = useState(null);
  const [showTOSOverlay, setShowTOSOverlay] = useState(false);
  useEffect(() => {
    if (typeof window === "undefined") return;
    try {
      const stored = localStorage.getItem(TOS_ACCEPTED_KEY);
      const storedData = stored ? JSON.parse(stored) : null;
      const isAccepted = (storedData == null ? void 0 : storedData.accepted) && (storedData == null ? void 0 : storedData.version) === TOS_VERSION;
      setTosAccepted(isAccepted);
      setShowTOSOverlay(!isAccepted);
    } catch (error) {
      console.error("Error checking TOS acceptance:", error);
      setTosAccepted(false);
      setShowTOSOverlay(true);
    }
  }, []);
  const acceptTOS = () => {
    try {
      const acceptanceData = {
        accepted: true,
        version: TOS_VERSION,
        timestamp: (/* @__PURE__ */ new Date()).toISOString()
      };
      localStorage.setItem(TOS_ACCEPTED_KEY, JSON.stringify(acceptanceData));
      setTosAccepted(true);
      setShowTOSOverlay(false);
    } catch (error) {
      console.error("Error saving TOS acceptance:", error);
    }
  };
  const declineTOS = () => {
    try {
      localStorage.removeItem(TOS_ACCEPTED_KEY);
      setTosAccepted(false);
      window.location.href = "https://www.google.com";
    } catch (error) {
      console.error("Error handling TOS decline:", error);
    }
  };
  return {
    tosAccepted,
    showTOSOverlay,
    acceptTOS,
    declineTOS
  };
}
const links = () => [
  { rel: "preconnect", href: "https://fonts.googleapis.com" },
  {
    rel: "preconnect",
    href: "https://fonts.gstatic.com",
    crossOrigin: "anonymous"
  },
  {
    rel: "stylesheet",
    href: "https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
  },
  {
    rel: "icon",
    href: "/favicon.ico",
    sizes: "any"
  },
  {
    rel: "icon",
    href: "/favicon.png",
    type: "image/png"
  },
  {
    rel: "apple-touch-icon",
    href: "/apple-touch-icon.png"
  }
];
async function loader$1({ request }) {
  const { getTheme } = await themeSessionResolver(request);
  return {
    theme: getTheme()
  };
}
function App() {
  const data = useLoaderData();
  const [theme] = useTheme();
  const { showTOSOverlay, acceptTOS, declineTOS } = useTOSAcceptance();
  return /* @__PURE__ */ jsxs("html", { lang: "en", className: clsx$1(theme), children: [
    /* @__PURE__ */ jsxs("head", { children: [
      /* @__PURE__ */ jsx("meta", { charSet: "utf-8" }),
      /* @__PURE__ */ jsx("meta", { name: "viewport", content: "width=device-width, initial-scale=1" }),
      /* @__PURE__ */ jsx("title", { children: "FloorMap" }),
      /* @__PURE__ */ jsx("script", { async: true, src: "https://tally.so/widgets/embed.js" }),
      /* @__PURE__ */ jsx(Meta, {}),
      /* @__PURE__ */ jsx(PreventFlashOnWrongTheme, { ssrTheme: Boolean(data.theme) }),
      /* @__PURE__ */ jsx(Links, {})
    ] }),
    /* @__PURE__ */ jsxs("body", { children: [
      /* @__PURE__ */ jsx(Outlet, {}),
      /* @__PURE__ */ jsx(
        TOSOverlay,
        {
          isOpen: showTOSOverlay,
          onAccept: acceptTOS,
          onDecline: declineTOS
        }
      ),
      /* @__PURE__ */ jsx(ScrollRestoration, {}),
      /* @__PURE__ */ jsx(Scripts, {})
    ] })
  ] });
}
function AppWithProviders() {
  const data = useLoaderData();
  return /* @__PURE__ */ jsx(ThemeProvider, { specifiedTheme: data.theme, themeAction: "/action/set-theme", children: /* @__PURE__ */ jsx(App, {}) });
}
const route0 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: AppWithProviders,
  links,
  loader: loader$1
}, Symbol.toStringTag, { value: "Module" }));
const action = createThemeAction(themeSessionResolver);
const route1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  action
}, Symbol.toStringTag, { value: "Module" }));
async function loader({ request }) {
  const url = new URL(request.url);
  const query = url.searchParams.get("q");
  if (!query) {
    return json({ error: "Query parameter 'q' is required" }, { status: 400 });
  }
  try {
    let enhancedQuery = query;
    if (!query.toLowerCase().includes("georgetown") && !query.toLowerCase().includes("washington") && !query.toLowerCase().includes("dc")) {
      enhancedQuery = `${query} Georgetown Washington DC`;
    }
    const params = new URLSearchParams({
      q: enhancedQuery,
      format: "json",
      limit: "5",
      addressdetails: "1",
      "accept-language": "en",
      countrycodes: "us"
    });
    const response = await fetch(`https://nominatim.openstreetmap.org/search?${params}`, {
      headers: {
        "User-Agent": "OpenIndoorMaps/1.0"
      }
    });
    if (!response.ok) {
      console.warn("OSM geocoding failed:", response.status);
      return json({ error: "Geocoding service unavailable" }, { status: response.status });
    }
    const data = await response.json();
    const filteredData = data.filter((location2) => {
      const address2 = location2.display_name.toLowerCase();
      const isRelevant = address2.includes("georgetown") || address2.includes("washington") || address2.includes("dc") || address2.includes("district of columbia") || // Check coordinates to be within expanded Georgetown/DC area
      parseFloat(location2.lat) >= 38.88 && parseFloat(location2.lat) <= 38.95 && parseFloat(location2.lon) >= -77.12 && parseFloat(location2.lon) <= -77;
      return isRelevant;
    });
    return json(filteredData);
  } catch (error) {
    console.error("Error fetching OSM results:", error);
    return json({ error: "Internal server error" }, { status: 500 });
  }
}
const route2 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  loader
}, Symbol.toStringTag, { value: "Module" }));
var commonjsGlobal$1 = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
function getDefaultExportFromCjs$1(x) {
  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, "default") ? x["default"] : x;
}
var lodash_isequal = { exports: {} };
lodash_isequal.exports;
var hasRequiredLodash_isequal;
function requireLodash_isequal() {
  if (hasRequiredLodash_isequal) return lodash_isequal.exports;
  hasRequiredLodash_isequal = 1;
  (function(module, exports) {
    var LARGE_ARRAY_SIZE = 200;
    var HASH_UNDEFINED = "__lodash_hash_undefined__";
    var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;
    var MAX_SAFE_INTEGER = 9007199254740991;
    var argsTag = "[object Arguments]", arrayTag = "[object Array]", asyncTag = "[object AsyncFunction]", boolTag = "[object Boolean]", dateTag = "[object Date]", errorTag = "[object Error]", funcTag = "[object Function]", genTag = "[object GeneratorFunction]", mapTag = "[object Map]", numberTag = "[object Number]", nullTag = "[object Null]", objectTag = "[object Object]", promiseTag = "[object Promise]", proxyTag = "[object Proxy]", regexpTag = "[object RegExp]", setTag = "[object Set]", stringTag = "[object String]", symbolTag = "[object Symbol]", undefinedTag = "[object Undefined]", weakMapTag = "[object WeakMap]";
    var arrayBufferTag = "[object ArrayBuffer]", dataViewTag = "[object DataView]", float32Tag = "[object Float32Array]", float64Tag = "[object Float64Array]", int8Tag = "[object Int8Array]", int16Tag = "[object Int16Array]", int32Tag = "[object Int32Array]", uint8Tag = "[object Uint8Array]", uint8ClampedTag = "[object Uint8ClampedArray]", uint16Tag = "[object Uint16Array]", uint32Tag = "[object Uint32Array]";
    var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
    var reIsHostCtor = /^\[object .+?Constructor\]$/;
    var reIsUint = /^(?:0|[1-9]\d*)$/;
    var typedArrayTags = {};
    typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;
    typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;
    var freeGlobal = typeof commonjsGlobal$1 == "object" && commonjsGlobal$1 && commonjsGlobal$1.Object === Object && commonjsGlobal$1;
    var freeSelf = typeof self == "object" && self && self.Object === Object && self;
    var root = freeGlobal || freeSelf || Function("return this")();
    var freeExports = exports && !exports.nodeType && exports;
    var freeModule = freeExports && true && module && !module.nodeType && module;
    var moduleExports = freeModule && freeModule.exports === freeExports;
    var freeProcess = moduleExports && freeGlobal.process;
    var nodeUtil = function() {
      try {
        return freeProcess && freeProcess.binding && freeProcess.binding("util");
      } catch (e) {
      }
    }();
    var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;
    function arrayFilter(array, predicate) {
      var index = -1, length = array == null ? 0 : array.length, resIndex = 0, result = [];
      while (++index < length) {
        var value = array[index];
        if (predicate(value, index, array)) {
          result[resIndex++] = value;
        }
      }
      return result;
    }
    function arrayPush(array, values) {
      var index = -1, length = values.length, offset = array.length;
      while (++index < length) {
        array[offset + index] = values[index];
      }
      return array;
    }
    function arraySome(array, predicate) {
      var index = -1, length = array == null ? 0 : array.length;
      while (++index < length) {
        if (predicate(array[index], index, array)) {
          return true;
        }
      }
      return false;
    }
    function baseTimes(n, iteratee) {
      var index = -1, result = Array(n);
      while (++index < n) {
        result[index] = iteratee(index);
      }
      return result;
    }
    function baseUnary(func) {
      return function(value) {
        return func(value);
      };
    }
    function cacheHas(cache, key) {
      return cache.has(key);
    }
    function getValue(object, key) {
      return object == null ? void 0 : object[key];
    }
    function mapToArray(map) {
      var index = -1, result = Array(map.size);
      map.forEach(function(value, key) {
        result[++index] = [key, value];
      });
      return result;
    }
    function overArg(func, transform) {
      return function(arg) {
        return func(transform(arg));
      };
    }
    function setToArray(set) {
      var index = -1, result = Array(set.size);
      set.forEach(function(value) {
        result[++index] = value;
      });
      return result;
    }
    var arrayProto = Array.prototype, funcProto = Function.prototype, objectProto = Object.prototype;
    var coreJsData = root["__core-js_shared__"];
    var funcToString = funcProto.toString;
    var hasOwnProperty = objectProto.hasOwnProperty;
    var maskSrcKey = function() {
      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || "");
      return uid ? "Symbol(src)_1." + uid : "";
    }();
    var nativeObjectToString = objectProto.toString;
    var reIsNative = RegExp(
      "^" + funcToString.call(hasOwnProperty).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
    );
    var Buffer2 = moduleExports ? root.Buffer : void 0, Symbol2 = root.Symbol, Uint8Array2 = root.Uint8Array, propertyIsEnumerable = objectProto.propertyIsEnumerable, splice = arrayProto.splice, symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
    var nativeGetSymbols = Object.getOwnPropertySymbols, nativeIsBuffer = Buffer2 ? Buffer2.isBuffer : void 0, nativeKeys = overArg(Object.keys, Object);
    var DataView = getNative(root, "DataView"), Map2 = getNative(root, "Map"), Promise2 = getNative(root, "Promise"), Set2 = getNative(root, "Set"), WeakMap2 = getNative(root, "WeakMap"), nativeCreate = getNative(Object, "create");
    var dataViewCtorString = toSource(DataView), mapCtorString = toSource(Map2), promiseCtorString = toSource(Promise2), setCtorString = toSource(Set2), weakMapCtorString = toSource(WeakMap2);
    var symbolProto = Symbol2 ? Symbol2.prototype : void 0, symbolValueOf = symbolProto ? symbolProto.valueOf : void 0;
    function Hash(entries) {
      var index = -1, length = entries == null ? 0 : entries.length;
      this.clear();
      while (++index < length) {
        var entry2 = entries[index];
        this.set(entry2[0], entry2[1]);
      }
    }
    function hashClear() {
      this.__data__ = nativeCreate ? nativeCreate(null) : {};
      this.size = 0;
    }
    function hashDelete(key) {
      var result = this.has(key) && delete this.__data__[key];
      this.size -= result ? 1 : 0;
      return result;
    }
    function hashGet(key) {
      var data = this.__data__;
      if (nativeCreate) {
        var result = data[key];
        return result === HASH_UNDEFINED ? void 0 : result;
      }
      return hasOwnProperty.call(data, key) ? data[key] : void 0;
    }
    function hashHas(key) {
      var data = this.__data__;
      return nativeCreate ? data[key] !== void 0 : hasOwnProperty.call(data, key);
    }
    function hashSet(key, value) {
      var data = this.__data__;
      this.size += this.has(key) ? 0 : 1;
      data[key] = nativeCreate && value === void 0 ? HASH_UNDEFINED : value;
      return this;
    }
    Hash.prototype.clear = hashClear;
    Hash.prototype["delete"] = hashDelete;
    Hash.prototype.get = hashGet;
    Hash.prototype.has = hashHas;
    Hash.prototype.set = hashSet;
    function ListCache(entries) {
      var index = -1, length = entries == null ? 0 : entries.length;
      this.clear();
      while (++index < length) {
        var entry2 = entries[index];
        this.set(entry2[0], entry2[1]);
      }
    }
    function listCacheClear() {
      this.__data__ = [];
      this.size = 0;
    }
    function listCacheDelete(key) {
      var data = this.__data__, index = assocIndexOf(data, key);
      if (index < 0) {
        return false;
      }
      var lastIndex = data.length - 1;
      if (index == lastIndex) {
        data.pop();
      } else {
        splice.call(data, index, 1);
      }
      --this.size;
      return true;
    }
    function listCacheGet(key) {
      var data = this.__data__, index = assocIndexOf(data, key);
      return index < 0 ? void 0 : data[index][1];
    }
    function listCacheHas(key) {
      return assocIndexOf(this.__data__, key) > -1;
    }
    function listCacheSet(key, value) {
      var data = this.__data__, index = assocIndexOf(data, key);
      if (index < 0) {
        ++this.size;
        data.push([key, value]);
      } else {
        data[index][1] = value;
      }
      return this;
    }
    ListCache.prototype.clear = listCacheClear;
    ListCache.prototype["delete"] = listCacheDelete;
    ListCache.prototype.get = listCacheGet;
    ListCache.prototype.has = listCacheHas;
    ListCache.prototype.set = listCacheSet;
    function MapCache(entries) {
      var index = -1, length = entries == null ? 0 : entries.length;
      this.clear();
      while (++index < length) {
        var entry2 = entries[index];
        this.set(entry2[0], entry2[1]);
      }
    }
    function mapCacheClear() {
      this.size = 0;
      this.__data__ = {
        "hash": new Hash(),
        "map": new (Map2 || ListCache)(),
        "string": new Hash()
      };
    }
    function mapCacheDelete(key) {
      var result = getMapData(this, key)["delete"](key);
      this.size -= result ? 1 : 0;
      return result;
    }
    function mapCacheGet(key) {
      return getMapData(this, key).get(key);
    }
    function mapCacheHas(key) {
      return getMapData(this, key).has(key);
    }
    function mapCacheSet(key, value) {
      var data = getMapData(this, key), size = data.size;
      data.set(key, value);
      this.size += data.size == size ? 0 : 1;
      return this;
    }
    MapCache.prototype.clear = mapCacheClear;
    MapCache.prototype["delete"] = mapCacheDelete;
    MapCache.prototype.get = mapCacheGet;
    MapCache.prototype.has = mapCacheHas;
    MapCache.prototype.set = mapCacheSet;
    function SetCache(values) {
      var index = -1, length = values == null ? 0 : values.length;
      this.__data__ = new MapCache();
      while (++index < length) {
        this.add(values[index]);
      }
    }
    function setCacheAdd(value) {
      this.__data__.set(value, HASH_UNDEFINED);
      return this;
    }
    function setCacheHas(value) {
      return this.__data__.has(value);
    }
    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
    SetCache.prototype.has = setCacheHas;
    function Stack(entries) {
      var data = this.__data__ = new ListCache(entries);
      this.size = data.size;
    }
    function stackClear() {
      this.__data__ = new ListCache();
      this.size = 0;
    }
    function stackDelete(key) {
      var data = this.__data__, result = data["delete"](key);
      this.size = data.size;
      return result;
    }
    function stackGet(key) {
      return this.__data__.get(key);
    }
    function stackHas(key) {
      return this.__data__.has(key);
    }
    function stackSet(key, value) {
      var data = this.__data__;
      if (data instanceof ListCache) {
        var pairs = data.__data__;
        if (!Map2 || pairs.length < LARGE_ARRAY_SIZE - 1) {
          pairs.push([key, value]);
          this.size = ++data.size;
          return this;
        }
        data = this.__data__ = new MapCache(pairs);
      }
      data.set(key, value);
      this.size = data.size;
      return this;
    }
    Stack.prototype.clear = stackClear;
    Stack.prototype["delete"] = stackDelete;
    Stack.prototype.get = stackGet;
    Stack.prototype.has = stackHas;
    Stack.prototype.set = stackSet;
    function arrayLikeKeys(value, inherited) {
      var isArr = isArray(value), isArg = !isArr && isArguments(value), isBuff = !isArr && !isArg && isBuffer(value), isType = !isArr && !isArg && !isBuff && isTypedArray(value), skipIndexes = isArr || isArg || isBuff || isType, result = skipIndexes ? baseTimes(value.length, String) : [], length = result.length;
      for (var key in value) {
        if (hasOwnProperty.call(value, key) && !(skipIndexes && // Safari 9 has enumerable `arguments.length` in strict mode.
        (key == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
        isBuff && (key == "offset" || key == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
        isType && (key == "buffer" || key == "byteLength" || key == "byteOffset") || // Skip index properties.
        isIndex(key, length)))) {
          result.push(key);
        }
      }
      return result;
    }
    function assocIndexOf(array, key) {
      var length = array.length;
      while (length--) {
        if (eq(array[length][0], key)) {
          return length;
        }
      }
      return -1;
    }
    function baseGetAllKeys(object, keysFunc, symbolsFunc) {
      var result = keysFunc(object);
      return isArray(object) ? result : arrayPush(result, symbolsFunc(object));
    }
    function baseGetTag(value) {
      if (value == null) {
        return value === void 0 ? undefinedTag : nullTag;
      }
      return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);
    }
    function baseIsArguments(value) {
      return isObjectLike(value) && baseGetTag(value) == argsTag;
    }
    function baseIsEqual(value, other, bitmask, customizer, stack) {
      if (value === other) {
        return true;
      }
      if (value == null || other == null || !isObjectLike(value) && !isObjectLike(other)) {
        return value !== value && other !== other;
      }
      return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
    }
    function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
      var objIsArr = isArray(object), othIsArr = isArray(other), objTag = objIsArr ? arrayTag : getTag(object), othTag = othIsArr ? arrayTag : getTag(other);
      objTag = objTag == argsTag ? objectTag : objTag;
      othTag = othTag == argsTag ? objectTag : othTag;
      var objIsObj = objTag == objectTag, othIsObj = othTag == objectTag, isSameTag = objTag == othTag;
      if (isSameTag && isBuffer(object)) {
        if (!isBuffer(other)) {
          return false;
        }
        objIsArr = true;
        objIsObj = false;
      }
      if (isSameTag && !objIsObj) {
        stack || (stack = new Stack());
        return objIsArr || isTypedArray(object) ? equalArrays(object, other, bitmask, customizer, equalFunc, stack) : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
      }
      if (!(bitmask & COMPARE_PARTIAL_FLAG)) {
        var objIsWrapped = objIsObj && hasOwnProperty.call(object, "__wrapped__"), othIsWrapped = othIsObj && hasOwnProperty.call(other, "__wrapped__");
        if (objIsWrapped || othIsWrapped) {
          var objUnwrapped = objIsWrapped ? object.value() : object, othUnwrapped = othIsWrapped ? other.value() : other;
          stack || (stack = new Stack());
          return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
        }
      }
      if (!isSameTag) {
        return false;
      }
      stack || (stack = new Stack());
      return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
    }
    function baseIsNative(value) {
      if (!isObject(value) || isMasked(value)) {
        return false;
      }
      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
      return pattern.test(toSource(value));
    }
    function baseIsTypedArray(value) {
      return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
    }
    function baseKeys(object) {
      if (!isPrototype(object)) {
        return nativeKeys(object);
      }
      var result = [];
      for (var key in Object(object)) {
        if (hasOwnProperty.call(object, key) && key != "constructor") {
          result.push(key);
        }
      }
      return result;
    }
    function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
      var isPartial = bitmask & COMPARE_PARTIAL_FLAG, arrLength = array.length, othLength = other.length;
      if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
        return false;
      }
      var stacked = stack.get(array);
      if (stacked && stack.get(other)) {
        return stacked == other;
      }
      var index = -1, result = true, seen = bitmask & COMPARE_UNORDERED_FLAG ? new SetCache() : void 0;
      stack.set(array, other);
      stack.set(other, array);
      while (++index < arrLength) {
        var arrValue = array[index], othValue = other[index];
        if (customizer) {
          var compared = isPartial ? customizer(othValue, arrValue, index, other, array, stack) : customizer(arrValue, othValue, index, array, other, stack);
        }
        if (compared !== void 0) {
          if (compared) {
            continue;
          }
          result = false;
          break;
        }
        if (seen) {
          if (!arraySome(other, function(othValue2, othIndex) {
            if (!cacheHas(seen, othIndex) && (arrValue === othValue2 || equalFunc(arrValue, othValue2, bitmask, customizer, stack))) {
              return seen.push(othIndex);
            }
          })) {
            result = false;
            break;
          }
        } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
          result = false;
          break;
        }
      }
      stack["delete"](array);
      stack["delete"](other);
      return result;
    }
    function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
      switch (tag) {
        case dataViewTag:
          if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {
            return false;
          }
          object = object.buffer;
          other = other.buffer;
        case arrayBufferTag:
          if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array2(object), new Uint8Array2(other))) {
            return false;
          }
          return true;
        case boolTag:
        case dateTag:
        case numberTag:
          return eq(+object, +other);
        case errorTag:
          return object.name == other.name && object.message == other.message;
        case regexpTag:
        case stringTag:
          return object == other + "";
        case mapTag:
          var convert = mapToArray;
        case setTag:
          var isPartial = bitmask & COMPARE_PARTIAL_FLAG;
          convert || (convert = setToArray);
          if (object.size != other.size && !isPartial) {
            return false;
          }
          var stacked = stack.get(object);
          if (stacked) {
            return stacked == other;
          }
          bitmask |= COMPARE_UNORDERED_FLAG;
          stack.set(object, other);
          var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
          stack["delete"](object);
          return result;
        case symbolTag:
          if (symbolValueOf) {
            return symbolValueOf.call(object) == symbolValueOf.call(other);
          }
      }
      return false;
    }
    function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
      var isPartial = bitmask & COMPARE_PARTIAL_FLAG, objProps = getAllKeys(object), objLength = objProps.length, othProps = getAllKeys(other), othLength = othProps.length;
      if (objLength != othLength && !isPartial) {
        return false;
      }
      var index = objLength;
      while (index--) {
        var key = objProps[index];
        if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {
          return false;
        }
      }
      var stacked = stack.get(object);
      if (stacked && stack.get(other)) {
        return stacked == other;
      }
      var result = true;
      stack.set(object, other);
      stack.set(other, object);
      var skipCtor = isPartial;
      while (++index < objLength) {
        key = objProps[index];
        var objValue = object[key], othValue = other[key];
        if (customizer) {
          var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);
        }
        if (!(compared === void 0 ? objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) : compared)) {
          result = false;
          break;
        }
        skipCtor || (skipCtor = key == "constructor");
      }
      if (result && !skipCtor) {
        var objCtor = object.constructor, othCtor = other.constructor;
        if (objCtor != othCtor && ("constructor" in object && "constructor" in other) && !(typeof objCtor == "function" && objCtor instanceof objCtor && typeof othCtor == "function" && othCtor instanceof othCtor)) {
          result = false;
        }
      }
      stack["delete"](object);
      stack["delete"](other);
      return result;
    }
    function getAllKeys(object) {
      return baseGetAllKeys(object, keys, getSymbols);
    }
    function getMapData(map, key) {
      var data = map.__data__;
      return isKeyable(key) ? data[typeof key == "string" ? "string" : "hash"] : data.map;
    }
    function getNative(object, key) {
      var value = getValue(object, key);
      return baseIsNative(value) ? value : void 0;
    }
    function getRawTag(value) {
      var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];
      try {
        value[symToStringTag] = void 0;
        var unmasked = true;
      } catch (e) {
      }
      var result = nativeObjectToString.call(value);
      if (unmasked) {
        if (isOwn) {
          value[symToStringTag] = tag;
        } else {
          delete value[symToStringTag];
        }
      }
      return result;
    }
    var getSymbols = !nativeGetSymbols ? stubArray : function(object) {
      if (object == null) {
        return [];
      }
      object = Object(object);
      return arrayFilter(nativeGetSymbols(object), function(symbol) {
        return propertyIsEnumerable.call(object, symbol);
      });
    };
    var getTag = baseGetTag;
    if (DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag || Map2 && getTag(new Map2()) != mapTag || Promise2 && getTag(Promise2.resolve()) != promiseTag || Set2 && getTag(new Set2()) != setTag || WeakMap2 && getTag(new WeakMap2()) != weakMapTag) {
      getTag = function(value) {
        var result = baseGetTag(value), Ctor = result == objectTag ? value.constructor : void 0, ctorString = Ctor ? toSource(Ctor) : "";
        if (ctorString) {
          switch (ctorString) {
            case dataViewCtorString:
              return dataViewTag;
            case mapCtorString:
              return mapTag;
            case promiseCtorString:
              return promiseTag;
            case setCtorString:
              return setTag;
            case weakMapCtorString:
              return weakMapTag;
          }
        }
        return result;
      };
    }
    function isIndex(value, length) {
      length = length == null ? MAX_SAFE_INTEGER : length;
      return !!length && (typeof value == "number" || reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);
    }
    function isKeyable(value) {
      var type = typeof value;
      return type == "string" || type == "number" || type == "symbol" || type == "boolean" ? value !== "__proto__" : value === null;
    }
    function isMasked(func) {
      return !!maskSrcKey && maskSrcKey in func;
    }
    function isPrototype(value) {
      var Ctor = value && value.constructor, proto = typeof Ctor == "function" && Ctor.prototype || objectProto;
      return value === proto;
    }
    function objectToString(value) {
      return nativeObjectToString.call(value);
    }
    function toSource(func) {
      if (func != null) {
        try {
          return funcToString.call(func);
        } catch (e) {
        }
        try {
          return func + "";
        } catch (e) {
        }
      }
      return "";
    }
    function eq(value, other) {
      return value === other || value !== value && other !== other;
    }
    var isArguments = baseIsArguments(/* @__PURE__ */ function() {
      return arguments;
    }()) ? baseIsArguments : function(value) {
      return isObjectLike(value) && hasOwnProperty.call(value, "callee") && !propertyIsEnumerable.call(value, "callee");
    };
    var isArray = Array.isArray;
    function isArrayLike(value) {
      return value != null && isLength(value.length) && !isFunction(value);
    }
    var isBuffer = nativeIsBuffer || stubFalse;
    function isEqual2(value, other) {
      return baseIsEqual(value, other);
    }
    function isFunction(value) {
      if (!isObject(value)) {
        return false;
      }
      var tag = baseGetTag(value);
      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
    }
    function isLength(value) {
      return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
    }
    function isObject(value) {
      var type = typeof value;
      return value != null && (type == "object" || type == "function");
    }
    function isObjectLike(value) {
      return value != null && typeof value == "object";
    }
    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;
    function keys(object) {
      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
    }
    function stubArray() {
      return [];
    }
    function stubFalse() {
      return false;
    }
    module.exports = isEqual2;
  })(lodash_isequal, lodash_isequal.exports);
  return lodash_isequal.exports;
}
var lodash_isequalExports = requireLodash_isequal();
var isEqual = /* @__PURE__ */ getDefaultExportFromCjs$1(lodash_isequalExports);
function circleLayer(color, source, vectorLayer) {
  const layer = {
    id: [source, vectorLayer, "circle"].join("_"),
    source,
    type: "circle",
    paint: {
      "circle-color": color,
      "circle-radius": 2
    },
    filter: ["==", "$type", "Point"]
  };
  if (vectorLayer) {
    layer["source-layer"] = vectorLayer;
  }
  return layer;
}
function polygonLayer(color, _outlineColor, source, vectorLayer) {
  const layer = {
    id: [source, vectorLayer, "polygon"].join("_"),
    source,
    type: "fill",
    paint: {
      "fill-color": color,
      "fill-antialias": true,
      "fill-outline-color": color
    },
    filter: ["==", "$type", "Polygon"]
  };
  if (vectorLayer) {
    layer["source-layer"] = vectorLayer;
  }
  return layer;
}
function lineLayer(color, source, vectorLayer) {
  const layer = {
    id: [source, vectorLayer, "line"].join("_"),
    source,
    layout: {
      "line-join": "round",
      "line-cap": "round"
    },
    type: "line",
    paint: {
      "line-color": color
    },
    filter: ["==", "$type", "LineString"]
  };
  if (vectorLayer) {
    layer["source-layer"] = vectorLayer;
  }
  return layer;
}
function generateColoredLayers(sources, assignLayerColor) {
  const polyLayers = [];
  const circleLayers = [];
  const lineLayers = [];
  function alphaColors(layerId) {
    const obj = {
      circle: assignLayerColor(layerId, 0.8),
      line: assignLayerColor(layerId, 0.6),
      polygon: assignLayerColor(layerId, 0.3),
      polygonOutline: assignLayerColor(layerId, 0.6),
      default: assignLayerColor(layerId, 1)
    };
    return obj;
  }
  Object.keys(sources).forEach((sourceId) => {
    const layers = sources[sourceId];
    if (!layers || layers.length === 0) {
      const colors2 = alphaColors(sourceId);
      circleLayers.push(circleLayer(colors2.circle, sourceId));
      lineLayers.push(lineLayer(colors2.line, sourceId));
      polyLayers.push(polygonLayer(colors2.polygon, colors2.polygonOutline, sourceId));
    } else {
      layers.forEach((layerId) => {
        const colors2 = alphaColors(layerId);
        circleLayers.push(circleLayer(colors2.circle, sourceId, layerId));
        lineLayers.push(lineLayer(colors2.line, sourceId, layerId));
        polyLayers.push(polygonLayer(colors2.polygon, colors2.polygonOutline, sourceId, layerId));
      });
    }
  });
  return polyLayers.concat(lineLayers).concat(circleLayers);
}
function generateInspectStyle(originalMapStyle, coloredLayers, opts) {
  opts = Object.assign({
    backgroundColor: "#fff"
  }, opts);
  const backgroundLayer = {
    "id": "background",
    "type": "background",
    "paint": {
      "background-color": opts.backgroundColor
    }
  };
  const sources = {};
  Object.keys(originalMapStyle.sources).forEach((sourceId) => {
    const source = originalMapStyle.sources[sourceId];
    if (source.type === "vector" || source.type === "geojson") {
      sources[sourceId] = source;
    }
  });
  return Object.assign(originalMapStyle, {
    layers: [backgroundLayer].concat(coloredLayers),
    sources
  });
}
var stylegen = {
  polygonLayer,
  lineLayer,
  circleLayer,
  generateInspectStyle,
  generateColoredLayers
};
class InspectButton {
  constructor(options) {
    options = Object.assign({
      show: true,
      onToggle() {
      }
    }, options);
    this._btn = this.createButton();
    this._btn.onclick = options.onToggle;
    this.elem = this.createContainer(this._btn, options.show);
  }
  createButton() {
    const btn = document.createElement("button");
    btn.className = "maplibregl-ctrl-icon maplibregl-ctrl-inspect";
    btn.type = "button";
    btn.title = "Toggle Inspect";
    btn.setAttribute("aria-label", "Toggle Inspect");
    return btn;
  }
  createContainer(child, show) {
    const container = document.createElement("div");
    container.className = "maplibregl-ctrl maplibregl-ctrl-group";
    container.appendChild(child);
    if (!show) {
      container.style.display = "none";
    }
    return container;
  }
  setInspectIcon() {
    this._btn.className = "maplibregl-ctrl-icon maplibregl-ctrl-inspect";
  }
  setMapIcon() {
    this._btn.className = "maplibregl-ctrl-icon maplibregl-ctrl-map";
  }
}
function displayValue(value) {
  if (typeof value === "undefined" || value === null)
    return value;
  if (value instanceof Date)
    return value.toLocaleString();
  if (typeof value === "object" || typeof value === "number" || typeof value === "string")
    return value.toString();
  return value;
}
function renderProperty(propertyName, property) {
  return `${'<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">'}${propertyName}</div><div class="maplibregl-inspect_property-value">${displayValue(property)}</div></div>`;
}
function renderLayer(layerId) {
  return `<div class="maplibregl-inspect_layer">${layerId}</div>`;
}
function renderProperties(feature) {
  const sourceProperty = renderLayer(feature.layer["source-layer"] || feature.layer.source);
  const idProperty = renderProperty("$id", feature.id);
  const typeProperty = renderProperty("$type", feature.geometry.type);
  const properties = Object.keys(feature.properties).map((propertyName) => renderProperty(propertyName, feature.properties[propertyName]));
  return [sourceProperty, idProperty, typeProperty].concat(properties).join("");
}
function renderFeatures(features) {
  return features.map((ft) => `<div class="maplibregl-inspect_feature">${renderProperties(ft)}</div>`).join("");
}
function renderPopup(features) {
  return `<div class="maplibregl-inspect_popup">${renderFeatures(features)}</div>`;
}
var randomColor$1 = { exports: {} };
var randomColor_1 = randomColor$1.exports;
var hasRequiredRandomColor;
function requireRandomColor() {
  if (hasRequiredRandomColor) return randomColor$1.exports;
  hasRequiredRandomColor = 1;
  (function(module, exports) {
    (function(root, factory) {
      {
        var randomColor2 = factory();
        if (module.exports) {
          exports = module.exports = randomColor2;
        }
        exports.randomColor = randomColor2;
      }
    })(randomColor_1, function() {
      var seed = null;
      var colorDictionary = {};
      loadColorBounds();
      var colorRanges = [];
      var randomColor2 = function(options) {
        options = options || {};
        if (options.seed !== void 0 && options.seed !== null && options.seed === parseInt(options.seed, 10)) {
          seed = options.seed;
        } else if (typeof options.seed === "string") {
          seed = stringToInteger(options.seed);
        } else if (options.seed !== void 0 && options.seed !== null) {
          throw new TypeError("The seed value must be an integer or string");
        } else {
          seed = null;
        }
        var H, S, B2;
        if (options.count !== null && options.count !== void 0) {
          var totalColors = options.count, colors2 = [];
          for (var i = 0; i < options.count; i++) {
            colorRanges.push(false);
          }
          options.count = null;
          while (totalColors > colors2.length) {
            var color = randomColor2(options);
            if (seed !== null) {
              options.seed = seed;
            }
            colors2.push(color);
          }
          options.count = totalColors;
          return colors2;
        }
        H = pickHue(options);
        S = pickSaturation(H, options);
        B2 = pickBrightness(H, S, options);
        return setFormat([H, S, B2], options);
      };
      function pickHue(options) {
        if (colorRanges.length > 0) {
          var hueRange = getRealHueRange(options.hue);
          var hue = randomWithin(hueRange);
          var step = (hueRange[1] - hueRange[0]) / colorRanges.length;
          var j2 = parseInt((hue - hueRange[0]) / step);
          if (colorRanges[j2] === true) {
            j2 = (j2 + 2) % colorRanges.length;
          } else {
            colorRanges[j2] = true;
          }
          var min = (hueRange[0] + j2 * step) % 359, max = (hueRange[0] + (j2 + 1) * step) % 359;
          hueRange = [min, max];
          hue = randomWithin(hueRange);
          if (hue < 0) {
            hue = 360 + hue;
          }
          return hue;
        } else {
          var hueRange = getHueRange(options.hue);
          hue = randomWithin(hueRange);
          if (hue < 0) {
            hue = 360 + hue;
          }
          return hue;
        }
      }
      function pickSaturation(hue, options) {
        if (options.hue === "monochrome") {
          return 0;
        }
        if (options.luminosity === "random") {
          return randomWithin([0, 100]);
        }
        var saturationRange = getSaturationRange(hue);
        var sMin = saturationRange[0], sMax = saturationRange[1];
        switch (options.luminosity) {
          case "bright":
            sMin = 55;
            break;
          case "dark":
            sMin = sMax - 10;
            break;
          case "light":
            sMax = 55;
            break;
        }
        return randomWithin([sMin, sMax]);
      }
      function pickBrightness(H, S, options) {
        var bMin = getMinimumBrightness(H, S), bMax = 100;
        switch (options.luminosity) {
          case "dark":
            bMax = bMin + 20;
            break;
          case "light":
            bMin = (bMax + bMin) / 2;
            break;
          case "random":
            bMin = 0;
            bMax = 100;
            break;
        }
        return randomWithin([bMin, bMax]);
      }
      function setFormat(hsv, options) {
        switch (options.format) {
          case "hsvArray":
            return hsv;
          case "hslArray":
            return HSVtoHSL(hsv);
          case "hsl":
            var hsl = HSVtoHSL(hsv);
            return "hsl(" + hsl[0] + ", " + hsl[1] + "%, " + hsl[2] + "%)";
          case "hsla":
            var hslColor = HSVtoHSL(hsv);
            var alpha = options.alpha || Math.random();
            return "hsla(" + hslColor[0] + ", " + hslColor[1] + "%, " + hslColor[2] + "%, " + alpha + ")";
          case "rgbArray":
            return HSVtoRGB(hsv);
          case "rgb":
            var rgb = HSVtoRGB(hsv);
            return "rgb(" + rgb.join(", ") + ")";
          case "rgba":
            var rgbColor = HSVtoRGB(hsv);
            var alpha = options.alpha || Math.random();
            return "rgba(" + rgbColor.join(", ") + ", " + alpha + ")";
          default:
            return HSVtoHex(hsv);
        }
      }
      function getMinimumBrightness(H, S) {
        var lowerBounds = getColorInfo(H).lowerBounds;
        for (var i = 0; i < lowerBounds.length - 1; i++) {
          var s1 = lowerBounds[i][0], v1 = lowerBounds[i][1];
          var s2 = lowerBounds[i + 1][0], v2 = lowerBounds[i + 1][1];
          if (S >= s1 && S <= s2) {
            var m = (v2 - v1) / (s2 - s1), b = v1 - m * s1;
            return m * S + b;
          }
        }
        return 0;
      }
      function getHueRange(colorInput) {
        if (typeof parseInt(colorInput) === "number") {
          var number = parseInt(colorInput);
          if (number < 360 && number > 0) {
            return [number, number];
          }
        }
        if (typeof colorInput === "string") {
          if (colorDictionary[colorInput]) {
            var color = colorDictionary[colorInput];
            if (color.hueRange) {
              return color.hueRange;
            }
          } else if (colorInput.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)) {
            var hue = HexToHSB(colorInput)[0];
            return [hue, hue];
          }
        }
        return [0, 360];
      }
      function getSaturationRange(hue) {
        return getColorInfo(hue).saturationRange;
      }
      function getColorInfo(hue) {
        if (hue >= 334 && hue <= 360) {
          hue -= 360;
        }
        for (var colorName in colorDictionary) {
          var color = colorDictionary[colorName];
          if (color.hueRange && hue >= color.hueRange[0] && hue <= color.hueRange[1]) {
            return colorDictionary[colorName];
          }
        }
        return "Color not found";
      }
      function randomWithin(range) {
        if (seed === null) {
          var golden_ratio = 0.618033988749895;
          var r = Math.random();
          r += golden_ratio;
          r %= 1;
          return Math.floor(range[0] + r * (range[1] + 1 - range[0]));
        } else {
          var max = range[1] || 1;
          var min = range[0] || 0;
          seed = (seed * 9301 + 49297) % 233280;
          var rnd = seed / 233280;
          return Math.floor(min + rnd * (max - min));
        }
      }
      function HSVtoHex(hsv) {
        var rgb = HSVtoRGB(hsv);
        function componentToHex(c) {
          var hex2 = c.toString(16);
          return hex2.length == 1 ? "0" + hex2 : hex2;
        }
        var hex = "#" + componentToHex(rgb[0]) + componentToHex(rgb[1]) + componentToHex(rgb[2]);
        return hex;
      }
      function defineColor(name2, hueRange, lowerBounds) {
        var sMin = lowerBounds[0][0], sMax = lowerBounds[lowerBounds.length - 1][0], bMin = lowerBounds[lowerBounds.length - 1][1], bMax = lowerBounds[0][1];
        colorDictionary[name2] = {
          hueRange,
          lowerBounds,
          saturationRange: [sMin, sMax],
          brightnessRange: [bMin, bMax]
        };
      }
      function loadColorBounds() {
        defineColor(
          "monochrome",
          null,
          [[0, 0], [100, 0]]
        );
        defineColor(
          "red",
          [-26, 18],
          [[20, 100], [30, 92], [40, 89], [50, 85], [60, 78], [70, 70], [80, 60], [90, 55], [100, 50]]
        );
        defineColor(
          "orange",
          [18, 46],
          [[20, 100], [30, 93], [40, 88], [50, 86], [60, 85], [70, 70], [100, 70]]
        );
        defineColor(
          "yellow",
          [46, 62],
          [[25, 100], [40, 94], [50, 89], [60, 86], [70, 84], [80, 82], [90, 80], [100, 75]]
        );
        defineColor(
          "green",
          [62, 178],
          [[30, 100], [40, 90], [50, 85], [60, 81], [70, 74], [80, 64], [90, 50], [100, 40]]
        );
        defineColor(
          "blue",
          [178, 257],
          [[20, 100], [30, 86], [40, 80], [50, 74], [60, 60], [70, 52], [80, 44], [90, 39], [100, 35]]
        );
        defineColor(
          "purple",
          [257, 282],
          [[20, 100], [30, 87], [40, 79], [50, 70], [60, 65], [70, 59], [80, 52], [90, 45], [100, 42]]
        );
        defineColor(
          "pink",
          [282, 334],
          [[20, 100], [30, 90], [40, 86], [60, 84], [80, 80], [90, 75], [100, 73]]
        );
      }
      function HSVtoRGB(hsv) {
        var h = hsv[0];
        if (h === 0) {
          h = 1;
        }
        if (h === 360) {
          h = 359;
        }
        h = h / 360;
        var s = hsv[1] / 100, v = hsv[2] / 100;
        var h_i = Math.floor(h * 6), f = h * 6 - h_i, p2 = v * (1 - s), q2 = v * (1 - f * s), t = v * (1 - (1 - f) * s), r = 256, g = 256, b = 256;
        switch (h_i) {
          case 0:
            r = v;
            g = t;
            b = p2;
            break;
          case 1:
            r = q2;
            g = v;
            b = p2;
            break;
          case 2:
            r = p2;
            g = v;
            b = t;
            break;
          case 3:
            r = p2;
            g = q2;
            b = v;
            break;
          case 4:
            r = t;
            g = p2;
            b = v;
            break;
          case 5:
            r = v;
            g = p2;
            b = q2;
            break;
        }
        var result = [Math.floor(r * 255), Math.floor(g * 255), Math.floor(b * 255)];
        return result;
      }
      function HexToHSB(hex) {
        hex = hex.replace(/^#/, "");
        hex = hex.length === 3 ? hex.replace(/(.)/g, "$1$1") : hex;
        var red = parseInt(hex.substr(0, 2), 16) / 255, green = parseInt(hex.substr(2, 2), 16) / 255, blue = parseInt(hex.substr(4, 2), 16) / 255;
        var cMax = Math.max(red, green, blue), delta = cMax - Math.min(red, green, blue), saturation = cMax ? delta / cMax : 0;
        switch (cMax) {
          case red:
            return [60 * ((green - blue) / delta % 6) || 0, saturation, cMax];
          case green:
            return [60 * ((blue - red) / delta + 2) || 0, saturation, cMax];
          case blue:
            return [60 * ((red - green) / delta + 4) || 0, saturation, cMax];
        }
      }
      function HSVtoHSL(hsv) {
        var h = hsv[0], s = hsv[1] / 100, v = hsv[2] / 100, k = (2 - s) * v;
        return [
          h,
          Math.round(s * v / (k < 1 ? k : 2 - k) * 1e4) / 100,
          k / 2 * 100
        ];
      }
      function stringToInteger(string) {
        var total = 0;
        for (var i = 0; i !== string.length; i++) {
          if (total >= Number.MAX_SAFE_INTEGER) break;
          total += string.charCodeAt(i);
        }
        return total;
      }
      function getRealHueRange(colorHue) {
        if (!isNaN(colorHue)) {
          var number = parseInt(colorHue);
          if (number < 360 && number > 0) {
            return getColorInfo(colorHue).hueRange;
          }
        } else if (typeof colorHue === "string") {
          if (colorDictionary[colorHue]) {
            var color = colorDictionary[colorHue];
            if (color.hueRange) {
              return color.hueRange;
            }
          } else if (colorHue.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)) {
            var hue = HexToHSB(colorHue)[0];
            return getColorInfo(hue).hueRange;
          }
        }
        return [0, 360];
      }
      return randomColor2;
    });
  })(randomColor$1, randomColor$1.exports);
  return randomColor$1.exports;
}
var randomColorExports = requireRandomColor();
var randomColor = /* @__PURE__ */ getDefaultExportFromCjs$1(randomColorExports);
function brightColor(layerId, alpha) {
  let luminosity = "bright";
  let hue = void 0;
  if (/water|ocean|lake|sea|river/.test(layerId)) {
    hue = "blue";
  }
  if (/state|country|place/.test(layerId)) {
    hue = "pink";
  }
  if (/road|highway|transport|streets/.test(layerId)) {
    hue = "orange";
  }
  if (/contour|building|earth/.test(layerId)) {
    hue = "monochrome";
  }
  if (/building/.test(layerId)) {
    luminosity = "dark";
  }
  if (/earth/.test(layerId)) {
    luminosity = "light";
  }
  if (/contour|landuse/.test(layerId)) {
    hue = "yellow";
  }
  if (/wood|forest|park|landcover|land|natural/.test(layerId)) {
    hue = "green";
  }
  const rgb = randomColor({
    luminosity,
    hue,
    seed: layerId,
    format: "rgbArray"
  });
  return `rgba(${rgb.join(", ")}, ${alpha || "1"})`;
}
var colors$1 = { brightColor };
function isInspectStyle(style) {
  return style.metadata && style.metadata["maplibregl-inspect:inspect"];
}
function markInspectStyle(style) {
  return Object.assign(style, {
    metadata: Object.assign({}, style.metadata, {
      "maplibregl-inspect:inspect": true
    })
  });
}
class MaplibreInspect {
  constructor(options) {
    this._onSourceChange = (e) => {
      if (e.sourceDataType === "visibility" || !e.isSourceLoaded) {
        return;
      }
      const previousSources = Object.assign({}, this.sources);
      this._setSourcesFromMap();
      if (!isEqual(previousSources, this.sources) && Object.keys(this.sources).length > 0) {
        setTimeout(() => this.render(), 1e3);
      }
    };
    this._onStyleChange = () => {
      const style = this._map.getStyle();
      if (!isInspectStyle(style)) {
        this._originalStyle = style;
      }
    };
    this._onRightClick = () => {
      if (!this.options.showMapPopupOnHover && !this.options.showInspectMapPopupOnHover && !this.options.blockHoverPopupOnClick) {
        if (this._popup)
          this._popup.remove();
      }
    };
    this._onMousemove = (e) => {
      if (this._showInspectMap) {
        if (!this.options.showInspectMapPopup)
          return;
        if (e.type === "mousemove" && !this.options.showInspectMapPopupOnHover)
          return;
        if (e.type === "click" && this.options.showInspectMapPopupOnHover && this.options.blockHoverPopupOnClick) {
          this._popupBlocked = !this._popupBlocked;
        }
      } else {
        if (!this.options.showMapPopup)
          return;
        if (e.type === "mousemove" && !this.options.showMapPopupOnHover)
          return;
        if (e.type === "click" && this.options.showMapPopupOnHover && this.options.blockHoverPopupOnClick) {
          this._popupBlocked = !this._popupBlocked;
        }
      }
      if (!this._popupBlocked && this._popup) {
        let queryBox;
        if (this.options.selectThreshold === 0) {
          queryBox = e.point;
        } else {
          queryBox = [
            [
              e.point.x - this.options.selectThreshold,
              e.point.y + this.options.selectThreshold
            ],
            // bottom left (SW)
            [
              e.point.x + this.options.selectThreshold,
              e.point.y - this.options.selectThreshold
            ]
            // top right (NE)
          ];
        }
        const features = this._map.queryRenderedFeatures(queryBox, this.options.queryParameters) || [];
        this._map.getCanvas().style.cursor = features.length ? "pointer" : "";
        if (!features.length) {
          this._popup.remove();
        } else {
          this._popup.setLngLat(e.lngLat);
          const renderedPopup = this.options.renderPopup(features);
          if (typeof renderedPopup === "string") {
            this._popup.setHTML(renderedPopup);
          } else {
            this._popup.setDOMContent(renderedPopup);
          }
          this._popup.addTo(this._map);
        }
      }
    };
    if (!(this instanceof MaplibreInspect)) {
      throw new Error("MaplibreInspect needs to be called with the new keyword");
    }
    let popup = null;
    if (window.maplibregl) {
      popup = new window.maplibregl.Popup({
        closeButton: false,
        closeOnClick: false
      });
    } else if (!options.popup) {
      console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis.");
    }
    this.options = Object.assign({
      showInspectMap: false,
      showInspectButton: true,
      showInspectMapPopup: true,
      showMapPopup: false,
      showMapPopupOnHover: true,
      showInspectMapPopupOnHover: true,
      blockHoverPopupOnClick: false,
      backgroundColor: "#fff",
      assignLayerColor: colors$1.brightColor,
      buildInspectStyle: stylegen.generateInspectStyle,
      renderPopup,
      popup,
      selectThreshold: 5,
      useInspectStyle: true,
      queryParameters: {},
      sources: {},
      toggleCallback() {
      },
      manageStyleOutside: false
    }, options);
    this.sources = this.options.sources;
    this.assignLayerColor = this.options.assignLayerColor;
    this._popup = this.options.popup;
    this._popupBlocked = false;
    this._showInspectMap = this.options.showInspectMap;
    this._toggle = new InspectButton({
      show: this.options.showInspectButton,
      onToggle: () => this.toggleInspector()
    });
  }
  toggleInspector() {
    this._showInspectMap = !this._showInspectMap;
    this._popupBlocked = false;
    this.options.toggleCallback(this._showInspectMap);
    this.render();
  }
  _inspectStyle() {
    const coloredLayers = stylegen.generateColoredLayers(this.sources, this.assignLayerColor);
    return this.options.buildInspectStyle(this._map.getStyle(), coloredLayers, {
      backgroundColor: this.options.backgroundColor
    });
  }
  render() {
    if (this._showInspectMap) {
      if (this.options.useInspectStyle) {
        this._map.setStyle(markInspectStyle(this._inspectStyle()));
      }
      this._toggle.setMapIcon();
    } else if (this._originalStyle) {
      if (this._popup)
        this._popup.remove();
      if (this.options.useInspectStyle) {
        this._map.setStyle(this._originalStyle);
      }
      this._toggle.setInspectIcon();
    }
  }
  _setSourcesFromMap() {
    const mapStyleSourcesNames = Object.keys(this._map.getStyle().sources);
    Object.keys(this._map.style.sourceCaches).forEach((sourceId) => {
      const sourceCache = this._map.style.sourceCaches[sourceId] || { _source: {} };
      const layerIds = sourceCache._source.vectorLayerIds;
      if (layerIds) {
        this.sources[sourceId] = layerIds;
      } else if (sourceCache._source.type === "geojson") {
        this.sources[sourceId] = [];
      }
    });
    Object.keys(this.sources).forEach((sourceId) => {
      if (mapStyleSourcesNames.indexOf(sourceId) === -1) {
        delete this.sources[sourceId];
      }
    });
  }
  /**
   * This will set the original style of the map
   * It will also update the sources assuming the map has already been loaded
   * @param style - The original style
   */
  setOriginalStyle(style) {
    this._originalStyle = style;
    this._setSourcesFromMap();
  }
  /** @inheritdoc */
  onAdd(map) {
    this._map = map;
    if (Object.keys(this.sources).length === 0) {
      map.on("tiledata", this._onSourceChange);
      map.on("sourcedata", this._onSourceChange);
    }
    map.on("styledata", this._onStyleChange);
    map.on("load", this._onStyleChange);
    map.on("mousemove", this._onMousemove);
    map.on("click", this._onMousemove);
    map.on("contextmenu", this._onRightClick);
    return this._toggle.elem;
  }
  /** @inheritdoc */
  onRemove() {
    this._map.off("styledata", this._onStyleChange);
    this._map.off("load", this._onStyleChange);
    this._map.off("tiledata", this._onSourceChange);
    this._map.off("sourcedata", this._onSourceChange);
    this._map.off("mousemove", this._onMousemove);
    this._map.off("click", this._onMousemove);
    this._map.off("contextmenu", this._onRightClick);
    const elem = this._toggle.elem;
    elem.parentNode.removeChild(elem);
    this._map = void 0;
  }
}
var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
function getDefaultExportFromCjs(x) {
  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, "default") ? x["default"] : x;
}
var maplibreGl = { exports: {} };
/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */
(function(module, exports) {
  (function(global2, factory) {
    module.exports = factory();
  })(commonjsGlobal, function() {
    var maplibregl2 = {};
    var modules = {};
    function define(moduleName, _dependencies, moduleFactory) {
      modules[moduleName] = moduleFactory;
      if (moduleName !== "index") {
        return;
      }
      var workerBundleString = "var sharedModule = {}; (" + modules.shared + ")(sharedModule); (" + modules.worker + ")(sharedModule);";
      var sharedModule = {};
      modules.shared(sharedModule);
      modules.index(maplibregl2, sharedModule);
      if (typeof window !== "undefined") {
        maplibregl2.setWorkerUrl(window.URL.createObjectURL(new Blob([workerBundleString], { type: "text/javascript" })));
      }
      return maplibregl2;
    }
    define("shared", ["exports"], function(t) {
      function e(t2, e2, r2, n2) {
        return new (r2 || (r2 = Promise))(function(i2, s2) {
          function a2(t3) {
            try {
              l2(n2.next(t3));
            } catch (t4) {
              s2(t4);
            }
          }
          function o2(t3) {
            try {
              l2(n2.throw(t3));
            } catch (t4) {
              s2(t4);
            }
          }
          function l2(t3) {
            var e3;
            t3.done ? i2(t3.value) : (e3 = t3.value, e3 instanceof r2 ? e3 : new r2(function(t4) {
              t4(e3);
            })).then(a2, o2);
          }
          l2((n2 = n2.apply(t2, e2 || [])).next());
        });
      }
      function r(t2) {
        return t2 && t2.__esModule && Object.prototype.hasOwnProperty.call(t2, "default") ? t2.default : t2;
      }
      "function" == typeof SuppressedError && SuppressedError;
      var n = i;
      function i(t2, e2) {
        this.x = t2, this.y = e2;
      }
      i.prototype = { clone: function() {
        return new i(this.x, this.y);
      }, add: function(t2) {
        return this.clone()._add(t2);
      }, sub: function(t2) {
        return this.clone()._sub(t2);
      }, multByPoint: function(t2) {
        return this.clone()._multByPoint(t2);
      }, divByPoint: function(t2) {
        return this.clone()._divByPoint(t2);
      }, mult: function(t2) {
        return this.clone()._mult(t2);
      }, div: function(t2) {
        return this.clone()._div(t2);
      }, rotate: function(t2) {
        return this.clone()._rotate(t2);
      }, rotateAround: function(t2, e2) {
        return this.clone()._rotateAround(t2, e2);
      }, matMult: function(t2) {
        return this.clone()._matMult(t2);
      }, unit: function() {
        return this.clone()._unit();
      }, perp: function() {
        return this.clone()._perp();
      }, round: function() {
        return this.clone()._round();
      }, mag: function() {
        return Math.sqrt(this.x * this.x + this.y * this.y);
      }, equals: function(t2) {
        return this.x === t2.x && this.y === t2.y;
      }, dist: function(t2) {
        return Math.sqrt(this.distSqr(t2));
      }, distSqr: function(t2) {
        var e2 = t2.x - this.x, r2 = t2.y - this.y;
        return e2 * e2 + r2 * r2;
      }, angle: function() {
        return Math.atan2(this.y, this.x);
      }, angleTo: function(t2) {
        return Math.atan2(this.y - t2.y, this.x - t2.x);
      }, angleWith: function(t2) {
        return this.angleWithSep(t2.x, t2.y);
      }, angleWithSep: function(t2, e2) {
        return Math.atan2(this.x * e2 - this.y * t2, this.x * t2 + this.y * e2);
      }, _matMult: function(t2) {
        var e2 = t2[2] * this.x + t2[3] * this.y;
        return this.x = t2[0] * this.x + t2[1] * this.y, this.y = e2, this;
      }, _add: function(t2) {
        return this.x += t2.x, this.y += t2.y, this;
      }, _sub: function(t2) {
        return this.x -= t2.x, this.y -= t2.y, this;
      }, _mult: function(t2) {
        return this.x *= t2, this.y *= t2, this;
      }, _div: function(t2) {
        return this.x /= t2, this.y /= t2, this;
      }, _multByPoint: function(t2) {
        return this.x *= t2.x, this.y *= t2.y, this;
      }, _divByPoint: function(t2) {
        return this.x /= t2.x, this.y /= t2.y, this;
      }, _unit: function() {
        return this._div(this.mag()), this;
      }, _perp: function() {
        var t2 = this.y;
        return this.y = this.x, this.x = -t2, this;
      }, _rotate: function(t2) {
        var e2 = Math.cos(t2), r2 = Math.sin(t2), n2 = r2 * this.x + e2 * this.y;
        return this.x = e2 * this.x - r2 * this.y, this.y = n2, this;
      }, _rotateAround: function(t2, e2) {
        var r2 = Math.cos(t2), n2 = Math.sin(t2), i2 = e2.y + n2 * (this.x - e2.x) + r2 * (this.y - e2.y);
        return this.x = e2.x + r2 * (this.x - e2.x) - n2 * (this.y - e2.y), this.y = i2, this;
      }, _round: function() {
        return this.x = Math.round(this.x), this.y = Math.round(this.y), this;
      } }, i.convert = function(t2) {
        return t2 instanceof i ? t2 : Array.isArray(t2) ? new i(t2[0], t2[1]) : t2;
      };
      var s = r(n), a = o;
      function o(t2, e2, r2, n2) {
        this.cx = 3 * t2, this.bx = 3 * (r2 - t2) - this.cx, this.ax = 1 - this.cx - this.bx, this.cy = 3 * e2, this.by = 3 * (n2 - e2) - this.cy, this.ay = 1 - this.cy - this.by, this.p1x = t2, this.p1y = e2, this.p2x = r2, this.p2y = n2;
      }
      o.prototype = { sampleCurveX: function(t2) {
        return ((this.ax * t2 + this.bx) * t2 + this.cx) * t2;
      }, sampleCurveY: function(t2) {
        return ((this.ay * t2 + this.by) * t2 + this.cy) * t2;
      }, sampleCurveDerivativeX: function(t2) {
        return (3 * this.ax * t2 + 2 * this.bx) * t2 + this.cx;
      }, solveCurveX: function(t2, e2) {
        if (void 0 === e2 && (e2 = 1e-6), t2 < 0) return 0;
        if (t2 > 1) return 1;
        for (var r2 = t2, n2 = 0; n2 < 8; n2++) {
          var i2 = this.sampleCurveX(r2) - t2;
          if (Math.abs(i2) < e2) return r2;
          var s2 = this.sampleCurveDerivativeX(r2);
          if (Math.abs(s2) < 1e-6) break;
          r2 -= i2 / s2;
        }
        var a2 = 0, o2 = 1;
        for (r2 = t2, n2 = 0; n2 < 20 && (i2 = this.sampleCurveX(r2), !(Math.abs(i2 - t2) < e2)); n2++) t2 > i2 ? a2 = r2 : o2 = r2, r2 = 0.5 * (o2 - a2) + a2;
        return r2;
      }, solve: function(t2, e2) {
        return this.sampleCurveY(this.solveCurveX(t2, e2));
      } };
      var l = r(a);
      let u2, c;
      function h() {
        return null == u2 && (u2 = "undefined" != typeof OffscreenCanvas && new OffscreenCanvas(1, 1).getContext("2d") && "function" == typeof createImageBitmap), u2;
      }
      function p2() {
        if (null == c && (c = false, h())) {
          const t2 = 5, e2 = new OffscreenCanvas(t2, t2).getContext("2d", { willReadFrequently: true });
          if (e2) {
            for (let r3 = 0; r3 < t2 * t2; r3++) {
              const n2 = 4 * r3;
              e2.fillStyle = `rgb(${n2},${n2 + 1},${n2 + 2})`, e2.fillRect(r3 % t2, Math.floor(r3 / t2), 1, 1);
            }
            const r2 = e2.getImageData(0, 0, t2, t2).data;
            for (let e3 = 0; e3 < t2 * t2 * 4; e3++) if (e3 % 4 != 3 && r2[e3] !== e3) {
              c = true;
              break;
            }
          }
        }
        return c || false;
      }
      function f(t2, e2, r2, n2) {
        const i2 = new l(t2, e2, r2, n2);
        return (t3) => i2.solve(t3);
      }
      const d = f(0.25, 0.1, 0.25, 1);
      function y(t2, e2, r2) {
        return Math.min(r2, Math.max(e2, t2));
      }
      function m(t2, e2, r2) {
        const n2 = r2 - e2, i2 = ((t2 - e2) % n2 + n2) % n2 + e2;
        return i2 === e2 ? r2 : i2;
      }
      function g(t2, ...e2) {
        for (const r2 of e2) for (const e3 in r2) t2[e3] = r2[e3];
        return t2;
      }
      let x = 1;
      function v(t2, e2, r2) {
        const n2 = {};
        for (const r3 in t2) n2[r3] = e2.call(this, t2[r3], r3, t2);
        return n2;
      }
      function b(t2, e2, r2) {
        const n2 = {};
        for (const r3 in t2) e2.call(this, t2[r3], r3, t2) && (n2[r3] = t2[r3]);
        return n2;
      }
      function w2(t2) {
        return Array.isArray(t2) ? t2.map(w2) : "object" == typeof t2 && t2 ? v(t2, w2) : t2;
      }
      const _ = {};
      function A(t2) {
        _[t2] || ("undefined" != typeof console && console.warn(t2), _[t2] = true);
      }
      function S(t2, e2, r2) {
        return (r2.y - t2.y) * (e2.x - t2.x) > (e2.y - t2.y) * (r2.x - t2.x);
      }
      function k(t2) {
        return "undefined" != typeof WorkerGlobalScope && void 0 !== t2 && t2 instanceof WorkerGlobalScope;
      }
      let M = null;
      function I(t2) {
        return "undefined" != typeof ImageBitmap && t2 instanceof ImageBitmap;
      }
      const z2 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";
      function P2(t2, r2, n2, i2, s2) {
        return e(this, void 0, void 0, function* () {
          if ("undefined" == typeof VideoFrame) throw new Error("VideoFrame not supported");
          const e2 = new VideoFrame(t2, { timestamp: 0 });
          try {
            const a2 = null == e2 ? void 0 : e2.format;
            if (!a2 || !a2.startsWith("BGR") && !a2.startsWith("RGB")) throw new Error(`Unrecognized format ${a2}`);
            const o2 = a2.startsWith("BGR"), l2 = new Uint8ClampedArray(i2 * s2 * 4);
            if (yield e2.copyTo(l2, function(t3, e3, r3, n3, i3) {
              const s3 = 4 * Math.max(-e3, 0), a3 = (Math.max(0, r3) - r3) * n3 * 4 + s3, o3 = 4 * n3, l3 = Math.max(0, e3), u3 = Math.max(0, r3);
              return { rect: { x: l3, y: u3, width: Math.min(t3.width, e3 + n3) - l3, height: Math.min(t3.height, r3 + i3) - u3 }, layout: [{ offset: a3, stride: o3 }] };
            }(t2, r2, n2, i2, s2)), o2) for (let t3 = 0; t3 < l2.length; t3 += 4) {
              const e3 = l2[t3];
              l2[t3] = l2[t3 + 2], l2[t3 + 2] = e3;
            }
            return l2;
          } finally {
            e2.close();
          }
        });
      }
      let C, B2;
      const V2 = "AbortError";
      function E() {
        return new Error(V2);
      }
      const F = { MAX_PARALLEL_IMAGE_REQUESTS: 16, MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME: 8, MAX_TILE_CACHE_ZOOM_LEVELS: 5, REGISTERED_PROTOCOLS: {}, WORKER_URL: "" };
      function T(t2) {
        return F.REGISTERED_PROTOCOLS[t2.substring(0, t2.indexOf("://"))];
      }
      const $2 = "global-dispatcher";
      class L2 extends Error {
        constructor(t2, e2, r2, n2) {
          super(`AJAXError: ${e2} (${t2}): ${r2}`), this.status = t2, this.statusText = e2, this.url = r2, this.body = n2;
        }
      }
      const D = () => k(self) ? self.worker && self.worker.referrer : ("blob:" === window.location.protocol ? window.parent : window).location.href, O2 = function(t2, r2) {
        if (/:\/\//.test(t2.url) && !/^https?:|^file:/.test(t2.url)) {
          const e2 = T(t2.url);
          if (e2) return e2(t2, r2);
          if (k(self) && self.worker && self.worker.actor) return self.worker.actor.sendAsync({ type: "GR", data: t2, targetMapId: $2 }, r2);
        }
        if (!(/^file:/.test(n2 = t2.url) || /^file:/.test(D()) && !/^\w+:/.test(n2))) {
          if (fetch && Request && AbortController && Object.prototype.hasOwnProperty.call(Request.prototype, "signal")) return function(t3, r3) {
            return e(this, void 0, void 0, function* () {
              const e2 = new Request(t3.url, { method: t3.method || "GET", body: t3.body, credentials: t3.credentials, headers: t3.headers, cache: t3.cache, referrer: D(), signal: r3.signal });
              "json" !== t3.type || e2.headers.has("Accept") || e2.headers.set("Accept", "application/json");
              const n3 = yield fetch(e2);
              if (!n3.ok) {
                const e3 = yield n3.blob();
                throw new L2(n3.status, n3.statusText, t3.url, e3);
              }
              let i2;
              i2 = "arrayBuffer" === t3.type || "image" === t3.type ? n3.arrayBuffer() : "json" === t3.type ? n3.json() : n3.text();
              const s2 = yield i2;
              if (r3.signal.aborted) throw E();
              return { data: s2, cacheControl: n3.headers.get("Cache-Control"), expires: n3.headers.get("Expires") };
            });
          }(t2, r2);
          if (k(self) && self.worker && self.worker.actor) return self.worker.actor.sendAsync({ type: "GR", data: t2, mustQueue: true, targetMapId: $2 }, r2);
        }
        var n2;
        return function(t3, e2) {
          return new Promise((r3, n3) => {
            var i2;
            const s2 = new XMLHttpRequest();
            s2.open(t3.method || "GET", t3.url, true), "arrayBuffer" !== t3.type && "image" !== t3.type || (s2.responseType = "arraybuffer");
            for (const e3 in t3.headers) s2.setRequestHeader(e3, t3.headers[e3]);
            "json" === t3.type && (s2.responseType = "text", (null === (i2 = t3.headers) || void 0 === i2 ? void 0 : i2.Accept) || s2.setRequestHeader("Accept", "application/json")), s2.withCredentials = "include" === t3.credentials, s2.onerror = () => {
              n3(new Error(s2.statusText));
            }, s2.onload = () => {
              if (!e2.signal.aborted) if ((s2.status >= 200 && s2.status < 300 || 0 === s2.status) && null !== s2.response) {
                let e3 = s2.response;
                if ("json" === t3.type) try {
                  e3 = JSON.parse(s2.response);
                } catch (t4) {
                  return void n3(t4);
                }
                r3({ data: e3, cacheControl: s2.getResponseHeader("Cache-Control"), expires: s2.getResponseHeader("Expires") });
              } else {
                const e3 = new Blob([s2.response], { type: s2.getResponseHeader("Content-Type") });
                n3(new L2(s2.status, s2.statusText, t3.url, e3));
              }
            }, e2.signal.addEventListener("abort", () => {
              s2.abort(), n3(E());
            }), s2.send(t3.body);
          });
        }(t2, r2);
      };
      function j2(t2) {
        if (!t2 || t2.indexOf("://") <= 0 || 0 === t2.indexOf("data:image/") || 0 === t2.indexOf("blob:")) return true;
        const e2 = new URL(t2), r2 = window.location;
        return e2.protocol === r2.protocol && e2.host === r2.host;
      }
      function R(t2, e2, r2) {
        r2[t2] && -1 !== r2[t2].indexOf(e2) || (r2[t2] = r2[t2] || [], r2[t2].push(e2));
      }
      function U(t2, e2, r2) {
        if (r2 && r2[t2]) {
          const n2 = r2[t2].indexOf(e2);
          -1 !== n2 && r2[t2].splice(n2, 1);
        }
      }
      class q2 {
        constructor(t2, e2 = {}) {
          g(this, e2), this.type = t2;
        }
      }
      class N2 extends q2 {
        constructor(t2, e2 = {}) {
          super("error", g({ error: t2 }, e2));
        }
      }
      class Z2 {
        on(t2, e2) {
          return this._listeners = this._listeners || {}, R(t2, e2, this._listeners), this;
        }
        off(t2, e2) {
          return U(t2, e2, this._listeners), U(t2, e2, this._oneTimeListeners), this;
        }
        once(t2, e2) {
          return e2 ? (this._oneTimeListeners = this._oneTimeListeners || {}, R(t2, e2, this._oneTimeListeners), this) : new Promise((e3) => this.once(t2, e3));
        }
        fire(t2, e2) {
          "string" == typeof t2 && (t2 = new q2(t2, e2 || {}));
          const r2 = t2.type;
          if (this.listens(r2)) {
            t2.target = this;
            const e3 = this._listeners && this._listeners[r2] ? this._listeners[r2].slice() : [];
            for (const r3 of e3) r3.call(this, t2);
            const n2 = this._oneTimeListeners && this._oneTimeListeners[r2] ? this._oneTimeListeners[r2].slice() : [];
            for (const e4 of n2) U(r2, e4, this._oneTimeListeners), e4.call(this, t2);
            const i2 = this._eventedParent;
            i2 && (g(t2, "function" == typeof this._eventedParentData ? this._eventedParentData() : this._eventedParentData), i2.fire(t2));
          } else t2 instanceof N2 && console.error(t2.error);
          return this;
        }
        listens(t2) {
          return this._listeners && this._listeners[t2] && this._listeners[t2].length > 0 || this._oneTimeListeners && this._oneTimeListeners[t2] && this._oneTimeListeners[t2].length > 0 || this._eventedParent && this._eventedParent.listens(t2);
        }
        setEventedParent(t2, e2) {
          return this._eventedParent = t2, this._eventedParentData = e2, this;
        }
      }
      var G2 = { $version: 8, $root: { version: { required: true, type: "enum", values: [8] }, name: { type: "string" }, metadata: { type: "*" }, center: { type: "array", value: "number" }, zoom: { type: "number" }, bearing: { type: "number", default: 0, period: 360, units: "degrees" }, pitch: { type: "number", default: 0, units: "degrees" }, light: { type: "light" }, sky: { type: "sky" }, projection: { type: "projection" }, terrain: { type: "terrain" }, sources: { required: true, type: "sources" }, sprite: { type: "sprite" }, glyphs: { type: "string" }, transition: { type: "transition" }, layers: { required: true, type: "array", value: "layer" } }, sources: { "*": { type: "source" } }, source: ["source_vector", "source_raster", "source_raster_dem", "source_geojson", "source_video", "source_image"], source_vector: { type: { required: true, type: "enum", values: { vector: {} } }, url: { type: "string" }, tiles: { type: "array", value: "string" }, bounds: { type: "array", value: "number", length: 4, default: [-180, -85.051129, 180, 85.051129] }, scheme: { type: "enum", values: { xyz: {}, tms: {} }, default: "xyz" }, minzoom: { type: "number", default: 0 }, maxzoom: { type: "number", default: 22 }, attribution: { type: "string" }, promoteId: { type: "promoteId" }, volatile: { type: "boolean", default: false }, "*": { type: "*" } }, source_raster: { type: { required: true, type: "enum", values: { raster: {} } }, url: { type: "string" }, tiles: { type: "array", value: "string" }, bounds: { type: "array", value: "number", length: 4, default: [-180, -85.051129, 180, 85.051129] }, minzoom: { type: "number", default: 0 }, maxzoom: { type: "number", default: 22 }, tileSize: { type: "number", default: 512, units: "pixels" }, scheme: { type: "enum", values: { xyz: {}, tms: {} }, default: "xyz" }, attribution: { type: "string" }, volatile: { type: "boolean", default: false }, "*": { type: "*" } }, source_raster_dem: { type: { required: true, type: "enum", values: { "raster-dem": {} } }, url: { type: "string" }, tiles: { type: "array", value: "string" }, bounds: { type: "array", value: "number", length: 4, default: [-180, -85.051129, 180, 85.051129] }, minzoom: { type: "number", default: 0 }, maxzoom: { type: "number", default: 22 }, tileSize: { type: "number", default: 512, units: "pixels" }, attribution: { type: "string" }, encoding: { type: "enum", values: { terrarium: {}, mapbox: {}, custom: {} }, default: "mapbox" }, redFactor: { type: "number", default: 1 }, blueFactor: { type: "number", default: 1 }, greenFactor: { type: "number", default: 1 }, baseShift: { type: "number", default: 0 }, volatile: { type: "boolean", default: false }, "*": { type: "*" } }, source_geojson: { type: { required: true, type: "enum", values: { geojson: {} } }, data: { required: true, type: "*" }, maxzoom: { type: "number", default: 18 }, attribution: { type: "string" }, buffer: { type: "number", default: 128, maximum: 512, minimum: 0 }, filter: { type: "*" }, tolerance: { type: "number", default: 0.375 }, cluster: { type: "boolean", default: false }, clusterRadius: { type: "number", default: 50, minimum: 0 }, clusterMaxZoom: { type: "number" }, clusterMinPoints: { type: "number" }, clusterProperties: { type: "*" }, lineMetrics: { type: "boolean", default: false }, generateId: { type: "boolean", default: false }, promoteId: { type: "promoteId" } }, source_video: { type: { required: true, type: "enum", values: { video: {} } }, urls: { required: true, type: "array", value: "string" }, coordinates: { required: true, type: "array", length: 4, value: { type: "array", length: 2, value: "number" } } }, source_image: { type: { required: true, type: "enum", values: { image: {} } }, url: { required: true, type: "string" }, coordinates: { required: true, type: "array", length: 4, value: { type: "array", length: 2, value: "number" } } }, layer: { id: { type: "string", required: true }, type: { type: "enum", values: { fill: {}, line: {}, symbol: {}, circle: {}, heatmap: {}, "fill-extrusion": {}, raster: {}, hillshade: {}, background: {} }, required: true }, metadata: { type: "*" }, source: { type: "string" }, "source-layer": { type: "string" }, minzoom: { type: "number", minimum: 0, maximum: 24 }, maxzoom: { type: "number", minimum: 0, maximum: 24 }, filter: { type: "filter" }, layout: { type: "layout" }, paint: { type: "paint" } }, layout: ["layout_fill", "layout_line", "layout_circle", "layout_heatmap", "layout_fill-extrusion", "layout_symbol", "layout_raster", "layout_hillshade", "layout_background"], layout_background: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_fill: { "fill-sort-key": { type: "number", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_circle: { "circle-sort-key": { type: "number", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_heatmap: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, "layout_fill-extrusion": { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_line: { "line-cap": { type: "enum", values: { butt: {}, round: {}, square: {} }, default: "butt", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-join": { type: "enum", values: { bevel: {}, round: {}, miter: {} }, default: "miter", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "line-miter-limit": { type: "number", default: 2, requires: [{ "line-join": "miter" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-round-limit": { type: "number", default: 1.05, requires: [{ "line-join": "round" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-sort-key": { type: "number", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_symbol: { "symbol-placement": { type: "enum", values: { point: {}, line: {}, "line-center": {} }, default: "point", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "symbol-spacing": { type: "number", default: 250, minimum: 1, units: "pixels", requires: [{ "symbol-placement": "line" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "symbol-avoid-edges": { type: "boolean", default: false, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "symbol-sort-key": { type: "number", expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "symbol-z-order": { type: "enum", values: { auto: {}, "viewport-y": {}, source: {} }, default: "auto", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-allow-overlap": { type: "boolean", default: false, requires: ["icon-image", { "!": "icon-overlap" }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-overlap": { type: "enum", values: { never: {}, always: {}, cooperative: {} }, requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-ignore-placement": { type: "boolean", default: false, requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-optional": { type: "boolean", default: false, requires: ["icon-image", "text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-rotation-alignment": { type: "enum", values: { map: {}, viewport: {}, auto: {} }, default: "auto", requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-size": { type: "number", default: 1, minimum: 0, units: "factor of the original icon size", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-text-fit": { type: "enum", values: { none: {}, width: {}, height: {}, both: {} }, default: "none", requires: ["icon-image", "text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-text-fit-padding": { type: "array", value: "number", length: 4, default: [0, 0, 0, 0], units: "pixels", requires: ["icon-image", "text-field", { "icon-text-fit": ["both", "width", "height"] }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-image": { type: "resolvedImage", tokens: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-rotate": { type: "number", default: 0, period: 360, units: "degrees", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-padding": { type: "padding", default: [2], units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-keep-upright": { type: "boolean", default: false, requires: ["icon-image", { "icon-rotation-alignment": "map" }, { "symbol-placement": ["line", "line-center"] }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-offset": { type: "array", value: "number", length: 2, default: [0, 0], requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-anchor": { type: "enum", values: { center: {}, left: {}, right: {}, top: {}, bottom: {}, "top-left": {}, "top-right": {}, "bottom-left": {}, "bottom-right": {} }, default: "center", requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "icon-pitch-alignment": { type: "enum", values: { map: {}, viewport: {}, auto: {} }, default: "auto", requires: ["icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-pitch-alignment": { type: "enum", values: { map: {}, viewport: {}, auto: {} }, default: "auto", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-rotation-alignment": { type: "enum", values: { map: {}, viewport: {}, "viewport-glyph": {}, auto: {} }, default: "auto", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-field": { type: "formatted", default: "", tokens: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-font": { type: "array", value: "string", default: ["Open Sans Regular", "Arial Unicode MS Regular"], requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-size": { type: "number", default: 16, minimum: 0, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-max-width": { type: "number", default: 10, minimum: 0, units: "ems", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-line-height": { type: "number", default: 1.2, units: "ems", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-letter-spacing": { type: "number", default: 0, units: "ems", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-justify": { type: "enum", values: { auto: {}, left: {}, center: {}, right: {} }, default: "center", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-radial-offset": { type: "number", units: "ems", default: 0, requires: ["text-field"], "property-type": "data-driven", expression: { interpolated: true, parameters: ["zoom", "feature"] } }, "text-variable-anchor": { type: "array", value: "enum", values: { center: {}, left: {}, right: {}, top: {}, bottom: {}, "top-left": {}, "top-right": {}, "bottom-left": {}, "bottom-right": {} }, requires: ["text-field", { "symbol-placement": ["point"] }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-variable-anchor-offset": { type: "variableAnchorOffsetCollection", requires: ["text-field", { "symbol-placement": ["point"] }], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-anchor": { type: "enum", values: { center: {}, left: {}, right: {}, top: {}, bottom: {}, "top-left": {}, "top-right": {}, "bottom-left": {}, "bottom-right": {} }, default: "center", requires: ["text-field", { "!": "text-variable-anchor" }], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-max-angle": { type: "number", default: 45, units: "degrees", requires: ["text-field", { "symbol-placement": ["line", "line-center"] }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-writing-mode": { type: "array", value: "enum", values: { horizontal: {}, vertical: {} }, requires: ["text-field", { "symbol-placement": ["point"] }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-rotate": { type: "number", default: 0, period: 360, units: "degrees", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-padding": { type: "number", default: 2, minimum: 0, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-keep-upright": { type: "boolean", default: true, requires: ["text-field", { "text-rotation-alignment": "map" }, { "symbol-placement": ["line", "line-center"] }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-transform": { type: "enum", values: { none: {}, uppercase: {}, lowercase: {} }, default: "none", requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-offset": { type: "array", value: "number", units: "ems", length: 2, default: [0, 0], requires: ["text-field", { "!": "text-radial-offset" }], expression: { interpolated: true, parameters: ["zoom", "feature"] }, "property-type": "data-driven" }, "text-allow-overlap": { type: "boolean", default: false, requires: ["text-field", { "!": "text-overlap" }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-overlap": { type: "enum", values: { never: {}, always: {}, cooperative: {} }, requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-ignore-placement": { type: "boolean", default: false, requires: ["text-field"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-optional": { type: "boolean", default: false, requires: ["text-field", "icon-image"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_raster: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, layout_hillshade: { visibility: { type: "enum", values: { visible: {}, none: {} }, default: "visible", "property-type": "constant" } }, filter: { type: "array", value: "*" }, filter_operator: { type: "enum", values: { "==": {}, "!=": {}, ">": {}, ">=": {}, "<": {}, "<=": {}, in: {}, "!in": {}, all: {}, any: {}, none: {}, has: {}, "!has": {} } }, geometry_type: { type: "enum", values: { Point: {}, LineString: {}, Polygon: {} } }, function: { expression: { type: "expression" }, stops: { type: "array", value: "function_stop" }, base: { type: "number", default: 1, minimum: 0 }, property: { type: "string", default: "$zoom" }, type: { type: "enum", values: { identity: {}, exponential: {}, interval: {}, categorical: {} }, default: "exponential" }, colorSpace: { type: "enum", values: { rgb: {}, lab: {}, hcl: {} }, default: "rgb" }, default: { type: "*", required: false } }, function_stop: { type: "array", minimum: 0, maximum: 24, value: ["number", "color"], length: 2 }, expression: { type: "array", value: "*", minimum: 1 }, light: { anchor: { type: "enum", default: "viewport", values: { map: {}, viewport: {} }, "property-type": "data-constant", transition: false, expression: { interpolated: false, parameters: ["zoom"] } }, position: { type: "array", default: [1.15, 210, 30], length: 3, value: "number", "property-type": "data-constant", transition: true, expression: { interpolated: true, parameters: ["zoom"] } }, color: { type: "color", "property-type": "data-constant", default: "#ffffff", expression: { interpolated: true, parameters: ["zoom"] }, transition: true }, intensity: { type: "number", "property-type": "data-constant", default: 0.5, minimum: 0, maximum: 1, expression: { interpolated: true, parameters: ["zoom"] }, transition: true } }, sky: { "sky-color": { type: "color", "property-type": "data-constant", default: "#88C6FC", expression: { interpolated: true, parameters: ["zoom"] }, transition: true }, "horizon-color": { type: "color", "property-type": "data-constant", default: "#ffffff", expression: { interpolated: true, parameters: ["zoom"] }, transition: true }, "fog-color": { type: "color", "property-type": "data-constant", default: "#ffffff", expression: { interpolated: true, parameters: ["zoom"] }, transition: true }, "fog-ground-blend": { type: "number", "property-type": "data-constant", default: 0.5, minimum: 0, maximum: 1, expression: { interpolated: true, parameters: ["zoom"] }, transition: true }, "horizon-fog-blend": { type: "number", "property-type": "data-constant", default: 0.8, minimum: 0, maximum: 1, expression: { interpolated: true, parameters: ["zoom"] }, transition: true }, "sky-horizon-blend": { type: "number", "property-type": "data-constant", default: 0.8, minimum: 0, maximum: 1, expression: { interpolated: true, parameters: ["zoom"] }, transition: true }, "atmosphere-blend": { type: "number", "property-type": "data-constant", default: 0.8, minimum: 0, maximum: 1, expression: { interpolated: true, parameters: ["zoom"] }, transition: true } }, terrain: { source: { type: "string", required: true }, exaggeration: { type: "number", minimum: 0, default: 1 } }, projection: { type: { type: "enum", default: "mercator", values: { mercator: {}, globe: {} } } }, paint: ["paint_fill", "paint_line", "paint_circle", "paint_heatmap", "paint_fill-extrusion", "paint_symbol", "paint_raster", "paint_hillshade", "paint_background"], paint_fill: { "fill-antialias": { type: "boolean", default: true, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "fill-pattern" }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-outline-color": { type: "color", transition: true, requires: [{ "!": "fill-pattern" }, { "fill-antialias": true }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["fill-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-pattern": { type: "resolvedImage", transition: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" } }, "paint_fill-extrusion": { "fill-extrusion-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-extrusion-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "fill-extrusion-pattern" }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-extrusion-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["fill-extrusion-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "fill-extrusion-pattern": { type: "resolvedImage", transition: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" }, "fill-extrusion-height": { type: "number", default: 0, minimum: 0, units: "meters", transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-base": { type: "number", default: 0, minimum: 0, units: "meters", transition: true, requires: ["fill-extrusion-height"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "fill-extrusion-vertical-gradient": { type: "boolean", default: true, transition: false, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_line: { "line-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "line-pattern" }], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["line-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "line-width": { type: "number", default: 1, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-gap-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-offset": { type: "number", default: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-blur": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "line-dasharray": { type: "array", value: "number", minimum: 0, transition: true, units: "line widths", requires: [{ "!": "line-pattern" }], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "cross-faded" }, "line-pattern": { type: "resolvedImage", transition: true, expression: { interpolated: false, parameters: ["zoom", "feature"] }, "property-type": "cross-faded-data-driven" }, "line-gradient": { type: "color", transition: false, requires: [{ "!": "line-dasharray" }, { "!": "line-pattern" }, { source: "geojson", has: { lineMetrics: true } }], expression: { interpolated: true, parameters: ["line-progress"] }, "property-type": "color-ramp" } }, paint_circle: { "circle-radius": { type: "number", default: 5, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-blur": { type: "number", default: 0, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["circle-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-pitch-scale": { type: "enum", values: { map: {}, viewport: {} }, default: "map", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-pitch-alignment": { type: "enum", values: { map: {}, viewport: {} }, default: "viewport", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "circle-stroke-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-stroke-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "circle-stroke-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" } }, paint_heatmap: { "heatmap-radius": { type: "number", default: 30, minimum: 1, transition: true, units: "pixels", expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "heatmap-weight": { type: "number", default: 1, minimum: 0, transition: false, expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "heatmap-intensity": { type: "number", default: 1, minimum: 0, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "heatmap-color": { type: "color", default: ["interpolate", ["linear"], ["heatmap-density"], 0, "rgba(0, 0, 255, 0)", 0.1, "royalblue", 0.3, "cyan", 0.5, "lime", 0.7, "yellow", 1, "red"], transition: false, expression: { interpolated: true, parameters: ["heatmap-density"] }, "property-type": "color-ramp" }, "heatmap-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_symbol: { "icon-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-color": { type: "color", default: "#000000", transition: true, requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-halo-color": { type: "color", default: "rgba(0, 0, 0, 0)", transition: true, requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-halo-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-halo-blur": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "icon-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", requires: ["icon-image"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "icon-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["icon-image", "icon-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-color": { type: "color", default: "#000000", transition: true, overridable: true, requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-halo-color": { type: "color", default: "rgba(0, 0, 0, 0)", transition: true, requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-halo-width": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-halo-blur": { type: "number", default: 0, minimum: 0, transition: true, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom", "feature", "feature-state"] }, "property-type": "data-driven" }, "text-translate": { type: "array", value: "number", length: 2, default: [0, 0], transition: true, units: "pixels", requires: ["text-field"], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "text-translate-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "map", requires: ["text-field", "text-translate"], expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_raster: { "raster-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-hue-rotate": { type: "number", default: 0, period: 360, transition: true, units: "degrees", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-brightness-min": { type: "number", default: 0, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-brightness-max": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-saturation": { type: "number", default: 0, minimum: -1, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-contrast": { type: "number", default: 0, minimum: -1, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-resampling": { type: "enum", values: { linear: {}, nearest: {} }, default: "linear", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "raster-fade-duration": { type: "number", default: 300, minimum: 0, transition: false, units: "milliseconds", expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_hillshade: { "hillshade-illumination-direction": { type: "number", default: 335, minimum: 0, maximum: 359, transition: false, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-illumination-anchor": { type: "enum", values: { map: {}, viewport: {} }, default: "viewport", expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-exaggeration": { type: "number", default: 0.5, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-shadow-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-highlight-color": { type: "color", default: "#FFFFFF", transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "hillshade-accent-color": { type: "color", default: "#000000", transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, paint_background: { "background-color": { type: "color", default: "#000000", transition: true, requires: [{ "!": "background-pattern" }], expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" }, "background-pattern": { type: "resolvedImage", transition: true, expression: { interpolated: false, parameters: ["zoom"] }, "property-type": "cross-faded" }, "background-opacity": { type: "number", default: 1, minimum: 0, maximum: 1, transition: true, expression: { interpolated: true, parameters: ["zoom"] }, "property-type": "data-constant" } }, transition: { duration: { type: "number", default: 300, minimum: 0, units: "milliseconds" }, delay: { type: "number", default: 0, minimum: 0, units: "milliseconds" } }, "property-type": { "data-driven": { type: "property-type" }, "cross-faded": { type: "property-type" }, "cross-faded-data-driven": { type: "property-type" }, "color-ramp": { type: "property-type" }, "data-constant": { type: "property-type" }, constant: { type: "property-type" } }, promoteId: { "*": { type: "string" } } };
      const K = ["type", "source", "source-layer", "minzoom", "maxzoom", "filter", "layout"];
      function X2(t2, e2) {
        const r2 = {};
        for (const e3 in t2) "ref" !== e3 && (r2[e3] = t2[e3]);
        return K.forEach((t3) => {
          t3 in e2 && (r2[t3] = e2[t3]);
        }), r2;
      }
      function H(t2, e2) {
        if (Array.isArray(t2)) {
          if (!Array.isArray(e2) || t2.length !== e2.length) return false;
          for (let r2 = 0; r2 < t2.length; r2++) if (!H(t2[r2], e2[r2])) return false;
          return true;
        }
        if ("object" == typeof t2 && null !== t2 && null !== e2) {
          if ("object" != typeof e2) return false;
          if (Object.keys(t2).length !== Object.keys(e2).length) return false;
          for (const r2 in t2) if (!H(t2[r2], e2[r2])) return false;
          return true;
        }
        return t2 === e2;
      }
      function Y(t2, e2) {
        t2.push(e2);
      }
      function J2(t2, e2, r2) {
        Y(r2, { command: "addSource", args: [t2, e2[t2]] });
      }
      function W(t2, e2, r2) {
        Y(e2, { command: "removeSource", args: [t2] }), r2[t2] = true;
      }
      function Q(t2, e2, r2, n2) {
        W(t2, r2, n2), J2(t2, e2, r2);
      }
      function tt2(t2, e2, r2) {
        let n2;
        for (n2 in t2[r2]) if (Object.prototype.hasOwnProperty.call(t2[r2], n2) && "data" !== n2 && !H(t2[r2][n2], e2[r2][n2])) return false;
        for (n2 in e2[r2]) if (Object.prototype.hasOwnProperty.call(e2[r2], n2) && "data" !== n2 && !H(t2[r2][n2], e2[r2][n2])) return false;
        return true;
      }
      function et2(t2, e2, r2, n2, i2, s2) {
        t2 = t2 || {}, e2 = e2 || {};
        for (const a2 in t2) Object.prototype.hasOwnProperty.call(t2, a2) && (H(t2[a2], e2[a2]) || r2.push({ command: s2, args: [n2, a2, e2[a2], i2] }));
        for (const a2 in e2) Object.prototype.hasOwnProperty.call(e2, a2) && !Object.prototype.hasOwnProperty.call(t2, a2) && (H(t2[a2], e2[a2]) || r2.push({ command: s2, args: [n2, a2, e2[a2], i2] }));
      }
      function rt2(t2) {
        return t2.id;
      }
      function nt2(t2, e2) {
        return t2[e2.id] = e2, t2;
      }
      class it2 {
        constructor(t2, e2, r2, n2) {
          this.message = (t2 ? `${t2}: ` : "") + r2, n2 && (this.identifier = n2), null != e2 && e2.__line__ && (this.line = e2.__line__);
        }
      }
      function st2(t2, ...e2) {
        for (const r2 of e2) for (const e3 in r2) t2[e3] = r2[e3];
        return t2;
      }
      class at2 extends Error {
        constructor(t2, e2) {
          super(e2), this.message = e2, this.key = t2;
        }
      }
      class ot2 {
        constructor(t2, e2 = []) {
          this.parent = t2, this.bindings = {};
          for (const [t3, r2] of e2) this.bindings[t3] = r2;
        }
        concat(t2) {
          return new ot2(this, t2);
        }
        get(t2) {
          if (this.bindings[t2]) return this.bindings[t2];
          if (this.parent) return this.parent.get(t2);
          throw new Error(`${t2} not found in scope.`);
        }
        has(t2) {
          return !!this.bindings[t2] || !!this.parent && this.parent.has(t2);
        }
      }
      const lt2 = { kind: "null" }, ut = { kind: "number" }, ct2 = { kind: "string" }, ht2 = { kind: "boolean" }, pt2 = { kind: "color" }, ft = { kind: "object" }, dt = { kind: "value" }, yt = { kind: "collator" }, mt = { kind: "formatted" }, gt = { kind: "padding" }, xt = { kind: "resolvedImage" }, vt = { kind: "variableAnchorOffsetCollection" };
      function bt(t2, e2) {
        return { kind: "array", itemType: t2, N: e2 };
      }
      function wt2(t2) {
        if ("array" === t2.kind) {
          const e2 = wt2(t2.itemType);
          return "number" == typeof t2.N ? `array<${e2}, ${t2.N}>` : "value" === t2.itemType.kind ? "array" : `array<${e2}>`;
        }
        return t2.kind;
      }
      const _t2 = [lt2, ut, ct2, ht2, pt2, mt, ft, bt(dt), gt, xt, vt];
      function At(t2, e2) {
        if ("error" === e2.kind) return null;
        if ("array" === t2.kind) {
          if ("array" === e2.kind && (0 === e2.N && "value" === e2.itemType.kind || !At(t2.itemType, e2.itemType)) && ("number" != typeof t2.N || t2.N === e2.N)) return null;
        } else {
          if (t2.kind === e2.kind) return null;
          if ("value" === t2.kind) {
            for (const t3 of _t2) if (!At(t3, e2)) return null;
          }
        }
        return `Expected ${wt2(t2)} but found ${wt2(e2)} instead.`;
      }
      function St(t2, e2) {
        return e2.some((e3) => e3.kind === t2.kind);
      }
      function kt(t2, e2) {
        return e2.some((e3) => "null" === e3 ? null === t2 : "array" === e3 ? Array.isArray(t2) : "object" === e3 ? t2 && !Array.isArray(t2) && "object" == typeof t2 : e3 === typeof t2);
      }
      function Mt(t2, e2) {
        return "array" === t2.kind && "array" === e2.kind ? t2.itemType.kind === e2.itemType.kind && "number" == typeof t2.N : t2.kind === e2.kind;
      }
      const It = 0.96422, zt = 0.82521, Pt = 4 / 29, Ct = 6 / 29, Bt = 3 * Ct * Ct, Vt = Ct * Ct * Ct, Et = Math.PI / 180, Ft = 180 / Math.PI;
      function Tt(t2) {
        return (t2 %= 360) < 0 && (t2 += 360), t2;
      }
      function $t([t2, e2, r2, n2]) {
        let i2, s2;
        const a2 = Dt((0.2225045 * (t2 = Lt(t2)) + 0.7168786 * (e2 = Lt(e2)) + 0.0606169 * (r2 = Lt(r2))) / 1);
        t2 === e2 && e2 === r2 ? i2 = s2 = a2 : (i2 = Dt((0.4360747 * t2 + 0.3850649 * e2 + 0.1430804 * r2) / It), s2 = Dt((0.0139322 * t2 + 0.0971045 * e2 + 0.7141733 * r2) / zt));
        const o2 = 116 * a2 - 16;
        return [o2 < 0 ? 0 : o2, 500 * (i2 - a2), 200 * (a2 - s2), n2];
      }
      function Lt(t2) {
        return t2 <= 0.04045 ? t2 / 12.92 : Math.pow((t2 + 0.055) / 1.055, 2.4);
      }
      function Dt(t2) {
        return t2 > Vt ? Math.pow(t2, 1 / 3) : t2 / Bt + Pt;
      }
      function Ot([t2, e2, r2, n2]) {
        let i2 = (t2 + 16) / 116, s2 = isNaN(e2) ? i2 : i2 + e2 / 500, a2 = isNaN(r2) ? i2 : i2 - r2 / 200;
        return i2 = 1 * Rt(i2), s2 = It * Rt(s2), a2 = zt * Rt(a2), [jt(3.1338561 * s2 - 1.6168667 * i2 - 0.4906146 * a2), jt(-0.9787684 * s2 + 1.9161415 * i2 + 0.033454 * a2), jt(0.0719453 * s2 - 0.2289914 * i2 + 1.4052427 * a2), n2];
      }
      function jt(t2) {
        return (t2 = t2 <= 304e-5 ? 12.92 * t2 : 1.055 * Math.pow(t2, 1 / 2.4) - 0.055) < 0 ? 0 : t2 > 1 ? 1 : t2;
      }
      function Rt(t2) {
        return t2 > Ct ? t2 * t2 * t2 : Bt * (t2 - Pt);
      }
      function Ut(t2) {
        return parseInt(t2.padEnd(2, t2), 16) / 255;
      }
      function qt(t2, e2) {
        return Nt(e2 ? t2 / 100 : t2, 0, 1);
      }
      function Nt(t2, e2, r2) {
        return Math.min(Math.max(e2, t2), r2);
      }
      function Zt(t2) {
        return !t2.some(Number.isNaN);
      }
      const Gt = { aliceblue: [240, 248, 255], antiquewhite: [250, 235, 215], aqua: [0, 255, 255], aquamarine: [127, 255, 212], azure: [240, 255, 255], beige: [245, 245, 220], bisque: [255, 228, 196], black: [0, 0, 0], blanchedalmond: [255, 235, 205], blue: [0, 0, 255], blueviolet: [138, 43, 226], brown: [165, 42, 42], burlywood: [222, 184, 135], cadetblue: [95, 158, 160], chartreuse: [127, 255, 0], chocolate: [210, 105, 30], coral: [255, 127, 80], cornflowerblue: [100, 149, 237], cornsilk: [255, 248, 220], crimson: [220, 20, 60], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgoldenrod: [184, 134, 11], darkgray: [169, 169, 169], darkgreen: [0, 100, 0], darkgrey: [169, 169, 169], darkkhaki: [189, 183, 107], darkmagenta: [139, 0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkseagreen: [143, 188, 143], darkslateblue: [72, 61, 139], darkslategray: [47, 79, 79], darkslategrey: [47, 79, 79], darkturquoise: [0, 206, 209], darkviolet: [148, 0, 211], deeppink: [255, 20, 147], deepskyblue: [0, 191, 255], dimgray: [105, 105, 105], dimgrey: [105, 105, 105], dodgerblue: [30, 144, 255], firebrick: [178, 34, 34], floralwhite: [255, 250, 240], forestgreen: [34, 139, 34], fuchsia: [255, 0, 255], gainsboro: [220, 220, 220], ghostwhite: [248, 248, 255], gold: [255, 215, 0], goldenrod: [218, 165, 32], gray: [128, 128, 128], green: [0, 128, 0], greenyellow: [173, 255, 47], grey: [128, 128, 128], honeydew: [240, 255, 240], hotpink: [255, 105, 180], indianred: [205, 92, 92], indigo: [75, 0, 130], ivory: [255, 255, 240], khaki: [240, 230, 140], lavender: [230, 230, 250], lavenderblush: [255, 240, 245], lawngreen: [124, 252, 0], lemonchiffon: [255, 250, 205], lightblue: [173, 216, 230], lightcoral: [240, 128, 128], lightcyan: [224, 255, 255], lightgoldenrodyellow: [250, 250, 210], lightgray: [211, 211, 211], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightsalmon: [255, 160, 122], lightseagreen: [32, 178, 170], lightskyblue: [135, 206, 250], lightslategray: [119, 136, 153], lightslategrey: [119, 136, 153], lightsteelblue: [176, 196, 222], lightyellow: [255, 255, 224], lime: [0, 255, 0], limegreen: [50, 205, 50], linen: [250, 240, 230], magenta: [255, 0, 255], maroon: [128, 0, 0], mediumaquamarine: [102, 205, 170], mediumblue: [0, 0, 205], mediumorchid: [186, 85, 211], mediumpurple: [147, 112, 219], mediumseagreen: [60, 179, 113], mediumslateblue: [123, 104, 238], mediumspringgreen: [0, 250, 154], mediumturquoise: [72, 209, 204], mediumvioletred: [199, 21, 133], midnightblue: [25, 25, 112], mintcream: [245, 255, 250], mistyrose: [255, 228, 225], moccasin: [255, 228, 181], navajowhite: [255, 222, 173], navy: [0, 0, 128], oldlace: [253, 245, 230], olive: [128, 128, 0], olivedrab: [107, 142, 35], orange: [255, 165, 0], orangered: [255, 69, 0], orchid: [218, 112, 214], palegoldenrod: [238, 232, 170], palegreen: [152, 251, 152], paleturquoise: [175, 238, 238], palevioletred: [219, 112, 147], papayawhip: [255, 239, 213], peachpuff: [255, 218, 185], peru: [205, 133, 63], pink: [255, 192, 203], plum: [221, 160, 221], powderblue: [176, 224, 230], purple: [128, 0, 128], rebeccapurple: [102, 51, 153], red: [255, 0, 0], rosybrown: [188, 143, 143], royalblue: [65, 105, 225], saddlebrown: [139, 69, 19], salmon: [250, 128, 114], sandybrown: [244, 164, 96], seagreen: [46, 139, 87], seashell: [255, 245, 238], sienna: [160, 82, 45], silver: [192, 192, 192], skyblue: [135, 206, 235], slateblue: [106, 90, 205], slategray: [112, 128, 144], slategrey: [112, 128, 144], snow: [255, 250, 250], springgreen: [0, 255, 127], steelblue: [70, 130, 180], tan: [210, 180, 140], teal: [0, 128, 128], thistle: [216, 191, 216], tomato: [255, 99, 71], turquoise: [64, 224, 208], violet: [238, 130, 238], wheat: [245, 222, 179], white: [255, 255, 255], whitesmoke: [245, 245, 245], yellow: [255, 255, 0], yellowgreen: [154, 205, 50] };
      class Kt {
        constructor(t2, e2, r2, n2 = 1, i2 = true) {
          this.r = t2, this.g = e2, this.b = r2, this.a = n2, i2 || (this.r *= n2, this.g *= n2, this.b *= n2, n2 || this.overwriteGetter("rgb", [t2, e2, r2, n2]));
        }
        static parse(t2) {
          if (t2 instanceof Kt) return t2;
          if ("string" != typeof t2) return;
          const e2 = function(t3) {
            if ("transparent" === (t3 = t3.toLowerCase().trim())) return [0, 0, 0, 0];
            const e3 = Gt[t3];
            if (e3) {
              const [t4, r3, n2] = e3;
              return [t4 / 255, r3 / 255, n2 / 255, 1];
            }
            if (t3.startsWith("#") && /^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(t3)) {
              const e4 = t3.length < 6 ? 1 : 2;
              let r3 = 1;
              return [Ut(t3.slice(r3, r3 += e4)), Ut(t3.slice(r3, r3 += e4)), Ut(t3.slice(r3, r3 += e4)), Ut(t3.slice(r3, r3 + e4) || "ff")];
            }
            if (t3.startsWith("rgb")) {
              const e4 = t3.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);
              if (e4) {
                const [t4, r3, n2, i2, s2, a2, o2, l2, u3, c2, h2, p3] = e4, f2 = [i2 || " ", o2 || " ", c2].join("");
                if ("  " === f2 || "  /" === f2 || ",," === f2 || ",,," === f2) {
                  const t5 = [n2, a2, u3].join(""), e5 = "%%%" === t5 ? 100 : "" === t5 ? 255 : 0;
                  if (e5) {
                    const t6 = [Nt(+r3 / e5, 0, 1), Nt(+s2 / e5, 0, 1), Nt(+l2 / e5, 0, 1), h2 ? qt(+h2, p3) : 1];
                    if (Zt(t6)) return t6;
                  }
                }
                return;
              }
            }
            const r2 = t3.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);
            if (r2) {
              const [t4, e4, n2, i2, s2, a2, o2, l2, u3] = r2, c2 = [n2 || " ", s2 || " ", o2].join("");
              if ("  " === c2 || "  /" === c2 || ",," === c2 || ",,," === c2) {
                const t5 = [+e4, Nt(+i2, 0, 100), Nt(+a2, 0, 100), l2 ? qt(+l2, u3) : 1];
                if (Zt(t5)) return function([t6, e5, r3, n3]) {
                  function i3(n4) {
                    const i4 = (n4 + t6 / 30) % 12, s3 = e5 * Math.min(r3, 1 - r3);
                    return r3 - s3 * Math.max(-1, Math.min(i4 - 3, 9 - i4, 1));
                  }
                  return t6 = Tt(t6), e5 /= 100, r3 /= 100, [i3(0), i3(8), i3(4), n3];
                }(t5);
              }
            }
          }(t2);
          return e2 ? new Kt(...e2, false) : void 0;
        }
        get rgb() {
          const { r: t2, g: e2, b: r2, a: n2 } = this, i2 = n2 || 1 / 0;
          return this.overwriteGetter("rgb", [t2 / i2, e2 / i2, r2 / i2, n2]);
        }
        get hcl() {
          return this.overwriteGetter("hcl", function(t2) {
            const [e2, r2, n2, i2] = $t(t2), s2 = Math.sqrt(r2 * r2 + n2 * n2);
            return [Math.round(1e4 * s2) ? Tt(Math.atan2(n2, r2) * Ft) : NaN, s2, e2, i2];
          }(this.rgb));
        }
        get lab() {
          return this.overwriteGetter("lab", $t(this.rgb));
        }
        overwriteGetter(t2, e2) {
          return Object.defineProperty(this, t2, { value: e2 }), e2;
        }
        toString() {
          const [t2, e2, r2, n2] = this.rgb;
          return `rgba(${[t2, e2, r2].map((t3) => Math.round(255 * t3)).join(",")},${n2})`;
        }
      }
      Kt.black = new Kt(0, 0, 0, 1), Kt.white = new Kt(1, 1, 1, 1), Kt.transparent = new Kt(0, 0, 0, 0), Kt.red = new Kt(1, 0, 0, 1);
      class Xt {
        constructor(t2, e2, r2) {
          this.sensitivity = t2 ? e2 ? "variant" : "case" : e2 ? "accent" : "base", this.locale = r2, this.collator = new Intl.Collator(this.locale ? this.locale : [], { sensitivity: this.sensitivity, usage: "search" });
        }
        compare(t2, e2) {
          return this.collator.compare(t2, e2);
        }
        resolvedLocale() {
          return new Intl.Collator(this.locale ? this.locale : []).resolvedOptions().locale;
        }
      }
      class Ht {
        constructor(t2, e2, r2, n2, i2) {
          this.text = t2, this.image = e2, this.scale = r2, this.fontStack = n2, this.textColor = i2;
        }
      }
      class Yt {
        constructor(t2) {
          this.sections = t2;
        }
        static fromString(t2) {
          return new Yt([new Ht(t2, null, null, null, null)]);
        }
        isEmpty() {
          return 0 === this.sections.length || !this.sections.some((t2) => 0 !== t2.text.length || t2.image && 0 !== t2.image.name.length);
        }
        static factory(t2) {
          return t2 instanceof Yt ? t2 : Yt.fromString(t2);
        }
        toString() {
          return 0 === this.sections.length ? "" : this.sections.map((t2) => t2.text).join("");
        }
      }
      class Jt {
        constructor(t2) {
          this.values = t2.slice();
        }
        static parse(t2) {
          if (t2 instanceof Jt) return t2;
          if ("number" == typeof t2) return new Jt([t2, t2, t2, t2]);
          if (Array.isArray(t2) && !(t2.length < 1 || t2.length > 4)) {
            for (const e2 of t2) if ("number" != typeof e2) return;
            switch (t2.length) {
              case 1:
                t2 = [t2[0], t2[0], t2[0], t2[0]];
                break;
              case 2:
                t2 = [t2[0], t2[1], t2[0], t2[1]];
                break;
              case 3:
                t2 = [t2[0], t2[1], t2[2], t2[1]];
            }
            return new Jt(t2);
          }
        }
        toString() {
          return JSON.stringify(this.values);
        }
      }
      const Wt = /* @__PURE__ */ new Set(["center", "left", "right", "top", "bottom", "top-left", "top-right", "bottom-left", "bottom-right"]);
      class Qt {
        constructor(t2) {
          this.values = t2.slice();
        }
        static parse(t2) {
          if (t2 instanceof Qt) return t2;
          if (Array.isArray(t2) && !(t2.length < 1) && t2.length % 2 == 0) {
            for (let e2 = 0; e2 < t2.length; e2 += 2) {
              const r2 = t2[e2], n2 = t2[e2 + 1];
              if ("string" != typeof r2 || !Wt.has(r2)) return;
              if (!Array.isArray(n2) || 2 !== n2.length || "number" != typeof n2[0] || "number" != typeof n2[1]) return;
            }
            return new Qt(t2);
          }
        }
        toString() {
          return JSON.stringify(this.values);
        }
      }
      class te2 {
        constructor(t2) {
          this.name = t2.name, this.available = t2.available;
        }
        toString() {
          return this.name;
        }
        static fromString(t2) {
          return t2 ? new te2({ name: t2, available: false }) : null;
        }
      }
      function ee2(t2, e2, r2, n2) {
        return "number" == typeof t2 && t2 >= 0 && t2 <= 255 && "number" == typeof e2 && e2 >= 0 && e2 <= 255 && "number" == typeof r2 && r2 >= 0 && r2 <= 255 ? void 0 === n2 || "number" == typeof n2 && n2 >= 0 && n2 <= 1 ? null : `Invalid rgba value [${[t2, e2, r2, n2].join(", ")}]: 'a' must be between 0 and 1.` : `Invalid rgba value [${("number" == typeof n2 ? [t2, e2, r2, n2] : [t2, e2, r2]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`;
      }
      function re(t2) {
        if (null === t2 || "string" == typeof t2 || "boolean" == typeof t2 || "number" == typeof t2 || t2 instanceof Kt || t2 instanceof Xt || t2 instanceof Yt || t2 instanceof Jt || t2 instanceof Qt || t2 instanceof te2) return true;
        if (Array.isArray(t2)) {
          for (const e2 of t2) if (!re(e2)) return false;
          return true;
        }
        if ("object" == typeof t2) {
          for (const e2 in t2) if (!re(t2[e2])) return false;
          return true;
        }
        return false;
      }
      function ne(t2) {
        if (null === t2) return lt2;
        if ("string" == typeof t2) return ct2;
        if ("boolean" == typeof t2) return ht2;
        if ("number" == typeof t2) return ut;
        if (t2 instanceof Kt) return pt2;
        if (t2 instanceof Xt) return yt;
        if (t2 instanceof Yt) return mt;
        if (t2 instanceof Jt) return gt;
        if (t2 instanceof Qt) return vt;
        if (t2 instanceof te2) return xt;
        if (Array.isArray(t2)) {
          const e2 = t2.length;
          let r2;
          for (const e3 of t2) {
            const t3 = ne(e3);
            if (r2) {
              if (r2 === t3) continue;
              r2 = dt;
              break;
            }
            r2 = t3;
          }
          return bt(r2 || dt, e2);
        }
        return ft;
      }
      function ie2(t2) {
        const e2 = typeof t2;
        return null === t2 ? "" : "string" === e2 || "number" === e2 || "boolean" === e2 ? String(t2) : t2 instanceof Kt || t2 instanceof Yt || t2 instanceof Jt || t2 instanceof Qt || t2 instanceof te2 ? t2.toString() : JSON.stringify(t2);
      }
      class se {
        constructor(t2, e2) {
          this.type = t2, this.value = e2;
        }
        static parse(t2, e2) {
          if (2 !== t2.length) return e2.error(`'literal' expression requires exactly one argument, but found ${t2.length - 1} instead.`);
          if (!re(t2[1])) return e2.error("invalid value");
          const r2 = t2[1];
          let n2 = ne(r2);
          const i2 = e2.expectedType;
          return "array" !== n2.kind || 0 !== n2.N || !i2 || "array" !== i2.kind || "number" == typeof i2.N && 0 !== i2.N || (n2 = i2), new se(n2, r2);
        }
        evaluate() {
          return this.value;
        }
        eachChild() {
        }
        outputDefined() {
          return true;
        }
      }
      class ae2 {
        constructor(t2) {
          this.name = "ExpressionEvaluationError", this.message = t2;
        }
        toJSON() {
          return this.message;
        }
      }
      const oe = { string: ct2, number: ut, boolean: ht2, object: ft };
      class le2 {
        constructor(t2, e2) {
          this.type = t2, this.args = e2;
        }
        static parse(t2, e2) {
          if (t2.length < 2) return e2.error("Expected at least one argument.");
          let r2, n2 = 1;
          const i2 = t2[0];
          if ("array" === i2) {
            let i3, s3;
            if (t2.length > 2) {
              const r3 = t2[1];
              if ("string" != typeof r3 || !(r3 in oe) || "object" === r3) return e2.error('The item type argument of "array" must be one of string, number, boolean', 1);
              i3 = oe[r3], n2++;
            } else i3 = dt;
            if (t2.length > 3) {
              if (null !== t2[2] && ("number" != typeof t2[2] || t2[2] < 0 || t2[2] !== Math.floor(t2[2]))) return e2.error('The length argument to "array" must be a positive integer literal', 2);
              s3 = t2[2], n2++;
            }
            r2 = bt(i3, s3);
          } else {
            if (!oe[i2]) throw new Error(`Types doesn't contain name = ${i2}`);
            r2 = oe[i2];
          }
          const s2 = [];
          for (; n2 < t2.length; n2++) {
            const r3 = e2.parse(t2[n2], n2, dt);
            if (!r3) return null;
            s2.push(r3);
          }
          return new le2(r2, s2);
        }
        evaluate(t2) {
          for (let e2 = 0; e2 < this.args.length; e2++) {
            const r2 = this.args[e2].evaluate(t2);
            if (!At(this.type, ne(r2))) return r2;
            if (e2 === this.args.length - 1) throw new ae2(`Expected value to be of type ${wt2(this.type)}, but found ${wt2(ne(r2))} instead.`);
          }
          throw new Error();
        }
        eachChild(t2) {
          this.args.forEach(t2);
        }
        outputDefined() {
          return this.args.every((t2) => t2.outputDefined());
        }
      }
      const ue2 = { "to-boolean": ht2, "to-color": pt2, "to-number": ut, "to-string": ct2 };
      class ce2 {
        constructor(t2, e2) {
          this.type = t2, this.args = e2;
        }
        static parse(t2, e2) {
          if (t2.length < 2) return e2.error("Expected at least one argument.");
          const r2 = t2[0];
          if (!ue2[r2]) throw new Error(`Can't parse ${r2} as it is not part of the known types`);
          if (("to-boolean" === r2 || "to-string" === r2) && 2 !== t2.length) return e2.error("Expected one argument.");
          const n2 = ue2[r2], i2 = [];
          for (let r3 = 1; r3 < t2.length; r3++) {
            const n3 = e2.parse(t2[r3], r3, dt);
            if (!n3) return null;
            i2.push(n3);
          }
          return new ce2(n2, i2);
        }
        evaluate(t2) {
          switch (this.type.kind) {
            case "boolean":
              return Boolean(this.args[0].evaluate(t2));
            case "color": {
              let e2, r2;
              for (const n2 of this.args) {
                if (e2 = n2.evaluate(t2), r2 = null, e2 instanceof Kt) return e2;
                if ("string" == typeof e2) {
                  const r3 = t2.parseColor(e2);
                  if (r3) return r3;
                } else if (Array.isArray(e2) && (r2 = e2.length < 3 || e2.length > 4 ? `Invalid rbga value ${JSON.stringify(e2)}: expected an array containing either three or four numeric values.` : ee2(e2[0], e2[1], e2[2], e2[3]), !r2)) return new Kt(e2[0] / 255, e2[1] / 255, e2[2] / 255, e2[3]);
              }
              throw new ae2(r2 || `Could not parse color from value '${"string" == typeof e2 ? e2 : JSON.stringify(e2)}'`);
            }
            case "padding": {
              let e2;
              for (const r2 of this.args) {
                e2 = r2.evaluate(t2);
                const n2 = Jt.parse(e2);
                if (n2) return n2;
              }
              throw new ae2(`Could not parse padding from value '${"string" == typeof e2 ? e2 : JSON.stringify(e2)}'`);
            }
            case "variableAnchorOffsetCollection": {
              let e2;
              for (const r2 of this.args) {
                e2 = r2.evaluate(t2);
                const n2 = Qt.parse(e2);
                if (n2) return n2;
              }
              throw new ae2(`Could not parse variableAnchorOffsetCollection from value '${"string" == typeof e2 ? e2 : JSON.stringify(e2)}'`);
            }
            case "number": {
              let e2 = null;
              for (const r2 of this.args) {
                if (e2 = r2.evaluate(t2), null === e2) return 0;
                const n2 = Number(e2);
                if (!isNaN(n2)) return n2;
              }
              throw new ae2(`Could not convert ${JSON.stringify(e2)} to number.`);
            }
            case "formatted":
              return Yt.fromString(ie2(this.args[0].evaluate(t2)));
            case "resolvedImage":
              return te2.fromString(ie2(this.args[0].evaluate(t2)));
            default:
              return ie2(this.args[0].evaluate(t2));
          }
        }
        eachChild(t2) {
          this.args.forEach(t2);
        }
        outputDefined() {
          return this.args.every((t2) => t2.outputDefined());
        }
      }
      const he2 = ["Unknown", "Point", "LineString", "Polygon"];
      class pe2 {
        constructor() {
          this.globals = null, this.feature = null, this.featureState = null, this.formattedSection = null, this._parseColorCache = {}, this.availableImages = null, this.canonical = null;
        }
        id() {
          return this.feature && "id" in this.feature ? this.feature.id : null;
        }
        geometryType() {
          return this.feature ? "number" == typeof this.feature.type ? he2[this.feature.type] : this.feature.type : null;
        }
        geometry() {
          return this.feature && "geometry" in this.feature ? this.feature.geometry : null;
        }
        canonicalID() {
          return this.canonical;
        }
        properties() {
          return this.feature && this.feature.properties || {};
        }
        parseColor(t2) {
          let e2 = this._parseColorCache[t2];
          return e2 || (e2 = this._parseColorCache[t2] = Kt.parse(t2)), e2;
        }
      }
      class fe2 {
        constructor(t2, e2, r2 = [], n2, i2 = new ot2(), s2 = []) {
          this.registry = t2, this.path = r2, this.key = r2.map((t3) => `[${t3}]`).join(""), this.scope = i2, this.errors = s2, this.expectedType = n2, this._isConstant = e2;
        }
        parse(t2, e2, r2, n2, i2 = {}) {
          return e2 ? this.concat(e2, r2, n2)._parse(t2, i2) : this._parse(t2, i2);
        }
        _parse(t2, e2) {
          function r2(t3, e3, r3) {
            return "assert" === r3 ? new le2(e3, [t3]) : "coerce" === r3 ? new ce2(e3, [t3]) : t3;
          }
          if (null !== t2 && "string" != typeof t2 && "boolean" != typeof t2 && "number" != typeof t2 || (t2 = ["literal", t2]), Array.isArray(t2)) {
            if (0 === t2.length) return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');
            const n2 = t2[0];
            if ("string" != typeof n2) return this.error(`Expression name must be a string, but found ${typeof n2} instead. If you wanted a literal array, use ["literal", [...]].`, 0), null;
            const i2 = this.registry[n2];
            if (i2) {
              let n3 = i2.parse(t2, this);
              if (!n3) return null;
              if (this.expectedType) {
                const t3 = this.expectedType, i3 = n3.type;
                if ("string" !== t3.kind && "number" !== t3.kind && "boolean" !== t3.kind && "object" !== t3.kind && "array" !== t3.kind || "value" !== i3.kind) if ("color" !== t3.kind && "formatted" !== t3.kind && "resolvedImage" !== t3.kind || "value" !== i3.kind && "string" !== i3.kind) if ("padding" !== t3.kind || "value" !== i3.kind && "number" !== i3.kind && "array" !== i3.kind) if ("variableAnchorOffsetCollection" !== t3.kind || "value" !== i3.kind && "array" !== i3.kind) {
                  if (this.checkSubtype(t3, i3)) return null;
                } else n3 = r2(n3, t3, e2.typeAnnotation || "coerce");
                else n3 = r2(n3, t3, e2.typeAnnotation || "coerce");
                else n3 = r2(n3, t3, e2.typeAnnotation || "coerce");
                else n3 = r2(n3, t3, e2.typeAnnotation || "assert");
              }
              if (!(n3 instanceof se) && "resolvedImage" !== n3.type.kind && this._isConstant(n3)) {
                const t3 = new pe2();
                try {
                  n3 = new se(n3.type, n3.evaluate(t3));
                } catch (t4) {
                  return this.error(t4.message), null;
                }
              }
              return n3;
            }
            return this.error(`Unknown expression "${n2}". If you wanted a literal array, use ["literal", [...]].`, 0);
          }
          return this.error(void 0 === t2 ? "'undefined' value invalid. Use null instead." : "object" == typeof t2 ? 'Bare objects invalid. Use ["literal", {...}] instead.' : `Expected an array, but found ${typeof t2} instead.`);
        }
        concat(t2, e2, r2) {
          const n2 = "number" == typeof t2 ? this.path.concat(t2) : this.path, i2 = r2 ? this.scope.concat(r2) : this.scope;
          return new fe2(this.registry, this._isConstant, n2, e2 || null, i2, this.errors);
        }
        error(t2, ...e2) {
          const r2 = `${this.key}${e2.map((t3) => `[${t3}]`).join("")}`;
          this.errors.push(new at2(r2, t2));
        }
        checkSubtype(t2, e2) {
          const r2 = At(t2, e2);
          return r2 && this.error(r2), r2;
        }
      }
      class de2 {
        constructor(t2, e2) {
          this.type = e2.type, this.bindings = [].concat(t2), this.result = e2;
        }
        evaluate(t2) {
          return this.result.evaluate(t2);
        }
        eachChild(t2) {
          for (const e2 of this.bindings) t2(e2[1]);
          t2(this.result);
        }
        static parse(t2, e2) {
          if (t2.length < 4) return e2.error(`Expected at least 3 arguments, but found ${t2.length - 1} instead.`);
          const r2 = [];
          for (let n3 = 1; n3 < t2.length - 1; n3 += 2) {
            const i2 = t2[n3];
            if ("string" != typeof i2) return e2.error(`Expected string, but found ${typeof i2} instead.`, n3);
            if (/[^a-zA-Z0-9_]/.test(i2)) return e2.error("Variable names must contain only alphanumeric characters or '_'.", n3);
            const s2 = e2.parse(t2[n3 + 1], n3 + 1);
            if (!s2) return null;
            r2.push([i2, s2]);
          }
          const n2 = e2.parse(t2[t2.length - 1], t2.length - 1, e2.expectedType, r2);
          return n2 ? new de2(r2, n2) : null;
        }
        outputDefined() {
          return this.result.outputDefined();
        }
      }
      class ye {
        constructor(t2, e2) {
          this.type = e2.type, this.name = t2, this.boundExpression = e2;
        }
        static parse(t2, e2) {
          if (2 !== t2.length || "string" != typeof t2[1]) return e2.error("'var' expression requires exactly one string literal argument.");
          const r2 = t2[1];
          return e2.scope.has(r2) ? new ye(r2, e2.scope.get(r2)) : e2.error(`Unknown variable "${r2}". Make sure "${r2}" has been bound in an enclosing "let" expression before using it.`, 1);
        }
        evaluate(t2) {
          return this.boundExpression.evaluate(t2);
        }
        eachChild() {
        }
        outputDefined() {
          return false;
        }
      }
      class me2 {
        constructor(t2, e2, r2) {
          this.type = t2, this.index = e2, this.input = r2;
        }
        static parse(t2, e2) {
          if (3 !== t2.length) return e2.error(`Expected 2 arguments, but found ${t2.length - 1} instead.`);
          const r2 = e2.parse(t2[1], 1, ut), n2 = e2.parse(t2[2], 2, bt(e2.expectedType || dt));
          return r2 && n2 ? new me2(n2.type.itemType, r2, n2) : null;
        }
        evaluate(t2) {
          const e2 = this.index.evaluate(t2), r2 = this.input.evaluate(t2);
          if (e2 < 0) throw new ae2(`Array index out of bounds: ${e2} < 0.`);
          if (e2 >= r2.length) throw new ae2(`Array index out of bounds: ${e2} > ${r2.length - 1}.`);
          if (e2 !== Math.floor(e2)) throw new ae2(`Array index must be an integer, but found ${e2} instead.`);
          return r2[e2];
        }
        eachChild(t2) {
          t2(this.index), t2(this.input);
        }
        outputDefined() {
          return false;
        }
      }
      class ge2 {
        constructor(t2, e2) {
          this.type = ht2, this.needle = t2, this.haystack = e2;
        }
        static parse(t2, e2) {
          if (3 !== t2.length) return e2.error(`Expected 2 arguments, but found ${t2.length - 1} instead.`);
          const r2 = e2.parse(t2[1], 1, dt), n2 = e2.parse(t2[2], 2, dt);
          return r2 && n2 ? St(r2.type, [ht2, ct2, ut, lt2, dt]) ? new ge2(r2, n2) : e2.error(`Expected first argument to be of type boolean, string, number or null, but found ${wt2(r2.type)} instead`) : null;
        }
        evaluate(t2) {
          const e2 = this.needle.evaluate(t2), r2 = this.haystack.evaluate(t2);
          if (!r2) return false;
          if (!kt(e2, ["boolean", "string", "number", "null"])) throw new ae2(`Expected first argument to be of type boolean, string, number or null, but found ${wt2(ne(e2))} instead.`);
          if (!kt(r2, ["string", "array"])) throw new ae2(`Expected second argument to be of type array or string, but found ${wt2(ne(r2))} instead.`);
          return r2.indexOf(e2) >= 0;
        }
        eachChild(t2) {
          t2(this.needle), t2(this.haystack);
        }
        outputDefined() {
          return true;
        }
      }
      class xe2 {
        constructor(t2, e2, r2) {
          this.type = ut, this.needle = t2, this.haystack = e2, this.fromIndex = r2;
        }
        static parse(t2, e2) {
          if (t2.length <= 2 || t2.length >= 5) return e2.error(`Expected 3 or 4 arguments, but found ${t2.length - 1} instead.`);
          const r2 = e2.parse(t2[1], 1, dt), n2 = e2.parse(t2[2], 2, dt);
          if (!r2 || !n2) return null;
          if (!St(r2.type, [ht2, ct2, ut, lt2, dt])) return e2.error(`Expected first argument to be of type boolean, string, number or null, but found ${wt2(r2.type)} instead`);
          if (4 === t2.length) {
            const i2 = e2.parse(t2[3], 3, ut);
            return i2 ? new xe2(r2, n2, i2) : null;
          }
          return new xe2(r2, n2);
        }
        evaluate(t2) {
          const e2 = this.needle.evaluate(t2), r2 = this.haystack.evaluate(t2);
          if (!kt(e2, ["boolean", "string", "number", "null"])) throw new ae2(`Expected first argument to be of type boolean, string, number or null, but found ${wt2(ne(e2))} instead.`);
          let n2;
          if (this.fromIndex && (n2 = this.fromIndex.evaluate(t2)), kt(r2, ["string"])) {
            const t3 = r2.indexOf(e2, n2);
            return -1 === t3 ? -1 : [...r2.slice(0, t3)].length;
          }
          if (kt(r2, ["array"])) return r2.indexOf(e2, n2);
          throw new ae2(`Expected second argument to be of type array or string, but found ${wt2(ne(r2))} instead.`);
        }
        eachChild(t2) {
          t2(this.needle), t2(this.haystack), this.fromIndex && t2(this.fromIndex);
        }
        outputDefined() {
          return false;
        }
      }
      class ve2 {
        constructor(t2, e2, r2, n2, i2, s2) {
          this.inputType = t2, this.type = e2, this.input = r2, this.cases = n2, this.outputs = i2, this.otherwise = s2;
        }
        static parse(t2, e2) {
          if (t2.length < 5) return e2.error(`Expected at least 4 arguments, but found only ${t2.length - 1}.`);
          if (t2.length % 2 != 1) return e2.error("Expected an even number of arguments.");
          let r2, n2;
          e2.expectedType && "value" !== e2.expectedType.kind && (n2 = e2.expectedType);
          const i2 = {}, s2 = [];
          for (let a3 = 2; a3 < t2.length - 1; a3 += 2) {
            let o3 = t2[a3];
            const l2 = t2[a3 + 1];
            Array.isArray(o3) || (o3 = [o3]);
            const u3 = e2.concat(a3);
            if (0 === o3.length) return u3.error("Expected at least one branch label.");
            for (const t3 of o3) {
              if ("number" != typeof t3 && "string" != typeof t3) return u3.error("Branch labels must be numbers or strings.");
              if ("number" == typeof t3 && Math.abs(t3) > Number.MAX_SAFE_INTEGER) return u3.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);
              if ("number" == typeof t3 && Math.floor(t3) !== t3) return u3.error("Numeric branch labels must be integer values.");
              if (r2) {
                if (u3.checkSubtype(r2, ne(t3))) return null;
              } else r2 = ne(t3);
              if (void 0 !== i2[String(t3)]) return u3.error("Branch labels must be unique.");
              i2[String(t3)] = s2.length;
            }
            const c2 = e2.parse(l2, a3, n2);
            if (!c2) return null;
            n2 = n2 || c2.type, s2.push(c2);
          }
          const a2 = e2.parse(t2[1], 1, dt);
          if (!a2) return null;
          const o2 = e2.parse(t2[t2.length - 1], t2.length - 1, n2);
          return o2 ? "value" !== a2.type.kind && e2.concat(1).checkSubtype(r2, a2.type) ? null : new ve2(r2, n2, a2, i2, s2, o2) : null;
        }
        evaluate(t2) {
          const e2 = this.input.evaluate(t2);
          return (ne(e2) === this.inputType && this.outputs[this.cases[e2]] || this.otherwise).evaluate(t2);
        }
        eachChild(t2) {
          t2(this.input), this.outputs.forEach(t2), t2(this.otherwise);
        }
        outputDefined() {
          return this.outputs.every((t2) => t2.outputDefined()) && this.otherwise.outputDefined();
        }
      }
      class be {
        constructor(t2, e2, r2) {
          this.type = t2, this.branches = e2, this.otherwise = r2;
        }
        static parse(t2, e2) {
          if (t2.length < 4) return e2.error(`Expected at least 3 arguments, but found only ${t2.length - 1}.`);
          if (t2.length % 2 != 0) return e2.error("Expected an odd number of arguments.");
          let r2;
          e2.expectedType && "value" !== e2.expectedType.kind && (r2 = e2.expectedType);
          const n2 = [];
          for (let i3 = 1; i3 < t2.length - 1; i3 += 2) {
            const s2 = e2.parse(t2[i3], i3, ht2);
            if (!s2) return null;
            const a2 = e2.parse(t2[i3 + 1], i3 + 1, r2);
            if (!a2) return null;
            n2.push([s2, a2]), r2 = r2 || a2.type;
          }
          const i2 = e2.parse(t2[t2.length - 1], t2.length - 1, r2);
          if (!i2) return null;
          if (!r2) throw new Error("Can't infer output type");
          return new be(r2, n2, i2);
        }
        evaluate(t2) {
          for (const [e2, r2] of this.branches) if (e2.evaluate(t2)) return r2.evaluate(t2);
          return this.otherwise.evaluate(t2);
        }
        eachChild(t2) {
          for (const [e2, r2] of this.branches) t2(e2), t2(r2);
          t2(this.otherwise);
        }
        outputDefined() {
          return this.branches.every(([t2, e2]) => e2.outputDefined()) && this.otherwise.outputDefined();
        }
      }
      class we2 {
        constructor(t2, e2, r2, n2) {
          this.type = t2, this.input = e2, this.beginIndex = r2, this.endIndex = n2;
        }
        static parse(t2, e2) {
          if (t2.length <= 2 || t2.length >= 5) return e2.error(`Expected 3 or 4 arguments, but found ${t2.length - 1} instead.`);
          const r2 = e2.parse(t2[1], 1, dt), n2 = e2.parse(t2[2], 2, ut);
          if (!r2 || !n2) return null;
          if (!St(r2.type, [bt(dt), ct2, dt])) return e2.error(`Expected first argument to be of type array or string, but found ${wt2(r2.type)} instead`);
          if (4 === t2.length) {
            const i2 = e2.parse(t2[3], 3, ut);
            return i2 ? new we2(r2.type, r2, n2, i2) : null;
          }
          return new we2(r2.type, r2, n2);
        }
        evaluate(t2) {
          const e2 = this.input.evaluate(t2), r2 = this.beginIndex.evaluate(t2);
          let n2;
          if (this.endIndex && (n2 = this.endIndex.evaluate(t2)), kt(e2, ["string"])) return [...e2].slice(r2, n2).join("");
          if (kt(e2, ["array"])) return e2.slice(r2, n2);
          throw new ae2(`Expected first argument to be of type array or string, but found ${wt2(ne(e2))} instead.`);
        }
        eachChild(t2) {
          t2(this.input), t2(this.beginIndex), this.endIndex && t2(this.endIndex);
        }
        outputDefined() {
          return false;
        }
      }
      function _e(t2, e2) {
        const r2 = t2.length - 1;
        let n2, i2, s2 = 0, a2 = r2, o2 = 0;
        for (; s2 <= a2; ) if (o2 = Math.floor((s2 + a2) / 2), n2 = t2[o2], i2 = t2[o2 + 1], n2 <= e2) {
          if (o2 === r2 || e2 < i2) return o2;
          s2 = o2 + 1;
        } else {
          if (!(n2 > e2)) throw new ae2("Input is not a number.");
          a2 = o2 - 1;
        }
        return 0;
      }
      class Ae2 {
        constructor(t2, e2, r2) {
          this.type = t2, this.input = e2, this.labels = [], this.outputs = [];
          for (const [t3, e3] of r2) this.labels.push(t3), this.outputs.push(e3);
        }
        static parse(t2, e2) {
          if (t2.length - 1 < 4) return e2.error(`Expected at least 4 arguments, but found only ${t2.length - 1}.`);
          if ((t2.length - 1) % 2 != 0) return e2.error("Expected an even number of arguments.");
          const r2 = e2.parse(t2[1], 1, ut);
          if (!r2) return null;
          const n2 = [];
          let i2 = null;
          e2.expectedType && "value" !== e2.expectedType.kind && (i2 = e2.expectedType);
          for (let r3 = 1; r3 < t2.length; r3 += 2) {
            const s2 = 1 === r3 ? -1 / 0 : t2[r3], a2 = t2[r3 + 1], o2 = r3, l2 = r3 + 1;
            if ("number" != typeof s2) return e2.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.', o2);
            if (n2.length && n2[n2.length - 1][0] >= s2) return e2.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.', o2);
            const u3 = e2.parse(a2, l2, i2);
            if (!u3) return null;
            i2 = i2 || u3.type, n2.push([s2, u3]);
          }
          return new Ae2(i2, r2, n2);
        }
        evaluate(t2) {
          const e2 = this.labels, r2 = this.outputs;
          if (1 === e2.length) return r2[0].evaluate(t2);
          const n2 = this.input.evaluate(t2);
          if (n2 <= e2[0]) return r2[0].evaluate(t2);
          const i2 = e2.length;
          return n2 >= e2[i2 - 1] ? r2[i2 - 1].evaluate(t2) : r2[_e(e2, n2)].evaluate(t2);
        }
        eachChild(t2) {
          t2(this.input);
          for (const e2 of this.outputs) t2(e2);
        }
        outputDefined() {
          return this.outputs.every((t2) => t2.outputDefined());
        }
      }
      function Se2(t2) {
        return t2 && t2.__esModule && Object.prototype.hasOwnProperty.call(t2, "default") ? t2.default : t2;
      }
      var ke = Me2;
      function Me2(t2, e2, r2, n2) {
        this.cx = 3 * t2, this.bx = 3 * (r2 - t2) - this.cx, this.ax = 1 - this.cx - this.bx, this.cy = 3 * e2, this.by = 3 * (n2 - e2) - this.cy, this.ay = 1 - this.cy - this.by, this.p1x = t2, this.p1y = e2, this.p2x = r2, this.p2y = n2;
      }
      Me2.prototype = { sampleCurveX: function(t2) {
        return ((this.ax * t2 + this.bx) * t2 + this.cx) * t2;
      }, sampleCurveY: function(t2) {
        return ((this.ay * t2 + this.by) * t2 + this.cy) * t2;
      }, sampleCurveDerivativeX: function(t2) {
        return (3 * this.ax * t2 + 2 * this.bx) * t2 + this.cx;
      }, solveCurveX: function(t2, e2) {
        if (void 0 === e2 && (e2 = 1e-6), t2 < 0) return 0;
        if (t2 > 1) return 1;
        for (var r2 = t2, n2 = 0; n2 < 8; n2++) {
          var i2 = this.sampleCurveX(r2) - t2;
          if (Math.abs(i2) < e2) return r2;
          var s2 = this.sampleCurveDerivativeX(r2);
          if (Math.abs(s2) < 1e-6) break;
          r2 -= i2 / s2;
        }
        var a2 = 0, o2 = 1;
        for (r2 = t2, n2 = 0; n2 < 20 && (i2 = this.sampleCurveX(r2), !(Math.abs(i2 - t2) < e2)); n2++) t2 > i2 ? a2 = r2 : o2 = r2, r2 = 0.5 * (o2 - a2) + a2;
        return r2;
      }, solve: function(t2, e2) {
        return this.sampleCurveY(this.solveCurveX(t2, e2));
      } };
      var Ie2 = Se2(ke);
      function ze2(t2, e2, r2) {
        return t2 + r2 * (e2 - t2);
      }
      function Pe2(t2, e2, r2) {
        return t2.map((t3, n2) => ze2(t3, e2[n2], r2));
      }
      const Ce2 = { number: ze2, color: function(t2, e2, r2, n2 = "rgb") {
        switch (n2) {
          case "rgb": {
            const [n3, i2, s2, a2] = Pe2(t2.rgb, e2.rgb, r2);
            return new Kt(n3, i2, s2, a2, false);
          }
          case "hcl": {
            const [n3, i2, s2, a2] = t2.hcl, [o2, l2, u3, c2] = e2.hcl;
            let h2, p3;
            if (isNaN(n3) || isNaN(o2)) isNaN(n3) ? isNaN(o2) ? h2 = NaN : (h2 = o2, 1 !== s2 && 0 !== s2 || (p3 = l2)) : (h2 = n3, 1 !== u3 && 0 !== u3 || (p3 = i2));
            else {
              let t3 = o2 - n3;
              o2 > n3 && t3 > 180 ? t3 -= 360 : o2 < n3 && n3 - o2 > 180 && (t3 += 360), h2 = n3 + r2 * t3;
            }
            const [f2, d2, y2, m2] = function([t3, e3, r3, n4]) {
              return t3 = isNaN(t3) ? 0 : t3 * Et, Ot([r3, Math.cos(t3) * e3, Math.sin(t3) * e3, n4]);
            }([h2, null != p3 ? p3 : ze2(i2, l2, r2), ze2(s2, u3, r2), ze2(a2, c2, r2)]);
            return new Kt(f2, d2, y2, m2, false);
          }
          case "lab": {
            const [n3, i2, s2, a2] = Ot(Pe2(t2.lab, e2.lab, r2));
            return new Kt(n3, i2, s2, a2, false);
          }
        }
      }, array: Pe2, padding: function(t2, e2, r2) {
        return new Jt(Pe2(t2.values, e2.values, r2));
      }, variableAnchorOffsetCollection: function(t2, e2, r2) {
        const n2 = t2.values, i2 = e2.values;
        if (n2.length !== i2.length) throw new ae2(`Cannot interpolate values of different length. from: ${t2.toString()}, to: ${e2.toString()}`);
        const s2 = [];
        for (let t3 = 0; t3 < n2.length; t3 += 2) {
          if (n2[t3] !== i2[t3]) throw new ae2(`Cannot interpolate values containing mismatched anchors. from[${t3}]: ${n2[t3]}, to[${t3}]: ${i2[t3]}`);
          s2.push(n2[t3]);
          const [e3, a2] = n2[t3 + 1], [o2, l2] = i2[t3 + 1];
          s2.push([ze2(e3, o2, r2), ze2(a2, l2, r2)]);
        }
        return new Qt(s2);
      } };
      class Be {
        constructor(t2, e2, r2, n2, i2) {
          this.type = t2, this.operator = e2, this.interpolation = r2, this.input = n2, this.labels = [], this.outputs = [];
          for (const [t3, e3] of i2) this.labels.push(t3), this.outputs.push(e3);
        }
        static interpolationFactor(t2, e2, r2, n2) {
          let i2 = 0;
          if ("exponential" === t2.name) i2 = Ve2(e2, t2.base, r2, n2);
          else if ("linear" === t2.name) i2 = Ve2(e2, 1, r2, n2);
          else if ("cubic-bezier" === t2.name) {
            const s2 = t2.controlPoints;
            i2 = new Ie2(s2[0], s2[1], s2[2], s2[3]).solve(Ve2(e2, 1, r2, n2));
          }
          return i2;
        }
        static parse(t2, e2) {
          let [r2, n2, i2, ...s2] = t2;
          if (!Array.isArray(n2) || 0 === n2.length) return e2.error("Expected an interpolation type expression.", 1);
          if ("linear" === n2[0]) n2 = { name: "linear" };
          else if ("exponential" === n2[0]) {
            const t3 = n2[1];
            if ("number" != typeof t3) return e2.error("Exponential interpolation requires a numeric base.", 1, 1);
            n2 = { name: "exponential", base: t3 };
          } else {
            if ("cubic-bezier" !== n2[0]) return e2.error(`Unknown interpolation type ${String(n2[0])}`, 1, 0);
            {
              const t3 = n2.slice(1);
              if (4 !== t3.length || t3.some((t4) => "number" != typeof t4 || t4 < 0 || t4 > 1)) return e2.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.", 1);
              n2 = { name: "cubic-bezier", controlPoints: t3 };
            }
          }
          if (t2.length - 1 < 4) return e2.error(`Expected at least 4 arguments, but found only ${t2.length - 1}.`);
          if ((t2.length - 1) % 2 != 0) return e2.error("Expected an even number of arguments.");
          if (i2 = e2.parse(i2, 2, ut), !i2) return null;
          const a2 = [];
          let o2 = null;
          "interpolate-hcl" === r2 || "interpolate-lab" === r2 ? o2 = pt2 : e2.expectedType && "value" !== e2.expectedType.kind && (o2 = e2.expectedType);
          for (let t3 = 0; t3 < s2.length; t3 += 2) {
            const r3 = s2[t3], n3 = s2[t3 + 1], i3 = t3 + 3, l2 = t3 + 4;
            if ("number" != typeof r3) return e2.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.', i3);
            if (a2.length && a2[a2.length - 1][0] >= r3) return e2.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.', i3);
            const u3 = e2.parse(n3, l2, o2);
            if (!u3) return null;
            o2 = o2 || u3.type, a2.push([r3, u3]);
          }
          return Mt(o2, ut) || Mt(o2, pt2) || Mt(o2, gt) || Mt(o2, vt) || Mt(o2, bt(ut)) ? new Be(o2, r2, n2, i2, a2) : e2.error(`Type ${wt2(o2)} is not interpolatable.`);
        }
        evaluate(t2) {
          const e2 = this.labels, r2 = this.outputs;
          if (1 === e2.length) return r2[0].evaluate(t2);
          const n2 = this.input.evaluate(t2);
          if (n2 <= e2[0]) return r2[0].evaluate(t2);
          const i2 = e2.length;
          if (n2 >= e2[i2 - 1]) return r2[i2 - 1].evaluate(t2);
          const s2 = _e(e2, n2), a2 = Be.interpolationFactor(this.interpolation, n2, e2[s2], e2[s2 + 1]), o2 = r2[s2].evaluate(t2), l2 = r2[s2 + 1].evaluate(t2);
          switch (this.operator) {
            case "interpolate":
              return Ce2[this.type.kind](o2, l2, a2);
            case "interpolate-hcl":
              return Ce2.color(o2, l2, a2, "hcl");
            case "interpolate-lab":
              return Ce2.color(o2, l2, a2, "lab");
          }
        }
        eachChild(t2) {
          t2(this.input);
          for (const e2 of this.outputs) t2(e2);
        }
        outputDefined() {
          return this.outputs.every((t2) => t2.outputDefined());
        }
      }
      function Ve2(t2, e2, r2, n2) {
        const i2 = n2 - r2, s2 = t2 - r2;
        return 0 === i2 ? 0 : 1 === e2 ? s2 / i2 : (Math.pow(e2, s2) - 1) / (Math.pow(e2, i2) - 1);
      }
      class Ee2 {
        constructor(t2, e2) {
          this.type = t2, this.args = e2;
        }
        static parse(t2, e2) {
          if (t2.length < 2) return e2.error("Expectected at least one argument.");
          let r2 = null;
          const n2 = e2.expectedType;
          n2 && "value" !== n2.kind && (r2 = n2);
          const i2 = [];
          for (const n3 of t2.slice(1)) {
            const t3 = e2.parse(n3, 1 + i2.length, r2, void 0, { typeAnnotation: "omit" });
            if (!t3) return null;
            r2 = r2 || t3.type, i2.push(t3);
          }
          if (!r2) throw new Error("No output type");
          const s2 = n2 && i2.some((t3) => At(n2, t3.type));
          return new Ee2(s2 ? dt : r2, i2);
        }
        evaluate(t2) {
          let e2, r2 = null, n2 = 0;
          for (const i2 of this.args) if (n2++, r2 = i2.evaluate(t2), r2 && r2 instanceof te2 && !r2.available && (e2 || (e2 = r2.name), r2 = null, n2 === this.args.length && (r2 = e2)), null !== r2) break;
          return r2;
        }
        eachChild(t2) {
          this.args.forEach(t2);
        }
        outputDefined() {
          return this.args.every((t2) => t2.outputDefined());
        }
      }
      function Fe(t2, e2) {
        return "==" === t2 || "!=" === t2 ? "boolean" === e2.kind || "string" === e2.kind || "number" === e2.kind || "null" === e2.kind || "value" === e2.kind : "string" === e2.kind || "number" === e2.kind || "value" === e2.kind;
      }
      function Te2(t2, e2, r2, n2) {
        return 0 === n2.compare(e2, r2);
      }
      function $e2(t2, e2, r2) {
        const n2 = "==" !== t2 && "!=" !== t2;
        return class i2 {
          constructor(t3, e3, r3) {
            this.type = ht2, this.lhs = t3, this.rhs = e3, this.collator = r3, this.hasUntypedArgument = "value" === t3.type.kind || "value" === e3.type.kind;
          }
          static parse(t3, e3) {
            if (3 !== t3.length && 4 !== t3.length) return e3.error("Expected two or three arguments.");
            const r3 = t3[0];
            let s2 = e3.parse(t3[1], 1, dt);
            if (!s2) return null;
            if (!Fe(r3, s2.type)) return e3.concat(1).error(`"${r3}" comparisons are not supported for type '${wt2(s2.type)}'.`);
            let a2 = e3.parse(t3[2], 2, dt);
            if (!a2) return null;
            if (!Fe(r3, a2.type)) return e3.concat(2).error(`"${r3}" comparisons are not supported for type '${wt2(a2.type)}'.`);
            if (s2.type.kind !== a2.type.kind && "value" !== s2.type.kind && "value" !== a2.type.kind) return e3.error(`Cannot compare types '${wt2(s2.type)}' and '${wt2(a2.type)}'.`);
            n2 && ("value" === s2.type.kind && "value" !== a2.type.kind ? s2 = new le2(a2.type, [s2]) : "value" !== s2.type.kind && "value" === a2.type.kind && (a2 = new le2(s2.type, [a2])));
            let o2 = null;
            if (4 === t3.length) {
              if ("string" !== s2.type.kind && "string" !== a2.type.kind && "value" !== s2.type.kind && "value" !== a2.type.kind) return e3.error("Cannot use collator to compare non-string types.");
              if (o2 = e3.parse(t3[3], 3, yt), !o2) return null;
            }
            return new i2(s2, a2, o2);
          }
          evaluate(i3) {
            const s2 = this.lhs.evaluate(i3), a2 = this.rhs.evaluate(i3);
            if (n2 && this.hasUntypedArgument) {
              const e3 = ne(s2), r3 = ne(a2);
              if (e3.kind !== r3.kind || "string" !== e3.kind && "number" !== e3.kind) throw new ae2(`Expected arguments for "${t2}" to be (string, string) or (number, number), but found (${e3.kind}, ${r3.kind}) instead.`);
            }
            if (this.collator && !n2 && this.hasUntypedArgument) {
              const t3 = ne(s2), r3 = ne(a2);
              if ("string" !== t3.kind || "string" !== r3.kind) return e2(i3, s2, a2);
            }
            return this.collator ? r2(i3, s2, a2, this.collator.evaluate(i3)) : e2(i3, s2, a2);
          }
          eachChild(t3) {
            t3(this.lhs), t3(this.rhs), this.collator && t3(this.collator);
          }
          outputDefined() {
            return true;
          }
        };
      }
      const Le2 = $e2("==", function(t2, e2, r2) {
        return e2 === r2;
      }, Te2), De2 = $e2("!=", function(t2, e2, r2) {
        return e2 !== r2;
      }, function(t2, e2, r2, n2) {
        return !Te2(0, e2, r2, n2);
      }), Oe = $e2("<", function(t2, e2, r2) {
        return e2 < r2;
      }, function(t2, e2, r2, n2) {
        return n2.compare(e2, r2) < 0;
      }), je2 = $e2(">", function(t2, e2, r2) {
        return e2 > r2;
      }, function(t2, e2, r2, n2) {
        return n2.compare(e2, r2) > 0;
      }), Re2 = $e2("<=", function(t2, e2, r2) {
        return e2 <= r2;
      }, function(t2, e2, r2, n2) {
        return n2.compare(e2, r2) <= 0;
      }), Ue2 = $e2(">=", function(t2, e2, r2) {
        return e2 >= r2;
      }, function(t2, e2, r2, n2) {
        return n2.compare(e2, r2) >= 0;
      });
      class qe2 {
        constructor(t2, e2, r2) {
          this.type = yt, this.locale = r2, this.caseSensitive = t2, this.diacriticSensitive = e2;
        }
        static parse(t2, e2) {
          if (2 !== t2.length) return e2.error("Expected one argument.");
          const r2 = t2[1];
          if ("object" != typeof r2 || Array.isArray(r2)) return e2.error("Collator options argument must be an object.");
          const n2 = e2.parse(void 0 !== r2["case-sensitive"] && r2["case-sensitive"], 1, ht2);
          if (!n2) return null;
          const i2 = e2.parse(void 0 !== r2["diacritic-sensitive"] && r2["diacritic-sensitive"], 1, ht2);
          if (!i2) return null;
          let s2 = null;
          return r2.locale && (s2 = e2.parse(r2.locale, 1, ct2), !s2) ? null : new qe2(n2, i2, s2);
        }
        evaluate(t2) {
          return new Xt(this.caseSensitive.evaluate(t2), this.diacriticSensitive.evaluate(t2), this.locale ? this.locale.evaluate(t2) : null);
        }
        eachChild(t2) {
          t2(this.caseSensitive), t2(this.diacriticSensitive), this.locale && t2(this.locale);
        }
        outputDefined() {
          return false;
        }
      }
      class Ne2 {
        constructor(t2, e2, r2, n2, i2) {
          this.type = ct2, this.number = t2, this.locale = e2, this.currency = r2, this.minFractionDigits = n2, this.maxFractionDigits = i2;
        }
        static parse(t2, e2) {
          if (3 !== t2.length) return e2.error("Expected two arguments.");
          const r2 = e2.parse(t2[1], 1, ut);
          if (!r2) return null;
          const n2 = t2[2];
          if ("object" != typeof n2 || Array.isArray(n2)) return e2.error("NumberFormat options argument must be an object.");
          let i2 = null;
          if (n2.locale && (i2 = e2.parse(n2.locale, 1, ct2), !i2)) return null;
          let s2 = null;
          if (n2.currency && (s2 = e2.parse(n2.currency, 1, ct2), !s2)) return null;
          let a2 = null;
          if (n2["min-fraction-digits"] && (a2 = e2.parse(n2["min-fraction-digits"], 1, ut), !a2)) return null;
          let o2 = null;
          return n2["max-fraction-digits"] && (o2 = e2.parse(n2["max-fraction-digits"], 1, ut), !o2) ? null : new Ne2(r2, i2, s2, a2, o2);
        }
        evaluate(t2) {
          return new Intl.NumberFormat(this.locale ? this.locale.evaluate(t2) : [], { style: this.currency ? "currency" : "decimal", currency: this.currency ? this.currency.evaluate(t2) : void 0, minimumFractionDigits: this.minFractionDigits ? this.minFractionDigits.evaluate(t2) : void 0, maximumFractionDigits: this.maxFractionDigits ? this.maxFractionDigits.evaluate(t2) : void 0 }).format(this.number.evaluate(t2));
        }
        eachChild(t2) {
          t2(this.number), this.locale && t2(this.locale), this.currency && t2(this.currency), this.minFractionDigits && t2(this.minFractionDigits), this.maxFractionDigits && t2(this.maxFractionDigits);
        }
        outputDefined() {
          return false;
        }
      }
      class Ze2 {
        constructor(t2) {
          this.type = mt, this.sections = t2;
        }
        static parse(t2, e2) {
          if (t2.length < 2) return e2.error("Expected at least one argument.");
          const r2 = t2[1];
          if (!Array.isArray(r2) && "object" == typeof r2) return e2.error("First argument must be an image or text section.");
          const n2 = [];
          let i2 = false;
          for (let r3 = 1; r3 <= t2.length - 1; ++r3) {
            const s2 = t2[r3];
            if (i2 && "object" == typeof s2 && !Array.isArray(s2)) {
              i2 = false;
              let t3 = null;
              if (s2["font-scale"] && (t3 = e2.parse(s2["font-scale"], 1, ut), !t3)) return null;
              let r4 = null;
              if (s2["text-font"] && (r4 = e2.parse(s2["text-font"], 1, bt(ct2)), !r4)) return null;
              let a2 = null;
              if (s2["text-color"] && (a2 = e2.parse(s2["text-color"], 1, pt2), !a2)) return null;
              const o2 = n2[n2.length - 1];
              o2.scale = t3, o2.font = r4, o2.textColor = a2;
            } else {
              const s3 = e2.parse(t2[r3], 1, dt);
              if (!s3) return null;
              const a2 = s3.type.kind;
              if ("string" !== a2 && "value" !== a2 && "null" !== a2 && "resolvedImage" !== a2) return e2.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");
              i2 = true, n2.push({ content: s3, scale: null, font: null, textColor: null });
            }
          }
          return new Ze2(n2);
        }
        evaluate(t2) {
          return new Yt(this.sections.map((e2) => {
            const r2 = e2.content.evaluate(t2);
            return ne(r2) === xt ? new Ht("", r2, null, null, null) : new Ht(ie2(r2), null, e2.scale ? e2.scale.evaluate(t2) : null, e2.font ? e2.font.evaluate(t2).join(",") : null, e2.textColor ? e2.textColor.evaluate(t2) : null);
          }));
        }
        eachChild(t2) {
          for (const e2 of this.sections) t2(e2.content), e2.scale && t2(e2.scale), e2.font && t2(e2.font), e2.textColor && t2(e2.textColor);
        }
        outputDefined() {
          return false;
        }
      }
      class Ge {
        constructor(t2) {
          this.type = xt, this.input = t2;
        }
        static parse(t2, e2) {
          if (2 !== t2.length) return e2.error("Expected two arguments.");
          const r2 = e2.parse(t2[1], 1, ct2);
          return r2 ? new Ge(r2) : e2.error("No image name provided.");
        }
        evaluate(t2) {
          const e2 = this.input.evaluate(t2), r2 = te2.fromString(e2);
          return r2 && t2.availableImages && (r2.available = t2.availableImages.indexOf(e2) > -1), r2;
        }
        eachChild(t2) {
          t2(this.input);
        }
        outputDefined() {
          return false;
        }
      }
      class Ke {
        constructor(t2) {
          this.type = ut, this.input = t2;
        }
        static parse(t2, e2) {
          if (2 !== t2.length) return e2.error(`Expected 1 argument, but found ${t2.length - 1} instead.`);
          const r2 = e2.parse(t2[1], 1);
          return r2 ? "array" !== r2.type.kind && "string" !== r2.type.kind && "value" !== r2.type.kind ? e2.error(`Expected argument of type string or array, but found ${wt2(r2.type)} instead.`) : new Ke(r2) : null;
        }
        evaluate(t2) {
          const e2 = this.input.evaluate(t2);
          if ("string" == typeof e2) return [...e2].length;
          if (Array.isArray(e2)) return e2.length;
          throw new ae2(`Expected value to be of type string or array, but found ${wt2(ne(e2))} instead.`);
        }
        eachChild(t2) {
          t2(this.input);
        }
        outputDefined() {
          return false;
        }
      }
      const Xe = 8192;
      function He2(t2, e2) {
        const r2 = (180 + t2[0]) / 360, n2 = (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t2[1] * Math.PI / 360))) / 360, i2 = Math.pow(2, e2.z);
        return [Math.round(r2 * i2 * Xe), Math.round(n2 * i2 * Xe)];
      }
      function Ye2(t2, e2) {
        const r2 = Math.pow(2, e2.z);
        return [(i2 = (t2[0] / Xe + e2.x) / r2, 360 * i2 - 180), (n2 = (t2[1] / Xe + e2.y) / r2, 360 / Math.PI * Math.atan(Math.exp((180 - 360 * n2) * Math.PI / 180)) - 90)];
        var n2, i2;
      }
      function Je2(t2, e2) {
        t2[0] = Math.min(t2[0], e2[0]), t2[1] = Math.min(t2[1], e2[1]), t2[2] = Math.max(t2[2], e2[0]), t2[3] = Math.max(t2[3], e2[1]);
      }
      function We2(t2, e2) {
        return !(t2[0] <= e2[0] || t2[2] >= e2[2] || t2[1] <= e2[1] || t2[3] >= e2[3]);
      }
      function Qe2(t2, e2, r2) {
        const n2 = t2[0] - e2[0], i2 = t2[1] - e2[1], s2 = t2[0] - r2[0], a2 = t2[1] - r2[1];
        return n2 * a2 - s2 * i2 == 0 && n2 * s2 <= 0 && i2 * a2 <= 0;
      }
      function tr(t2, e2, r2, n2) {
        return 0 != (i2 = [n2[0] - r2[0], n2[1] - r2[1]])[0] * (s2 = [e2[0] - t2[0], e2[1] - t2[1]])[1] - i2[1] * s2[0] && !(!ar(t2, e2, r2, n2) || !ar(r2, n2, t2, e2));
        var i2, s2;
      }
      function er(t2, e2, r2) {
        for (const n2 of r2) for (let r3 = 0; r3 < n2.length - 1; ++r3) if (tr(t2, e2, n2[r3], n2[r3 + 1])) return true;
        return false;
      }
      function rr(t2, e2, r2 = false) {
        let n2 = false;
        for (const o2 of e2) for (let e3 = 0; e3 < o2.length - 1; e3++) {
          if (Qe2(t2, o2[e3], o2[e3 + 1])) return r2;
          (s2 = o2[e3])[1] > (i2 = t2)[1] != (a2 = o2[e3 + 1])[1] > i2[1] && i2[0] < (a2[0] - s2[0]) * (i2[1] - s2[1]) / (a2[1] - s2[1]) + s2[0] && (n2 = !n2);
        }
        var i2, s2, a2;
        return n2;
      }
      function nr(t2, e2) {
        for (const r2 of e2) if (rr(t2, r2)) return true;
        return false;
      }
      function ir(t2, e2) {
        for (const r2 of t2) if (!rr(r2, e2)) return false;
        for (let r2 = 0; r2 < t2.length - 1; ++r2) if (er(t2[r2], t2[r2 + 1], e2)) return false;
        return true;
      }
      function sr(t2, e2) {
        for (const r2 of e2) if (ir(t2, r2)) return true;
        return false;
      }
      function ar(t2, e2, r2, n2) {
        const i2 = n2[0] - r2[0], s2 = n2[1] - r2[1], a2 = (t2[0] - r2[0]) * s2 - i2 * (t2[1] - r2[1]), o2 = (e2[0] - r2[0]) * s2 - i2 * (e2[1] - r2[1]);
        return a2 > 0 && o2 < 0 || a2 < 0 && o2 > 0;
      }
      function or(t2, e2, r2) {
        const n2 = [];
        for (let i2 = 0; i2 < t2.length; i2++) {
          const s2 = [];
          for (let n3 = 0; n3 < t2[i2].length; n3++) {
            const a2 = He2(t2[i2][n3], r2);
            Je2(e2, a2), s2.push(a2);
          }
          n2.push(s2);
        }
        return n2;
      }
      function lr(t2, e2, r2) {
        const n2 = [];
        for (let i2 = 0; i2 < t2.length; i2++) {
          const s2 = or(t2[i2], e2, r2);
          n2.push(s2);
        }
        return n2;
      }
      function ur(t2, e2, r2, n2) {
        if (t2[0] < r2[0] || t2[0] > r2[2]) {
          const e3 = 0.5 * n2;
          let i2 = t2[0] - r2[0] > e3 ? -n2 : r2[0] - t2[0] > e3 ? n2 : 0;
          0 === i2 && (i2 = t2[0] - r2[2] > e3 ? -n2 : r2[2] - t2[0] > e3 ? n2 : 0), t2[0] += i2;
        }
        Je2(e2, t2);
      }
      function cr(t2, e2, r2, n2) {
        const i2 = Math.pow(2, n2.z) * Xe, s2 = [n2.x * Xe, n2.y * Xe], a2 = [];
        for (const n3 of t2) for (const t3 of n3) {
          const n4 = [t3.x + s2[0], t3.y + s2[1]];
          ur(n4, e2, r2, i2), a2.push(n4);
        }
        return a2;
      }
      function hr(t2, e2, r2, n2) {
        const i2 = Math.pow(2, n2.z) * Xe, s2 = [n2.x * Xe, n2.y * Xe], a2 = [];
        for (const r3 of t2) {
          const t3 = [];
          for (const n3 of r3) {
            const r4 = [n3.x + s2[0], n3.y + s2[1]];
            Je2(e2, r4), t3.push(r4);
          }
          a2.push(t3);
        }
        if (e2[2] - e2[0] <= i2 / 2) {
          (o2 = e2)[0] = o2[1] = 1 / 0, o2[2] = o2[3] = -1 / 0;
          for (const t3 of a2) for (const n3 of t3) ur(n3, e2, r2, i2);
        }
        var o2;
        return a2;
      }
      class pr {
        constructor(t2, e2) {
          this.type = ht2, this.geojson = t2, this.geometries = e2;
        }
        static parse(t2, e2) {
          if (2 !== t2.length) return e2.error(`'within' expression requires exactly one argument, but found ${t2.length - 1} instead.`);
          if (re(t2[1])) {
            const e3 = t2[1];
            if ("FeatureCollection" === e3.type) {
              const t3 = [];
              for (const r2 of e3.features) {
                const { type: e4, coordinates: n2 } = r2.geometry;
                "Polygon" === e4 && t3.push(n2), "MultiPolygon" === e4 && t3.push(...n2);
              }
              if (t3.length) return new pr(e3, { type: "MultiPolygon", coordinates: t3 });
            } else if ("Feature" === e3.type) {
              const t3 = e3.geometry.type;
              if ("Polygon" === t3 || "MultiPolygon" === t3) return new pr(e3, e3.geometry);
            } else if ("Polygon" === e3.type || "MultiPolygon" === e3.type) return new pr(e3, e3);
          }
          return e2.error("'within' expression requires valid geojson object that contains polygon geometry type.");
        }
        evaluate(t2) {
          if (null != t2.geometry() && null != t2.canonicalID()) {
            if ("Point" === t2.geometryType()) return function(t3, e2) {
              const r2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0], n2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0], i2 = t3.canonicalID();
              if ("Polygon" === e2.type) {
                const s2 = or(e2.coordinates, n2, i2), a2 = cr(t3.geometry(), r2, n2, i2);
                if (!We2(r2, n2)) return false;
                for (const t4 of a2) if (!rr(t4, s2)) return false;
              }
              if ("MultiPolygon" === e2.type) {
                const s2 = lr(e2.coordinates, n2, i2), a2 = cr(t3.geometry(), r2, n2, i2);
                if (!We2(r2, n2)) return false;
                for (const t4 of a2) if (!nr(t4, s2)) return false;
              }
              return true;
            }(t2, this.geometries);
            if ("LineString" === t2.geometryType()) return function(t3, e2) {
              const r2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0], n2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0], i2 = t3.canonicalID();
              if ("Polygon" === e2.type) {
                const s2 = or(e2.coordinates, n2, i2), a2 = hr(t3.geometry(), r2, n2, i2);
                if (!We2(r2, n2)) return false;
                for (const t4 of a2) if (!ir(t4, s2)) return false;
              }
              if ("MultiPolygon" === e2.type) {
                const s2 = lr(e2.coordinates, n2, i2), a2 = hr(t3.geometry(), r2, n2, i2);
                if (!We2(r2, n2)) return false;
                for (const t4 of a2) if (!sr(t4, s2)) return false;
              }
              return true;
            }(t2, this.geometries);
          }
          return false;
        }
        eachChild() {
        }
        outputDefined() {
          return true;
        }
      }
      let fr = class {
        constructor(t2 = [], e2 = (t3, e3) => t3 < e3 ? -1 : t3 > e3 ? 1 : 0) {
          if (this.data = t2, this.length = this.data.length, this.compare = e2, this.length > 0) for (let t3 = (this.length >> 1) - 1; t3 >= 0; t3--) this._down(t3);
        }
        push(t2) {
          this.data.push(t2), this._up(this.length++);
        }
        pop() {
          if (0 === this.length) return;
          const t2 = this.data[0], e2 = this.data.pop();
          return --this.length > 0 && (this.data[0] = e2, this._down(0)), t2;
        }
        peek() {
          return this.data[0];
        }
        _up(t2) {
          const { data: e2, compare: r2 } = this, n2 = e2[t2];
          for (; t2 > 0; ) {
            const i2 = t2 - 1 >> 1, s2 = e2[i2];
            if (r2(n2, s2) >= 0) break;
            e2[t2] = s2, t2 = i2;
          }
          e2[t2] = n2;
        }
        _down(t2) {
          const { data: e2, compare: r2 } = this, n2 = this.length >> 1, i2 = e2[t2];
          for (; t2 < n2; ) {
            let n3 = 1 + (t2 << 1);
            const s2 = n3 + 1;
            if (s2 < this.length && r2(e2[s2], e2[n3]) < 0 && (n3 = s2), r2(e2[n3], i2) >= 0) break;
            e2[t2] = e2[n3], t2 = n3;
          }
          e2[t2] = i2;
        }
      };
      function dr(t2, e2, r2, n2, i2) {
        yr(t2, e2, r2, n2 || t2.length - 1, i2 || gr);
      }
      function yr(t2, e2, r2, n2, i2) {
        for (; n2 > r2; ) {
          if (n2 - r2 > 600) {
            var s2 = n2 - r2 + 1, a2 = e2 - r2 + 1, o2 = Math.log(s2), l2 = 0.5 * Math.exp(2 * o2 / 3), u3 = 0.5 * Math.sqrt(o2 * l2 * (s2 - l2) / s2) * (a2 - s2 / 2 < 0 ? -1 : 1);
            yr(t2, e2, Math.max(r2, Math.floor(e2 - a2 * l2 / s2 + u3)), Math.min(n2, Math.floor(e2 + (s2 - a2) * l2 / s2 + u3)), i2);
          }
          var c2 = t2[e2], h2 = r2, p3 = n2;
          for (mr(t2, r2, e2), i2(t2[n2], c2) > 0 && mr(t2, r2, n2); h2 < p3; ) {
            for (mr(t2, h2, p3), h2++, p3--; i2(t2[h2], c2) < 0; ) h2++;
            for (; i2(t2[p3], c2) > 0; ) p3--;
          }
          0 === i2(t2[r2], c2) ? mr(t2, r2, p3) : mr(t2, ++p3, n2), p3 <= e2 && (r2 = p3 + 1), e2 <= p3 && (n2 = p3 - 1);
        }
      }
      function mr(t2, e2, r2) {
        var n2 = t2[e2];
        t2[e2] = t2[r2], t2[r2] = n2;
      }
      function gr(t2, e2) {
        return t2 < e2 ? -1 : t2 > e2 ? 1 : 0;
      }
      function xr(t2, e2) {
        if (t2.length <= 1) return [t2];
        const r2 = [];
        let n2, i2;
        for (const e3 of t2) {
          const t3 = br(e3);
          0 !== t3 && (e3.area = Math.abs(t3), void 0 === i2 && (i2 = t3 < 0), i2 === t3 < 0 ? (n2 && r2.push(n2), n2 = [e3]) : n2.push(e3));
        }
        if (n2 && r2.push(n2), e2 > 1) for (let t3 = 0; t3 < r2.length; t3++) r2[t3].length <= e2 || (dr(r2[t3], e2, 1, r2[t3].length - 1, vr), r2[t3] = r2[t3].slice(0, e2));
        return r2;
      }
      function vr(t2, e2) {
        return e2.area - t2.area;
      }
      function br(t2) {
        let e2 = 0;
        for (let r2, n2, i2 = 0, s2 = t2.length, a2 = s2 - 1; i2 < s2; a2 = i2++) r2 = t2[i2], n2 = t2[a2], e2 += (n2.x - r2.x) * (r2.y + n2.y);
        return e2;
      }
      const wr = 1 / 298.257223563, _r = wr * (2 - wr), Ar = Math.PI / 180;
      class Sr {
        constructor(t2) {
          const e2 = 6378.137 * Ar * 1e3, r2 = Math.cos(t2 * Ar), n2 = 1 / (1 - _r * (1 - r2 * r2)), i2 = Math.sqrt(n2);
          this.kx = e2 * i2 * r2, this.ky = e2 * i2 * n2 * (1 - _r);
        }
        distance(t2, e2) {
          const r2 = this.wrap(t2[0] - e2[0]) * this.kx, n2 = (t2[1] - e2[1]) * this.ky;
          return Math.sqrt(r2 * r2 + n2 * n2);
        }
        pointOnLine(t2, e2) {
          let r2, n2, i2, s2, a2 = 1 / 0;
          for (let o2 = 0; o2 < t2.length - 1; o2++) {
            let l2 = t2[o2][0], u3 = t2[o2][1], c2 = this.wrap(t2[o2 + 1][0] - l2) * this.kx, h2 = (t2[o2 + 1][1] - u3) * this.ky, p3 = 0;
            0 === c2 && 0 === h2 || (p3 = (this.wrap(e2[0] - l2) * this.kx * c2 + (e2[1] - u3) * this.ky * h2) / (c2 * c2 + h2 * h2), p3 > 1 ? (l2 = t2[o2 + 1][0], u3 = t2[o2 + 1][1]) : p3 > 0 && (l2 += c2 / this.kx * p3, u3 += h2 / this.ky * p3)), c2 = this.wrap(e2[0] - l2) * this.kx, h2 = (e2[1] - u3) * this.ky;
            const f2 = c2 * c2 + h2 * h2;
            f2 < a2 && (a2 = f2, r2 = l2, n2 = u3, i2 = o2, s2 = p3);
          }
          return { point: [r2, n2], index: i2, t: Math.max(0, Math.min(1, s2)) };
        }
        wrap(t2) {
          for (; t2 < -180; ) t2 += 360;
          for (; t2 > 180; ) t2 -= 360;
          return t2;
        }
      }
      function kr(t2, e2) {
        return e2[0] - t2[0];
      }
      function Mr(t2) {
        return t2[1] - t2[0] + 1;
      }
      function Ir(t2, e2) {
        return t2[1] >= t2[0] && t2[1] < e2;
      }
      function zr(t2, e2) {
        if (t2[0] > t2[1]) return [null, null];
        const r2 = Mr(t2);
        if (e2) {
          if (2 === r2) return [t2, null];
          const e3 = Math.floor(r2 / 2);
          return [[t2[0], t2[0] + e3], [t2[0] + e3, t2[1]]];
        }
        if (1 === r2) return [t2, null];
        const n2 = Math.floor(r2 / 2) - 1;
        return [[t2[0], t2[0] + n2], [t2[0] + n2 + 1, t2[1]]];
      }
      function Pr(t2, e2) {
        if (!Ir(e2, t2.length)) return [1 / 0, 1 / 0, -1 / 0, -1 / 0];
        const r2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0];
        for (let n2 = e2[0]; n2 <= e2[1]; ++n2) Je2(r2, t2[n2]);
        return r2;
      }
      function Cr(t2) {
        const e2 = [1 / 0, 1 / 0, -1 / 0, -1 / 0];
        for (const r2 of t2) for (const t3 of r2) Je2(e2, t3);
        return e2;
      }
      function Br(t2) {
        return t2[0] !== -1 / 0 && t2[1] !== -1 / 0 && t2[2] !== 1 / 0 && t2[3] !== 1 / 0;
      }
      function Vr(t2, e2, r2) {
        if (!Br(t2) || !Br(e2)) return NaN;
        let n2 = 0, i2 = 0;
        return t2[2] < e2[0] && (n2 = e2[0] - t2[2]), t2[0] > e2[2] && (n2 = t2[0] - e2[2]), t2[1] > e2[3] && (i2 = t2[1] - e2[3]), t2[3] < e2[1] && (i2 = e2[1] - t2[3]), r2.distance([0, 0], [n2, i2]);
      }
      function Er(t2, e2, r2) {
        const n2 = r2.pointOnLine(e2, t2);
        return r2.distance(t2, n2.point);
      }
      function Fr(t2, e2, r2, n2, i2) {
        const s2 = Math.min(Er(t2, [r2, n2], i2), Er(e2, [r2, n2], i2)), a2 = Math.min(Er(r2, [t2, e2], i2), Er(n2, [t2, e2], i2));
        return Math.min(s2, a2);
      }
      function Tr(t2, e2, r2, n2, i2) {
        if (!Ir(e2, t2.length) || !Ir(n2, r2.length)) return 1 / 0;
        let s2 = 1 / 0;
        for (let a2 = e2[0]; a2 < e2[1]; ++a2) {
          const e3 = t2[a2], o2 = t2[a2 + 1];
          for (let t3 = n2[0]; t3 < n2[1]; ++t3) {
            const n3 = r2[t3], a3 = r2[t3 + 1];
            if (tr(e3, o2, n3, a3)) return 0;
            s2 = Math.min(s2, Fr(e3, o2, n3, a3, i2));
          }
        }
        return s2;
      }
      function $r(t2, e2, r2, n2, i2) {
        if (!Ir(e2, t2.length) || !Ir(n2, r2.length)) return NaN;
        let s2 = 1 / 0;
        for (let a2 = e2[0]; a2 <= e2[1]; ++a2) for (let e3 = n2[0]; e3 <= n2[1]; ++e3) if (s2 = Math.min(s2, i2.distance(t2[a2], r2[e3])), 0 === s2) return s2;
        return s2;
      }
      function Lr(t2, e2, r2) {
        if (rr(t2, e2, true)) return 0;
        let n2 = 1 / 0;
        for (const i2 of e2) {
          const e3 = i2[0], s2 = i2[i2.length - 1];
          if (e3 !== s2 && (n2 = Math.min(n2, Er(t2, [s2, e3], r2)), 0 === n2)) return n2;
          const a2 = r2.pointOnLine(i2, t2);
          if (n2 = Math.min(n2, r2.distance(t2, a2.point)), 0 === n2) return n2;
        }
        return n2;
      }
      function Dr(t2, e2, r2, n2) {
        if (!Ir(e2, t2.length)) return NaN;
        for (let n3 = e2[0]; n3 <= e2[1]; ++n3) if (rr(t2[n3], r2, true)) return 0;
        let i2 = 1 / 0;
        for (let s2 = e2[0]; s2 < e2[1]; ++s2) {
          const e3 = t2[s2], a2 = t2[s2 + 1];
          for (const t3 of r2) for (let r3 = 0, s3 = t3.length, o2 = s3 - 1; r3 < s3; o2 = r3++) {
            const s4 = t3[o2], l2 = t3[r3];
            if (tr(e3, a2, s4, l2)) return 0;
            i2 = Math.min(i2, Fr(e3, a2, s4, l2, n2));
          }
        }
        return i2;
      }
      function Or(t2, e2) {
        for (const r2 of t2) for (const t3 of r2) if (rr(t3, e2, true)) return true;
        return false;
      }
      function jr(t2, e2, r2, n2 = 1 / 0) {
        const i2 = Cr(t2), s2 = Cr(e2);
        if (n2 !== 1 / 0 && Vr(i2, s2, r2) >= n2) return n2;
        if (We2(i2, s2)) {
          if (Or(t2, e2)) return 0;
        } else if (Or(e2, t2)) return 0;
        let a2 = 1 / 0;
        for (const n3 of t2) for (let t3 = 0, i3 = n3.length, s3 = i3 - 1; t3 < i3; s3 = t3++) {
          const i4 = n3[s3], o2 = n3[t3];
          for (const t4 of e2) for (let e3 = 0, n4 = t4.length, s4 = n4 - 1; e3 < n4; s4 = e3++) {
            const n5 = t4[s4], l2 = t4[e3];
            if (tr(i4, o2, n5, l2)) return 0;
            a2 = Math.min(a2, Fr(i4, o2, n5, l2, r2));
          }
        }
        return a2;
      }
      function Rr(t2, e2, r2, n2, i2, s2) {
        if (!s2) return;
        const a2 = Vr(Pr(n2, s2), i2, r2);
        a2 < e2 && t2.push([a2, s2, [0, 0]]);
      }
      function Ur(t2, e2, r2, n2, i2, s2, a2) {
        if (!s2 || !a2) return;
        const o2 = Vr(Pr(n2, s2), Pr(i2, a2), r2);
        o2 < e2 && t2.push([o2, s2, a2]);
      }
      function qr(t2, e2, r2, n2, i2 = 1 / 0) {
        let s2 = Math.min(n2.distance(t2[0], r2[0][0]), i2);
        if (0 === s2) return s2;
        const a2 = new fr([[0, [0, t2.length - 1], [0, 0]]], kr), o2 = Cr(r2);
        for (; a2.length > 0; ) {
          const i3 = a2.pop();
          if (i3[0] >= s2) continue;
          const l2 = i3[1], u3 = e2 ? 50 : 100;
          if (Mr(l2) <= u3) {
            if (!Ir(l2, t2.length)) return NaN;
            if (e2) {
              const e3 = Dr(t2, l2, r2, n2);
              if (isNaN(e3) || 0 === e3) return e3;
              s2 = Math.min(s2, e3);
            } else for (let e3 = l2[0]; e3 <= l2[1]; ++e3) {
              const i4 = Lr(t2[e3], r2, n2);
              if (s2 = Math.min(s2, i4), 0 === s2) return 0;
            }
          } else {
            const r3 = zr(l2, e2);
            Rr(a2, s2, n2, t2, o2, r3[0]), Rr(a2, s2, n2, t2, o2, r3[1]);
          }
        }
        return s2;
      }
      function Nr(t2, e2, r2, n2, i2, s2 = 1 / 0) {
        let a2 = Math.min(s2, i2.distance(t2[0], r2[0]));
        if (0 === a2) return a2;
        const o2 = new fr([[0, [0, t2.length - 1], [0, r2.length - 1]]], kr);
        for (; o2.length > 0; ) {
          const s3 = o2.pop();
          if (s3[0] >= a2) continue;
          const l2 = s3[1], u3 = s3[2], c2 = e2 ? 50 : 100, h2 = n2 ? 50 : 100;
          if (Mr(l2) <= c2 && Mr(u3) <= h2) {
            if (!Ir(l2, t2.length) && Ir(u3, r2.length)) return NaN;
            let s4;
            if (e2 && n2) s4 = Tr(t2, l2, r2, u3, i2), a2 = Math.min(a2, s4);
            else if (e2 && !n2) {
              const e3 = t2.slice(l2[0], l2[1] + 1);
              for (let t3 = u3[0]; t3 <= u3[1]; ++t3) if (s4 = Er(r2[t3], e3, i2), a2 = Math.min(a2, s4), 0 === a2) return a2;
            } else if (!e2 && n2) {
              const e3 = r2.slice(u3[0], u3[1] + 1);
              for (let r3 = l2[0]; r3 <= l2[1]; ++r3) if (s4 = Er(t2[r3], e3, i2), a2 = Math.min(a2, s4), 0 === a2) return a2;
            } else s4 = $r(t2, l2, r2, u3, i2), a2 = Math.min(a2, s4);
          } else {
            const s4 = zr(l2, e2), c3 = zr(u3, n2);
            Ur(o2, a2, i2, t2, r2, s4[0], c3[0]), Ur(o2, a2, i2, t2, r2, s4[0], c3[1]), Ur(o2, a2, i2, t2, r2, s4[1], c3[0]), Ur(o2, a2, i2, t2, r2, s4[1], c3[1]);
          }
        }
        return a2;
      }
      function Zr(t2) {
        return "MultiPolygon" === t2.type ? t2.coordinates.map((t3) => ({ type: "Polygon", coordinates: t3 })) : "MultiLineString" === t2.type ? t2.coordinates.map((t3) => ({ type: "LineString", coordinates: t3 })) : "MultiPoint" === t2.type ? t2.coordinates.map((t3) => ({ type: "Point", coordinates: t3 })) : [t2];
      }
      class Gr {
        constructor(t2, e2) {
          this.type = ut, this.geojson = t2, this.geometries = e2;
        }
        static parse(t2, e2) {
          if (2 !== t2.length) return e2.error(`'distance' expression requires exactly one argument, but found ${t2.length - 1} instead.`);
          if (re(t2[1])) {
            const e3 = t2[1];
            if ("FeatureCollection" === e3.type) return new Gr(e3, e3.features.map((t3) => Zr(t3.geometry)).flat());
            if ("Feature" === e3.type) return new Gr(e3, Zr(e3.geometry));
            if ("type" in e3 && "coordinates" in e3) return new Gr(e3, Zr(e3));
          }
          return e2.error("'distance' expression requires valid geojson object that contains polygon geometry type.");
        }
        evaluate(t2) {
          if (null != t2.geometry() && null != t2.canonicalID()) {
            if ("Point" === t2.geometryType()) return function(t3, e2) {
              const r2 = t3.geometry(), n2 = r2.flat().map((e3) => Ye2([e3.x, e3.y], t3.canonical));
              if (0 === r2.length) return NaN;
              const i2 = new Sr(n2[0][1]);
              let s2 = 1 / 0;
              for (const t4 of e2) {
                switch (t4.type) {
                  case "Point":
                    s2 = Math.min(s2, Nr(n2, false, [t4.coordinates], false, i2, s2));
                    break;
                  case "LineString":
                    s2 = Math.min(s2, Nr(n2, false, t4.coordinates, true, i2, s2));
                    break;
                  case "Polygon":
                    s2 = Math.min(s2, qr(n2, false, t4.coordinates, i2, s2));
                }
                if (0 === s2) return s2;
              }
              return s2;
            }(t2, this.geometries);
            if ("LineString" === t2.geometryType()) return function(t3, e2) {
              const r2 = t3.geometry(), n2 = r2.flat().map((e3) => Ye2([e3.x, e3.y], t3.canonical));
              if (0 === r2.length) return NaN;
              const i2 = new Sr(n2[0][1]);
              let s2 = 1 / 0;
              for (const t4 of e2) {
                switch (t4.type) {
                  case "Point":
                    s2 = Math.min(s2, Nr(n2, true, [t4.coordinates], false, i2, s2));
                    break;
                  case "LineString":
                    s2 = Math.min(s2, Nr(n2, true, t4.coordinates, true, i2, s2));
                    break;
                  case "Polygon":
                    s2 = Math.min(s2, qr(n2, true, t4.coordinates, i2, s2));
                }
                if (0 === s2) return s2;
              }
              return s2;
            }(t2, this.geometries);
            if ("Polygon" === t2.geometryType()) return function(t3, e2) {
              const r2 = t3.geometry();
              if (0 === r2.length || 0 === r2[0].length) return NaN;
              const n2 = xr(r2, 0).map((e3) => e3.map((e4) => e4.map((e5) => Ye2([e5.x, e5.y], t3.canonical)))), i2 = new Sr(n2[0][0][0][1]);
              let s2 = 1 / 0;
              for (const t4 of e2) for (const e3 of n2) {
                switch (t4.type) {
                  case "Point":
                    s2 = Math.min(s2, qr([t4.coordinates], false, e3, i2, s2));
                    break;
                  case "LineString":
                    s2 = Math.min(s2, qr(t4.coordinates, true, e3, i2, s2));
                    break;
                  case "Polygon":
                    s2 = Math.min(s2, jr(e3, t4.coordinates, i2, s2));
                }
                if (0 === s2) return s2;
              }
              return s2;
            }(t2, this.geometries);
          }
          return NaN;
        }
        eachChild() {
        }
        outputDefined() {
          return true;
        }
      }
      const Kr = { "==": Le2, "!=": De2, ">": je2, "<": Oe, ">=": Ue2, "<=": Re2, array: le2, at: me2, boolean: le2, case: be, coalesce: Ee2, collator: qe2, format: Ze2, image: Ge, in: ge2, "index-of": xe2, interpolate: Be, "interpolate-hcl": Be, "interpolate-lab": Be, length: Ke, let: de2, literal: se, match: ve2, number: le2, "number-format": Ne2, object: le2, slice: we2, step: Ae2, string: le2, "to-boolean": ce2, "to-color": ce2, "to-number": ce2, "to-string": ce2, var: ye, within: pr, distance: Gr };
      class Xr {
        constructor(t2, e2, r2, n2) {
          this.name = t2, this.type = e2, this._evaluate = r2, this.args = n2;
        }
        evaluate(t2) {
          return this._evaluate(t2, this.args);
        }
        eachChild(t2) {
          this.args.forEach(t2);
        }
        outputDefined() {
          return false;
        }
        static parse(t2, e2) {
          const r2 = t2[0], n2 = Xr.definitions[r2];
          if (!n2) return e2.error(`Unknown expression "${r2}". If you wanted a literal array, use ["literal", [...]].`, 0);
          const i2 = Array.isArray(n2) ? n2[0] : n2.type, s2 = Array.isArray(n2) ? [[n2[1], n2[2]]] : n2.overloads, a2 = s2.filter(([e3]) => !Array.isArray(e3) || e3.length === t2.length - 1);
          let o2 = null;
          for (const [n3, s3] of a2) {
            o2 = new fe2(e2.registry, Qr, e2.path, null, e2.scope);
            const a3 = [];
            let l2 = false;
            for (let e3 = 1; e3 < t2.length; e3++) {
              const r3 = t2[e3], i3 = Array.isArray(n3) ? n3[e3 - 1] : n3.type, s4 = o2.parse(r3, 1 + a3.length, i3);
              if (!s4) {
                l2 = true;
                break;
              }
              a3.push(s4);
            }
            if (!l2) if (Array.isArray(n3) && n3.length !== a3.length) o2.error(`Expected ${n3.length} arguments, but found ${a3.length} instead.`);
            else {
              for (let t3 = 0; t3 < a3.length; t3++) {
                const e3 = Array.isArray(n3) ? n3[t3] : n3.type, r3 = a3[t3];
                o2.concat(t3 + 1).checkSubtype(e3, r3.type);
              }
              if (0 === o2.errors.length) return new Xr(r2, i2, s3, a3);
            }
          }
          if (1 === a2.length) e2.errors.push(...o2.errors);
          else {
            const r3 = (a2.length ? a2 : s2).map(([t3]) => {
              return e3 = t3, Array.isArray(e3) ? `(${e3.map(wt2).join(", ")})` : `(${wt2(e3.type)}...)`;
              var e3;
            }).join(" | "), n3 = [];
            for (let r4 = 1; r4 < t2.length; r4++) {
              const i3 = e2.parse(t2[r4], 1 + n3.length);
              if (!i3) return null;
              n3.push(wt2(i3.type));
            }
            e2.error(`Expected arguments of type ${r3}, but found (${n3.join(", ")}) instead.`);
          }
          return null;
        }
        static register(t2, e2) {
          Xr.definitions = e2;
          for (const r2 in e2) t2[r2] = Xr;
        }
      }
      function Hr(t2, [e2, r2, n2, i2]) {
        e2 = e2.evaluate(t2), r2 = r2.evaluate(t2), n2 = n2.evaluate(t2);
        const s2 = i2 ? i2.evaluate(t2) : 1, a2 = ee2(e2, r2, n2, s2);
        if (a2) throw new ae2(a2);
        return new Kt(e2 / 255, r2 / 255, n2 / 255, s2, false);
      }
      function Yr(t2, e2) {
        return t2 in e2;
      }
      function Jr(t2, e2) {
        const r2 = e2[t2];
        return void 0 === r2 ? null : r2;
      }
      function Wr(t2) {
        return { type: t2 };
      }
      function Qr(t2) {
        if (t2 instanceof ye) return Qr(t2.boundExpression);
        if (t2 instanceof Xr && "error" === t2.name) return false;
        if (t2 instanceof qe2) return false;
        if (t2 instanceof pr) return false;
        if (t2 instanceof Gr) return false;
        const e2 = t2 instanceof ce2 || t2 instanceof le2;
        let r2 = true;
        return t2.eachChild((t3) => {
          r2 = e2 ? r2 && Qr(t3) : r2 && t3 instanceof se;
        }), !!r2 && tn(t2) && rn(t2, ["zoom", "heatmap-density", "line-progress", "accumulated", "is-supported-script"]);
      }
      function tn(t2) {
        if (t2 instanceof Xr) {
          if ("get" === t2.name && 1 === t2.args.length) return false;
          if ("feature-state" === t2.name) return false;
          if ("has" === t2.name && 1 === t2.args.length) return false;
          if ("properties" === t2.name || "geometry-type" === t2.name || "id" === t2.name) return false;
          if (/^filter-/.test(t2.name)) return false;
        }
        if (t2 instanceof pr) return false;
        if (t2 instanceof Gr) return false;
        let e2 = true;
        return t2.eachChild((t3) => {
          e2 && !tn(t3) && (e2 = false);
        }), e2;
      }
      function en(t2) {
        if (t2 instanceof Xr && "feature-state" === t2.name) return false;
        let e2 = true;
        return t2.eachChild((t3) => {
          e2 && !en(t3) && (e2 = false);
        }), e2;
      }
      function rn(t2, e2) {
        if (t2 instanceof Xr && e2.indexOf(t2.name) >= 0) return false;
        let r2 = true;
        return t2.eachChild((t3) => {
          r2 && !rn(t3, e2) && (r2 = false);
        }), r2;
      }
      function nn(t2) {
        return { result: "success", value: t2 };
      }
      function sn(t2) {
        return { result: "error", value: t2 };
      }
      function an(t2) {
        return "data-driven" === t2["property-type"] || "cross-faded-data-driven" === t2["property-type"];
      }
      function on(t2) {
        return !!t2.expression && t2.expression.parameters.indexOf("zoom") > -1;
      }
      function ln(t2) {
        return !!t2.expression && t2.expression.interpolated;
      }
      function un(t2) {
        return t2 instanceof Number ? "number" : t2 instanceof String ? "string" : t2 instanceof Boolean ? "boolean" : Array.isArray(t2) ? "array" : null === t2 ? "null" : typeof t2;
      }
      function cn2(t2) {
        return "object" == typeof t2 && null !== t2 && !Array.isArray(t2);
      }
      function hn(t2) {
        return t2;
      }
      function pn(t2, e2) {
        const r2 = "color" === e2.type, n2 = t2.stops && "object" == typeof t2.stops[0][0], i2 = n2 || !(n2 || void 0 !== t2.property), s2 = t2.type || (ln(e2) ? "exponential" : "interval");
        if (r2 || "padding" === e2.type) {
          const n3 = r2 ? Kt.parse : Jt.parse;
          (t2 = st2({}, t2)).stops && (t2.stops = t2.stops.map((t3) => [t3[0], n3(t3[1])])), t2.default = n3(t2.default ? t2.default : e2.default);
        }
        if (t2.colorSpace && "rgb" !== (a2 = t2.colorSpace) && "hcl" !== a2 && "lab" !== a2) throw new Error(`Unknown color space: "${t2.colorSpace}"`);
        var a2;
        let o2, l2, u3;
        if ("exponential" === s2) o2 = mn;
        else if ("interval" === s2) o2 = yn;
        else if ("categorical" === s2) {
          o2 = dn, l2 = /* @__PURE__ */ Object.create(null);
          for (const e3 of t2.stops) l2[e3[0]] = e3[1];
          u3 = typeof t2.stops[0][0];
        } else {
          if ("identity" !== s2) throw new Error(`Unknown function type "${s2}"`);
          o2 = gn;
        }
        if (n2) {
          const r3 = {}, n3 = [];
          for (let e3 = 0; e3 < t2.stops.length; e3++) {
            const i4 = t2.stops[e3], s4 = i4[0].zoom;
            void 0 === r3[s4] && (r3[s4] = { zoom: s4, type: t2.type, property: t2.property, default: t2.default, stops: [] }, n3.push(s4)), r3[s4].stops.push([i4[0].value, i4[1]]);
          }
          const i3 = [];
          for (const t3 of n3) i3.push([r3[t3].zoom, pn(r3[t3], e2)]);
          const s3 = { name: "linear" };
          return { kind: "composite", interpolationType: s3, interpolationFactor: Be.interpolationFactor.bind(void 0, s3), zoomStops: i3.map((t3) => t3[0]), evaluate: ({ zoom: r4 }, n4) => mn({ stops: i3, base: t2.base }, e2, r4).evaluate(r4, n4) };
        }
        if (i2) {
          const r3 = "exponential" === s2 ? { name: "exponential", base: void 0 !== t2.base ? t2.base : 1 } : null;
          return { kind: "camera", interpolationType: r3, interpolationFactor: Be.interpolationFactor.bind(void 0, r3), zoomStops: t2.stops.map((t3) => t3[0]), evaluate: ({ zoom: r4 }) => o2(t2, e2, r4, l2, u3) };
        }
        return { kind: "source", evaluate(r3, n3) {
          const i3 = n3 && n3.properties ? n3.properties[t2.property] : void 0;
          return void 0 === i3 ? fn(t2.default, e2.default) : o2(t2, e2, i3, l2, u3);
        } };
      }
      function fn(t2, e2, r2) {
        return void 0 !== t2 ? t2 : void 0 !== e2 ? e2 : void 0 !== r2 ? r2 : void 0;
      }
      function dn(t2, e2, r2, n2, i2) {
        return fn(typeof r2 === i2 ? n2[r2] : void 0, t2.default, e2.default);
      }
      function yn(t2, e2, r2) {
        if ("number" !== un(r2)) return fn(t2.default, e2.default);
        const n2 = t2.stops.length;
        if (1 === n2) return t2.stops[0][1];
        if (r2 <= t2.stops[0][0]) return t2.stops[0][1];
        if (r2 >= t2.stops[n2 - 1][0]) return t2.stops[n2 - 1][1];
        const i2 = _e(t2.stops.map((t3) => t3[0]), r2);
        return t2.stops[i2][1];
      }
      function mn(t2, e2, r2) {
        const n2 = void 0 !== t2.base ? t2.base : 1;
        if ("number" !== un(r2)) return fn(t2.default, e2.default);
        const i2 = t2.stops.length;
        if (1 === i2) return t2.stops[0][1];
        if (r2 <= t2.stops[0][0]) return t2.stops[0][1];
        if (r2 >= t2.stops[i2 - 1][0]) return t2.stops[i2 - 1][1];
        const s2 = _e(t2.stops.map((t3) => t3[0]), r2), a2 = function(t3, e3, r3, n3) {
          const i3 = n3 - r3, s3 = t3 - r3;
          return 0 === i3 ? 0 : 1 === e3 ? s3 / i3 : (Math.pow(e3, s3) - 1) / (Math.pow(e3, i3) - 1);
        }(r2, n2, t2.stops[s2][0], t2.stops[s2 + 1][0]), o2 = t2.stops[s2][1], l2 = t2.stops[s2 + 1][1], u3 = Ce2[e2.type] || hn;
        return "function" == typeof o2.evaluate ? { evaluate(...e3) {
          const r3 = o2.evaluate.apply(void 0, e3), n3 = l2.evaluate.apply(void 0, e3);
          if (void 0 !== r3 && void 0 !== n3) return u3(r3, n3, a2, t2.colorSpace);
        } } : u3(o2, l2, a2, t2.colorSpace);
      }
      function gn(t2, e2, r2) {
        switch (e2.type) {
          case "color":
            r2 = Kt.parse(r2);
            break;
          case "formatted":
            r2 = Yt.fromString(r2.toString());
            break;
          case "resolvedImage":
            r2 = te2.fromString(r2.toString());
            break;
          case "padding":
            r2 = Jt.parse(r2);
            break;
          default:
            un(r2) === e2.type || "enum" === e2.type && e2.values[r2] || (r2 = void 0);
        }
        return fn(r2, t2.default, e2.default);
      }
      Xr.register(Kr, { error: [{ kind: "error" }, [ct2], (t2, [e2]) => {
        throw new ae2(e2.evaluate(t2));
      }], typeof: [ct2, [dt], (t2, [e2]) => wt2(ne(e2.evaluate(t2)))], "to-rgba": [bt(ut, 4), [pt2], (t2, [e2]) => {
        const [r2, n2, i2, s2] = e2.evaluate(t2).rgb;
        return [255 * r2, 255 * n2, 255 * i2, s2];
      }], rgb: [pt2, [ut, ut, ut], Hr], rgba: [pt2, [ut, ut, ut, ut], Hr], has: { type: ht2, overloads: [[[ct2], (t2, [e2]) => Yr(e2.evaluate(t2), t2.properties())], [[ct2, ft], (t2, [e2, r2]) => Yr(e2.evaluate(t2), r2.evaluate(t2))]] }, get: { type: dt, overloads: [[[ct2], (t2, [e2]) => Jr(e2.evaluate(t2), t2.properties())], [[ct2, ft], (t2, [e2, r2]) => Jr(e2.evaluate(t2), r2.evaluate(t2))]] }, "feature-state": [dt, [ct2], (t2, [e2]) => Jr(e2.evaluate(t2), t2.featureState || {})], properties: [ft, [], (t2) => t2.properties()], "geometry-type": [ct2, [], (t2) => t2.geometryType()], id: [dt, [], (t2) => t2.id()], zoom: [ut, [], (t2) => t2.globals.zoom], "heatmap-density": [ut, [], (t2) => t2.globals.heatmapDensity || 0], "line-progress": [ut, [], (t2) => t2.globals.lineProgress || 0], accumulated: [dt, [], (t2) => void 0 === t2.globals.accumulated ? null : t2.globals.accumulated], "+": [ut, Wr(ut), (t2, e2) => {
        let r2 = 0;
        for (const n2 of e2) r2 += n2.evaluate(t2);
        return r2;
      }], "*": [ut, Wr(ut), (t2, e2) => {
        let r2 = 1;
        for (const n2 of e2) r2 *= n2.evaluate(t2);
        return r2;
      }], "-": { type: ut, overloads: [[[ut, ut], (t2, [e2, r2]) => e2.evaluate(t2) - r2.evaluate(t2)], [[ut], (t2, [e2]) => -e2.evaluate(t2)]] }, "/": [ut, [ut, ut], (t2, [e2, r2]) => e2.evaluate(t2) / r2.evaluate(t2)], "%": [ut, [ut, ut], (t2, [e2, r2]) => e2.evaluate(t2) % r2.evaluate(t2)], ln2: [ut, [], () => Math.LN2], pi: [ut, [], () => Math.PI], e: [ut, [], () => Math.E], "^": [ut, [ut, ut], (t2, [e2, r2]) => Math.pow(e2.evaluate(t2), r2.evaluate(t2))], sqrt: [ut, [ut], (t2, [e2]) => Math.sqrt(e2.evaluate(t2))], log10: [ut, [ut], (t2, [e2]) => Math.log(e2.evaluate(t2)) / Math.LN10], ln: [ut, [ut], (t2, [e2]) => Math.log(e2.evaluate(t2))], log2: [ut, [ut], (t2, [e2]) => Math.log(e2.evaluate(t2)) / Math.LN2], sin: [ut, [ut], (t2, [e2]) => Math.sin(e2.evaluate(t2))], cos: [ut, [ut], (t2, [e2]) => Math.cos(e2.evaluate(t2))], tan: [ut, [ut], (t2, [e2]) => Math.tan(e2.evaluate(t2))], asin: [ut, [ut], (t2, [e2]) => Math.asin(e2.evaluate(t2))], acos: [ut, [ut], (t2, [e2]) => Math.acos(e2.evaluate(t2))], atan: [ut, [ut], (t2, [e2]) => Math.atan(e2.evaluate(t2))], min: [ut, Wr(ut), (t2, e2) => Math.min(...e2.map((e3) => e3.evaluate(t2)))], max: [ut, Wr(ut), (t2, e2) => Math.max(...e2.map((e3) => e3.evaluate(t2)))], abs: [ut, [ut], (t2, [e2]) => Math.abs(e2.evaluate(t2))], round: [ut, [ut], (t2, [e2]) => {
        const r2 = e2.evaluate(t2);
        return r2 < 0 ? -Math.round(-r2) : Math.round(r2);
      }], floor: [ut, [ut], (t2, [e2]) => Math.floor(e2.evaluate(t2))], ceil: [ut, [ut], (t2, [e2]) => Math.ceil(e2.evaluate(t2))], "filter-==": [ht2, [ct2, dt], (t2, [e2, r2]) => t2.properties()[e2.value] === r2.value], "filter-id-==": [ht2, [dt], (t2, [e2]) => t2.id() === e2.value], "filter-type-==": [ht2, [ct2], (t2, [e2]) => t2.geometryType() === e2.value], "filter-<": [ht2, [ct2, dt], (t2, [e2, r2]) => {
        const n2 = t2.properties()[e2.value], i2 = r2.value;
        return typeof n2 == typeof i2 && n2 < i2;
      }], "filter-id-<": [ht2, [dt], (t2, [e2]) => {
        const r2 = t2.id(), n2 = e2.value;
        return typeof r2 == typeof n2 && r2 < n2;
      }], "filter->": [ht2, [ct2, dt], (t2, [e2, r2]) => {
        const n2 = t2.properties()[e2.value], i2 = r2.value;
        return typeof n2 == typeof i2 && n2 > i2;
      }], "filter-id->": [ht2, [dt], (t2, [e2]) => {
        const r2 = t2.id(), n2 = e2.value;
        return typeof r2 == typeof n2 && r2 > n2;
      }], "filter-<=": [ht2, [ct2, dt], (t2, [e2, r2]) => {
        const n2 = t2.properties()[e2.value], i2 = r2.value;
        return typeof n2 == typeof i2 && n2 <= i2;
      }], "filter-id-<=": [ht2, [dt], (t2, [e2]) => {
        const r2 = t2.id(), n2 = e2.value;
        return typeof r2 == typeof n2 && r2 <= n2;
      }], "filter->=": [ht2, [ct2, dt], (t2, [e2, r2]) => {
        const n2 = t2.properties()[e2.value], i2 = r2.value;
        return typeof n2 == typeof i2 && n2 >= i2;
      }], "filter-id->=": [ht2, [dt], (t2, [e2]) => {
        const r2 = t2.id(), n2 = e2.value;
        return typeof r2 == typeof n2 && r2 >= n2;
      }], "filter-has": [ht2, [dt], (t2, [e2]) => e2.value in t2.properties()], "filter-has-id": [ht2, [], (t2) => null !== t2.id() && void 0 !== t2.id()], "filter-type-in": [ht2, [bt(ct2)], (t2, [e2]) => e2.value.indexOf(t2.geometryType()) >= 0], "filter-id-in": [ht2, [bt(dt)], (t2, [e2]) => e2.value.indexOf(t2.id()) >= 0], "filter-in-small": [ht2, [ct2, bt(dt)], (t2, [e2, r2]) => r2.value.indexOf(t2.properties()[e2.value]) >= 0], "filter-in-large": [ht2, [ct2, bt(dt)], (t2, [e2, r2]) => function(t3, e3, r3, n2) {
        for (; r3 <= n2; ) {
          const i2 = r3 + n2 >> 1;
          if (e3[i2] === t3) return true;
          e3[i2] > t3 ? n2 = i2 - 1 : r3 = i2 + 1;
        }
        return false;
      }(t2.properties()[e2.value], r2.value, 0, r2.value.length - 1)], all: { type: ht2, overloads: [[[ht2, ht2], (t2, [e2, r2]) => e2.evaluate(t2) && r2.evaluate(t2)], [Wr(ht2), (t2, e2) => {
        for (const r2 of e2) if (!r2.evaluate(t2)) return false;
        return true;
      }]] }, any: { type: ht2, overloads: [[[ht2, ht2], (t2, [e2, r2]) => e2.evaluate(t2) || r2.evaluate(t2)], [Wr(ht2), (t2, e2) => {
        for (const r2 of e2) if (r2.evaluate(t2)) return true;
        return false;
      }]] }, "!": [ht2, [ht2], (t2, [e2]) => !e2.evaluate(t2)], "is-supported-script": [ht2, [ct2], (t2, [e2]) => {
        const r2 = t2.globals && t2.globals.isSupportedScript;
        return !r2 || r2(e2.evaluate(t2));
      }], upcase: [ct2, [ct2], (t2, [e2]) => e2.evaluate(t2).toUpperCase()], downcase: [ct2, [ct2], (t2, [e2]) => e2.evaluate(t2).toLowerCase()], concat: [ct2, Wr(dt), (t2, e2) => e2.map((e3) => ie2(e3.evaluate(t2))).join("")], "resolved-locale": [ct2, [yt], (t2, [e2]) => e2.evaluate(t2).resolvedLocale()] });
      class xn {
        constructor(t2, e2) {
          var r2;
          this.expression = t2, this._warningHistory = {}, this._evaluator = new pe2(), this._defaultValue = e2 ? "color" === (r2 = e2).type && cn2(r2.default) ? new Kt(0, 0, 0, 0) : "color" === r2.type ? Kt.parse(r2.default) || null : "padding" === r2.type ? Jt.parse(r2.default) || null : "variableAnchorOffsetCollection" === r2.type ? Qt.parse(r2.default) || null : void 0 === r2.default ? null : r2.default : null, this._enumValues = e2 && "enum" === e2.type ? e2.values : null;
        }
        evaluateWithoutErrorHandling(t2, e2, r2, n2, i2, s2) {
          return this._evaluator.globals = t2, this._evaluator.feature = e2, this._evaluator.featureState = r2, this._evaluator.canonical = n2, this._evaluator.availableImages = i2 || null, this._evaluator.formattedSection = s2, this.expression.evaluate(this._evaluator);
        }
        evaluate(t2, e2, r2, n2, i2, s2) {
          this._evaluator.globals = t2, this._evaluator.feature = e2 || null, this._evaluator.featureState = r2 || null, this._evaluator.canonical = n2, this._evaluator.availableImages = i2 || null, this._evaluator.formattedSection = s2 || null;
          try {
            const t3 = this.expression.evaluate(this._evaluator);
            if (null == t3 || "number" == typeof t3 && t3 != t3) return this._defaultValue;
            if (this._enumValues && !(t3 in this._enumValues)) throw new ae2(`Expected value to be one of ${Object.keys(this._enumValues).map((t4) => JSON.stringify(t4)).join(", ")}, but found ${JSON.stringify(t3)} instead.`);
            return t3;
          } catch (t3) {
            return this._warningHistory[t3.message] || (this._warningHistory[t3.message] = true, "undefined" != typeof console && console.warn(t3.message)), this._defaultValue;
          }
        }
      }
      function vn(t2) {
        return Array.isArray(t2) && t2.length > 0 && "string" == typeof t2[0] && t2[0] in Kr;
      }
      function bn(t2, e2) {
        const r2 = new fe2(Kr, Qr, [], e2 ? function(t3) {
          const e3 = { color: pt2, string: ct2, number: ut, enum: ct2, boolean: ht2, formatted: mt, padding: gt, resolvedImage: xt, variableAnchorOffsetCollection: vt };
          return "array" === t3.type ? bt(e3[t3.value] || dt, t3.length) : e3[t3.type];
        }(e2) : void 0), n2 = r2.parse(t2, void 0, void 0, void 0, e2 && "string" === e2.type ? { typeAnnotation: "coerce" } : void 0);
        return n2 ? nn(new xn(n2, e2)) : sn(r2.errors);
      }
      class wn {
        constructor(t2, e2) {
          this.kind = t2, this._styleExpression = e2, this.isStateDependent = "constant" !== t2 && !en(e2.expression);
        }
        evaluateWithoutErrorHandling(t2, e2, r2, n2, i2, s2) {
          return this._styleExpression.evaluateWithoutErrorHandling(t2, e2, r2, n2, i2, s2);
        }
        evaluate(t2, e2, r2, n2, i2, s2) {
          return this._styleExpression.evaluate(t2, e2, r2, n2, i2, s2);
        }
      }
      class _n {
        constructor(t2, e2, r2, n2) {
          this.kind = t2, this.zoomStops = r2, this._styleExpression = e2, this.isStateDependent = "camera" !== t2 && !en(e2.expression), this.interpolationType = n2;
        }
        evaluateWithoutErrorHandling(t2, e2, r2, n2, i2, s2) {
          return this._styleExpression.evaluateWithoutErrorHandling(t2, e2, r2, n2, i2, s2);
        }
        evaluate(t2, e2, r2, n2, i2, s2) {
          return this._styleExpression.evaluate(t2, e2, r2, n2, i2, s2);
        }
        interpolationFactor(t2, e2, r2) {
          return this.interpolationType ? Be.interpolationFactor(this.interpolationType, t2, e2, r2) : 0;
        }
      }
      function An(t2, e2) {
        const r2 = bn(t2, e2);
        if ("error" === r2.result) return r2;
        const n2 = r2.value.expression, i2 = tn(n2);
        if (!i2 && !an(e2)) return sn([new at2("", "data expressions not supported")]);
        const s2 = rn(n2, ["zoom"]);
        if (!s2 && !on(e2)) return sn([new at2("", "zoom expressions not supported")]);
        const a2 = kn(n2);
        return a2 || s2 ? a2 instanceof at2 ? sn([a2]) : a2 instanceof Be && !ln(e2) ? sn([new at2("", '"interpolate" expressions cannot be used with this property')]) : nn(a2 ? new _n(i2 ? "camera" : "composite", r2.value, a2.labels, a2 instanceof Be ? a2.interpolation : void 0) : new wn(i2 ? "constant" : "source", r2.value)) : sn([new at2("", '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);
      }
      class Sn {
        constructor(t2, e2) {
          this._parameters = t2, this._specification = e2, st2(this, pn(this._parameters, this._specification));
        }
        static deserialize(t2) {
          return new Sn(t2._parameters, t2._specification);
        }
        static serialize(t2) {
          return { _parameters: t2._parameters, _specification: t2._specification };
        }
      }
      function kn(t2) {
        let e2 = null;
        if (t2 instanceof de2) e2 = kn(t2.result);
        else if (t2 instanceof Ee2) {
          for (const r2 of t2.args) if (e2 = kn(r2), e2) break;
        } else (t2 instanceof Ae2 || t2 instanceof Be) && t2.input instanceof Xr && "zoom" === t2.input.name && (e2 = t2);
        return e2 instanceof at2 || t2.eachChild((t3) => {
          const r2 = kn(t3);
          r2 instanceof at2 ? e2 = r2 : !e2 && r2 ? e2 = new at2("", '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.') : e2 && r2 && e2 !== r2 && (e2 = new at2("", 'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'));
        }), e2;
      }
      function Mn(t2) {
        if (true === t2 || false === t2) return true;
        if (!Array.isArray(t2) || 0 === t2.length) return false;
        switch (t2[0]) {
          case "has":
            return t2.length >= 2 && "$id" !== t2[1] && "$type" !== t2[1];
          case "in":
            return t2.length >= 3 && ("string" != typeof t2[1] || Array.isArray(t2[2]));
          case "!in":
          case "!has":
          case "none":
            return false;
          case "==":
          case "!=":
          case ">":
          case ">=":
          case "<":
          case "<=":
            return 3 !== t2.length || Array.isArray(t2[1]) || Array.isArray(t2[2]);
          case "any":
          case "all":
            for (const e2 of t2.slice(1)) if (!Mn(e2) && "boolean" != typeof e2) return false;
            return true;
          default:
            return true;
        }
      }
      const In = { type: "boolean", default: false, transition: false, "property-type": "data-driven", expression: { interpolated: false, parameters: ["zoom", "feature"] } };
      function zn(t2) {
        if (null == t2) return { filter: () => true, needGeometry: false };
        Mn(t2) || (t2 = Bn(t2));
        const e2 = bn(t2, In);
        if ("error" === e2.result) throw new Error(e2.value.map((t3) => `${t3.key}: ${t3.message}`).join(", "));
        return { filter: (t3, r2, n2) => e2.value.evaluate(t3, r2, {}, n2), needGeometry: Cn(t2) };
      }
      function Pn(t2, e2) {
        return t2 < e2 ? -1 : t2 > e2 ? 1 : 0;
      }
      function Cn(t2) {
        if (!Array.isArray(t2)) return false;
        if ("within" === t2[0] || "distance" === t2[0]) return true;
        for (let e2 = 1; e2 < t2.length; e2++) if (Cn(t2[e2])) return true;
        return false;
      }
      function Bn(t2) {
        if (!t2) return true;
        const e2 = t2[0];
        return t2.length <= 1 ? "any" !== e2 : "==" === e2 ? Vn(t2[1], t2[2], "==") : "!=" === e2 ? Tn(Vn(t2[1], t2[2], "==")) : "<" === e2 || ">" === e2 || "<=" === e2 || ">=" === e2 ? Vn(t2[1], t2[2], e2) : "any" === e2 ? (r2 = t2.slice(1), ["any"].concat(r2.map(Bn))) : "all" === e2 ? ["all"].concat(t2.slice(1).map(Bn)) : "none" === e2 ? ["all"].concat(t2.slice(1).map(Bn).map(Tn)) : "in" === e2 ? En(t2[1], t2.slice(2)) : "!in" === e2 ? Tn(En(t2[1], t2.slice(2))) : "has" === e2 ? Fn(t2[1]) : "!has" !== e2 || Tn(Fn(t2[1]));
        var r2;
      }
      function Vn(t2, e2, r2) {
        switch (t2) {
          case "$type":
            return [`filter-type-${r2}`, e2];
          case "$id":
            return [`filter-id-${r2}`, e2];
          default:
            return [`filter-${r2}`, t2, e2];
        }
      }
      function En(t2, e2) {
        if (0 === e2.length) return false;
        switch (t2) {
          case "$type":
            return ["filter-type-in", ["literal", e2]];
          case "$id":
            return ["filter-id-in", ["literal", e2]];
          default:
            return e2.length > 200 && !e2.some((t3) => typeof t3 != typeof e2[0]) ? ["filter-in-large", t2, ["literal", e2.sort(Pn)]] : ["filter-in-small", t2, ["literal", e2]];
        }
      }
      function Fn(t2) {
        switch (t2) {
          case "$type":
            return true;
          case "$id":
            return ["filter-has-id"];
          default:
            return ["filter-has", t2];
        }
      }
      function Tn(t2) {
        return ["!", t2];
      }
      function $n(t2) {
        const e2 = typeof t2;
        if ("number" === e2 || "boolean" === e2 || "string" === e2 || null == t2) return JSON.stringify(t2);
        if (Array.isArray(t2)) {
          let e3 = "[";
          for (const r3 of t2) e3 += `${$n(r3)},`;
          return `${e3}]`;
        }
        const r2 = Object.keys(t2).sort();
        let n2 = "{";
        for (let e3 = 0; e3 < r2.length; e3++) n2 += `${JSON.stringify(r2[e3])}:${$n(t2[r2[e3]])},`;
        return `${n2}}`;
      }
      function Ln(t2) {
        let e2 = "";
        for (const r2 of K) e2 += `/${$n(t2[r2])}`;
        return e2;
      }
      function Dn(t2) {
        const e2 = t2.value;
        return e2 ? [new it2(t2.key, e2, "constants have been deprecated as of v8")] : [];
      }
      function On(t2) {
        return t2 instanceof Number || t2 instanceof String || t2 instanceof Boolean ? t2.valueOf() : t2;
      }
      function jn(t2) {
        if (Array.isArray(t2)) return t2.map(jn);
        if (t2 instanceof Object && !(t2 instanceof Number || t2 instanceof String || t2 instanceof Boolean)) {
          const e2 = {};
          for (const r2 in t2) e2[r2] = jn(t2[r2]);
          return e2;
        }
        return On(t2);
      }
      function Rn(t2) {
        const e2 = t2.key, r2 = t2.value, n2 = t2.valueSpec || {}, i2 = t2.objectElementValidators || {}, s2 = t2.style, a2 = t2.styleSpec, o2 = t2.validateSpec;
        let l2 = [];
        const u3 = un(r2);
        if ("object" !== u3) return [new it2(e2, r2, `object expected, ${u3} found`)];
        for (const t3 in r2) {
          const u4 = t3.split(".")[0], c2 = n2[u4] || n2["*"];
          let h2;
          if (i2[u4]) h2 = i2[u4];
          else if (n2[u4]) h2 = o2;
          else if (i2["*"]) h2 = i2["*"];
          else {
            if (!n2["*"]) {
              l2.push(new it2(e2, r2[t3], `unknown property "${t3}"`));
              continue;
            }
            h2 = o2;
          }
          l2 = l2.concat(h2({ key: (e2 ? `${e2}.` : e2) + t3, value: r2[t3], valueSpec: c2, style: s2, styleSpec: a2, object: r2, objectKey: t3, validateSpec: o2 }, r2));
        }
        for (const t3 in n2) i2[t3] || n2[t3].required && void 0 === n2[t3].default && void 0 === r2[t3] && l2.push(new it2(e2, r2, `missing required property "${t3}"`));
        return l2;
      }
      function Un(t2) {
        const e2 = t2.value, r2 = t2.valueSpec, n2 = t2.style, i2 = t2.styleSpec, s2 = t2.key, a2 = t2.arrayElementValidator || t2.validateSpec;
        if ("array" !== un(e2)) return [new it2(s2, e2, `array expected, ${un(e2)} found`)];
        if (r2.length && e2.length !== r2.length) return [new it2(s2, e2, `array length ${r2.length} expected, length ${e2.length} found`)];
        if (r2["min-length"] && e2.length < r2["min-length"]) return [new it2(s2, e2, `array length at least ${r2["min-length"]} expected, length ${e2.length} found`)];
        let o2 = { type: r2.value, values: r2.values };
        i2.$version < 7 && (o2.function = r2.function), "object" === un(r2.value) && (o2 = r2.value);
        let l2 = [];
        for (let r3 = 0; r3 < e2.length; r3++) l2 = l2.concat(a2({ array: e2, arrayIndex: r3, value: e2[r3], valueSpec: o2, validateSpec: t2.validateSpec, style: n2, styleSpec: i2, key: `${s2}[${r3}]` }));
        return l2;
      }
      function qn(t2) {
        const e2 = t2.key, r2 = t2.value, n2 = t2.valueSpec;
        let i2 = un(r2);
        return "number" === i2 && r2 != r2 && (i2 = "NaN"), "number" !== i2 ? [new it2(e2, r2, `number expected, ${i2} found`)] : "minimum" in n2 && r2 < n2.minimum ? [new it2(e2, r2, `${r2} is less than the minimum value ${n2.minimum}`)] : "maximum" in n2 && r2 > n2.maximum ? [new it2(e2, r2, `${r2} is greater than the maximum value ${n2.maximum}`)] : [];
      }
      function Nn(t2) {
        const e2 = t2.valueSpec, r2 = On(t2.value.type);
        let n2, i2, s2, a2 = {};
        const o2 = "categorical" !== r2 && void 0 === t2.value.property, l2 = !o2, u3 = "array" === un(t2.value.stops) && "array" === un(t2.value.stops[0]) && "object" === un(t2.value.stops[0][0]), c2 = Rn({ key: t2.key, value: t2.value, valueSpec: t2.styleSpec.function, validateSpec: t2.validateSpec, style: t2.style, styleSpec: t2.styleSpec, objectElementValidators: { stops: function(t3) {
          if ("identity" === r2) return [new it2(t3.key, t3.value, 'identity function may not have a "stops" property')];
          let e3 = [];
          const n3 = t3.value;
          return e3 = e3.concat(Un({ key: t3.key, value: n3, valueSpec: t3.valueSpec, validateSpec: t3.validateSpec, style: t3.style, styleSpec: t3.styleSpec, arrayElementValidator: h2 })), "array" === un(n3) && 0 === n3.length && e3.push(new it2(t3.key, n3, "array must have at least one stop")), e3;
        }, default: function(t3) {
          return t3.validateSpec({ key: t3.key, value: t3.value, valueSpec: e2, validateSpec: t3.validateSpec, style: t3.style, styleSpec: t3.styleSpec });
        } } });
        return "identity" === r2 && o2 && c2.push(new it2(t2.key, t2.value, 'missing required property "property"')), "identity" === r2 || t2.value.stops || c2.push(new it2(t2.key, t2.value, 'missing required property "stops"')), "exponential" === r2 && t2.valueSpec.expression && !ln(t2.valueSpec) && c2.push(new it2(t2.key, t2.value, "exponential functions not supported")), t2.styleSpec.$version >= 8 && (l2 && !an(t2.valueSpec) ? c2.push(new it2(t2.key, t2.value, "property functions not supported")) : o2 && !on(t2.valueSpec) && c2.push(new it2(t2.key, t2.value, "zoom functions not supported"))), "categorical" !== r2 && !u3 || void 0 !== t2.value.property || c2.push(new it2(t2.key, t2.value, '"property" property is required')), c2;
        function h2(t3) {
          let r3 = [];
          const n3 = t3.value, o3 = t3.key;
          if ("array" !== un(n3)) return [new it2(o3, n3, `array expected, ${un(n3)} found`)];
          if (2 !== n3.length) return [new it2(o3, n3, `array length 2 expected, length ${n3.length} found`)];
          if (u3) {
            if ("object" !== un(n3[0])) return [new it2(o3, n3, `object expected, ${un(n3[0])} found`)];
            if (void 0 === n3[0].zoom) return [new it2(o3, n3, "object stop key must have zoom")];
            if (void 0 === n3[0].value) return [new it2(o3, n3, "object stop key must have value")];
            if (s2 && s2 > On(n3[0].zoom)) return [new it2(o3, n3[0].zoom, "stop zoom values must appear in ascending order")];
            On(n3[0].zoom) !== s2 && (s2 = On(n3[0].zoom), i2 = void 0, a2 = {}), r3 = r3.concat(Rn({ key: `${o3}[0]`, value: n3[0], valueSpec: { zoom: {} }, validateSpec: t3.validateSpec, style: t3.style, styleSpec: t3.styleSpec, objectElementValidators: { zoom: qn, value: p3 } }));
          } else r3 = r3.concat(p3({ key: `${o3}[0]`, value: n3[0] }, n3));
          return vn(jn(n3[1])) ? r3.concat([new it2(`${o3}[1]`, n3[1], "expressions are not allowed in function stops.")]) : r3.concat(t3.validateSpec({ key: `${o3}[1]`, value: n3[1], valueSpec: e2, validateSpec: t3.validateSpec, style: t3.style, styleSpec: t3.styleSpec }));
        }
        function p3(t3, s3) {
          const o3 = un(t3.value), l3 = On(t3.value), u4 = null !== t3.value ? t3.value : s3;
          if (n2) {
            if (o3 !== n2) return [new it2(t3.key, u4, `${o3} stop domain type must match previous stop domain type ${n2}`)];
          } else n2 = o3;
          if ("number" !== o3 && "string" !== o3 && "boolean" !== o3) return [new it2(t3.key, u4, "stop domain value must be a number, string, or boolean")];
          if ("number" !== o3 && "categorical" !== r2) {
            let n3 = `number expected, ${o3} found`;
            return an(e2) && void 0 === r2 && (n3 += '\nIf you intended to use a categorical function, specify `"type": "categorical"`.'), [new it2(t3.key, u4, n3)];
          }
          return "categorical" !== r2 || "number" !== o3 || isFinite(l3) && Math.floor(l3) === l3 ? "categorical" !== r2 && "number" === o3 && void 0 !== i2 && l3 < i2 ? [new it2(t3.key, u4, "stop domain values must appear in ascending order")] : (i2 = l3, "categorical" === r2 && l3 in a2 ? [new it2(t3.key, u4, "stop domain values must be unique")] : (a2[l3] = true, [])) : [new it2(t3.key, u4, `integer expected, found ${l3}`)];
        }
      }
      function Zn(t2) {
        const e2 = ("property" === t2.expressionContext ? An : bn)(jn(t2.value), t2.valueSpec);
        if ("error" === e2.result) return e2.value.map((e3) => new it2(`${t2.key}${e3.key}`, t2.value, e3.message));
        const r2 = e2.value.expression || e2.value._styleExpression.expression;
        if ("property" === t2.expressionContext && "text-font" === t2.propertyKey && !r2.outputDefined()) return [new it2(t2.key, t2.value, `Invalid data expression for "${t2.propertyKey}". Output values must be contained as literals within the expression.`)];
        if ("property" === t2.expressionContext && "layout" === t2.propertyType && !en(r2)) return [new it2(t2.key, t2.value, '"feature-state" data expressions are not supported with layout properties.')];
        if ("filter" === t2.expressionContext && !en(r2)) return [new it2(t2.key, t2.value, '"feature-state" data expressions are not supported with filters.')];
        if (t2.expressionContext && 0 === t2.expressionContext.indexOf("cluster")) {
          if (!rn(r2, ["zoom", "feature-state"])) return [new it2(t2.key, t2.value, '"zoom" and "feature-state" expressions are not supported with cluster properties.')];
          if ("cluster-initial" === t2.expressionContext && !tn(r2)) return [new it2(t2.key, t2.value, "Feature data expressions are not supported with initial expression part of cluster properties.")];
        }
        return [];
      }
      function Gn(t2) {
        const e2 = t2.key, r2 = t2.value, n2 = t2.valueSpec, i2 = [];
        return Array.isArray(n2.values) ? -1 === n2.values.indexOf(On(r2)) && i2.push(new it2(e2, r2, `expected one of [${n2.values.join(", ")}], ${JSON.stringify(r2)} found`)) : -1 === Object.keys(n2.values).indexOf(On(r2)) && i2.push(new it2(e2, r2, `expected one of [${Object.keys(n2.values).join(", ")}], ${JSON.stringify(r2)} found`)), i2;
      }
      function Kn(t2) {
        return Mn(jn(t2.value)) ? Zn(st2({}, t2, { expressionContext: "filter", valueSpec: { value: "boolean" } })) : Xn(t2);
      }
      function Xn(t2) {
        const e2 = t2.value, r2 = t2.key;
        if ("array" !== un(e2)) return [new it2(r2, e2, `array expected, ${un(e2)} found`)];
        const n2 = t2.styleSpec;
        let i2, s2 = [];
        if (e2.length < 1) return [new it2(r2, e2, "filter array must have at least 1 element")];
        switch (s2 = s2.concat(Gn({ key: `${r2}[0]`, value: e2[0], valueSpec: n2.filter_operator })), On(e2[0])) {
          case "<":
          case "<=":
          case ">":
          case ">=":
            e2.length >= 2 && "$type" === On(e2[1]) && s2.push(new it2(r2, e2, `"$type" cannot be use with operator "${e2[0]}"`));
          case "==":
          case "!=":
            3 !== e2.length && s2.push(new it2(r2, e2, `filter array for operator "${e2[0]}" must have 3 elements`));
          case "in":
          case "!in":
            e2.length >= 2 && (i2 = un(e2[1]), "string" !== i2 && s2.push(new it2(`${r2}[1]`, e2[1], `string expected, ${i2} found`)));
            for (let a2 = 2; a2 < e2.length; a2++) i2 = un(e2[a2]), "$type" === On(e2[1]) ? s2 = s2.concat(Gn({ key: `${r2}[${a2}]`, value: e2[a2], valueSpec: n2.geometry_type })) : "string" !== i2 && "number" !== i2 && "boolean" !== i2 && s2.push(new it2(`${r2}[${a2}]`, e2[a2], `string, number, or boolean expected, ${i2} found`));
            break;
          case "any":
          case "all":
          case "none":
            for (let n3 = 1; n3 < e2.length; n3++) s2 = s2.concat(Xn({ key: `${r2}[${n3}]`, value: e2[n3], styleSpec: t2.styleSpec }));
            break;
          case "has":
          case "!has":
            i2 = un(e2[1]), 2 !== e2.length ? s2.push(new it2(r2, e2, `filter array for "${e2[0]}" operator must have 2 elements`)) : "string" !== i2 && s2.push(new it2(`${r2}[1]`, e2[1], `string expected, ${i2} found`));
        }
        return s2;
      }
      function Hn(t2, e2) {
        const r2 = t2.key, n2 = t2.validateSpec, i2 = t2.style, s2 = t2.styleSpec, a2 = t2.value, o2 = t2.objectKey, l2 = s2[`${e2}_${t2.layerType}`];
        if (!l2) return [];
        const u3 = o2.match(/^(.*)-transition$/);
        if ("paint" === e2 && u3 && l2[u3[1]] && l2[u3[1]].transition) return n2({ key: r2, value: a2, valueSpec: s2.transition, style: i2, styleSpec: s2 });
        const c2 = t2.valueSpec || l2[o2];
        if (!c2) return [new it2(r2, a2, `unknown property "${o2}"`)];
        let h2;
        if ("string" === un(a2) && an(c2) && !c2.tokens && (h2 = /^{([^}]+)}$/.exec(a2))) return [new it2(r2, a2, `"${o2}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(h2[1])} }\`.`)];
        const p3 = [];
        return "symbol" === t2.layerType && ("text-field" === o2 && i2 && !i2.glyphs && p3.push(new it2(r2, a2, 'use of "text-field" requires a style "glyphs" property')), "text-font" === o2 && cn2(jn(a2)) && "identity" === On(a2.type) && p3.push(new it2(r2, a2, '"text-font" does not support identity functions'))), p3.concat(n2({ key: t2.key, value: a2, valueSpec: c2, style: i2, styleSpec: s2, expressionContext: "property", propertyType: e2, propertyKey: o2 }));
      }
      function Yn(t2) {
        return Hn(t2, "paint");
      }
      function Jn(t2) {
        return Hn(t2, "layout");
      }
      function Wn(t2) {
        let e2 = [];
        const r2 = t2.value, n2 = t2.key, i2 = t2.style, s2 = t2.styleSpec;
        r2.type || r2.ref || e2.push(new it2(n2, r2, 'either "type" or "ref" is required'));
        let a2 = On(r2.type);
        const o2 = On(r2.ref);
        if (r2.id) {
          const s3 = On(r2.id);
          for (let a3 = 0; a3 < t2.arrayIndex; a3++) {
            const t3 = i2.layers[a3];
            On(t3.id) === s3 && e2.push(new it2(n2, r2.id, `duplicate layer id "${r2.id}", previously used at line ${t3.id.__line__}`));
          }
        }
        if ("ref" in r2) {
          let t3;
          ["type", "source", "source-layer", "filter", "layout"].forEach((t4) => {
            t4 in r2 && e2.push(new it2(n2, r2[t4], `"${t4}" is prohibited for ref layers`));
          }), i2.layers.forEach((e3) => {
            On(e3.id) === o2 && (t3 = e3);
          }), t3 ? t3.ref ? e2.push(new it2(n2, r2.ref, "ref cannot reference another ref layer")) : a2 = On(t3.type) : e2.push(new it2(n2, r2.ref, `ref layer "${o2}" not found`));
        } else if ("background" !== a2) if (r2.source) {
          const t3 = i2.sources && i2.sources[r2.source], s3 = t3 && On(t3.type);
          t3 ? "vector" === s3 && "raster" === a2 ? e2.push(new it2(n2, r2.source, `layer "${r2.id}" requires a raster source`)) : "raster-dem" !== s3 && "hillshade" === a2 ? e2.push(new it2(n2, r2.source, `layer "${r2.id}" requires a raster-dem source`)) : "raster" === s3 && "raster" !== a2 ? e2.push(new it2(n2, r2.source, `layer "${r2.id}" requires a vector source`)) : "vector" !== s3 || r2["source-layer"] ? "raster-dem" === s3 && "hillshade" !== a2 ? e2.push(new it2(n2, r2.source, "raster-dem source can only be used with layer type 'hillshade'.")) : "line" !== a2 || !r2.paint || !r2.paint["line-gradient"] || "geojson" === s3 && t3.lineMetrics || e2.push(new it2(n2, r2, `layer "${r2.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)) : e2.push(new it2(n2, r2, `layer "${r2.id}" must specify a "source-layer"`)) : e2.push(new it2(n2, r2.source, `source "${r2.source}" not found`));
        } else e2.push(new it2(n2, r2, 'missing required property "source"'));
        return e2 = e2.concat(Rn({ key: n2, value: r2, valueSpec: s2.layer, style: t2.style, styleSpec: t2.styleSpec, validateSpec: t2.validateSpec, objectElementValidators: { "*": () => [], type: () => t2.validateSpec({ key: `${n2}.type`, value: r2.type, valueSpec: s2.layer.type, style: t2.style, styleSpec: t2.styleSpec, validateSpec: t2.validateSpec, object: r2, objectKey: "type" }), filter: Kn, layout: (t3) => Rn({ layer: r2, key: t3.key, value: t3.value, style: t3.style, styleSpec: t3.styleSpec, validateSpec: t3.validateSpec, objectElementValidators: { "*": (t4) => Jn(st2({ layerType: a2 }, t4)) } }), paint: (t3) => Rn({ layer: r2, key: t3.key, value: t3.value, style: t3.style, styleSpec: t3.styleSpec, validateSpec: t3.validateSpec, objectElementValidators: { "*": (t4) => Yn(st2({ layerType: a2 }, t4)) } }) } })), e2;
      }
      function Qn(t2) {
        const e2 = t2.value, r2 = t2.key, n2 = un(e2);
        return "string" !== n2 ? [new it2(r2, e2, `string expected, ${n2} found`)] : [];
      }
      const ti = { promoteId: function({ key: t2, value: e2 }) {
        if ("string" === un(e2)) return Qn({ key: t2, value: e2 });
        {
          const r2 = [];
          for (const n2 in e2) r2.push(...Qn({ key: `${t2}.${n2}`, value: e2[n2] }));
          return r2;
        }
      } };
      function ei(t2) {
        const e2 = t2.value, r2 = t2.key, n2 = t2.styleSpec, i2 = t2.style, s2 = t2.validateSpec;
        if (!e2.type) return [new it2(r2, e2, '"type" is required')];
        const a2 = On(e2.type);
        let o2;
        switch (a2) {
          case "vector":
          case "raster":
            return o2 = Rn({ key: r2, value: e2, valueSpec: n2[`source_${a2.replace("-", "_")}`], style: t2.style, styleSpec: n2, objectElementValidators: ti, validateSpec: s2 }), o2;
          case "raster-dem":
            return o2 = function(t3) {
              var e3;
              const r3 = null !== (e3 = t3.sourceName) && void 0 !== e3 ? e3 : "", n3 = t3.value, i3 = t3.styleSpec, s3 = i3.source_raster_dem, a3 = t3.style;
              let o3 = [];
              const l2 = un(n3);
              if (void 0 === n3) return o3;
              if ("object" !== l2) return o3.push(new it2("source_raster_dem", n3, `object expected, ${l2} found`)), o3;
              const u3 = "custom" === On(n3.encoding), c2 = ["redFactor", "greenFactor", "blueFactor", "baseShift"], h2 = t3.value.encoding ? `"${t3.value.encoding}"` : "Default";
              for (const e4 in n3) !u3 && c2.includes(e4) ? o3.push(new it2(e4, n3[e4], `In "${r3}": "${e4}" is only valid when "encoding" is set to "custom". ${h2} encoding found`)) : s3[e4] ? o3 = o3.concat(t3.validateSpec({ key: e4, value: n3[e4], valueSpec: s3[e4], validateSpec: t3.validateSpec, style: a3, styleSpec: i3 })) : o3.push(new it2(e4, n3[e4], `unknown property "${e4}"`));
              return o3;
            }({ sourceName: r2, value: e2, style: t2.style, styleSpec: n2, validateSpec: s2 }), o2;
          case "geojson":
            if (o2 = Rn({ key: r2, value: e2, valueSpec: n2.source_geojson, style: i2, styleSpec: n2, validateSpec: s2, objectElementValidators: ti }), e2.cluster) for (const t3 in e2.clusterProperties) {
              const [n3, i3] = e2.clusterProperties[t3], a3 = "string" == typeof n3 ? [n3, ["accumulated"], ["get", t3]] : n3;
              o2.push(...Zn({ key: `${r2}.${t3}.map`, value: i3, expressionContext: "cluster-map" })), o2.push(...Zn({ key: `${r2}.${t3}.reduce`, value: a3, expressionContext: "cluster-reduce" }));
            }
            return o2;
          case "video":
            return Rn({ key: r2, value: e2, valueSpec: n2.source_video, style: i2, validateSpec: s2, styleSpec: n2 });
          case "image":
            return Rn({ key: r2, value: e2, valueSpec: n2.source_image, style: i2, validateSpec: s2, styleSpec: n2 });
          case "canvas":
            return [new it2(r2, null, "Please use runtime APIs to add canvas sources, rather than including them in stylesheets.", "source.canvas")];
          default:
            return Gn({ key: `${r2}.type`, value: e2.type, valueSpec: { values: ["vector", "raster", "raster-dem", "geojson", "video", "image"] } });
        }
      }
      function ri(t2) {
        const e2 = t2.value, r2 = t2.styleSpec, n2 = r2.light, i2 = t2.style;
        let s2 = [];
        const a2 = un(e2);
        if (void 0 === e2) return s2;
        if ("object" !== a2) return s2 = s2.concat([new it2("light", e2, `object expected, ${a2} found`)]), s2;
        for (const a3 in e2) {
          const o2 = a3.match(/^(.*)-transition$/);
          s2 = s2.concat(o2 && n2[o2[1]] && n2[o2[1]].transition ? t2.validateSpec({ key: a3, value: e2[a3], valueSpec: r2.transition, validateSpec: t2.validateSpec, style: i2, styleSpec: r2 }) : n2[a3] ? t2.validateSpec({ key: a3, value: e2[a3], valueSpec: n2[a3], validateSpec: t2.validateSpec, style: i2, styleSpec: r2 }) : [new it2(a3, e2[a3], `unknown property "${a3}"`)]);
        }
        return s2;
      }
      function ni(t2) {
        const e2 = t2.value, r2 = t2.styleSpec, n2 = r2.sky, i2 = t2.style, s2 = un(e2);
        if (void 0 === e2) return [];
        if ("object" !== s2) return [new it2("sky", e2, `object expected, ${s2} found`)];
        let a2 = [];
        for (const s3 in e2) a2 = a2.concat(n2[s3] ? t2.validateSpec({ key: s3, value: e2[s3], valueSpec: n2[s3], style: i2, styleSpec: r2 }) : [new it2(s3, e2[s3], `unknown property "${s3}"`)]);
        return a2;
      }
      function ii(t2) {
        const e2 = t2.value, r2 = t2.styleSpec, n2 = r2.terrain, i2 = t2.style;
        let s2 = [];
        const a2 = un(e2);
        if (void 0 === e2) return s2;
        if ("object" !== a2) return s2 = s2.concat([new it2("terrain", e2, `object expected, ${a2} found`)]), s2;
        for (const a3 in e2) s2 = s2.concat(n2[a3] ? t2.validateSpec({ key: a3, value: e2[a3], valueSpec: n2[a3], validateSpec: t2.validateSpec, style: i2, styleSpec: r2 }) : [new it2(a3, e2[a3], `unknown property "${a3}"`)]);
        return s2;
      }
      function si(t2) {
        let e2 = [];
        const r2 = t2.value, n2 = t2.key;
        if (Array.isArray(r2)) {
          const i2 = [], s2 = [];
          for (const a2 in r2) r2[a2].id && i2.includes(r2[a2].id) && e2.push(new it2(n2, r2, `all the sprites' ids must be unique, but ${r2[a2].id} is duplicated`)), i2.push(r2[a2].id), r2[a2].url && s2.includes(r2[a2].url) && e2.push(new it2(n2, r2, `all the sprites' URLs must be unique, but ${r2[a2].url} is duplicated`)), s2.push(r2[a2].url), e2 = e2.concat(Rn({ key: `${n2}[${a2}]`, value: r2[a2], valueSpec: { id: { type: "string", required: true }, url: { type: "string", required: true } }, validateSpec: t2.validateSpec }));
          return e2;
        }
        return Qn({ key: n2, value: r2 });
      }
      const ai = { "*": () => [], array: Un, boolean: function(t2) {
        const e2 = t2.value, r2 = t2.key, n2 = un(e2);
        return "boolean" !== n2 ? [new it2(r2, e2, `boolean expected, ${n2} found`)] : [];
      }, number: qn, color: function(t2) {
        const e2 = t2.key, r2 = t2.value, n2 = un(r2);
        return "string" !== n2 ? [new it2(e2, r2, `color expected, ${n2} found`)] : Kt.parse(String(r2)) ? [] : [new it2(e2, r2, `color expected, "${r2}" found`)];
      }, constants: Dn, enum: Gn, filter: Kn, function: Nn, layer: Wn, object: Rn, source: ei, light: ri, sky: ni, terrain: ii, projection: function(t2) {
        const e2 = t2.value, r2 = t2.styleSpec, n2 = r2.projection, i2 = t2.style, s2 = un(e2);
        if (void 0 === e2) return [];
        if ("object" !== s2) return [new it2("projection", e2, `object expected, ${s2} found`)];
        let a2 = [];
        for (const s3 in e2) a2 = a2.concat(n2[s3] ? t2.validateSpec({ key: s3, value: e2[s3], valueSpec: n2[s3], style: i2, styleSpec: r2 }) : [new it2(s3, e2[s3], `unknown property "${s3}"`)]);
        return a2;
      }, string: Qn, formatted: function(t2) {
        return 0 === Qn(t2).length ? [] : Zn(t2);
      }, resolvedImage: function(t2) {
        return 0 === Qn(t2).length ? [] : Zn(t2);
      }, padding: function(t2) {
        const e2 = t2.key, r2 = t2.value;
        if ("array" === un(r2)) {
          if (r2.length < 1 || r2.length > 4) return [new it2(e2, r2, `padding requires 1 to 4 values; ${r2.length} values found`)];
          const n2 = { type: "number" };
          let i2 = [];
          for (let s2 = 0; s2 < r2.length; s2++) i2 = i2.concat(t2.validateSpec({ key: `${e2}[${s2}]`, value: r2[s2], validateSpec: t2.validateSpec, valueSpec: n2 }));
          return i2;
        }
        return qn({ key: e2, value: r2, valueSpec: {} });
      }, variableAnchorOffsetCollection: function(t2) {
        const e2 = t2.key, r2 = t2.value, n2 = un(r2), i2 = t2.styleSpec;
        if ("array" !== n2 || r2.length < 1 || r2.length % 2 != 0) return [new it2(e2, r2, "variableAnchorOffsetCollection requires a non-empty array of even length")];
        let s2 = [];
        for (let n3 = 0; n3 < r2.length; n3 += 2) s2 = s2.concat(Gn({ key: `${e2}[${n3}]`, value: r2[n3], valueSpec: i2.layout_symbol["text-anchor"] })), s2 = s2.concat(Un({ key: `${e2}[${n3 + 1}]`, value: r2[n3 + 1], valueSpec: { length: 2, value: "number" }, validateSpec: t2.validateSpec, style: t2.style, styleSpec: i2 }));
        return s2;
      }, sprite: si };
      function oi(t2) {
        const e2 = t2.value, r2 = t2.valueSpec, n2 = t2.styleSpec;
        return t2.validateSpec = oi, r2.expression && cn2(On(e2)) ? Nn(t2) : r2.expression && vn(jn(e2)) ? Zn(t2) : r2.type && ai[r2.type] ? ai[r2.type](t2) : Rn(st2({}, t2, { valueSpec: r2.type ? n2[r2.type] : r2 }));
      }
      function li(t2) {
        const e2 = t2.value, r2 = t2.key, n2 = Qn(t2);
        return n2.length || (-1 === e2.indexOf("{fontstack}") && n2.push(new it2(r2, e2, '"glyphs" url must include a "{fontstack}" token')), -1 === e2.indexOf("{range}") && n2.push(new it2(r2, e2, '"glyphs" url must include a "{range}" token'))), n2;
      }
      function ui(t2, e2 = G2) {
        let r2 = [];
        return r2 = r2.concat(oi({ key: "", value: t2, valueSpec: e2.$root, styleSpec: e2, style: t2, validateSpec: oi, objectElementValidators: { glyphs: li, "*": () => [] } })), t2.constants && (r2 = r2.concat(Dn({ key: "constants", value: t2.constants }))), hi(r2);
      }
      function ci(t2) {
        return function(e2) {
          return t2({ ...e2, validateSpec: oi });
        };
      }
      function hi(t2) {
        return [].concat(t2).sort((t3, e2) => t3.line - e2.line);
      }
      function pi(t2) {
        return function(...e2) {
          return hi(t2.apply(this, e2));
        };
      }
      ui.source = pi(ci(ei)), ui.sprite = pi(ci(si)), ui.glyphs = pi(ci(li)), ui.light = pi(ci(ri)), ui.sky = pi(ci(ni)), ui.terrain = pi(ci(ii)), ui.layer = pi(ci(Wn)), ui.filter = pi(ci(Kn)), ui.paintProperty = pi(ci(Yn)), ui.layoutProperty = pi(ci(Jn));
      const fi = ui, di = fi.light, yi = fi.sky, mi = fi.paintProperty, gi = fi.layoutProperty;
      function xi(t2, e2) {
        let r2 = false;
        if (e2 && e2.length) for (const n2 of e2) t2.fire(new N2(new Error(n2.message))), r2 = true;
        return r2;
      }
      class vi {
        constructor(t2, e2, r2) {
          const n2 = this.cells = [];
          if (t2 instanceof ArrayBuffer) {
            this.arrayBuffer = t2;
            const i3 = new Int32Array(this.arrayBuffer);
            t2 = i3[0], this.d = (e2 = i3[1]) + 2 * (r2 = i3[2]);
            for (let t3 = 0; t3 < this.d * this.d; t3++) {
              const e3 = i3[3 + t3], r3 = i3[3 + t3 + 1];
              n2.push(e3 === r3 ? null : i3.subarray(e3, r3));
            }
            const s2 = i3[3 + n2.length + 1];
            this.keys = i3.subarray(i3[3 + n2.length], s2), this.bboxes = i3.subarray(s2), this.insert = this._insertReadonly;
          } else {
            this.d = e2 + 2 * r2;
            for (let t3 = 0; t3 < this.d * this.d; t3++) n2.push([]);
            this.keys = [], this.bboxes = [];
          }
          this.n = e2, this.extent = t2, this.padding = r2, this.scale = e2 / t2, this.uid = 0;
          const i2 = r2 / e2 * t2;
          this.min = -i2, this.max = t2 + i2;
        }
        insert(t2, e2, r2, n2, i2) {
          this._forEachCell(e2, r2, n2, i2, this._insertCell, this.uid++, void 0, void 0), this.keys.push(t2), this.bboxes.push(e2), this.bboxes.push(r2), this.bboxes.push(n2), this.bboxes.push(i2);
        }
        _insertReadonly() {
          throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.");
        }
        _insertCell(t2, e2, r2, n2, i2, s2) {
          this.cells[i2].push(s2);
        }
        query(t2, e2, r2, n2, i2) {
          const s2 = this.min, a2 = this.max;
          if (t2 <= s2 && e2 <= s2 && a2 <= r2 && a2 <= n2 && !i2) return Array.prototype.slice.call(this.keys);
          {
            const s3 = [];
            return this._forEachCell(t2, e2, r2, n2, this._queryCell, s3, {}, i2), s3;
          }
        }
        _queryCell(t2, e2, r2, n2, i2, s2, a2, o2) {
          const l2 = this.cells[i2];
          if (null !== l2) {
            const i3 = this.keys, u3 = this.bboxes;
            for (let c2 = 0; c2 < l2.length; c2++) {
              const h2 = l2[c2];
              if (void 0 === a2[h2]) {
                const l3 = 4 * h2;
                (o2 ? o2(u3[l3 + 0], u3[l3 + 1], u3[l3 + 2], u3[l3 + 3]) : t2 <= u3[l3 + 2] && e2 <= u3[l3 + 3] && r2 >= u3[l3 + 0] && n2 >= u3[l3 + 1]) ? (a2[h2] = true, s2.push(i3[h2])) : a2[h2] = false;
              }
            }
          }
        }
        _forEachCell(t2, e2, r2, n2, i2, s2, a2, o2) {
          const l2 = this._convertToCellCoord(t2), u3 = this._convertToCellCoord(e2), c2 = this._convertToCellCoord(r2), h2 = this._convertToCellCoord(n2);
          for (let p3 = l2; p3 <= c2; p3++) for (let l3 = u3; l3 <= h2; l3++) {
            const u4 = this.d * l3 + p3;
            if ((!o2 || o2(this._convertFromCellCoord(p3), this._convertFromCellCoord(l3), this._convertFromCellCoord(p3 + 1), this._convertFromCellCoord(l3 + 1))) && i2.call(this, t2, e2, r2, n2, u4, s2, a2, o2)) return;
          }
        }
        _convertFromCellCoord(t2) {
          return (t2 - this.padding) / this.scale;
        }
        _convertToCellCoord(t2) {
          return Math.max(0, Math.min(this.d - 1, Math.floor(t2 * this.scale) + this.padding));
        }
        toArrayBuffer() {
          if (this.arrayBuffer) return this.arrayBuffer;
          const t2 = this.cells, e2 = 3 + this.cells.length + 1 + 1;
          let r2 = 0;
          for (let t3 = 0; t3 < this.cells.length; t3++) r2 += this.cells[t3].length;
          const n2 = new Int32Array(e2 + r2 + this.keys.length + this.bboxes.length);
          n2[0] = this.extent, n2[1] = this.n, n2[2] = this.padding;
          let i2 = e2;
          for (let e3 = 0; e3 < t2.length; e3++) {
            const r3 = t2[e3];
            n2[3 + e3] = i2, n2.set(r3, i2), i2 += r3.length;
          }
          return n2[3 + t2.length] = i2, n2.set(this.keys, i2), i2 += this.keys.length, n2[3 + t2.length + 1] = i2, n2.set(this.bboxes, i2), i2 += this.bboxes.length, n2.buffer;
        }
        static serialize(t2, e2) {
          const r2 = t2.toArrayBuffer();
          return e2 && e2.push(r2), { buffer: r2 };
        }
        static deserialize(t2) {
          return new vi(t2.buffer);
        }
      }
      const bi = {};
      function wi(t2, e2, r2 = {}) {
        if (bi[t2]) throw new Error(`${t2} is already registered.`);
        Object.defineProperty(e2, "_classRegistryKey", { value: t2, writeable: false }), bi[t2] = { klass: e2, omit: r2.omit || [], shallow: r2.shallow || [] };
      }
      wi("Object", Object), wi("TransferableGridIndex", vi), wi("Color", Kt), wi("Error", Error), wi("AJAXError", L2), wi("ResolvedImage", te2), wi("StylePropertyFunction", Sn), wi("StyleExpression", xn, { omit: ["_evaluator"] }), wi("ZoomDependentExpression", _n), wi("ZoomConstantExpression", wn), wi("CompoundExpression", Xr, { omit: ["_evaluate"] });
      for (const t2 in Kr) Kr[t2]._classRegistryKey || wi(`Expression_${t2}`, Kr[t2]);
      function _i(t2) {
        return t2 && "undefined" != typeof ArrayBuffer && (t2 instanceof ArrayBuffer || t2.constructor && "ArrayBuffer" === t2.constructor.name);
      }
      function Ai(t2) {
        return t2.$name || t2.constructor._classRegistryKey;
      }
      function Si(t2) {
        return !function(t3) {
          if (null === t3 || "object" != typeof t3) return false;
          const e2 = Ai(t3);
          return !(!e2 || "Object" === e2);
        }(t2) && (null == t2 || "boolean" == typeof t2 || "number" == typeof t2 || "string" == typeof t2 || t2 instanceof Boolean || t2 instanceof Number || t2 instanceof String || t2 instanceof Date || t2 instanceof RegExp || t2 instanceof Blob || t2 instanceof Error || _i(t2) || I(t2) || ArrayBuffer.isView(t2) || t2 instanceof ImageData);
      }
      function ki(t2, e2) {
        if (Si(t2)) return (_i(t2) || I(t2)) && e2 && e2.push(t2), ArrayBuffer.isView(t2) && e2 && e2.push(t2.buffer), t2 instanceof ImageData && e2 && e2.push(t2.data.buffer), t2;
        if (Array.isArray(t2)) {
          const r3 = [];
          for (const n3 of t2) r3.push(ki(n3, e2));
          return r3;
        }
        if ("object" != typeof t2) throw new Error("can't serialize object of type " + typeof t2);
        const r2 = Ai(t2);
        if (!r2) throw new Error(`can't serialize object of unregistered class ${t2.constructor.name}`);
        if (!bi[r2]) throw new Error(`${r2} is not registered.`);
        const { klass: n2 } = bi[r2], i2 = n2.serialize ? n2.serialize(t2, e2) : {};
        if (n2.serialize) {
          if (e2 && i2 === e2[e2.length - 1]) throw new Error("statically serialized object won't survive transfer of $name property");
        } else {
          for (const n3 in t2) {
            if (!t2.hasOwnProperty(n3)) continue;
            if (bi[r2].omit.indexOf(n3) >= 0) continue;
            const s2 = t2[n3];
            i2[n3] = bi[r2].shallow.indexOf(n3) >= 0 ? s2 : ki(s2, e2);
          }
          t2 instanceof Error && (i2.message = t2.message);
        }
        if (i2.$name) throw new Error("$name property is reserved for worker serialization logic.");
        return "Object" !== r2 && (i2.$name = r2), i2;
      }
      function Mi(t2) {
        if (Si(t2)) return t2;
        if (Array.isArray(t2)) return t2.map(Mi);
        if ("object" != typeof t2) throw new Error("can't deserialize object of type " + typeof t2);
        const e2 = Ai(t2) || "Object";
        if (!bi[e2]) throw new Error(`can't deserialize unregistered class ${e2}`);
        const { klass: r2 } = bi[e2];
        if (!r2) throw new Error(`can't deserialize unregistered class ${e2}`);
        if (r2.deserialize) return r2.deserialize(t2);
        const n2 = Object.create(r2.prototype);
        for (const r3 of Object.keys(t2)) {
          if ("$name" === r3) continue;
          const i2 = t2[r3];
          n2[r3] = bi[e2].shallow.indexOf(r3) >= 0 ? i2 : Mi(i2);
        }
        return n2;
      }
      class Ii {
        constructor() {
          this.first = true;
        }
        update(t2, e2) {
          const r2 = Math.floor(t2);
          return this.first ? (this.first = false, this.lastIntegerZoom = r2, this.lastIntegerZoomTime = 0, this.lastZoom = t2, this.lastFloorZoom = r2, true) : (this.lastFloorZoom > r2 ? (this.lastIntegerZoom = r2 + 1, this.lastIntegerZoomTime = e2) : this.lastFloorZoom < r2 && (this.lastIntegerZoom = r2, this.lastIntegerZoomTime = e2), t2 !== this.lastZoom && (this.lastZoom = t2, this.lastFloorZoom = r2, true));
        }
      }
      const zi = { "Latin-1 Supplement": (t2) => t2 >= 128 && t2 <= 255, "Hangul Jamo": (t2) => t2 >= 4352 && t2 <= 4607, Khmer: (t2) => t2 >= 6016 && t2 <= 6143, "General Punctuation": (t2) => t2 >= 8192 && t2 <= 8303, "Letterlike Symbols": (t2) => t2 >= 8448 && t2 <= 8527, "Number Forms": (t2) => t2 >= 8528 && t2 <= 8591, "Miscellaneous Technical": (t2) => t2 >= 8960 && t2 <= 9215, "Control Pictures": (t2) => t2 >= 9216 && t2 <= 9279, "Optical Character Recognition": (t2) => t2 >= 9280 && t2 <= 9311, "Enclosed Alphanumerics": (t2) => t2 >= 9312 && t2 <= 9471, "Geometric Shapes": (t2) => t2 >= 9632 && t2 <= 9727, "Miscellaneous Symbols": (t2) => t2 >= 9728 && t2 <= 9983, "Miscellaneous Symbols and Arrows": (t2) => t2 >= 11008 && t2 <= 11263, "Ideographic Description Characters": (t2) => t2 >= 12272 && t2 <= 12287, "CJK Symbols and Punctuation": (t2) => t2 >= 12288 && t2 <= 12351, Katakana: (t2) => t2 >= 12448 && t2 <= 12543, Kanbun: (t2) => t2 >= 12688 && t2 <= 12703, "CJK Strokes": (t2) => t2 >= 12736 && t2 <= 12783, "Enclosed CJK Letters and Months": (t2) => t2 >= 12800 && t2 <= 13055, "CJK Compatibility": (t2) => t2 >= 13056 && t2 <= 13311, "Yijing Hexagram Symbols": (t2) => t2 >= 19904 && t2 <= 19967, "Private Use Area": (t2) => t2 >= 57344 && t2 <= 63743, "Vertical Forms": (t2) => t2 >= 65040 && t2 <= 65055, "CJK Compatibility Forms": (t2) => t2 >= 65072 && t2 <= 65103, "Small Form Variants": (t2) => t2 >= 65104 && t2 <= 65135, "Halfwidth and Fullwidth Forms": (t2) => t2 >= 65280 && t2 <= 65519 };
      function Pi(t2) {
        for (const e2 of t2) if (Ti(e2.charCodeAt(0))) return true;
        return false;
      }
      function Ci(t2) {
        for (const e2 of t2) if (!Ei(e2.charCodeAt(0))) return false;
        return true;
      }
      function Bi(t2) {
        const e2 = t2.map((t3) => {
          try {
            return new RegExp(`\\p{sc=${t3}}`, "u").source;
          } catch (t4) {
            return null;
          }
        }).filter((t3) => t3);
        return new RegExp(e2.join("|"), "u");
      }
      const Vi = Bi(["Arab", "Dupl", "Mong", "Ougr", "Syrc"]);
      function Ei(t2) {
        return !Vi.test(String.fromCodePoint(t2));
      }
      const Fi = Bi(["Bopo", "Hani", "Hira", "Kana", "Kits", "Nshu", "Tang", "Yiii"]);
      function Ti(t2) {
        return !(746 !== t2 && 747 !== t2 && (t2 < 4352 || !(zi["CJK Compatibility Forms"](t2) && !(t2 >= 65097 && t2 <= 65103) || zi["CJK Compatibility"](t2) || zi["CJK Strokes"](t2) || !(!zi["CJK Symbols and Punctuation"](t2) || t2 >= 12296 && t2 <= 12305 || t2 >= 12308 && t2 <= 12319 || 12336 === t2) || zi["Enclosed CJK Letters and Months"](t2) || zi["Ideographic Description Characters"](t2) || zi.Kanbun(t2) || zi.Katakana(t2) && 12540 !== t2 || !(!zi["Halfwidth and Fullwidth Forms"](t2) || 65288 === t2 || 65289 === t2 || 65293 === t2 || t2 >= 65306 && t2 <= 65310 || 65339 === t2 || 65341 === t2 || 65343 === t2 || t2 >= 65371 && t2 <= 65503 || 65507 === t2 || t2 >= 65512 && t2 <= 65519) || !(!zi["Small Form Variants"](t2) || t2 >= 65112 && t2 <= 65118 || t2 >= 65123 && t2 <= 65126) || zi["Vertical Forms"](t2) || zi["Yijing Hexagram Symbols"](t2) || new RegExp("\\p{sc=Cans}", "u").test(String.fromCodePoint(t2)) || new RegExp("\\p{sc=Hang}", "u").test(String.fromCodePoint(t2)) || Fi.test(String.fromCodePoint(t2)))));
      }
      function $i(t2) {
        return !(Ti(t2) || function(t3) {
          return !!(zi["Latin-1 Supplement"](t3) && (167 === t3 || 169 === t3 || 174 === t3 || 177 === t3 || 188 === t3 || 189 === t3 || 190 === t3 || 215 === t3 || 247 === t3) || zi["General Punctuation"](t3) && (8214 === t3 || 8224 === t3 || 8225 === t3 || 8240 === t3 || 8241 === t3 || 8251 === t3 || 8252 === t3 || 8258 === t3 || 8263 === t3 || 8264 === t3 || 8265 === t3 || 8273 === t3) || zi["Letterlike Symbols"](t3) || zi["Number Forms"](t3) || zi["Miscellaneous Technical"](t3) && (t3 >= 8960 && t3 <= 8967 || t3 >= 8972 && t3 <= 8991 || t3 >= 8996 && t3 <= 9e3 || 9003 === t3 || t3 >= 9085 && t3 <= 9114 || t3 >= 9150 && t3 <= 9165 || 9167 === t3 || t3 >= 9169 && t3 <= 9179 || t3 >= 9186 && t3 <= 9215) || zi["Control Pictures"](t3) && 9251 !== t3 || zi["Optical Character Recognition"](t3) || zi["Enclosed Alphanumerics"](t3) || zi["Geometric Shapes"](t3) || zi["Miscellaneous Symbols"](t3) && !(t3 >= 9754 && t3 <= 9759) || zi["Miscellaneous Symbols and Arrows"](t3) && (t3 >= 11026 && t3 <= 11055 || t3 >= 11088 && t3 <= 11097 || t3 >= 11192 && t3 <= 11243) || zi["CJK Symbols and Punctuation"](t3) || zi.Katakana(t3) || zi["Private Use Area"](t3) || zi["CJK Compatibility Forms"](t3) || zi["Small Form Variants"](t3) || zi["Halfwidth and Fullwidth Forms"](t3) || 8734 === t3 || 8756 === t3 || 8757 === t3 || t3 >= 9984 && t3 <= 10087 || t3 >= 10102 && t3 <= 10131 || 65532 === t3 || 65533 === t3);
        }(t2));
      }
      const Li = Bi(["Adlm", "Arab", "Armi", "Avst", "Chrs", "Cprt", "Egyp", "Elym", "Gara", "Hatr", "Hebr", "Hung", "Khar", "Lydi", "Mand", "Mani", "Mend", "Merc", "Mero", "Narb", "Nbat", "Nkoo", "Orkh", "Palm", "Phli", "Phlp", "Phnx", "Prti", "Rohg", "Samr", "Sarb", "Sogo", "Syrc", "Thaa", "Todr", "Yezi"]);
      function Di(t2) {
        return Li.test(String.fromCodePoint(t2));
      }
      function Oi(t2, e2) {
        return !(!e2 && Di(t2) || t2 >= 2304 && t2 <= 3583 || t2 >= 3840 && t2 <= 4255 || zi.Khmer(t2));
      }
      function ji(t2) {
        for (const e2 of t2) if (Di(e2.charCodeAt(0))) return true;
        return false;
      }
      const Ri = new class {
        constructor() {
          this.applyArabicShaping = null, this.processBidirectionalText = null, this.processStyledBidirectionalText = null, this.pluginStatus = "unavailable", this.pluginURL = null;
        }
        setState(t2) {
          this.pluginStatus = t2.pluginStatus, this.pluginURL = t2.pluginURL;
        }
        getState() {
          return { pluginStatus: this.pluginStatus, pluginURL: this.pluginURL };
        }
        setMethods(t2) {
          this.applyArabicShaping = t2.applyArabicShaping, this.processBidirectionalText = t2.processBidirectionalText, this.processStyledBidirectionalText = t2.processStyledBidirectionalText;
        }
        isParsed() {
          return null != this.applyArabicShaping && null != this.processBidirectionalText && null != this.processStyledBidirectionalText;
        }
        getPluginURL() {
          return this.pluginURL;
        }
        getRTLTextPluginStatus() {
          return this.pluginStatus;
        }
      }();
      class Ui {
        constructor(t2, e2) {
          this.zoom = t2, e2 ? (this.now = e2.now, this.fadeDuration = e2.fadeDuration, this.zoomHistory = e2.zoomHistory, this.transition = e2.transition) : (this.now = 0, this.fadeDuration = 0, this.zoomHistory = new Ii(), this.transition = {});
        }
        isSupportedScript(t2) {
          return function(t3, e2) {
            for (const r2 of t3) if (!Oi(r2.charCodeAt(0), e2)) return false;
            return true;
          }(t2, "loaded" === Ri.getRTLTextPluginStatus());
        }
        crossFadingFactor() {
          return 0 === this.fadeDuration ? 1 : Math.min((this.now - this.zoomHistory.lastIntegerZoomTime) / this.fadeDuration, 1);
        }
        getCrossfadeParameters() {
          const t2 = this.zoom, e2 = t2 - Math.floor(t2), r2 = this.crossFadingFactor();
          return t2 > this.zoomHistory.lastIntegerZoom ? { fromScale: 2, toScale: 1, t: e2 + (1 - e2) * r2 } : { fromScale: 0.5, toScale: 1, t: 1 - (1 - r2) * e2 };
        }
      }
      class qi {
        constructor(t2, e2) {
          this.property = t2, this.value = e2, this.expression = function(t3, e3) {
            if (cn2(t3)) return new Sn(t3, e3);
            if (vn(t3)) {
              const r2 = An(t3, e3);
              if ("error" === r2.result) throw new Error(r2.value.map((t4) => `${t4.key}: ${t4.message}`).join(", "));
              return r2.value;
            }
            {
              let r2 = t3;
              return "color" === e3.type && "string" == typeof t3 ? r2 = Kt.parse(t3) : "padding" !== e3.type || "number" != typeof t3 && !Array.isArray(t3) ? "variableAnchorOffsetCollection" === e3.type && Array.isArray(t3) && (r2 = Qt.parse(t3)) : r2 = Jt.parse(t3), { kind: "constant", evaluate: () => r2 };
            }
          }(void 0 === e2 ? t2.specification.default : e2, t2.specification);
        }
        isDataDriven() {
          return "source" === this.expression.kind || "composite" === this.expression.kind;
        }
        possiblyEvaluate(t2, e2, r2) {
          return this.property.possiblyEvaluate(this, t2, e2, r2);
        }
      }
      class Ni {
        constructor(t2) {
          this.property = t2, this.value = new qi(t2, void 0);
        }
        transitioned(t2, e2) {
          return new Gi(this.property, this.value, e2, g({}, t2.transition, this.transition), t2.now);
        }
        untransitioned() {
          return new Gi(this.property, this.value, null, {}, 0);
        }
      }
      class Zi {
        constructor(t2) {
          this._properties = t2, this._values = Object.create(t2.defaultTransitionablePropertyValues);
        }
        getValue(t2) {
          return w2(this._values[t2].value.value);
        }
        setValue(t2, e2) {
          Object.prototype.hasOwnProperty.call(this._values, t2) || (this._values[t2] = new Ni(this._values[t2].property)), this._values[t2].value = new qi(this._values[t2].property, null === e2 ? void 0 : w2(e2));
        }
        getTransition(t2) {
          return w2(this._values[t2].transition);
        }
        setTransition(t2, e2) {
          Object.prototype.hasOwnProperty.call(this._values, t2) || (this._values[t2] = new Ni(this._values[t2].property)), this._values[t2].transition = w2(e2) || void 0;
        }
        serialize() {
          const t2 = {};
          for (const e2 of Object.keys(this._values)) {
            const r2 = this.getValue(e2);
            void 0 !== r2 && (t2[e2] = r2);
            const n2 = this.getTransition(e2);
            void 0 !== n2 && (t2[`${e2}-transition`] = n2);
          }
          return t2;
        }
        transitioned(t2, e2) {
          const r2 = new Ki(this._properties);
          for (const n2 of Object.keys(this._values)) r2._values[n2] = this._values[n2].transitioned(t2, e2._values[n2]);
          return r2;
        }
        untransitioned() {
          const t2 = new Ki(this._properties);
          for (const e2 of Object.keys(this._values)) t2._values[e2] = this._values[e2].untransitioned();
          return t2;
        }
      }
      class Gi {
        constructor(t2, e2, r2, n2, i2) {
          this.property = t2, this.value = e2, this.begin = i2 + n2.delay || 0, this.end = this.begin + n2.duration || 0, t2.specification.transition && (n2.delay || n2.duration) && (this.prior = r2);
        }
        possiblyEvaluate(t2, e2, r2) {
          const n2 = t2.now || 0, i2 = this.value.possiblyEvaluate(t2, e2, r2), s2 = this.prior;
          if (s2) {
            if (n2 > this.end) return this.prior = null, i2;
            if (this.value.isDataDriven()) return this.prior = null, i2;
            if (n2 < this.begin) return s2.possiblyEvaluate(t2, e2, r2);
            {
              const a2 = (n2 - this.begin) / (this.end - this.begin);
              return this.property.interpolate(s2.possiblyEvaluate(t2, e2, r2), i2, function(t3) {
                if (t3 <= 0) return 0;
                if (t3 >= 1) return 1;
                const e3 = t3 * t3, r3 = e3 * t3;
                return 4 * (t3 < 0.5 ? r3 : 3 * (t3 - e3) + r3 - 0.75);
              }(a2));
            }
          }
          return i2;
        }
      }
      class Ki {
        constructor(t2) {
          this._properties = t2, this._values = Object.create(t2.defaultTransitioningPropertyValues);
        }
        possiblyEvaluate(t2, e2, r2) {
          const n2 = new Yi(this._properties);
          for (const i2 of Object.keys(this._values)) n2._values[i2] = this._values[i2].possiblyEvaluate(t2, e2, r2);
          return n2;
        }
        hasTransition() {
          for (const t2 of Object.keys(this._values)) if (this._values[t2].prior) return true;
          return false;
        }
      }
      class Xi {
        constructor(t2) {
          this._properties = t2, this._values = Object.create(t2.defaultPropertyValues);
        }
        hasValue(t2) {
          return void 0 !== this._values[t2].value;
        }
        getValue(t2) {
          return w2(this._values[t2].value);
        }
        setValue(t2, e2) {
          this._values[t2] = new qi(this._values[t2].property, null === e2 ? void 0 : w2(e2));
        }
        serialize() {
          const t2 = {};
          for (const e2 of Object.keys(this._values)) {
            const r2 = this.getValue(e2);
            void 0 !== r2 && (t2[e2] = r2);
          }
          return t2;
        }
        possiblyEvaluate(t2, e2, r2) {
          const n2 = new Yi(this._properties);
          for (const i2 of Object.keys(this._values)) n2._values[i2] = this._values[i2].possiblyEvaluate(t2, e2, r2);
          return n2;
        }
      }
      class Hi {
        constructor(t2, e2, r2) {
          this.property = t2, this.value = e2, this.parameters = r2;
        }
        isConstant() {
          return "constant" === this.value.kind;
        }
        constantOr(t2) {
          return "constant" === this.value.kind ? this.value.value : t2;
        }
        evaluate(t2, e2, r2, n2) {
          return this.property.evaluate(this.value, this.parameters, t2, e2, r2, n2);
        }
      }
      class Yi {
        constructor(t2) {
          this._properties = t2, this._values = Object.create(t2.defaultPossiblyEvaluatedValues);
        }
        get(t2) {
          return this._values[t2];
        }
      }
      class Ji {
        constructor(t2) {
          this.specification = t2;
        }
        possiblyEvaluate(t2, e2) {
          if (t2.isDataDriven()) throw new Error("Value should not be data driven");
          return t2.expression.evaluate(e2);
        }
        interpolate(t2, e2, r2) {
          const n2 = Ce2[this.specification.type];
          return n2 ? n2(t2, e2, r2) : t2;
        }
      }
      class Wi {
        constructor(t2, e2) {
          this.specification = t2, this.overrides = e2;
        }
        possiblyEvaluate(t2, e2, r2, n2) {
          return new Hi(this, "constant" === t2.expression.kind || "camera" === t2.expression.kind ? { kind: "constant", value: t2.expression.evaluate(e2, null, {}, r2, n2) } : t2.expression, e2);
        }
        interpolate(t2, e2, r2) {
          if ("constant" !== t2.value.kind || "constant" !== e2.value.kind) return t2;
          if (void 0 === t2.value.value || void 0 === e2.value.value) return new Hi(this, { kind: "constant", value: void 0 }, t2.parameters);
          const n2 = Ce2[this.specification.type];
          if (n2) {
            const i2 = n2(t2.value.value, e2.value.value, r2);
            return new Hi(this, { kind: "constant", value: i2 }, t2.parameters);
          }
          return t2;
        }
        evaluate(t2, e2, r2, n2, i2, s2) {
          return "constant" === t2.kind ? t2.value : t2.evaluate(e2, r2, n2, i2, s2);
        }
      }
      class Qi extends Wi {
        possiblyEvaluate(t2, e2, r2, n2) {
          if (void 0 === t2.value) return new Hi(this, { kind: "constant", value: void 0 }, e2);
          if ("constant" === t2.expression.kind) {
            const i2 = t2.expression.evaluate(e2, null, {}, r2, n2), s2 = "resolvedImage" === t2.property.specification.type && "string" != typeof i2 ? i2.name : i2, a2 = this._calculate(s2, s2, s2, e2);
            return new Hi(this, { kind: "constant", value: a2 }, e2);
          }
          if ("camera" === t2.expression.kind) {
            const r3 = this._calculate(t2.expression.evaluate({ zoom: e2.zoom - 1 }), t2.expression.evaluate({ zoom: e2.zoom }), t2.expression.evaluate({ zoom: e2.zoom + 1 }), e2);
            return new Hi(this, { kind: "constant", value: r3 }, e2);
          }
          return new Hi(this, t2.expression, e2);
        }
        evaluate(t2, e2, r2, n2, i2, s2) {
          if ("source" === t2.kind) {
            const a2 = t2.evaluate(e2, r2, n2, i2, s2);
            return this._calculate(a2, a2, a2, e2);
          }
          return "composite" === t2.kind ? this._calculate(t2.evaluate({ zoom: Math.floor(e2.zoom) - 1 }, r2, n2), t2.evaluate({ zoom: Math.floor(e2.zoom) }, r2, n2), t2.evaluate({ zoom: Math.floor(e2.zoom) + 1 }, r2, n2), e2) : t2.value;
        }
        _calculate(t2, e2, r2, n2) {
          return n2.zoom > n2.zoomHistory.lastIntegerZoom ? { from: t2, to: e2 } : { from: r2, to: e2 };
        }
        interpolate(t2) {
          return t2;
        }
      }
      class ts {
        constructor(t2) {
          this.specification = t2;
        }
        possiblyEvaluate(t2, e2, r2, n2) {
          if (void 0 !== t2.value) {
            if ("constant" === t2.expression.kind) {
              const i2 = t2.expression.evaluate(e2, null, {}, r2, n2);
              return this._calculate(i2, i2, i2, e2);
            }
            return this._calculate(t2.expression.evaluate(new Ui(Math.floor(e2.zoom - 1), e2)), t2.expression.evaluate(new Ui(Math.floor(e2.zoom), e2)), t2.expression.evaluate(new Ui(Math.floor(e2.zoom + 1), e2)), e2);
          }
        }
        _calculate(t2, e2, r2, n2) {
          return n2.zoom > n2.zoomHistory.lastIntegerZoom ? { from: t2, to: e2 } : { from: r2, to: e2 };
        }
        interpolate(t2) {
          return t2;
        }
      }
      class es {
        constructor(t2) {
          this.specification = t2;
        }
        possiblyEvaluate(t2, e2, r2, n2) {
          return !!t2.expression.evaluate(e2, null, {}, r2, n2);
        }
        interpolate() {
          return false;
        }
      }
      class rs {
        constructor(t2) {
          this.properties = t2, this.defaultPropertyValues = {}, this.defaultTransitionablePropertyValues = {}, this.defaultTransitioningPropertyValues = {}, this.defaultPossiblyEvaluatedValues = {}, this.overridableProperties = [];
          for (const e2 in t2) {
            const r2 = t2[e2];
            r2.specification.overridable && this.overridableProperties.push(e2);
            const n2 = this.defaultPropertyValues[e2] = new qi(r2, void 0), i2 = this.defaultTransitionablePropertyValues[e2] = new Ni(r2);
            this.defaultTransitioningPropertyValues[e2] = i2.untransitioned(), this.defaultPossiblyEvaluatedValues[e2] = n2.possiblyEvaluate({});
          }
        }
      }
      wi("DataDrivenProperty", Wi), wi("DataConstantProperty", Ji), wi("CrossFadedDataDrivenProperty", Qi), wi("CrossFadedProperty", ts), wi("ColorRampProperty", es);
      const ns = "-transition";
      class is extends Z2 {
        constructor(t2, e2) {
          if (super(), this.id = t2.id, this.type = t2.type, this._featureFilter = { filter: () => true, needGeometry: false }, "custom" !== t2.type && (this.metadata = t2.metadata, this.minzoom = t2.minzoom, this.maxzoom = t2.maxzoom, "background" !== t2.type && (this.source = t2.source, this.sourceLayer = t2["source-layer"], this.filter = t2.filter), e2.layout && (this._unevaluatedLayout = new Xi(e2.layout)), e2.paint)) {
            this._transitionablePaint = new Zi(e2.paint);
            for (const e3 in t2.paint) this.setPaintProperty(e3, t2.paint[e3], { validate: false });
            for (const e3 in t2.layout) this.setLayoutProperty(e3, t2.layout[e3], { validate: false });
            this._transitioningPaint = this._transitionablePaint.untransitioned(), this.paint = new Yi(e2.paint);
          }
        }
        getCrossfadeParameters() {
          return this._crossfadeParameters;
        }
        getLayoutProperty(t2) {
          return "visibility" === t2 ? this.visibility : this._unevaluatedLayout.getValue(t2);
        }
        setLayoutProperty(t2, e2, r2 = {}) {
          null != e2 && this._validate(gi, `layers.${this.id}.layout.${t2}`, t2, e2, r2) || ("visibility" !== t2 ? this._unevaluatedLayout.setValue(t2, e2) : this.visibility = e2);
        }
        getPaintProperty(t2) {
          return t2.endsWith(ns) ? this._transitionablePaint.getTransition(t2.slice(0, -11)) : this._transitionablePaint.getValue(t2);
        }
        setPaintProperty(t2, e2, r2 = {}) {
          if (null != e2 && this._validate(mi, `layers.${this.id}.paint.${t2}`, t2, e2, r2)) return false;
          if (t2.endsWith(ns)) return this._transitionablePaint.setTransition(t2.slice(0, -11), e2 || void 0), false;
          {
            const r3 = this._transitionablePaint._values[t2], n2 = "cross-faded-data-driven" === r3.property.specification["property-type"], i2 = r3.value.isDataDriven(), s2 = r3.value;
            this._transitionablePaint.setValue(t2, e2), this._handleSpecialPaintPropertyUpdate(t2);
            const a2 = this._transitionablePaint._values[t2].value;
            return a2.isDataDriven() || i2 || n2 || this._handleOverridablePaintPropertyUpdate(t2, s2, a2);
          }
        }
        _handleSpecialPaintPropertyUpdate(t2) {
        }
        _handleOverridablePaintPropertyUpdate(t2, e2, r2) {
          return false;
        }
        isHidden(t2) {
          return !!(this.minzoom && t2 < this.minzoom) || !!(this.maxzoom && t2 >= this.maxzoom) || "none" === this.visibility;
        }
        updateTransitions(t2) {
          this._transitioningPaint = this._transitionablePaint.transitioned(t2, this._transitioningPaint);
        }
        hasTransition() {
          return this._transitioningPaint.hasTransition();
        }
        recalculate(t2, e2) {
          t2.getCrossfadeParameters && (this._crossfadeParameters = t2.getCrossfadeParameters()), this._unevaluatedLayout && (this.layout = this._unevaluatedLayout.possiblyEvaluate(t2, void 0, e2)), this.paint = this._transitioningPaint.possiblyEvaluate(t2, void 0, e2);
        }
        serialize() {
          const t2 = { id: this.id, type: this.type, source: this.source, "source-layer": this.sourceLayer, metadata: this.metadata, minzoom: this.minzoom, maxzoom: this.maxzoom, filter: this.filter, layout: this._unevaluatedLayout && this._unevaluatedLayout.serialize(), paint: this._transitionablePaint && this._transitionablePaint.serialize() };
          return this.visibility && (t2.layout = t2.layout || {}, t2.layout.visibility = this.visibility), b(t2, (t3, e2) => !(void 0 === t3 || "layout" === e2 && !Object.keys(t3).length || "paint" === e2 && !Object.keys(t3).length));
        }
        _validate(t2, e2, r2, n2, i2 = {}) {
          return (!i2 || false !== i2.validate) && xi(this, t2.call(fi, { key: e2, layerType: this.type, objectKey: r2, value: n2, styleSpec: G2, style: { glyphs: true, sprite: true } }));
        }
        is3D() {
          return false;
        }
        isTileClipped() {
          return false;
        }
        hasOffscreenPass() {
          return false;
        }
        resize() {
        }
        isStateDependent() {
          for (const t2 in this.paint._values) {
            const e2 = this.paint.get(t2);
            if (e2 instanceof Hi && an(e2.property.specification) && ("source" === e2.value.kind || "composite" === e2.value.kind) && e2.value.isStateDependent) return true;
          }
          return false;
        }
      }
      const ss = { Int8: Int8Array, Uint8: Uint8Array, Int16: Int16Array, Uint16: Uint16Array, Int32: Int32Array, Uint32: Uint32Array, Float32: Float32Array };
      class as {
        constructor(t2, e2) {
          this._structArray = t2, this._pos1 = e2 * this.size, this._pos2 = this._pos1 / 2, this._pos4 = this._pos1 / 4, this._pos8 = this._pos1 / 8;
        }
      }
      class os {
        constructor() {
          this.isTransferred = false, this.capacity = -1, this.resize(0);
        }
        static serialize(t2, e2) {
          return t2._trim(), e2 && (t2.isTransferred = true, e2.push(t2.arrayBuffer)), { length: t2.length, arrayBuffer: t2.arrayBuffer };
        }
        static deserialize(t2) {
          const e2 = Object.create(this.prototype);
          return e2.arrayBuffer = t2.arrayBuffer, e2.length = t2.length, e2.capacity = t2.arrayBuffer.byteLength / e2.bytesPerElement, e2._refreshViews(), e2;
        }
        _trim() {
          this.length !== this.capacity && (this.capacity = this.length, this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement), this._refreshViews());
        }
        clear() {
          this.length = 0;
        }
        resize(t2) {
          this.reserve(t2), this.length = t2;
        }
        reserve(t2) {
          if (t2 > this.capacity) {
            this.capacity = Math.max(t2, Math.floor(5 * this.capacity), 128), this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);
            const e2 = this.uint8;
            this._refreshViews(), e2 && this.uint8.set(e2);
          }
        }
        _refreshViews() {
          throw new Error("_refreshViews() must be implemented by each concrete StructArray layout");
        }
      }
      function ls(t2, e2 = 1) {
        let r2 = 0, n2 = 0;
        return { members: t2.map((t3) => {
          const i2 = ss[t3.type].BYTES_PER_ELEMENT, s2 = r2 = us(r2, Math.max(e2, i2)), a2 = t3.components || 1;
          return n2 = Math.max(n2, i2), r2 += i2 * a2, { name: t3.name, type: t3.type, components: a2, offset: s2 };
        }), size: us(r2, Math.max(n2, e2)), alignment: e2 };
      }
      function us(t2, e2) {
        return Math.ceil(t2 / e2) * e2;
      }
      class cs extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2) {
          const r2 = this.length;
          return this.resize(r2 + 1), this.emplace(r2, t2, e2);
        }
        emplace(t2, e2, r2) {
          const n2 = 2 * t2;
          return this.int16[n2 + 0] = e2, this.int16[n2 + 1] = r2, t2;
        }
      }
      cs.prototype.bytesPerElement = 4, wi("StructArrayLayout2i4", cs);
      class hs extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2) {
          const n2 = this.length;
          return this.resize(n2 + 1), this.emplace(n2, t2, e2, r2);
        }
        emplace(t2, e2, r2, n2) {
          const i2 = 3 * t2;
          return this.int16[i2 + 0] = e2, this.int16[i2 + 1] = r2, this.int16[i2 + 2] = n2, t2;
        }
      }
      hs.prototype.bytesPerElement = 6, wi("StructArrayLayout3i6", hs);
      class ps extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2) {
          const i2 = this.length;
          return this.resize(i2 + 1), this.emplace(i2, t2, e2, r2, n2);
        }
        emplace(t2, e2, r2, n2, i2) {
          const s2 = 4 * t2;
          return this.int16[s2 + 0] = e2, this.int16[s2 + 1] = r2, this.int16[s2 + 2] = n2, this.int16[s2 + 3] = i2, t2;
        }
      }
      ps.prototype.bytesPerElement = 8, wi("StructArrayLayout4i8", ps);
      class fs extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2, i2, s2) {
          const a2 = this.length;
          return this.resize(a2 + 1), this.emplace(a2, t2, e2, r2, n2, i2, s2);
        }
        emplace(t2, e2, r2, n2, i2, s2, a2) {
          const o2 = 6 * t2;
          return this.int16[o2 + 0] = e2, this.int16[o2 + 1] = r2, this.int16[o2 + 2] = n2, this.int16[o2 + 3] = i2, this.int16[o2 + 4] = s2, this.int16[o2 + 5] = a2, t2;
        }
      }
      fs.prototype.bytesPerElement = 12, wi("StructArrayLayout2i4i12", fs);
      class ds extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2, i2, s2) {
          const a2 = this.length;
          return this.resize(a2 + 1), this.emplace(a2, t2, e2, r2, n2, i2, s2);
        }
        emplace(t2, e2, r2, n2, i2, s2, a2) {
          const o2 = 4 * t2, l2 = 8 * t2;
          return this.int16[o2 + 0] = e2, this.int16[o2 + 1] = r2, this.uint8[l2 + 4] = n2, this.uint8[l2 + 5] = i2, this.uint8[l2 + 6] = s2, this.uint8[l2 + 7] = a2, t2;
        }
      }
      ds.prototype.bytesPerElement = 8, wi("StructArrayLayout2i4ub8", ds);
      class ys extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2) {
          const r2 = this.length;
          return this.resize(r2 + 1), this.emplace(r2, t2, e2);
        }
        emplace(t2, e2, r2) {
          const n2 = 2 * t2;
          return this.float32[n2 + 0] = e2, this.float32[n2 + 1] = r2, t2;
        }
      }
      ys.prototype.bytesPerElement = 8, wi("StructArrayLayout2f8", ys);
      class ms extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2, i2, s2, a2, o2, l2, u3) {
          const c2 = this.length;
          return this.resize(c2 + 1), this.emplace(c2, t2, e2, r2, n2, i2, s2, a2, o2, l2, u3);
        }
        emplace(t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2) {
          const h2 = 10 * t2;
          return this.uint16[h2 + 0] = e2, this.uint16[h2 + 1] = r2, this.uint16[h2 + 2] = n2, this.uint16[h2 + 3] = i2, this.uint16[h2 + 4] = s2, this.uint16[h2 + 5] = a2, this.uint16[h2 + 6] = o2, this.uint16[h2 + 7] = l2, this.uint16[h2 + 8] = u3, this.uint16[h2 + 9] = c2, t2;
        }
      }
      ms.prototype.bytesPerElement = 20, wi("StructArrayLayout10ui20", ms);
      class gs extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2) {
          const p3 = this.length;
          return this.resize(p3 + 1), this.emplace(p3, t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2);
        }
        emplace(t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2, p3) {
          const f2 = 12 * t2;
          return this.int16[f2 + 0] = e2, this.int16[f2 + 1] = r2, this.int16[f2 + 2] = n2, this.int16[f2 + 3] = i2, this.uint16[f2 + 4] = s2, this.uint16[f2 + 5] = a2, this.uint16[f2 + 6] = o2, this.uint16[f2 + 7] = l2, this.int16[f2 + 8] = u3, this.int16[f2 + 9] = c2, this.int16[f2 + 10] = h2, this.int16[f2 + 11] = p3, t2;
        }
      }
      gs.prototype.bytesPerElement = 24, wi("StructArrayLayout4i4ui4i24", gs);
      class xs extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2) {
          const n2 = this.length;
          return this.resize(n2 + 1), this.emplace(n2, t2, e2, r2);
        }
        emplace(t2, e2, r2, n2) {
          const i2 = 3 * t2;
          return this.float32[i2 + 0] = e2, this.float32[i2 + 1] = r2, this.float32[i2 + 2] = n2, t2;
        }
      }
      xs.prototype.bytesPerElement = 12, wi("StructArrayLayout3f12", xs);
      class vs extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);
        }
        emplaceBack(t2) {
          const e2 = this.length;
          return this.resize(e2 + 1), this.emplace(e2, t2);
        }
        emplace(t2, e2) {
          return this.uint32[1 * t2 + 0] = e2, t2;
        }
      }
      vs.prototype.bytesPerElement = 4, wi("StructArrayLayout1ul4", vs);
      class bs extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2, i2, s2, a2, o2, l2) {
          const u3 = this.length;
          return this.resize(u3 + 1), this.emplace(u3, t2, e2, r2, n2, i2, s2, a2, o2, l2);
        }
        emplace(t2, e2, r2, n2, i2, s2, a2, o2, l2, u3) {
          const c2 = 10 * t2, h2 = 5 * t2;
          return this.int16[c2 + 0] = e2, this.int16[c2 + 1] = r2, this.int16[c2 + 2] = n2, this.int16[c2 + 3] = i2, this.int16[c2 + 4] = s2, this.int16[c2 + 5] = a2, this.uint32[h2 + 3] = o2, this.uint16[c2 + 8] = l2, this.uint16[c2 + 9] = u3, t2;
        }
      }
      bs.prototype.bytesPerElement = 20, wi("StructArrayLayout6i1ul2ui20", bs);
      class ws extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2, i2, s2) {
          const a2 = this.length;
          return this.resize(a2 + 1), this.emplace(a2, t2, e2, r2, n2, i2, s2);
        }
        emplace(t2, e2, r2, n2, i2, s2, a2) {
          const o2 = 6 * t2;
          return this.int16[o2 + 0] = e2, this.int16[o2 + 1] = r2, this.int16[o2 + 2] = n2, this.int16[o2 + 3] = i2, this.int16[o2 + 4] = s2, this.int16[o2 + 5] = a2, t2;
        }
      }
      ws.prototype.bytesPerElement = 12, wi("StructArrayLayout2i2i2i12", ws);
      class _s extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2, i2) {
          const s2 = this.length;
          return this.resize(s2 + 1), this.emplace(s2, t2, e2, r2, n2, i2);
        }
        emplace(t2, e2, r2, n2, i2, s2) {
          const a2 = 4 * t2, o2 = 8 * t2;
          return this.float32[a2 + 0] = e2, this.float32[a2 + 1] = r2, this.float32[a2 + 2] = n2, this.int16[o2 + 6] = i2, this.int16[o2 + 7] = s2, t2;
        }
      }
      _s.prototype.bytesPerElement = 16, wi("StructArrayLayout2f1f2i16", _s);
      class As extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2, i2, s2) {
          const a2 = this.length;
          return this.resize(a2 + 1), this.emplace(a2, t2, e2, r2, n2, i2, s2);
        }
        emplace(t2, e2, r2, n2, i2, s2, a2) {
          const o2 = 16 * t2, l2 = 4 * t2, u3 = 8 * t2;
          return this.uint8[o2 + 0] = e2, this.uint8[o2 + 1] = r2, this.float32[l2 + 1] = n2, this.float32[l2 + 2] = i2, this.int16[u3 + 6] = s2, this.int16[u3 + 7] = a2, t2;
        }
      }
      As.prototype.bytesPerElement = 16, wi("StructArrayLayout2ub2f2i16", As);
      class Ss extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2) {
          const n2 = this.length;
          return this.resize(n2 + 1), this.emplace(n2, t2, e2, r2);
        }
        emplace(t2, e2, r2, n2) {
          const i2 = 3 * t2;
          return this.uint16[i2 + 0] = e2, this.uint16[i2 + 1] = r2, this.uint16[i2 + 2] = n2, t2;
        }
      }
      Ss.prototype.bytesPerElement = 6, wi("StructArrayLayout3ui6", Ss);
      class ks extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2, p3, f2, d2, y2, m2) {
          const g2 = this.length;
          return this.resize(g2 + 1), this.emplace(g2, t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2, p3, f2, d2, y2, m2);
        }
        emplace(t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2, p3, f2, d2, y2, m2, g2) {
          const x2 = 24 * t2, v2 = 12 * t2, b2 = 48 * t2;
          return this.int16[x2 + 0] = e2, this.int16[x2 + 1] = r2, this.uint16[x2 + 2] = n2, this.uint16[x2 + 3] = i2, this.uint32[v2 + 2] = s2, this.uint32[v2 + 3] = a2, this.uint32[v2 + 4] = o2, this.uint16[x2 + 10] = l2, this.uint16[x2 + 11] = u3, this.uint16[x2 + 12] = c2, this.float32[v2 + 7] = h2, this.float32[v2 + 8] = p3, this.uint8[b2 + 36] = f2, this.uint8[b2 + 37] = d2, this.uint8[b2 + 38] = y2, this.uint32[v2 + 10] = m2, this.int16[x2 + 22] = g2, t2;
        }
      }
      ks.prototype.bytesPerElement = 48, wi("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48", ks);
      class Ms extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2, p3, f2, d2, y2, m2, g2, x2, v2, b2, w3, _2, A2, S2, k2, M2, I2) {
          const z3 = this.length;
          return this.resize(z3 + 1), this.emplace(z3, t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2, p3, f2, d2, y2, m2, g2, x2, v2, b2, w3, _2, A2, S2, k2, M2, I2);
        }
        emplace(t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2, p3, f2, d2, y2, m2, g2, x2, v2, b2, w3, _2, A2, S2, k2, M2, I2, z3) {
          const P3 = 32 * t2, C2 = 16 * t2;
          return this.int16[P3 + 0] = e2, this.int16[P3 + 1] = r2, this.int16[P3 + 2] = n2, this.int16[P3 + 3] = i2, this.int16[P3 + 4] = s2, this.int16[P3 + 5] = a2, this.int16[P3 + 6] = o2, this.int16[P3 + 7] = l2, this.uint16[P3 + 8] = u3, this.uint16[P3 + 9] = c2, this.uint16[P3 + 10] = h2, this.uint16[P3 + 11] = p3, this.uint16[P3 + 12] = f2, this.uint16[P3 + 13] = d2, this.uint16[P3 + 14] = y2, this.uint16[P3 + 15] = m2, this.uint16[P3 + 16] = g2, this.uint16[P3 + 17] = x2, this.uint16[P3 + 18] = v2, this.uint16[P3 + 19] = b2, this.uint16[P3 + 20] = w3, this.uint16[P3 + 21] = _2, this.uint16[P3 + 22] = A2, this.uint32[C2 + 12] = S2, this.float32[C2 + 13] = k2, this.float32[C2 + 14] = M2, this.uint16[P3 + 30] = I2, this.uint16[P3 + 31] = z3, t2;
        }
      }
      Ms.prototype.bytesPerElement = 64, wi("StructArrayLayout8i15ui1ul2f2ui64", Ms);
      class Is extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }
        emplaceBack(t2) {
          const e2 = this.length;
          return this.resize(e2 + 1), this.emplace(e2, t2);
        }
        emplace(t2, e2) {
          return this.float32[1 * t2 + 0] = e2, t2;
        }
      }
      Is.prototype.bytesPerElement = 4, wi("StructArrayLayout1f4", Is);
      class zs extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2) {
          const n2 = this.length;
          return this.resize(n2 + 1), this.emplace(n2, t2, e2, r2);
        }
        emplace(t2, e2, r2, n2) {
          const i2 = 3 * t2;
          return this.uint16[6 * t2 + 0] = e2, this.float32[i2 + 1] = r2, this.float32[i2 + 2] = n2, t2;
        }
      }
      zs.prototype.bytesPerElement = 12, wi("StructArrayLayout1ui2f12", zs);
      class Ps extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2) {
          const n2 = this.length;
          return this.resize(n2 + 1), this.emplace(n2, t2, e2, r2);
        }
        emplace(t2, e2, r2, n2) {
          const i2 = 4 * t2;
          return this.uint32[2 * t2 + 0] = e2, this.uint16[i2 + 2] = r2, this.uint16[i2 + 3] = n2, t2;
        }
      }
      Ps.prototype.bytesPerElement = 8, wi("StructArrayLayout1ul2ui8", Ps);
      class Cs extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2) {
          const r2 = this.length;
          return this.resize(r2 + 1), this.emplace(r2, t2, e2);
        }
        emplace(t2, e2, r2) {
          const n2 = 2 * t2;
          return this.uint16[n2 + 0] = e2, this.uint16[n2 + 1] = r2, t2;
        }
      }
      Cs.prototype.bytesPerElement = 4, wi("StructArrayLayout2ui4", Cs);
      class Bs extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }
        emplaceBack(t2) {
          const e2 = this.length;
          return this.resize(e2 + 1), this.emplace(e2, t2);
        }
        emplace(t2, e2) {
          return this.uint16[1 * t2 + 0] = e2, t2;
        }
      }
      Bs.prototype.bytesPerElement = 2, wi("StructArrayLayout1ui2", Bs);
      class Vs extends os {
        _refreshViews() {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }
        emplaceBack(t2, e2, r2, n2) {
          const i2 = this.length;
          return this.resize(i2 + 1), this.emplace(i2, t2, e2, r2, n2);
        }
        emplace(t2, e2, r2, n2, i2) {
          const s2 = 4 * t2;
          return this.float32[s2 + 0] = e2, this.float32[s2 + 1] = r2, this.float32[s2 + 2] = n2, this.float32[s2 + 3] = i2, t2;
        }
      }
      Vs.prototype.bytesPerElement = 16, wi("StructArrayLayout4f16", Vs);
      class Es extends as {
        get anchorPointX() {
          return this._structArray.int16[this._pos2 + 0];
        }
        get anchorPointY() {
          return this._structArray.int16[this._pos2 + 1];
        }
        get x1() {
          return this._structArray.int16[this._pos2 + 2];
        }
        get y1() {
          return this._structArray.int16[this._pos2 + 3];
        }
        get x2() {
          return this._structArray.int16[this._pos2 + 4];
        }
        get y2() {
          return this._structArray.int16[this._pos2 + 5];
        }
        get featureIndex() {
          return this._structArray.uint32[this._pos4 + 3];
        }
        get sourceLayerIndex() {
          return this._structArray.uint16[this._pos2 + 8];
        }
        get bucketIndex() {
          return this._structArray.uint16[this._pos2 + 9];
        }
        get anchorPoint() {
          return new s(this.anchorPointX, this.anchorPointY);
        }
      }
      Es.prototype.size = 20;
      class Fs extends bs {
        get(t2) {
          return new Es(this, t2);
        }
      }
      wi("CollisionBoxArray", Fs);
      class Ts extends as {
        get anchorX() {
          return this._structArray.int16[this._pos2 + 0];
        }
        get anchorY() {
          return this._structArray.int16[this._pos2 + 1];
        }
        get glyphStartIndex() {
          return this._structArray.uint16[this._pos2 + 2];
        }
        get numGlyphs() {
          return this._structArray.uint16[this._pos2 + 3];
        }
        get vertexStartIndex() {
          return this._structArray.uint32[this._pos4 + 2];
        }
        get lineStartIndex() {
          return this._structArray.uint32[this._pos4 + 3];
        }
        get lineLength() {
          return this._structArray.uint32[this._pos4 + 4];
        }
        get segment() {
          return this._structArray.uint16[this._pos2 + 10];
        }
        get lowerSize() {
          return this._structArray.uint16[this._pos2 + 11];
        }
        get upperSize() {
          return this._structArray.uint16[this._pos2 + 12];
        }
        get lineOffsetX() {
          return this._structArray.float32[this._pos4 + 7];
        }
        get lineOffsetY() {
          return this._structArray.float32[this._pos4 + 8];
        }
        get writingMode() {
          return this._structArray.uint8[this._pos1 + 36];
        }
        get placedOrientation() {
          return this._structArray.uint8[this._pos1 + 37];
        }
        set placedOrientation(t2) {
          this._structArray.uint8[this._pos1 + 37] = t2;
        }
        get hidden() {
          return this._structArray.uint8[this._pos1 + 38];
        }
        set hidden(t2) {
          this._structArray.uint8[this._pos1 + 38] = t2;
        }
        get crossTileID() {
          return this._structArray.uint32[this._pos4 + 10];
        }
        set crossTileID(t2) {
          this._structArray.uint32[this._pos4 + 10] = t2;
        }
        get associatedIconIndex() {
          return this._structArray.int16[this._pos2 + 22];
        }
      }
      Ts.prototype.size = 48;
      class $s extends ks {
        get(t2) {
          return new Ts(this, t2);
        }
      }
      wi("PlacedSymbolArray", $s);
      class Ls extends as {
        get anchorX() {
          return this._structArray.int16[this._pos2 + 0];
        }
        get anchorY() {
          return this._structArray.int16[this._pos2 + 1];
        }
        get rightJustifiedTextSymbolIndex() {
          return this._structArray.int16[this._pos2 + 2];
        }
        get centerJustifiedTextSymbolIndex() {
          return this._structArray.int16[this._pos2 + 3];
        }
        get leftJustifiedTextSymbolIndex() {
          return this._structArray.int16[this._pos2 + 4];
        }
        get verticalPlacedTextSymbolIndex() {
          return this._structArray.int16[this._pos2 + 5];
        }
        get placedIconSymbolIndex() {
          return this._structArray.int16[this._pos2 + 6];
        }
        get verticalPlacedIconSymbolIndex() {
          return this._structArray.int16[this._pos2 + 7];
        }
        get key() {
          return this._structArray.uint16[this._pos2 + 8];
        }
        get textBoxStartIndex() {
          return this._structArray.uint16[this._pos2 + 9];
        }
        get textBoxEndIndex() {
          return this._structArray.uint16[this._pos2 + 10];
        }
        get verticalTextBoxStartIndex() {
          return this._structArray.uint16[this._pos2 + 11];
        }
        get verticalTextBoxEndIndex() {
          return this._structArray.uint16[this._pos2 + 12];
        }
        get iconBoxStartIndex() {
          return this._structArray.uint16[this._pos2 + 13];
        }
        get iconBoxEndIndex() {
          return this._structArray.uint16[this._pos2 + 14];
        }
        get verticalIconBoxStartIndex() {
          return this._structArray.uint16[this._pos2 + 15];
        }
        get verticalIconBoxEndIndex() {
          return this._structArray.uint16[this._pos2 + 16];
        }
        get featureIndex() {
          return this._structArray.uint16[this._pos2 + 17];
        }
        get numHorizontalGlyphVertices() {
          return this._structArray.uint16[this._pos2 + 18];
        }
        get numVerticalGlyphVertices() {
          return this._structArray.uint16[this._pos2 + 19];
        }
        get numIconVertices() {
          return this._structArray.uint16[this._pos2 + 20];
        }
        get numVerticalIconVertices() {
          return this._structArray.uint16[this._pos2 + 21];
        }
        get useRuntimeCollisionCircles() {
          return this._structArray.uint16[this._pos2 + 22];
        }
        get crossTileID() {
          return this._structArray.uint32[this._pos4 + 12];
        }
        set crossTileID(t2) {
          this._structArray.uint32[this._pos4 + 12] = t2;
        }
        get textBoxScale() {
          return this._structArray.float32[this._pos4 + 13];
        }
        get collisionCircleDiameter() {
          return this._structArray.float32[this._pos4 + 14];
        }
        get textAnchorOffsetStartIndex() {
          return this._structArray.uint16[this._pos2 + 30];
        }
        get textAnchorOffsetEndIndex() {
          return this._structArray.uint16[this._pos2 + 31];
        }
      }
      Ls.prototype.size = 64;
      class Ds extends Ms {
        get(t2) {
          return new Ls(this, t2);
        }
      }
      wi("SymbolInstanceArray", Ds);
      class Os extends Is {
        getoffsetX(t2) {
          return this.float32[1 * t2 + 0];
        }
      }
      wi("GlyphOffsetArray", Os);
      class js extends hs {
        getx(t2) {
          return this.int16[3 * t2 + 0];
        }
        gety(t2) {
          return this.int16[3 * t2 + 1];
        }
        gettileUnitDistanceFromAnchor(t2) {
          return this.int16[3 * t2 + 2];
        }
      }
      wi("SymbolLineVertexArray", js);
      class Rs extends as {
        get textAnchor() {
          return this._structArray.uint16[this._pos2 + 0];
        }
        get textOffset0() {
          return this._structArray.float32[this._pos4 + 1];
        }
        get textOffset1() {
          return this._structArray.float32[this._pos4 + 2];
        }
      }
      Rs.prototype.size = 12;
      class Us extends zs {
        get(t2) {
          return new Rs(this, t2);
        }
      }
      wi("TextAnchorOffsetArray", Us);
      class qs extends as {
        get featureIndex() {
          return this._structArray.uint32[this._pos4 + 0];
        }
        get sourceLayerIndex() {
          return this._structArray.uint16[this._pos2 + 2];
        }
        get bucketIndex() {
          return this._structArray.uint16[this._pos2 + 3];
        }
      }
      qs.prototype.size = 8;
      class Ns extends Ps {
        get(t2) {
          return new qs(this, t2);
        }
      }
      wi("FeatureIndexArray", Ns);
      class Zs extends cs {
      }
      class Gs extends cs {
      }
      class Ks extends cs {
      }
      class Xs extends fs {
      }
      class Hs extends ds {
      }
      class Ys extends ys {
      }
      class Js extends ms {
      }
      class Ws extends gs {
      }
      class Qs extends xs {
      }
      class ta extends vs {
      }
      class ea extends ws {
      }
      class ra extends As {
      }
      class na extends Ss {
      }
      class ia extends Cs {
      }
      const sa = ls([{ name: "a_pos", components: 2, type: "Int16" }], 4), { members: aa } = sa;
      class oa {
        constructor(t2 = []) {
          this.segments = t2;
        }
        prepareSegment(t2, e2, r2, n2) {
          let i2 = this.segments[this.segments.length - 1];
          return t2 > oa.MAX_VERTEX_ARRAY_LENGTH && A(`Max vertices per segment is ${oa.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t2}`), (!i2 || i2.vertexLength + t2 > oa.MAX_VERTEX_ARRAY_LENGTH || i2.sortKey !== n2) && (i2 = { vertexOffset: e2.length, primitiveOffset: r2.length, vertexLength: 0, primitiveLength: 0 }, void 0 !== n2 && (i2.sortKey = n2), this.segments.push(i2)), i2;
        }
        get() {
          return this.segments;
        }
        destroy() {
          for (const t2 of this.segments) for (const e2 in t2.vaos) t2.vaos[e2].destroy();
        }
        static simpleSegment(t2, e2, r2, n2) {
          return new oa([{ vertexOffset: t2, primitiveOffset: e2, vertexLength: r2, primitiveLength: n2, vaos: {}, sortKey: 0 }]);
        }
      }
      function la(t2, e2) {
        return 256 * (t2 = y(Math.floor(t2), 0, 255)) + y(Math.floor(e2), 0, 255);
      }
      oa.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1, wi("SegmentVector", oa);
      const ua = ls([{ name: "a_pattern_from", components: 4, type: "Uint16" }, { name: "a_pattern_to", components: 4, type: "Uint16" }, { name: "a_pixel_ratio_from", components: 1, type: "Uint16" }, { name: "a_pixel_ratio_to", components: 1, type: "Uint16" }]);
      var ca = { exports: {} }, ha = { exports: {} };
      ha.exports = function(t2, e2) {
        var r2, n2, i2, s2, a2, o2, l2, u3;
        for (n2 = t2.length - (r2 = 3 & t2.length), i2 = e2, a2 = 3432918353, o2 = 461845907, u3 = 0; u3 < n2; ) l2 = 255 & t2.charCodeAt(u3) | (255 & t2.charCodeAt(++u3)) << 8 | (255 & t2.charCodeAt(++u3)) << 16 | (255 & t2.charCodeAt(++u3)) << 24, ++u3, i2 = 27492 + (65535 & (s2 = 5 * (65535 & (i2 = (i2 ^= l2 = (65535 & (l2 = (l2 = (65535 & l2) * a2 + (((l2 >>> 16) * a2 & 65535) << 16) & 4294967295) << 15 | l2 >>> 17)) * o2 + (((l2 >>> 16) * o2 & 65535) << 16) & 4294967295) << 13 | i2 >>> 19)) + ((5 * (i2 >>> 16) & 65535) << 16) & 4294967295)) + ((58964 + (s2 >>> 16) & 65535) << 16);
        switch (l2 = 0, r2) {
          case 3:
            l2 ^= (255 & t2.charCodeAt(u3 + 2)) << 16;
          case 2:
            l2 ^= (255 & t2.charCodeAt(u3 + 1)) << 8;
          case 1:
            i2 ^= l2 = (65535 & (l2 = (l2 = (65535 & (l2 ^= 255 & t2.charCodeAt(u3))) * a2 + (((l2 >>> 16) * a2 & 65535) << 16) & 4294967295) << 15 | l2 >>> 17)) * o2 + (((l2 >>> 16) * o2 & 65535) << 16) & 4294967295;
        }
        return i2 ^= t2.length, i2 = 2246822507 * (65535 & (i2 ^= i2 >>> 16)) + ((2246822507 * (i2 >>> 16) & 65535) << 16) & 4294967295, i2 = 3266489909 * (65535 & (i2 ^= i2 >>> 13)) + ((3266489909 * (i2 >>> 16) & 65535) << 16) & 4294967295, (i2 ^= i2 >>> 16) >>> 0;
      };
      var pa = ha.exports, fa = { exports: {} };
      fa.exports = function(t2, e2) {
        for (var r2, n2 = t2.length, i2 = e2 ^ n2, s2 = 0; n2 >= 4; ) r2 = 1540483477 * (65535 & (r2 = 255 & t2.charCodeAt(s2) | (255 & t2.charCodeAt(++s2)) << 8 | (255 & t2.charCodeAt(++s2)) << 16 | (255 & t2.charCodeAt(++s2)) << 24)) + ((1540483477 * (r2 >>> 16) & 65535) << 16), i2 = 1540483477 * (65535 & i2) + ((1540483477 * (i2 >>> 16) & 65535) << 16) ^ (r2 = 1540483477 * (65535 & (r2 ^= r2 >>> 24)) + ((1540483477 * (r2 >>> 16) & 65535) << 16)), n2 -= 4, ++s2;
        switch (n2) {
          case 3:
            i2 ^= (255 & t2.charCodeAt(s2 + 2)) << 16;
          case 2:
            i2 ^= (255 & t2.charCodeAt(s2 + 1)) << 8;
          case 1:
            i2 = 1540483477 * (65535 & (i2 ^= 255 & t2.charCodeAt(s2))) + ((1540483477 * (i2 >>> 16) & 65535) << 16);
        }
        return i2 = 1540483477 * (65535 & (i2 ^= i2 >>> 13)) + ((1540483477 * (i2 >>> 16) & 65535) << 16), (i2 ^= i2 >>> 15) >>> 0;
      };
      var da = pa, ya = fa.exports;
      ca.exports = da, ca.exports.murmur3 = da, ca.exports.murmur2 = ya;
      var ma = r(ca.exports);
      class ga {
        constructor() {
          this.ids = [], this.positions = [], this.indexed = false;
        }
        add(t2, e2, r2, n2) {
          this.ids.push(xa(t2)), this.positions.push(e2, r2, n2);
        }
        getPositions(t2) {
          if (!this.indexed) throw new Error("Trying to get index, but feature positions are not indexed");
          const e2 = xa(t2);
          let r2 = 0, n2 = this.ids.length - 1;
          for (; r2 < n2; ) {
            const t3 = r2 + n2 >> 1;
            this.ids[t3] >= e2 ? n2 = t3 : r2 = t3 + 1;
          }
          const i2 = [];
          for (; this.ids[r2] === e2; ) i2.push({ index: this.positions[3 * r2], start: this.positions[3 * r2 + 1], end: this.positions[3 * r2 + 2] }), r2++;
          return i2;
        }
        static serialize(t2, e2) {
          const r2 = new Float64Array(t2.ids), n2 = new Uint32Array(t2.positions);
          return va(r2, n2, 0, r2.length - 1), e2 && e2.push(r2.buffer, n2.buffer), { ids: r2, positions: n2 };
        }
        static deserialize(t2) {
          const e2 = new ga();
          return e2.ids = t2.ids, e2.positions = t2.positions, e2.indexed = true, e2;
        }
      }
      function xa(t2) {
        const e2 = +t2;
        return !isNaN(e2) && e2 <= Number.MAX_SAFE_INTEGER ? e2 : ma(String(t2));
      }
      function va(t2, e2, r2, n2) {
        for (; r2 < n2; ) {
          const i2 = t2[r2 + n2 >> 1];
          let s2 = r2 - 1, a2 = n2 + 1;
          for (; ; ) {
            do {
              s2++;
            } while (t2[s2] < i2);
            do {
              a2--;
            } while (t2[a2] > i2);
            if (s2 >= a2) break;
            ba(t2, s2, a2), ba(e2, 3 * s2, 3 * a2), ba(e2, 3 * s2 + 1, 3 * a2 + 1), ba(e2, 3 * s2 + 2, 3 * a2 + 2);
          }
          a2 - r2 < n2 - a2 ? (va(t2, e2, r2, a2), r2 = a2 + 1) : (va(t2, e2, a2 + 1, n2), n2 = a2);
        }
      }
      function ba(t2, e2, r2) {
        const n2 = t2[e2];
        t2[e2] = t2[r2], t2[r2] = n2;
      }
      wi("FeaturePositionMap", ga);
      class wa {
        constructor(t2, e2) {
          this.gl = t2.gl, this.location = e2;
        }
      }
      class _a extends wa {
        constructor(t2, e2) {
          super(t2, e2), this.current = 0;
        }
        set(t2) {
          this.current !== t2 && (this.current = t2, this.gl.uniform1f(this.location, t2));
        }
      }
      class Aa extends wa {
        constructor(t2, e2) {
          super(t2, e2), this.current = [0, 0, 0, 0];
        }
        set(t2) {
          t2[0] === this.current[0] && t2[1] === this.current[1] && t2[2] === this.current[2] && t2[3] === this.current[3] || (this.current = t2, this.gl.uniform4f(this.location, t2[0], t2[1], t2[2], t2[3]));
        }
      }
      class Sa extends wa {
        constructor(t2, e2) {
          super(t2, e2), this.current = Kt.transparent;
        }
        set(t2) {
          t2.r === this.current.r && t2.g === this.current.g && t2.b === this.current.b && t2.a === this.current.a || (this.current = t2, this.gl.uniform4f(this.location, t2.r, t2.g, t2.b, t2.a));
        }
      }
      const ka = new Float32Array(16);
      function Ma(t2) {
        return [la(255 * t2.r, 255 * t2.g), la(255 * t2.b, 255 * t2.a)];
      }
      class Ia {
        constructor(t2, e2, r2) {
          this.value = t2, this.uniformNames = e2.map((t3) => `u_${t3}`), this.type = r2;
        }
        setUniform(t2, e2, r2) {
          t2.set(r2.constantOr(this.value));
        }
        getBinding(t2, e2, r2) {
          return "color" === this.type ? new Sa(t2, e2) : new _a(t2, e2);
        }
      }
      class za {
        constructor(t2, e2) {
          this.uniformNames = e2.map((t3) => `u_${t3}`), this.patternFrom = null, this.patternTo = null, this.pixelRatioFrom = 1, this.pixelRatioTo = 1;
        }
        setConstantPatternPositions(t2, e2) {
          this.pixelRatioFrom = e2.pixelRatio, this.pixelRatioTo = t2.pixelRatio, this.patternFrom = e2.tlbr, this.patternTo = t2.tlbr;
        }
        setUniform(t2, e2, r2, n2) {
          const i2 = "u_pattern_to" === n2 ? this.patternTo : "u_pattern_from" === n2 ? this.patternFrom : "u_pixel_ratio_to" === n2 ? this.pixelRatioTo : "u_pixel_ratio_from" === n2 ? this.pixelRatioFrom : null;
          i2 && t2.set(i2);
        }
        getBinding(t2, e2, r2) {
          return "u_pattern" === r2.substr(0, 9) ? new Aa(t2, e2) : new _a(t2, e2);
        }
      }
      class Pa {
        constructor(t2, e2, r2, n2) {
          this.expression = t2, this.type = r2, this.maxValue = 0, this.paintVertexAttributes = e2.map((t3) => ({ name: `a_${t3}`, type: "Float32", components: "color" === r2 ? 2 : 1, offset: 0 })), this.paintVertexArray = new n2();
        }
        populatePaintArray(t2, e2, r2, n2, i2) {
          const s2 = this.paintVertexArray.length, a2 = this.expression.evaluate(new Ui(0), e2, {}, n2, [], i2);
          this.paintVertexArray.resize(t2), this._setPaintValue(s2, t2, a2);
        }
        updatePaintArray(t2, e2, r2, n2) {
          const i2 = this.expression.evaluate({ zoom: 0 }, r2, n2);
          this._setPaintValue(t2, e2, i2);
        }
        _setPaintValue(t2, e2, r2) {
          if ("color" === this.type) {
            const n2 = Ma(r2);
            for (let r3 = t2; r3 < e2; r3++) this.paintVertexArray.emplace(r3, n2[0], n2[1]);
          } else {
            for (let n2 = t2; n2 < e2; n2++) this.paintVertexArray.emplace(n2, r2);
            this.maxValue = Math.max(this.maxValue, Math.abs(r2));
          }
        }
        upload(t2) {
          this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t2.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));
        }
        destroy() {
          this.paintVertexBuffer && this.paintVertexBuffer.destroy();
        }
      }
      class Ca {
        constructor(t2, e2, r2, n2, i2, s2) {
          this.expression = t2, this.uniformNames = e2.map((t3) => `u_${t3}_t`), this.type = r2, this.useIntegerZoom = n2, this.zoom = i2, this.maxValue = 0, this.paintVertexAttributes = e2.map((t3) => ({ name: `a_${t3}`, type: "Float32", components: "color" === r2 ? 4 : 2, offset: 0 })), this.paintVertexArray = new s2();
        }
        populatePaintArray(t2, e2, r2, n2, i2) {
          const s2 = this.expression.evaluate(new Ui(this.zoom), e2, {}, n2, [], i2), a2 = this.expression.evaluate(new Ui(this.zoom + 1), e2, {}, n2, [], i2), o2 = this.paintVertexArray.length;
          this.paintVertexArray.resize(t2), this._setPaintValue(o2, t2, s2, a2);
        }
        updatePaintArray(t2, e2, r2, n2) {
          const i2 = this.expression.evaluate({ zoom: this.zoom }, r2, n2), s2 = this.expression.evaluate({ zoom: this.zoom + 1 }, r2, n2);
          this._setPaintValue(t2, e2, i2, s2);
        }
        _setPaintValue(t2, e2, r2, n2) {
          if ("color" === this.type) {
            const i2 = Ma(r2), s2 = Ma(n2);
            for (let r3 = t2; r3 < e2; r3++) this.paintVertexArray.emplace(r3, i2[0], i2[1], s2[0], s2[1]);
          } else {
            for (let i2 = t2; i2 < e2; i2++) this.paintVertexArray.emplace(i2, r2, n2);
            this.maxValue = Math.max(this.maxValue, Math.abs(r2), Math.abs(n2));
          }
        }
        upload(t2) {
          this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t2.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));
        }
        destroy() {
          this.paintVertexBuffer && this.paintVertexBuffer.destroy();
        }
        setUniform(t2, e2) {
          const r2 = this.useIntegerZoom ? Math.floor(e2.zoom) : e2.zoom, n2 = y(this.expression.interpolationFactor(r2, this.zoom, this.zoom + 1), 0, 1);
          t2.set(n2);
        }
        getBinding(t2, e2, r2) {
          return new _a(t2, e2);
        }
      }
      class Ba {
        constructor(t2, e2, r2, n2, i2, s2) {
          this.expression = t2, this.type = e2, this.useIntegerZoom = r2, this.zoom = n2, this.layerId = s2, this.zoomInPaintVertexArray = new i2(), this.zoomOutPaintVertexArray = new i2();
        }
        populatePaintArray(t2, e2, r2) {
          const n2 = this.zoomInPaintVertexArray.length;
          this.zoomInPaintVertexArray.resize(t2), this.zoomOutPaintVertexArray.resize(t2), this._setPaintValues(n2, t2, e2.patterns && e2.patterns[this.layerId], r2);
        }
        updatePaintArray(t2, e2, r2, n2, i2) {
          this._setPaintValues(t2, e2, r2.patterns && r2.patterns[this.layerId], i2);
        }
        _setPaintValues(t2, e2, r2, n2) {
          if (!n2 || !r2) return;
          const { min: i2, mid: s2, max: a2 } = r2, o2 = n2[i2], l2 = n2[s2], u3 = n2[a2];
          if (o2 && l2 && u3) for (let r3 = t2; r3 < e2; r3++) this.zoomInPaintVertexArray.emplace(r3, l2.tl[0], l2.tl[1], l2.br[0], l2.br[1], o2.tl[0], o2.tl[1], o2.br[0], o2.br[1], l2.pixelRatio, o2.pixelRatio), this.zoomOutPaintVertexArray.emplace(r3, l2.tl[0], l2.tl[1], l2.br[0], l2.br[1], u3.tl[0], u3.tl[1], u3.br[0], u3.br[1], l2.pixelRatio, u3.pixelRatio);
        }
        upload(t2) {
          this.zoomInPaintVertexArray && this.zoomInPaintVertexArray.arrayBuffer && this.zoomOutPaintVertexArray && this.zoomOutPaintVertexArray.arrayBuffer && (this.zoomInPaintVertexBuffer = t2.createVertexBuffer(this.zoomInPaintVertexArray, ua.members, this.expression.isStateDependent), this.zoomOutPaintVertexBuffer = t2.createVertexBuffer(this.zoomOutPaintVertexArray, ua.members, this.expression.isStateDependent));
        }
        destroy() {
          this.zoomOutPaintVertexBuffer && this.zoomOutPaintVertexBuffer.destroy(), this.zoomInPaintVertexBuffer && this.zoomInPaintVertexBuffer.destroy();
        }
      }
      class Va {
        constructor(t2, e2, r2) {
          this.binders = {}, this._buffers = [];
          const n2 = [];
          for (const i2 in t2.paint._values) {
            if (!r2(i2)) continue;
            const s2 = t2.paint.get(i2);
            if (!(s2 instanceof Hi && an(s2.property.specification))) continue;
            const a2 = Fa(i2, t2.type), o2 = s2.value, l2 = s2.property.specification.type, u3 = s2.property.useIntegerZoom, c2 = s2.property.specification["property-type"], h2 = "cross-faded" === c2 || "cross-faded-data-driven" === c2;
            if ("constant" === o2.kind) this.binders[i2] = h2 ? new za(o2.value, a2) : new Ia(o2.value, a2, l2), n2.push(`/u_${i2}`);
            else if ("source" === o2.kind || h2) {
              const r3 = Ta(i2, l2, "source");
              this.binders[i2] = h2 ? new Ba(o2, l2, u3, e2, r3, t2.id) : new Pa(o2, a2, l2, r3), n2.push(`/a_${i2}`);
            } else {
              const t3 = Ta(i2, l2, "composite");
              this.binders[i2] = new Ca(o2, a2, l2, u3, e2, t3), n2.push(`/z_${i2}`);
            }
          }
          this.cacheKey = n2.sort().join("");
        }
        getMaxValue(t2) {
          const e2 = this.binders[t2];
          return e2 instanceof Pa || e2 instanceof Ca ? e2.maxValue : 0;
        }
        populatePaintArrays(t2, e2, r2, n2, i2) {
          for (const s2 in this.binders) {
            const a2 = this.binders[s2];
            (a2 instanceof Pa || a2 instanceof Ca || a2 instanceof Ba) && a2.populatePaintArray(t2, e2, r2, n2, i2);
          }
        }
        setConstantPatternPositions(t2, e2) {
          for (const r2 in this.binders) {
            const n2 = this.binders[r2];
            n2 instanceof za && n2.setConstantPatternPositions(t2, e2);
          }
        }
        updatePaintArrays(t2, e2, r2, n2, i2) {
          let s2 = false;
          for (const a2 in t2) {
            const o2 = e2.getPositions(a2);
            for (const e3 of o2) {
              const o3 = r2.feature(e3.index);
              for (const r3 in this.binders) {
                const l2 = this.binders[r3];
                if ((l2 instanceof Pa || l2 instanceof Ca || l2 instanceof Ba) && true === l2.expression.isStateDependent) {
                  const u3 = n2.paint.get(r3);
                  l2.expression = u3.value, l2.updatePaintArray(e3.start, e3.end, o3, t2[a2], i2), s2 = true;
                }
              }
            }
          }
          return s2;
        }
        defines() {
          const t2 = [];
          for (const e2 in this.binders) {
            const r2 = this.binders[e2];
            (r2 instanceof Ia || r2 instanceof za) && t2.push(...r2.uniformNames.map((t3) => `#define HAS_UNIFORM_${t3}`));
          }
          return t2;
        }
        getBinderAttributes() {
          const t2 = [];
          for (const e2 in this.binders) {
            const r2 = this.binders[e2];
            if (r2 instanceof Pa || r2 instanceof Ca) for (let e3 = 0; e3 < r2.paintVertexAttributes.length; e3++) t2.push(r2.paintVertexAttributes[e3].name);
            else if (r2 instanceof Ba) for (let e3 = 0; e3 < ua.members.length; e3++) t2.push(ua.members[e3].name);
          }
          return t2;
        }
        getBinderUniforms() {
          const t2 = [];
          for (const e2 in this.binders) {
            const r2 = this.binders[e2];
            if (r2 instanceof Ia || r2 instanceof za || r2 instanceof Ca) for (const e3 of r2.uniformNames) t2.push(e3);
          }
          return t2;
        }
        getPaintVertexBuffers() {
          return this._buffers;
        }
        getUniforms(t2, e2) {
          const r2 = [];
          for (const n2 in this.binders) {
            const i2 = this.binders[n2];
            if (i2 instanceof Ia || i2 instanceof za || i2 instanceof Ca) {
              for (const s2 of i2.uniformNames) if (e2[s2]) {
                const a2 = i2.getBinding(t2, e2[s2], s2);
                r2.push({ name: s2, property: n2, binding: a2 });
              }
            }
          }
          return r2;
        }
        setUniforms(t2, e2, r2, n2) {
          for (const { name: t3, property: i2, binding: s2 } of e2) this.binders[i2].setUniform(s2, n2, r2.get(i2), t3);
        }
        updatePaintBuffers(t2) {
          this._buffers = [];
          for (const e2 in this.binders) {
            const r2 = this.binders[e2];
            if (t2 && r2 instanceof Ba) {
              const e3 = 2 === t2.fromScale ? r2.zoomInPaintVertexBuffer : r2.zoomOutPaintVertexBuffer;
              e3 && this._buffers.push(e3);
            } else (r2 instanceof Pa || r2 instanceof Ca) && r2.paintVertexBuffer && this._buffers.push(r2.paintVertexBuffer);
          }
        }
        upload(t2) {
          for (const e2 in this.binders) {
            const r2 = this.binders[e2];
            (r2 instanceof Pa || r2 instanceof Ca || r2 instanceof Ba) && r2.upload(t2);
          }
          this.updatePaintBuffers();
        }
        destroy() {
          for (const t2 in this.binders) {
            const e2 = this.binders[t2];
            (e2 instanceof Pa || e2 instanceof Ca || e2 instanceof Ba) && e2.destroy();
          }
        }
      }
      class Ea {
        constructor(t2, e2, r2 = () => true) {
          this.programConfigurations = {};
          for (const n2 of t2) this.programConfigurations[n2.id] = new Va(n2, e2, r2);
          this.needsUpload = false, this._featureMap = new ga(), this._bufferOffset = 0;
        }
        populatePaintArrays(t2, e2, r2, n2, i2, s2) {
          for (const r3 in this.programConfigurations) this.programConfigurations[r3].populatePaintArrays(t2, e2, n2, i2, s2);
          void 0 !== e2.id && this._featureMap.add(e2.id, r2, this._bufferOffset, t2), this._bufferOffset = t2, this.needsUpload = true;
        }
        updatePaintArrays(t2, e2, r2, n2) {
          for (const i2 of r2) this.needsUpload = this.programConfigurations[i2.id].updatePaintArrays(t2, this._featureMap, e2, i2, n2) || this.needsUpload;
        }
        get(t2) {
          return this.programConfigurations[t2];
        }
        upload(t2) {
          if (this.needsUpload) {
            for (const e2 in this.programConfigurations) this.programConfigurations[e2].upload(t2);
            this.needsUpload = false;
          }
        }
        destroy() {
          for (const t2 in this.programConfigurations) this.programConfigurations[t2].destroy();
        }
      }
      function Fa(t2, e2) {
        return { "text-opacity": ["opacity"], "icon-opacity": ["opacity"], "text-color": ["fill_color"], "icon-color": ["fill_color"], "text-halo-color": ["halo_color"], "icon-halo-color": ["halo_color"], "text-halo-blur": ["halo_blur"], "icon-halo-blur": ["halo_blur"], "text-halo-width": ["halo_width"], "icon-halo-width": ["halo_width"], "line-gap-width": ["gapwidth"], "line-pattern": ["pattern_to", "pattern_from", "pixel_ratio_to", "pixel_ratio_from"], "fill-pattern": ["pattern_to", "pattern_from", "pixel_ratio_to", "pixel_ratio_from"], "fill-extrusion-pattern": ["pattern_to", "pattern_from", "pixel_ratio_to", "pixel_ratio_from"] }[t2] || [t2.replace(`${e2}-`, "").replace(/-/g, "_")];
      }
      function Ta(t2, e2, r2) {
        const n2 = { color: { source: ys, composite: Vs }, number: { source: Is, composite: ys } }, i2 = function(t3) {
          return { "line-pattern": { source: Js, composite: Js }, "fill-pattern": { source: Js, composite: Js }, "fill-extrusion-pattern": { source: Js, composite: Js } }[t3];
        }(t2);
        return i2 && i2[r2] || n2[e2][r2];
      }
      wi("ConstantBinder", Ia), wi("CrossFadedConstantBinder", za), wi("SourceExpressionBinder", Pa), wi("CrossFadedCompositeBinder", Ba), wi("CompositeExpressionBinder", Ca), wi("ProgramConfiguration", Va, { omit: ["_buffers"] }), wi("ProgramConfigurationSet", Ea);
      const $a = 8192, La = Math.pow(2, 14) - 1, Da = -La - 1;
      function Oa(t2) {
        const e2 = $a / t2.extent, r2 = t2.loadGeometry();
        for (let t3 = 0; t3 < r2.length; t3++) {
          const n2 = r2[t3];
          for (let t4 = 0; t4 < n2.length; t4++) {
            const r3 = n2[t4], i2 = Math.round(r3.x * e2), s2 = Math.round(r3.y * e2);
            r3.x = y(i2, Da, La), r3.y = y(s2, Da, La), (i2 < r3.x || i2 > r3.x + 1 || s2 < r3.y || s2 > r3.y + 1) && A("Geometry exceeds allowed extent, reduce your vector tile buffer size");
          }
        }
        return r2;
      }
      function ja(t2, e2) {
        return { type: t2.type, id: t2.id, properties: t2.properties, geometry: e2 ? Oa(t2) : [] };
      }
      function Ra(t2, e2, r2, n2, i2) {
        t2.emplaceBack(2 * e2 + (n2 + 1) / 2, 2 * r2 + (i2 + 1) / 2);
      }
      class Ua {
        constructor(t2) {
          this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map((t3) => t3.id), this.index = t2.index, this.hasPattern = false, this.layoutVertexArray = new Gs(), this.indexArray = new na(), this.segments = new oa(), this.programConfigurations = new Ea(t2.layers, t2.zoom), this.stateDependentLayerIds = this.layers.filter((t3) => t3.isStateDependent()).map((t3) => t3.id);
        }
        populate(t2, e2, r2) {
          const n2 = this.layers[0], i2 = [];
          let s2 = null, a2 = false;
          "circle" === n2.type && (s2 = n2.layout.get("circle-sort-key"), a2 = !s2.isConstant());
          for (const { feature: e3, id: n3, index: o2, sourceLayerIndex: l2 } of t2) {
            const t3 = this.layers[0]._featureFilter.needGeometry, u3 = ja(e3, t3);
            if (!this.layers[0]._featureFilter.filter(new Ui(this.zoom), u3, r2)) continue;
            const c2 = a2 ? s2.evaluate(u3, {}, r2) : void 0, h2 = { id: n3, properties: e3.properties, type: e3.type, sourceLayerIndex: l2, index: o2, geometry: t3 ? u3.geometry : Oa(e3), patterns: {}, sortKey: c2 };
            i2.push(h2);
          }
          a2 && i2.sort((t3, e3) => t3.sortKey - e3.sortKey);
          for (const n3 of i2) {
            const { geometry: i3, index: s3, sourceLayerIndex: a3 } = n3, o2 = t2[s3].feature;
            this.addFeature(n3, i3, s3, r2), e2.featureIndex.insert(o2, i3, s3, a3, this.index);
          }
        }
        update(t2, e2, r2) {
          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
        }
        isEmpty() {
          return 0 === this.layoutVertexArray.length;
        }
        uploadPending() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }
        upload(t2) {
          this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, aa), this.indexBuffer = t2.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t2), this.uploaded = true;
        }
        destroy() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
        }
        addFeature(t2, e2, r2, n2) {
          for (const r3 of e2) for (const e3 of r3) {
            const r4 = e3.x, n3 = e3.y;
            if (r4 < 0 || r4 >= $a || n3 < 0 || n3 >= $a) continue;
            const i2 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray, t2.sortKey), s2 = i2.vertexLength;
            Ra(this.layoutVertexArray, r4, n3, -1, -1), Ra(this.layoutVertexArray, r4, n3, 1, -1), Ra(this.layoutVertexArray, r4, n3, 1, 1), Ra(this.layoutVertexArray, r4, n3, -1, 1), this.indexArray.emplaceBack(s2, s2 + 1, s2 + 2), this.indexArray.emplaceBack(s2, s2 + 3, s2 + 2), i2.vertexLength += 4, i2.primitiveLength += 2;
          }
          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, {}, n2);
        }
      }
      function qa(t2, e2) {
        for (let r2 = 0; r2 < t2.length; r2++) if (Wa(e2, t2[r2])) return true;
        for (let r2 = 0; r2 < e2.length; r2++) if (Wa(t2, e2[r2])) return true;
        return !!Ka(t2, e2);
      }
      function Na(t2, e2, r2) {
        return !!Wa(t2, e2) || !!Ha(e2, t2, r2);
      }
      function Za(t2, e2) {
        if (1 === t2.length) return Ja(e2, t2[0]);
        for (let r2 = 0; r2 < e2.length; r2++) {
          const n2 = e2[r2];
          for (let e3 = 0; e3 < n2.length; e3++) if (Wa(t2, n2[e3])) return true;
        }
        for (let r2 = 0; r2 < t2.length; r2++) if (Ja(e2, t2[r2])) return true;
        for (let r2 = 0; r2 < e2.length; r2++) if (Ka(t2, e2[r2])) return true;
        return false;
      }
      function Ga(t2, e2, r2) {
        if (t2.length > 1) {
          if (Ka(t2, e2)) return true;
          for (let n2 = 0; n2 < e2.length; n2++) if (Ha(e2[n2], t2, r2)) return true;
        }
        for (let n2 = 0; n2 < t2.length; n2++) if (Ha(t2[n2], e2, r2)) return true;
        return false;
      }
      function Ka(t2, e2) {
        if (0 === t2.length || 0 === e2.length) return false;
        for (let r2 = 0; r2 < t2.length - 1; r2++) {
          const n2 = t2[r2], i2 = t2[r2 + 1];
          for (let t3 = 0; t3 < e2.length - 1; t3++) if (Xa(n2, i2, e2[t3], e2[t3 + 1])) return true;
        }
        return false;
      }
      function Xa(t2, e2, r2, n2) {
        return S(t2, r2, n2) !== S(e2, r2, n2) && S(t2, e2, r2) !== S(t2, e2, n2);
      }
      function Ha(t2, e2, r2) {
        const n2 = r2 * r2;
        if (1 === e2.length) return t2.distSqr(e2[0]) < n2;
        for (let r3 = 1; r3 < e2.length; r3++) if (Ya(t2, e2[r3 - 1], e2[r3]) < n2) return true;
        return false;
      }
      function Ya(t2, e2, r2) {
        const n2 = e2.distSqr(r2);
        if (0 === n2) return t2.distSqr(e2);
        const i2 = ((t2.x - e2.x) * (r2.x - e2.x) + (t2.y - e2.y) * (r2.y - e2.y)) / n2;
        return t2.distSqr(i2 < 0 ? e2 : i2 > 1 ? r2 : r2.sub(e2)._mult(i2)._add(e2));
      }
      function Ja(t2, e2) {
        let r2, n2, i2, s2 = false;
        for (let a2 = 0; a2 < t2.length; a2++) {
          r2 = t2[a2];
          for (let t3 = 0, a3 = r2.length - 1; t3 < r2.length; a3 = t3++) n2 = r2[t3], i2 = r2[a3], n2.y > e2.y != i2.y > e2.y && e2.x < (i2.x - n2.x) * (e2.y - n2.y) / (i2.y - n2.y) + n2.x && (s2 = !s2);
        }
        return s2;
      }
      function Wa(t2, e2) {
        let r2 = false;
        for (let n2 = 0, i2 = t2.length - 1; n2 < t2.length; i2 = n2++) {
          const s2 = t2[n2], a2 = t2[i2];
          s2.y > e2.y != a2.y > e2.y && e2.x < (a2.x - s2.x) * (e2.y - s2.y) / (a2.y - s2.y) + s2.x && (r2 = !r2);
        }
        return r2;
      }
      function Qa(t2, e2, r2) {
        const n2 = r2[0], i2 = r2[2];
        if (t2.x < n2.x && e2.x < n2.x || t2.x > i2.x && e2.x > i2.x || t2.y < n2.y && e2.y < n2.y || t2.y > i2.y && e2.y > i2.y) return false;
        const s2 = S(t2, e2, r2[0]);
        return s2 !== S(t2, e2, r2[1]) || s2 !== S(t2, e2, r2[2]) || s2 !== S(t2, e2, r2[3]);
      }
      function to(t2, e2, r2) {
        const n2 = e2.paint.get(t2).value;
        return "constant" === n2.kind ? n2.value : r2.programConfigurations.get(e2.id).getMaxValue(t2);
      }
      function eo(t2) {
        return Math.sqrt(t2[0] * t2[0] + t2[1] * t2[1]);
      }
      function ro(t2, e2, r2, n2, i2) {
        if (!e2[0] && !e2[1]) return t2;
        const a2 = s.convert(e2)._mult(i2);
        "viewport" === r2 && a2._rotate(-n2);
        const o2 = [];
        for (let e3 = 0; e3 < t2.length; e3++) o2.push(t2[e3].sub(a2));
        return o2;
      }
      let no, io;
      wi("CircleBucket", Ua, { omit: ["layers"] });
      var so = { get paint() {
        return io = io || new rs({ "circle-radius": new Wi(G2.paint_circle["circle-radius"]), "circle-color": new Wi(G2.paint_circle["circle-color"]), "circle-blur": new Wi(G2.paint_circle["circle-blur"]), "circle-opacity": new Wi(G2.paint_circle["circle-opacity"]), "circle-translate": new Ji(G2.paint_circle["circle-translate"]), "circle-translate-anchor": new Ji(G2.paint_circle["circle-translate-anchor"]), "circle-pitch-scale": new Ji(G2.paint_circle["circle-pitch-scale"]), "circle-pitch-alignment": new Ji(G2.paint_circle["circle-pitch-alignment"]), "circle-stroke-width": new Wi(G2.paint_circle["circle-stroke-width"]), "circle-stroke-color": new Wi(G2.paint_circle["circle-stroke-color"]), "circle-stroke-opacity": new Wi(G2.paint_circle["circle-stroke-opacity"]) });
      }, get layout() {
        return no = no || new rs({ "circle-sort-key": new Wi(G2.layout_circle["circle-sort-key"]) });
      } }, ao = 1e-6, oo = "undefined" != typeof Float32Array ? Float32Array : Array;
      function lo(t2) {
        return t2[0] = 1, t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[5] = 1, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[10] = 1, t2[11] = 0, t2[12] = 0, t2[13] = 0, t2[14] = 0, t2[15] = 1, t2;
      }
      function uo(t2, e2, r2) {
        var n2 = e2[0], i2 = e2[1], s2 = e2[2], a2 = e2[3], o2 = e2[4], l2 = e2[5], u3 = e2[6], c2 = e2[7], h2 = e2[8], p3 = e2[9], f2 = e2[10], d2 = e2[11], y2 = e2[12], m2 = e2[13], g2 = e2[14], x2 = e2[15], v2 = r2[0], b2 = r2[1], w3 = r2[2], _2 = r2[3];
        return t2[0] = v2 * n2 + b2 * o2 + w3 * h2 + _2 * y2, t2[1] = v2 * i2 + b2 * l2 + w3 * p3 + _2 * m2, t2[2] = v2 * s2 + b2 * u3 + w3 * f2 + _2 * g2, t2[3] = v2 * a2 + b2 * c2 + w3 * d2 + _2 * x2, t2[4] = (v2 = r2[4]) * n2 + (b2 = r2[5]) * o2 + (w3 = r2[6]) * h2 + (_2 = r2[7]) * y2, t2[5] = v2 * i2 + b2 * l2 + w3 * p3 + _2 * m2, t2[6] = v2 * s2 + b2 * u3 + w3 * f2 + _2 * g2, t2[7] = v2 * a2 + b2 * c2 + w3 * d2 + _2 * x2, t2[8] = (v2 = r2[8]) * n2 + (b2 = r2[9]) * o2 + (w3 = r2[10]) * h2 + (_2 = r2[11]) * y2, t2[9] = v2 * i2 + b2 * l2 + w3 * p3 + _2 * m2, t2[10] = v2 * s2 + b2 * u3 + w3 * f2 + _2 * g2, t2[11] = v2 * a2 + b2 * c2 + w3 * d2 + _2 * x2, t2[12] = (v2 = r2[12]) * n2 + (b2 = r2[13]) * o2 + (w3 = r2[14]) * h2 + (_2 = r2[15]) * y2, t2[13] = v2 * i2 + b2 * l2 + w3 * p3 + _2 * m2, t2[14] = v2 * s2 + b2 * u3 + w3 * f2 + _2 * g2, t2[15] = v2 * a2 + b2 * c2 + w3 * d2 + _2 * x2, t2;
      }
      Math.hypot || (Math.hypot = function() {
        for (var t2 = 0, e2 = arguments.length; e2--; ) t2 += arguments[e2] * arguments[e2];
        return Math.sqrt(t2);
      });
      var co, ho = uo;
      function po(t2, e2, r2) {
        var n2 = e2[0], i2 = e2[1], s2 = e2[2], a2 = e2[3];
        return t2[0] = r2[0] * n2 + r2[4] * i2 + r2[8] * s2 + r2[12] * a2, t2[1] = r2[1] * n2 + r2[5] * i2 + r2[9] * s2 + r2[13] * a2, t2[2] = r2[2] * n2 + r2[6] * i2 + r2[10] * s2 + r2[14] * a2, t2[3] = r2[3] * n2 + r2[7] * i2 + r2[11] * s2 + r2[15] * a2, t2;
      }
      co = new oo(4), oo != Float32Array && (co[0] = 0, co[1] = 0, co[2] = 0, co[3] = 0);
      class fo extends is {
        constructor(t2) {
          super(t2, so);
        }
        createBucket(t2) {
          return new Ua(t2);
        }
        queryRadius(t2) {
          const e2 = t2;
          return to("circle-radius", this, e2) + to("circle-stroke-width", this, e2) + eo(this.paint.get("circle-translate"));
        }
        queryIntersectsFeature(t2, e2, r2, n2, i2, s2, a2, o2) {
          const l2 = ro(t2, this.paint.get("circle-translate"), this.paint.get("circle-translate-anchor"), s2.angle, a2), u3 = this.paint.get("circle-radius").evaluate(e2, r2) + this.paint.get("circle-stroke-width").evaluate(e2, r2), c2 = "map" === this.paint.get("circle-pitch-alignment"), h2 = c2 ? l2 : function(t3, e3) {
            return t3.map((t4) => yo(t4, e3));
          }(l2, o2), p3 = c2 ? u3 * a2 : u3;
          for (const t3 of n2) for (const e3 of t3) {
            const t4 = c2 ? e3 : yo(e3, o2);
            let r3 = p3;
            const n3 = po([], [e3.x, e3.y, 0, 1], o2);
            if ("viewport" === this.paint.get("circle-pitch-scale") && "map" === this.paint.get("circle-pitch-alignment") ? r3 *= n3[3] / s2.cameraToCenterDistance : "map" === this.paint.get("circle-pitch-scale") && "viewport" === this.paint.get("circle-pitch-alignment") && (r3 *= s2.cameraToCenterDistance / n3[3]), Na(h2, t4, r3)) return true;
          }
          return false;
        }
      }
      function yo(t2, e2) {
        const r2 = po([], [t2.x, t2.y, 0, 1], e2);
        return new s(r2[0] / r2[3], r2[1] / r2[3]);
      }
      class mo extends Ua {
      }
      let go;
      wi("HeatmapBucket", mo, { omit: ["layers"] });
      var xo = { get paint() {
        return go = go || new rs({ "heatmap-radius": new Wi(G2.paint_heatmap["heatmap-radius"]), "heatmap-weight": new Wi(G2.paint_heatmap["heatmap-weight"]), "heatmap-intensity": new Ji(G2.paint_heatmap["heatmap-intensity"]), "heatmap-color": new es(G2.paint_heatmap["heatmap-color"]), "heatmap-opacity": new Ji(G2.paint_heatmap["heatmap-opacity"]) });
      } };
      function vo(t2, { width: e2, height: r2 }, n2, i2) {
        if (i2) {
          if (i2 instanceof Uint8ClampedArray) i2 = new Uint8Array(i2.buffer);
          else if (i2.length !== e2 * r2 * n2) throw new RangeError(`mismatched image size. expected: ${i2.length} but got: ${e2 * r2 * n2}`);
        } else i2 = new Uint8Array(e2 * r2 * n2);
        return t2.width = e2, t2.height = r2, t2.data = i2, t2;
      }
      function bo(t2, { width: e2, height: r2 }, n2) {
        if (e2 === t2.width && r2 === t2.height) return;
        const i2 = vo({}, { width: e2, height: r2 }, n2);
        wo(t2, i2, { x: 0, y: 0 }, { x: 0, y: 0 }, { width: Math.min(t2.width, e2), height: Math.min(t2.height, r2) }, n2), t2.width = e2, t2.height = r2, t2.data = i2.data;
      }
      function wo(t2, e2, r2, n2, i2, s2) {
        if (0 === i2.width || 0 === i2.height) return e2;
        if (i2.width > t2.width || i2.height > t2.height || r2.x > t2.width - i2.width || r2.y > t2.height - i2.height) throw new RangeError("out of range source coordinates for image copy");
        if (i2.width > e2.width || i2.height > e2.height || n2.x > e2.width - i2.width || n2.y > e2.height - i2.height) throw new RangeError("out of range destination coordinates for image copy");
        const a2 = t2.data, o2 = e2.data;
        if (a2 === o2) throw new Error("srcData equals dstData, so image is already copied");
        for (let l2 = 0; l2 < i2.height; l2++) {
          const u3 = ((r2.y + l2) * t2.width + r2.x) * s2, c2 = ((n2.y + l2) * e2.width + n2.x) * s2;
          for (let t3 = 0; t3 < i2.width * s2; t3++) o2[c2 + t3] = a2[u3 + t3];
        }
        return e2;
      }
      class _o {
        constructor(t2, e2) {
          vo(this, t2, 1, e2);
        }
        resize(t2) {
          bo(this, t2, 1);
        }
        clone() {
          return new _o({ width: this.width, height: this.height }, new Uint8Array(this.data));
        }
        static copy(t2, e2, r2, n2, i2) {
          wo(t2, e2, r2, n2, i2, 1);
        }
      }
      class Ao {
        constructor(t2, e2) {
          vo(this, t2, 4, e2);
        }
        resize(t2) {
          bo(this, t2, 4);
        }
        replace(t2, e2) {
          e2 ? this.data.set(t2) : this.data = t2 instanceof Uint8ClampedArray ? new Uint8Array(t2.buffer) : t2;
        }
        clone() {
          return new Ao({ width: this.width, height: this.height }, new Uint8Array(this.data));
        }
        static copy(t2, e2, r2, n2, i2) {
          wo(t2, e2, r2, n2, i2, 4);
        }
      }
      function So(t2) {
        const e2 = {}, r2 = t2.resolution || 256, n2 = t2.clips ? t2.clips.length : 1, i2 = t2.image || new Ao({ width: r2, height: n2 });
        if (Math.log(r2) / Math.LN2 % 1 != 0) throw new Error(`width is not a power of 2 - ${r2}`);
        const s2 = (r3, n3, s3) => {
          e2[t2.evaluationKey] = s3;
          const a2 = t2.expression.evaluate(e2);
          i2.data[r3 + n3 + 0] = Math.floor(255 * a2.r / a2.a), i2.data[r3 + n3 + 1] = Math.floor(255 * a2.g / a2.a), i2.data[r3 + n3 + 2] = Math.floor(255 * a2.b / a2.a), i2.data[r3 + n3 + 3] = Math.floor(255 * a2.a);
        };
        if (t2.clips) for (let e3 = 0, i3 = 0; e3 < n2; ++e3, i3 += 4 * r2) for (let n3 = 0, a2 = 0; n3 < r2; n3++, a2 += 4) {
          const o2 = n3 / (r2 - 1), { start: l2, end: u3 } = t2.clips[e3];
          s2(i3, a2, l2 * (1 - o2) + u3 * o2);
        }
        else for (let t3 = 0, e3 = 0; t3 < r2; t3++, e3 += 4) s2(0, e3, t3 / (r2 - 1));
        return i2;
      }
      wi("AlphaImage", _o), wi("RGBAImage", Ao);
      const ko = "big-fb";
      class Mo extends is {
        createBucket(t2) {
          return new mo(t2);
        }
        constructor(t2) {
          super(t2, xo), this.heatmapFbos = /* @__PURE__ */ new Map(), this._updateColorRamp();
        }
        _handleSpecialPaintPropertyUpdate(t2) {
          "heatmap-color" === t2 && this._updateColorRamp();
        }
        _updateColorRamp() {
          this.colorRamp = So({ expression: this._transitionablePaint._values["heatmap-color"].value.expression, evaluationKey: "heatmapDensity", image: this.colorRamp }), this.colorRampTexture = null;
        }
        resize() {
          this.heatmapFbos.has(ko) && this.heatmapFbos.delete(ko);
        }
        queryRadius() {
          return 0;
        }
        queryIntersectsFeature() {
          return false;
        }
        hasOffscreenPass() {
          return 0 !== this.paint.get("heatmap-opacity") && "none" !== this.visibility;
        }
      }
      let Io;
      var zo = { get paint() {
        return Io = Io || new rs({ "hillshade-illumination-direction": new Ji(G2.paint_hillshade["hillshade-illumination-direction"]), "hillshade-illumination-anchor": new Ji(G2.paint_hillshade["hillshade-illumination-anchor"]), "hillshade-exaggeration": new Ji(G2.paint_hillshade["hillshade-exaggeration"]), "hillshade-shadow-color": new Ji(G2.paint_hillshade["hillshade-shadow-color"]), "hillshade-highlight-color": new Ji(G2.paint_hillshade["hillshade-highlight-color"]), "hillshade-accent-color": new Ji(G2.paint_hillshade["hillshade-accent-color"]) });
      } };
      class Po extends is {
        constructor(t2) {
          super(t2, zo);
        }
        hasOffscreenPass() {
          return 0 !== this.paint.get("hillshade-exaggeration") && "none" !== this.visibility;
        }
      }
      const Co = ls([{ name: "a_pos", components: 2, type: "Int16" }], 4), { members: Bo } = Co;
      function Vo(t2, e2, r2 = 2) {
        const n2 = e2 && e2.length, i2 = n2 ? e2[0] * r2 : t2.length;
        let s2 = Eo(t2, 0, i2, r2, true);
        const a2 = [];
        if (!s2 || s2.next === s2.prev) return a2;
        let o2, l2, u3;
        if (n2 && (s2 = function(t3, e3, r3, n3) {
          const i3 = [];
          for (let r4 = 0, s3 = e3.length; r4 < s3; r4++) {
            const a3 = Eo(t3, e3[r4] * n3, r4 < s3 - 1 ? e3[r4 + 1] * n3 : t3.length, n3, false);
            a3 === a3.next && (a3.steiner = true), i3.push(No(a3));
          }
          i3.sort(jo);
          for (let t4 = 0; t4 < i3.length; t4++) r3 = Ro(i3[t4], r3);
          return r3;
        }(t2, e2, s2, r2)), t2.length > 80 * r2) {
          o2 = 1 / 0, l2 = 1 / 0;
          let e3 = -1 / 0, n3 = -1 / 0;
          for (let s3 = r2; s3 < i2; s3 += r2) {
            const r3 = t2[s3], i3 = t2[s3 + 1];
            r3 < o2 && (o2 = r3), i3 < l2 && (l2 = i3), r3 > e3 && (e3 = r3), i3 > n3 && (n3 = i3);
          }
          u3 = Math.max(e3 - o2, n3 - l2), u3 = 0 !== u3 ? 32767 / u3 : 0;
        }
        return To(s2, a2, r2, o2, l2, u3, 0), a2;
      }
      function Eo(t2, e2, r2, n2, i2) {
        let s2;
        if (i2 === function(t3, e3, r3, n3) {
          let i3 = 0;
          for (let s3 = e3, a2 = r3 - n3; s3 < r3; s3 += n3) i3 += (t3[a2] - t3[s3]) * (t3[s3 + 1] + t3[a2 + 1]), a2 = s3;
          return i3;
        }(t2, e2, r2, n2) > 0) for (let i3 = e2; i3 < r2; i3 += n2) s2 = tl(i3 / n2 | 0, t2[i3], t2[i3 + 1], s2);
        else for (let i3 = r2 - n2; i3 >= e2; i3 -= n2) s2 = tl(i3 / n2 | 0, t2[i3], t2[i3 + 1], s2);
        return s2 && Xo(s2, s2.next) && (el(s2), s2 = s2.next), s2;
      }
      function Fo(t2, e2) {
        if (!t2) return t2;
        e2 || (e2 = t2);
        let r2, n2 = t2;
        do {
          if (r2 = false, n2.steiner || !Xo(n2, n2.next) && 0 !== Ko(n2.prev, n2, n2.next)) n2 = n2.next;
          else {
            if (el(n2), n2 = e2 = n2.prev, n2 === n2.next) break;
            r2 = true;
          }
        } while (r2 || n2 !== e2);
        return e2;
      }
      function To(t2, e2, r2, n2, i2, s2, a2) {
        if (!t2) return;
        !a2 && s2 && function(t3, e3, r3, n3) {
          let i3 = t3;
          do {
            0 === i3.z && (i3.z = qo(i3.x, i3.y, e3, r3, n3)), i3.prevZ = i3.prev, i3.nextZ = i3.next, i3 = i3.next;
          } while (i3 !== t3);
          i3.prevZ.nextZ = null, i3.prevZ = null, function(t4) {
            let e4, r4 = 1;
            do {
              let n4, i4 = t4;
              t4 = null;
              let s3 = null;
              for (e4 = 0; i4; ) {
                e4++;
                let a3 = i4, o3 = 0;
                for (let t5 = 0; t5 < r4 && (o3++, a3 = a3.nextZ, a3); t5++) ;
                let l2 = r4;
                for (; o3 > 0 || l2 > 0 && a3; ) 0 !== o3 && (0 === l2 || !a3 || i4.z <= a3.z) ? (n4 = i4, i4 = i4.nextZ, o3--) : (n4 = a3, a3 = a3.nextZ, l2--), s3 ? s3.nextZ = n4 : t4 = n4, n4.prevZ = s3, s3 = n4;
                i4 = a3;
              }
              s3.nextZ = null, r4 *= 2;
            } while (e4 > 1);
          }(i3);
        }(t2, n2, i2, s2);
        let o2 = t2;
        for (; t2.prev !== t2.next; ) {
          const l2 = t2.prev, u3 = t2.next;
          if (s2 ? Lo(t2, n2, i2, s2) : $o(t2)) e2.push(l2.i, t2.i, u3.i), el(t2), t2 = u3.next, o2 = u3.next;
          else if ((t2 = u3) === o2) {
            a2 ? 1 === a2 ? To(t2 = Do(Fo(t2), e2), e2, r2, n2, i2, s2, 2) : 2 === a2 && Oo(t2, e2, r2, n2, i2, s2) : To(Fo(t2), e2, r2, n2, i2, s2, 1);
            break;
          }
        }
      }
      function $o(t2) {
        const e2 = t2.prev, r2 = t2, n2 = t2.next;
        if (Ko(e2, r2, n2) >= 0) return false;
        const i2 = e2.x, s2 = r2.x, a2 = n2.x, o2 = e2.y, l2 = r2.y, u3 = n2.y, c2 = i2 < s2 ? i2 < a2 ? i2 : a2 : s2 < a2 ? s2 : a2, h2 = o2 < l2 ? o2 < u3 ? o2 : u3 : l2 < u3 ? l2 : u3, p3 = i2 > s2 ? i2 > a2 ? i2 : a2 : s2 > a2 ? s2 : a2, f2 = o2 > l2 ? o2 > u3 ? o2 : u3 : l2 > u3 ? l2 : u3;
        let d2 = n2.next;
        for (; d2 !== e2; ) {
          if (d2.x >= c2 && d2.x <= p3 && d2.y >= h2 && d2.y <= f2 && Zo(i2, o2, s2, l2, a2, u3, d2.x, d2.y) && Ko(d2.prev, d2, d2.next) >= 0) return false;
          d2 = d2.next;
        }
        return true;
      }
      function Lo(t2, e2, r2, n2) {
        const i2 = t2.prev, s2 = t2, a2 = t2.next;
        if (Ko(i2, s2, a2) >= 0) return false;
        const o2 = i2.x, l2 = s2.x, u3 = a2.x, c2 = i2.y, h2 = s2.y, p3 = a2.y, f2 = o2 < l2 ? o2 < u3 ? o2 : u3 : l2 < u3 ? l2 : u3, d2 = c2 < h2 ? c2 < p3 ? c2 : p3 : h2 < p3 ? h2 : p3, y2 = o2 > l2 ? o2 > u3 ? o2 : u3 : l2 > u3 ? l2 : u3, m2 = c2 > h2 ? c2 > p3 ? c2 : p3 : h2 > p3 ? h2 : p3, g2 = qo(f2, d2, e2, r2, n2), x2 = qo(y2, m2, e2, r2, n2);
        let v2 = t2.prevZ, b2 = t2.nextZ;
        for (; v2 && v2.z >= g2 && b2 && b2.z <= x2; ) {
          if (v2.x >= f2 && v2.x <= y2 && v2.y >= d2 && v2.y <= m2 && v2 !== i2 && v2 !== a2 && Zo(o2, c2, l2, h2, u3, p3, v2.x, v2.y) && Ko(v2.prev, v2, v2.next) >= 0) return false;
          if (v2 = v2.prevZ, b2.x >= f2 && b2.x <= y2 && b2.y >= d2 && b2.y <= m2 && b2 !== i2 && b2 !== a2 && Zo(o2, c2, l2, h2, u3, p3, b2.x, b2.y) && Ko(b2.prev, b2, b2.next) >= 0) return false;
          b2 = b2.nextZ;
        }
        for (; v2 && v2.z >= g2; ) {
          if (v2.x >= f2 && v2.x <= y2 && v2.y >= d2 && v2.y <= m2 && v2 !== i2 && v2 !== a2 && Zo(o2, c2, l2, h2, u3, p3, v2.x, v2.y) && Ko(v2.prev, v2, v2.next) >= 0) return false;
          v2 = v2.prevZ;
        }
        for (; b2 && b2.z <= x2; ) {
          if (b2.x >= f2 && b2.x <= y2 && b2.y >= d2 && b2.y <= m2 && b2 !== i2 && b2 !== a2 && Zo(o2, c2, l2, h2, u3, p3, b2.x, b2.y) && Ko(b2.prev, b2, b2.next) >= 0) return false;
          b2 = b2.nextZ;
        }
        return true;
      }
      function Do(t2, e2) {
        let r2 = t2;
        do {
          const n2 = r2.prev, i2 = r2.next.next;
          !Xo(n2, i2) && Ho(n2, r2, r2.next, i2) && Wo(n2, i2) && Wo(i2, n2) && (e2.push(n2.i, r2.i, i2.i), el(r2), el(r2.next), r2 = t2 = i2), r2 = r2.next;
        } while (r2 !== t2);
        return Fo(r2);
      }
      function Oo(t2, e2, r2, n2, i2, s2) {
        let a2 = t2;
        do {
          let t3 = a2.next.next;
          for (; t3 !== a2.prev; ) {
            if (a2.i !== t3.i && Go(a2, t3)) {
              let o2 = Qo(a2, t3);
              return a2 = Fo(a2, a2.next), o2 = Fo(o2, o2.next), To(a2, e2, r2, n2, i2, s2, 0), void To(o2, e2, r2, n2, i2, s2, 0);
            }
            t3 = t3.next;
          }
          a2 = a2.next;
        } while (a2 !== t2);
      }
      function jo(t2, e2) {
        return t2.x - e2.x;
      }
      function Ro(t2, e2) {
        const r2 = function(t3, e3) {
          let r3 = e3;
          const n3 = t3.x, i2 = t3.y;
          let s2, a2 = -1 / 0;
          do {
            if (i2 <= r3.y && i2 >= r3.next.y && r3.next.y !== r3.y) {
              const t4 = r3.x + (i2 - r3.y) * (r3.next.x - r3.x) / (r3.next.y - r3.y);
              if (t4 <= n3 && t4 > a2 && (a2 = t4, s2 = r3.x < r3.next.x ? r3 : r3.next, t4 === n3)) return s2;
            }
            r3 = r3.next;
          } while (r3 !== e3);
          if (!s2) return null;
          const o2 = s2, l2 = s2.x, u3 = s2.y;
          let c2 = 1 / 0;
          r3 = s2;
          do {
            if (n3 >= r3.x && r3.x >= l2 && n3 !== r3.x && Zo(i2 < u3 ? n3 : a2, i2, l2, u3, i2 < u3 ? a2 : n3, i2, r3.x, r3.y)) {
              const e4 = Math.abs(i2 - r3.y) / (n3 - r3.x);
              Wo(r3, t3) && (e4 < c2 || e4 === c2 && (r3.x > s2.x || r3.x === s2.x && Uo(s2, r3))) && (s2 = r3, c2 = e4);
            }
            r3 = r3.next;
          } while (r3 !== o2);
          return s2;
        }(t2, e2);
        if (!r2) return e2;
        const n2 = Qo(r2, t2);
        return Fo(n2, n2.next), Fo(r2, r2.next);
      }
      function Uo(t2, e2) {
        return Ko(t2.prev, t2, e2.prev) < 0 && Ko(e2.next, t2, t2.next) < 0;
      }
      function qo(t2, e2, r2, n2, i2) {
        return (t2 = 1431655765 & ((t2 = 858993459 & ((t2 = 252645135 & ((t2 = 16711935 & ((t2 = (t2 - r2) * i2 | 0) | t2 << 8)) | t2 << 4)) | t2 << 2)) | t2 << 1)) | (e2 = 1431655765 & ((e2 = 858993459 & ((e2 = 252645135 & ((e2 = 16711935 & ((e2 = (e2 - n2) * i2 | 0) | e2 << 8)) | e2 << 4)) | e2 << 2)) | e2 << 1)) << 1;
      }
      function No(t2) {
        let e2 = t2, r2 = t2;
        do {
          (e2.x < r2.x || e2.x === r2.x && e2.y < r2.y) && (r2 = e2), e2 = e2.next;
        } while (e2 !== t2);
        return r2;
      }
      function Zo(t2, e2, r2, n2, i2, s2, a2, o2) {
        return (i2 - a2) * (e2 - o2) >= (t2 - a2) * (s2 - o2) && (t2 - a2) * (n2 - o2) >= (r2 - a2) * (e2 - o2) && (r2 - a2) * (s2 - o2) >= (i2 - a2) * (n2 - o2);
      }
      function Go(t2, e2) {
        return t2.next.i !== e2.i && t2.prev.i !== e2.i && !function(t3, e3) {
          let r2 = t3;
          do {
            if (r2.i !== t3.i && r2.next.i !== t3.i && r2.i !== e3.i && r2.next.i !== e3.i && Ho(r2, r2.next, t3, e3)) return true;
            r2 = r2.next;
          } while (r2 !== t3);
          return false;
        }(t2, e2) && (Wo(t2, e2) && Wo(e2, t2) && function(t3, e3) {
          let r2 = t3, n2 = false;
          const i2 = (t3.x + e3.x) / 2, s2 = (t3.y + e3.y) / 2;
          do {
            r2.y > s2 != r2.next.y > s2 && r2.next.y !== r2.y && i2 < (r2.next.x - r2.x) * (s2 - r2.y) / (r2.next.y - r2.y) + r2.x && (n2 = !n2), r2 = r2.next;
          } while (r2 !== t3);
          return n2;
        }(t2, e2) && (Ko(t2.prev, t2, e2.prev) || Ko(t2, e2.prev, e2)) || Xo(t2, e2) && Ko(t2.prev, t2, t2.next) > 0 && Ko(e2.prev, e2, e2.next) > 0);
      }
      function Ko(t2, e2, r2) {
        return (e2.y - t2.y) * (r2.x - e2.x) - (e2.x - t2.x) * (r2.y - e2.y);
      }
      function Xo(t2, e2) {
        return t2.x === e2.x && t2.y === e2.y;
      }
      function Ho(t2, e2, r2, n2) {
        const i2 = Jo(Ko(t2, e2, r2)), s2 = Jo(Ko(t2, e2, n2)), a2 = Jo(Ko(r2, n2, t2)), o2 = Jo(Ko(r2, n2, e2));
        return i2 !== s2 && a2 !== o2 || !(0 !== i2 || !Yo(t2, r2, e2)) || !(0 !== s2 || !Yo(t2, n2, e2)) || !(0 !== a2 || !Yo(r2, t2, n2)) || !(0 !== o2 || !Yo(r2, e2, n2));
      }
      function Yo(t2, e2, r2) {
        return e2.x <= Math.max(t2.x, r2.x) && e2.x >= Math.min(t2.x, r2.x) && e2.y <= Math.max(t2.y, r2.y) && e2.y >= Math.min(t2.y, r2.y);
      }
      function Jo(t2) {
        return t2 > 0 ? 1 : t2 < 0 ? -1 : 0;
      }
      function Wo(t2, e2) {
        return Ko(t2.prev, t2, t2.next) < 0 ? Ko(t2, e2, t2.next) >= 0 && Ko(t2, t2.prev, e2) >= 0 : Ko(t2, e2, t2.prev) < 0 || Ko(t2, t2.next, e2) < 0;
      }
      function Qo(t2, e2) {
        const r2 = rl(t2.i, t2.x, t2.y), n2 = rl(e2.i, e2.x, e2.y), i2 = t2.next, s2 = e2.prev;
        return t2.next = e2, e2.prev = t2, r2.next = i2, i2.prev = r2, n2.next = r2, r2.prev = n2, s2.next = n2, n2.prev = s2, n2;
      }
      function tl(t2, e2, r2, n2) {
        const i2 = rl(t2, e2, r2);
        return n2 ? (i2.next = n2.next, i2.prev = n2, n2.next.prev = i2, n2.next = i2) : (i2.prev = i2, i2.next = i2), i2;
      }
      function el(t2) {
        t2.next.prev = t2.prev, t2.prev.next = t2.next, t2.prevZ && (t2.prevZ.nextZ = t2.nextZ), t2.nextZ && (t2.nextZ.prevZ = t2.prevZ);
      }
      function rl(t2, e2, r2) {
        return { i: t2, x: e2, y: r2, prev: null, next: null, z: 0, prevZ: null, nextZ: null, steiner: false };
      }
      function nl(t2, e2, r2) {
        const n2 = r2.patternDependencies;
        let i2 = false;
        for (const r3 of e2) {
          const e3 = r3.paint.get(`${t2}-pattern`);
          e3.isConstant() || (i2 = true);
          const s2 = e3.constantOr(null);
          s2 && (i2 = true, n2[s2.to] = true, n2[s2.from] = true);
        }
        return i2;
      }
      function il(t2, e2, r2, n2, i2) {
        const s2 = i2.patternDependencies;
        for (const a2 of e2) {
          const e3 = a2.paint.get(`${t2}-pattern`).value;
          if ("constant" !== e3.kind) {
            let t3 = e3.evaluate({ zoom: n2 - 1 }, r2, {}, i2.availableImages), o2 = e3.evaluate({ zoom: n2 }, r2, {}, i2.availableImages), l2 = e3.evaluate({ zoom: n2 + 1 }, r2, {}, i2.availableImages);
            t3 = t3 && t3.name ? t3.name : t3, o2 = o2 && o2.name ? o2.name : o2, l2 = l2 && l2.name ? l2.name : l2, s2[t3] = true, s2[o2] = true, s2[l2] = true, r2.patterns[a2.id] = { min: t3, mid: o2, max: l2 };
          }
        }
        return r2;
      }
      class sl {
        constructor(t2) {
          this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map((t3) => t3.id), this.index = t2.index, this.hasPattern = false, this.patternFeatures = [], this.layoutVertexArray = new Ks(), this.indexArray = new na(), this.indexArray2 = new ia(), this.programConfigurations = new Ea(t2.layers, t2.zoom), this.segments = new oa(), this.segments2 = new oa(), this.stateDependentLayerIds = this.layers.filter((t3) => t3.isStateDependent()).map((t3) => t3.id);
        }
        populate(t2, e2, r2) {
          this.hasPattern = nl("fill", this.layers, e2);
          const n2 = this.layers[0].layout.get("fill-sort-key"), i2 = !n2.isConstant(), s2 = [];
          for (const { feature: a2, id: o2, index: l2, sourceLayerIndex: u3 } of t2) {
            const t3 = this.layers[0]._featureFilter.needGeometry, c2 = ja(a2, t3);
            if (!this.layers[0]._featureFilter.filter(new Ui(this.zoom), c2, r2)) continue;
            const h2 = i2 ? n2.evaluate(c2, {}, r2, e2.availableImages) : void 0, p3 = { id: o2, properties: a2.properties, type: a2.type, sourceLayerIndex: u3, index: l2, geometry: t3 ? c2.geometry : Oa(a2), patterns: {}, sortKey: h2 };
            s2.push(p3);
          }
          i2 && s2.sort((t3, e3) => t3.sortKey - e3.sortKey);
          for (const n3 of s2) {
            const { geometry: i3, index: s3, sourceLayerIndex: a2 } = n3;
            if (this.hasPattern) {
              const t3 = il("fill", this.layers, n3, this.zoom, e2);
              this.patternFeatures.push(t3);
            } else this.addFeature(n3, i3, s3, r2, {});
            e2.featureIndex.insert(t2[s3].feature, i3, s3, a2, this.index);
          }
        }
        update(t2, e2, r2) {
          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
        }
        addFeatures(t2, e2, r2) {
          for (const t3 of this.patternFeatures) this.addFeature(t3, t3.geometry, t3.index, e2, r2);
        }
        isEmpty() {
          return 0 === this.layoutVertexArray.length;
        }
        uploadPending() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }
        upload(t2) {
          this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, Bo), this.indexBuffer = t2.createIndexBuffer(this.indexArray), this.indexBuffer2 = t2.createIndexBuffer(this.indexArray2)), this.programConfigurations.upload(t2), this.uploaded = true;
        }
        destroy() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.indexBuffer2.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.segments2.destroy());
        }
        addFeature(t2, e2, r2, n2, i2) {
          for (const t3 of xr(e2, 500)) {
            let e3 = 0;
            for (const r4 of t3) e3 += r4.length;
            const r3 = this.segments.prepareSegment(e3, this.layoutVertexArray, this.indexArray), n3 = r3.vertexLength, i3 = [], s2 = [];
            for (const e4 of t3) {
              if (0 === e4.length) continue;
              e4 !== t3[0] && s2.push(i3.length / 2);
              const r4 = this.segments2.prepareSegment(e4.length, this.layoutVertexArray, this.indexArray2), n4 = r4.vertexLength;
              this.layoutVertexArray.emplaceBack(e4[0].x, e4[0].y), this.indexArray2.emplaceBack(n4 + e4.length - 1, n4), i3.push(e4[0].x), i3.push(e4[0].y);
              for (let t4 = 1; t4 < e4.length; t4++) this.layoutVertexArray.emplaceBack(e4[t4].x, e4[t4].y), this.indexArray2.emplaceBack(n4 + t4 - 1, n4 + t4), i3.push(e4[t4].x), i3.push(e4[t4].y);
              r4.vertexLength += e4.length, r4.primitiveLength += e4.length;
            }
            const a2 = Vo(i3, s2);
            for (let t4 = 0; t4 < a2.length; t4 += 3) this.indexArray.emplaceBack(n3 + a2[t4], n3 + a2[t4 + 1], n3 + a2[t4 + 2]);
            r3.vertexLength += e3, r3.primitiveLength += a2.length / 3;
          }
          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, i2, n2);
        }
      }
      let al, ol;
      wi("FillBucket", sl, { omit: ["layers", "patternFeatures"] });
      var ll = { get paint() {
        return ol = ol || new rs({ "fill-antialias": new Ji(G2.paint_fill["fill-antialias"]), "fill-opacity": new Wi(G2.paint_fill["fill-opacity"]), "fill-color": new Wi(G2.paint_fill["fill-color"]), "fill-outline-color": new Wi(G2.paint_fill["fill-outline-color"]), "fill-translate": new Ji(G2.paint_fill["fill-translate"]), "fill-translate-anchor": new Ji(G2.paint_fill["fill-translate-anchor"]), "fill-pattern": new Qi(G2.paint_fill["fill-pattern"]) });
      }, get layout() {
        return al = al || new rs({ "fill-sort-key": new Wi(G2.layout_fill["fill-sort-key"]) });
      } };
      class ul extends is {
        constructor(t2) {
          super(t2, ll);
        }
        recalculate(t2, e2) {
          super.recalculate(t2, e2);
          const r2 = this.paint._values["fill-outline-color"];
          "constant" === r2.value.kind && void 0 === r2.value.value && (this.paint._values["fill-outline-color"] = this.paint._values["fill-color"]);
        }
        createBucket(t2) {
          return new sl(t2);
        }
        queryRadius() {
          return eo(this.paint.get("fill-translate"));
        }
        queryIntersectsFeature(t2, e2, r2, n2, i2, s2, a2) {
          return Za(ro(t2, this.paint.get("fill-translate"), this.paint.get("fill-translate-anchor"), s2.angle, a2), n2);
        }
        isTileClipped() {
          return true;
        }
      }
      const cl = ls([{ name: "a_pos", components: 2, type: "Int16" }, { name: "a_normal_ed", components: 4, type: "Int16" }], 4), hl = ls([{ name: "a_centroid", components: 2, type: "Int16" }], 4), { members: pl } = cl;
      var fl = {}, dl = n, yl = ml;
      function ml(t2, e2, r2, n2, i2) {
        this.properties = {}, this.extent = r2, this.type = 0, this._pbf = t2, this._geometry = -1, this._keys = n2, this._values = i2, t2.readFields(gl, this, e2);
      }
      function gl(t2, e2, r2) {
        1 == t2 ? e2.id = r2.readVarint() : 2 == t2 ? function(t3, e3) {
          for (var r3 = t3.readVarint() + t3.pos; t3.pos < r3; ) {
            var n2 = e3._keys[t3.readVarint()], i2 = e3._values[t3.readVarint()];
            e3.properties[n2] = i2;
          }
        }(r2, e2) : 3 == t2 ? e2.type = r2.readVarint() : 4 == t2 && (e2._geometry = r2.pos);
      }
      function xl(t2) {
        for (var e2, r2, n2 = 0, i2 = 0, s2 = t2.length, a2 = s2 - 1; i2 < s2; a2 = i2++) n2 += ((r2 = t2[a2]).x - (e2 = t2[i2]).x) * (e2.y + r2.y);
        return n2;
      }
      ml.types = ["Unknown", "Point", "LineString", "Polygon"], ml.prototype.loadGeometry = function() {
        var t2 = this._pbf;
        t2.pos = this._geometry;
        for (var e2, r2 = t2.readVarint() + t2.pos, n2 = 1, i2 = 0, s2 = 0, a2 = 0, o2 = []; t2.pos < r2; ) {
          if (i2 <= 0) {
            var l2 = t2.readVarint();
            n2 = 7 & l2, i2 = l2 >> 3;
          }
          if (i2--, 1 === n2 || 2 === n2) s2 += t2.readSVarint(), a2 += t2.readSVarint(), 1 === n2 && (e2 && o2.push(e2), e2 = []), e2.push(new dl(s2, a2));
          else {
            if (7 !== n2) throw new Error("unknown command " + n2);
            e2 && e2.push(e2[0].clone());
          }
        }
        return e2 && o2.push(e2), o2;
      }, ml.prototype.bbox = function() {
        var t2 = this._pbf;
        t2.pos = this._geometry;
        for (var e2 = t2.readVarint() + t2.pos, r2 = 1, n2 = 0, i2 = 0, s2 = 0, a2 = 1 / 0, o2 = -1 / 0, l2 = 1 / 0, u3 = -1 / 0; t2.pos < e2; ) {
          if (n2 <= 0) {
            var c2 = t2.readVarint();
            r2 = 7 & c2, n2 = c2 >> 3;
          }
          if (n2--, 1 === r2 || 2 === r2) (i2 += t2.readSVarint()) < a2 && (a2 = i2), i2 > o2 && (o2 = i2), (s2 += t2.readSVarint()) < l2 && (l2 = s2), s2 > u3 && (u3 = s2);
          else if (7 !== r2) throw new Error("unknown command " + r2);
        }
        return [a2, l2, o2, u3];
      }, ml.prototype.toGeoJSON = function(t2, e2, r2) {
        var n2, i2, s2 = this.extent * Math.pow(2, r2), a2 = this.extent * t2, o2 = this.extent * e2, l2 = this.loadGeometry(), u3 = ml.types[this.type];
        function c2(t3) {
          for (var e3 = 0; e3 < t3.length; e3++) {
            var r3 = t3[e3];
            t3[e3] = [360 * (r3.x + a2) / s2 - 180, 360 / Math.PI * Math.atan(Math.exp((180 - 360 * (r3.y + o2) / s2) * Math.PI / 180)) - 90];
          }
        }
        switch (this.type) {
          case 1:
            var h2 = [];
            for (n2 = 0; n2 < l2.length; n2++) h2[n2] = l2[n2][0];
            c2(l2 = h2);
            break;
          case 2:
            for (n2 = 0; n2 < l2.length; n2++) c2(l2[n2]);
            break;
          case 3:
            for (l2 = function(t3) {
              var e3 = t3.length;
              if (e3 <= 1) return [t3];
              for (var r3, n3, i3 = [], s3 = 0; s3 < e3; s3++) {
                var a3 = xl(t3[s3]);
                0 !== a3 && (void 0 === n3 && (n3 = a3 < 0), n3 === a3 < 0 ? (r3 && i3.push(r3), r3 = [t3[s3]]) : r3.push(t3[s3]));
              }
              return r3 && i3.push(r3), i3;
            }(l2), n2 = 0; n2 < l2.length; n2++) for (i2 = 0; i2 < l2[n2].length; i2++) c2(l2[n2][i2]);
        }
        1 === l2.length ? l2 = l2[0] : u3 = "Multi" + u3;
        var p3 = { type: "Feature", geometry: { type: u3, coordinates: l2 }, properties: this.properties };
        return "id" in this && (p3.id = this.id), p3;
      };
      var vl = yl, bl = wl;
      function wl(t2, e2) {
        this.version = 1, this.name = null, this.extent = 4096, this.length = 0, this._pbf = t2, this._keys = [], this._values = [], this._features = [], t2.readFields(_l, this, e2), this.length = this._features.length;
      }
      function _l(t2, e2, r2) {
        15 === t2 ? e2.version = r2.readVarint() : 1 === t2 ? e2.name = r2.readString() : 5 === t2 ? e2.extent = r2.readVarint() : 2 === t2 ? e2._features.push(r2.pos) : 3 === t2 ? e2._keys.push(r2.readString()) : 4 === t2 && e2._values.push(function(t3) {
          for (var e3 = null, r3 = t3.readVarint() + t3.pos; t3.pos < r3; ) {
            var n2 = t3.readVarint() >> 3;
            e3 = 1 === n2 ? t3.readString() : 2 === n2 ? t3.readFloat() : 3 === n2 ? t3.readDouble() : 4 === n2 ? t3.readVarint64() : 5 === n2 ? t3.readVarint() : 6 === n2 ? t3.readSVarint() : 7 === n2 ? t3.readBoolean() : null;
          }
          return e3;
        }(r2));
      }
      wl.prototype.feature = function(t2) {
        if (t2 < 0 || t2 >= this._features.length) throw new Error("feature index out of bounds");
        this._pbf.pos = this._features[t2];
        var e2 = this._pbf.readVarint() + this._pbf.pos;
        return new vl(this._pbf, e2, this.extent, this._keys, this._values);
      };
      var Al = bl;
      function Sl(t2, e2, r2) {
        if (3 === t2) {
          var n2 = new Al(r2, r2.readVarint() + r2.pos);
          n2.length && (e2[n2.name] = n2);
        }
      }
      fl.VectorTile = function(t2, e2) {
        this.layers = t2.readFields(Sl, {}, e2);
      }, fl.VectorTileFeature = yl, fl.VectorTileLayer = bl;
      const kl = fl.VectorTileFeature.types, Ml = Math.pow(2, 13);
      function Il(t2, e2, r2, n2, i2, s2, a2, o2) {
        t2.emplaceBack(e2, r2, 2 * Math.floor(n2 * Ml) + a2, i2 * Ml * 2, s2 * Ml * 2, Math.round(o2));
      }
      class zl {
        constructor(t2) {
          this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map((t3) => t3.id), this.index = t2.index, this.hasPattern = false, this.layoutVertexArray = new Xs(), this.centroidVertexArray = new Zs(), this.indexArray = new na(), this.programConfigurations = new Ea(t2.layers, t2.zoom), this.segments = new oa(), this.stateDependentLayerIds = this.layers.filter((t3) => t3.isStateDependent()).map((t3) => t3.id);
        }
        populate(t2, e2, r2) {
          this.features = [], this.hasPattern = nl("fill-extrusion", this.layers, e2);
          for (const { feature: n2, id: i2, index: s2, sourceLayerIndex: a2 } of t2) {
            const t3 = this.layers[0]._featureFilter.needGeometry, o2 = ja(n2, t3);
            if (!this.layers[0]._featureFilter.filter(new Ui(this.zoom), o2, r2)) continue;
            const l2 = { id: i2, sourceLayerIndex: a2, index: s2, geometry: t3 ? o2.geometry : Oa(n2), properties: n2.properties, type: n2.type, patterns: {} };
            this.hasPattern ? this.features.push(il("fill-extrusion", this.layers, l2, this.zoom, e2)) : this.addFeature(l2, l2.geometry, s2, r2, {}), e2.featureIndex.insert(n2, l2.geometry, s2, a2, this.index, true);
          }
        }
        addFeatures(t2, e2, r2) {
          for (const t3 of this.features) {
            const { geometry: n2 } = t3;
            this.addFeature(t3, n2, t3.index, e2, r2);
          }
        }
        update(t2, e2, r2) {
          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
        }
        isEmpty() {
          return 0 === this.layoutVertexArray.length && 0 === this.centroidVertexArray.length;
        }
        uploadPending() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }
        upload(t2) {
          this.uploaded || (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, pl), this.centroidVertexBuffer = t2.createVertexBuffer(this.centroidVertexArray, hl.members, true), this.indexBuffer = t2.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t2), this.uploaded = true;
        }
        destroy() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.centroidVertexBuffer.destroy());
        }
        addFeature(t2, e2, r2, n2, i2) {
          for (const r3 of xr(e2, 500)) {
            const e3 = { x: 0, y: 0, vertexCount: 0 };
            let n3 = 0;
            for (const t3 of r3) n3 += t3.length;
            let i3 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray);
            for (const t3 of r3) {
              if (0 === t3.length) continue;
              if (Cl(t3)) continue;
              let r4 = 0;
              for (let n4 = 0; n4 < t3.length; n4++) {
                const s3 = t3[n4];
                if (n4 >= 1) {
                  const a3 = t3[n4 - 1];
                  if (!Pl(s3, a3)) {
                    i3.vertexLength + 4 > oa.MAX_VERTEX_ARRAY_LENGTH && (i3 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray));
                    const t4 = s3.sub(a3)._perp()._unit(), n5 = a3.dist(s3);
                    r4 + n5 > 32768 && (r4 = 0), Il(this.layoutVertexArray, s3.x, s3.y, t4.x, t4.y, 0, 0, r4), Il(this.layoutVertexArray, s3.x, s3.y, t4.x, t4.y, 0, 1, r4), e3.x += 2 * s3.x, e3.y += 2 * s3.y, e3.vertexCount += 2, r4 += n5, Il(this.layoutVertexArray, a3.x, a3.y, t4.x, t4.y, 0, 0, r4), Il(this.layoutVertexArray, a3.x, a3.y, t4.x, t4.y, 0, 1, r4), e3.x += 2 * a3.x, e3.y += 2 * a3.y, e3.vertexCount += 2;
                    const o3 = i3.vertexLength;
                    this.indexArray.emplaceBack(o3, o3 + 2, o3 + 1), this.indexArray.emplaceBack(o3 + 1, o3 + 2, o3 + 3), i3.vertexLength += 4, i3.primitiveLength += 2;
                  }
                }
              }
            }
            if (i3.vertexLength + n3 > oa.MAX_VERTEX_ARRAY_LENGTH && (i3 = this.segments.prepareSegment(n3, this.layoutVertexArray, this.indexArray)), "Polygon" !== kl[t2.type]) continue;
            const s2 = [], a2 = [], o2 = i3.vertexLength;
            for (const t3 of r3) if (0 !== t3.length) {
              t3 !== r3[0] && a2.push(s2.length / 2);
              for (let r4 = 0; r4 < t3.length; r4++) {
                const n4 = t3[r4];
                Il(this.layoutVertexArray, n4.x, n4.y, 0, 0, 1, 1, 0), e3.x += n4.x, e3.y += n4.y, e3.vertexCount += 1, s2.push(n4.x), s2.push(n4.y);
              }
            }
            const l2 = Vo(s2, a2);
            for (let t3 = 0; t3 < l2.length; t3 += 3) this.indexArray.emplaceBack(o2 + l2[t3], o2 + l2[t3 + 2], o2 + l2[t3 + 1]);
            i3.primitiveLength += l2.length / 3, i3.vertexLength += n3;
            for (let t3 = 0; t3 < e3.vertexCount; t3++) {
              const t4 = Math.floor(e3.x / e3.vertexCount), r4 = Math.floor(e3.y / e3.vertexCount);
              this.centroidVertexArray.emplaceBack(t4, r4);
            }
          }
          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, i2, n2);
        }
      }
      function Pl(t2, e2) {
        return t2.x === e2.x && (t2.x < 0 || t2.x > $a) || t2.y === e2.y && (t2.y < 0 || t2.y > $a);
      }
      function Cl(t2) {
        return t2.every((t3) => t3.x < 0) || t2.every((t3) => t3.x > $a) || t2.every((t3) => t3.y < 0) || t2.every((t3) => t3.y > $a);
      }
      let Bl;
      wi("FillExtrusionBucket", zl, { omit: ["layers", "features"] });
      var Vl = { get paint() {
        return Bl = Bl || new rs({ "fill-extrusion-opacity": new Ji(G2["paint_fill-extrusion"]["fill-extrusion-opacity"]), "fill-extrusion-color": new Wi(G2["paint_fill-extrusion"]["fill-extrusion-color"]), "fill-extrusion-translate": new Ji(G2["paint_fill-extrusion"]["fill-extrusion-translate"]), "fill-extrusion-translate-anchor": new Ji(G2["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]), "fill-extrusion-pattern": new Qi(G2["paint_fill-extrusion"]["fill-extrusion-pattern"]), "fill-extrusion-height": new Wi(G2["paint_fill-extrusion"]["fill-extrusion-height"]), "fill-extrusion-base": new Wi(G2["paint_fill-extrusion"]["fill-extrusion-base"]), "fill-extrusion-vertical-gradient": new Ji(G2["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]) });
      } };
      class El extends is {
        constructor(t2) {
          super(t2, Vl);
        }
        createBucket(t2) {
          return new zl(t2);
        }
        queryRadius() {
          return eo(this.paint.get("fill-extrusion-translate"));
        }
        is3D() {
          return true;
        }
        queryIntersectsFeature(t2, e2, r2, n2, i2, a2, o2, l2) {
          const u3 = ro(t2, this.paint.get("fill-extrusion-translate"), this.paint.get("fill-extrusion-translate-anchor"), a2.angle, o2), c2 = this.paint.get("fill-extrusion-height").evaluate(e2, r2), h2 = this.paint.get("fill-extrusion-base").evaluate(e2, r2), p3 = function(t3, e3, r3, n3) {
            const i3 = [];
            for (const r4 of t3) {
              const t4 = [r4.x, r4.y, 0, 1];
              po(t4, t4, e3), i3.push(new s(t4[0] / t4[3], t4[1] / t4[3]));
            }
            return i3;
          }(u3, l2), f2 = function(t3, e3, r3, n3) {
            const i3 = [], a3 = [], o3 = n3[8] * e3, l3 = n3[9] * e3, u4 = n3[10] * e3, c3 = n3[11] * e3, h3 = n3[8] * r3, p4 = n3[9] * r3, f3 = n3[10] * r3, d2 = n3[11] * r3;
            for (const e4 of t3) {
              const t4 = [], r4 = [];
              for (const i4 of e4) {
                const e5 = i4.x, a4 = i4.y, y2 = n3[0] * e5 + n3[4] * a4 + n3[12], m2 = n3[1] * e5 + n3[5] * a4 + n3[13], g2 = n3[2] * e5 + n3[6] * a4 + n3[14], x2 = n3[3] * e5 + n3[7] * a4 + n3[15], v2 = g2 + u4, b2 = x2 + c3, w3 = y2 + h3, _2 = m2 + p4, A2 = g2 + f3, S2 = x2 + d2, k2 = new s((y2 + o3) / b2, (m2 + l3) / b2);
                k2.z = v2 / b2, t4.push(k2);
                const M2 = new s(w3 / S2, _2 / S2);
                M2.z = A2 / S2, r4.push(M2);
              }
              i3.push(t4), a3.push(r4);
            }
            return [i3, a3];
          }(n2, h2, c2, l2);
          return function(t3, e3, r3) {
            let n3 = 1 / 0;
            Za(r3, e3) && (n3 = Tl(r3, e3[0]));
            for (let i3 = 0; i3 < e3.length; i3++) {
              const s2 = e3[i3], a3 = t3[i3];
              for (let t4 = 0; t4 < s2.length - 1; t4++) {
                const e4 = s2[t4], i4 = [e4, s2[t4 + 1], a3[t4 + 1], a3[t4], e4];
                qa(r3, i4) && (n3 = Math.min(n3, Tl(r3, i4)));
              }
            }
            return n3 !== 1 / 0 && n3;
          }(f2[0], f2[1], p3);
        }
      }
      function Fl(t2, e2) {
        return t2.x * e2.x + t2.y * e2.y;
      }
      function Tl(t2, e2) {
        if (1 === t2.length) {
          let r2 = 0;
          const n2 = e2[r2++];
          let i2;
          for (; !i2 || n2.equals(i2); ) if (i2 = e2[r2++], !i2) return 1 / 0;
          for (; r2 < e2.length; r2++) {
            const s2 = e2[r2], a2 = t2[0], o2 = i2.sub(n2), l2 = s2.sub(n2), u3 = a2.sub(n2), c2 = Fl(o2, o2), h2 = Fl(o2, l2), p3 = Fl(l2, l2), f2 = Fl(u3, o2), d2 = Fl(u3, l2), y2 = c2 * p3 - h2 * h2, m2 = (p3 * f2 - h2 * d2) / y2, g2 = (c2 * d2 - h2 * f2) / y2, x2 = n2.z * (1 - m2 - g2) + i2.z * m2 + s2.z * g2;
            if (isFinite(x2)) return x2;
          }
          return 1 / 0;
        }
        {
          let t3 = 1 / 0;
          for (const r2 of e2) t3 = Math.min(t3, r2.z);
          return t3;
        }
      }
      const $l = ls([{ name: "a_pos_normal", components: 2, type: "Int16" }, { name: "a_data", components: 4, type: "Uint8" }], 4), { members: Ll } = $l, Dl = ls([{ name: "a_uv_x", components: 1, type: "Float32" }, { name: "a_split_index", components: 1, type: "Float32" }]), { members: Ol } = Dl, jl = fl.VectorTileFeature.types, Rl = Math.cos(Math.PI / 180 * 37.5), Ul = Math.pow(2, 14) / 0.5;
      class ql {
        constructor(t2) {
          this.zoom = t2.zoom, this.overscaling = t2.overscaling, this.layers = t2.layers, this.layerIds = this.layers.map((t3) => t3.id), this.index = t2.index, this.hasPattern = false, this.patternFeatures = [], this.lineClipsArray = [], this.gradients = {}, this.layers.forEach((t3) => {
            this.gradients[t3.id] = {};
          }), this.layoutVertexArray = new Hs(), this.layoutVertexArray2 = new Ys(), this.indexArray = new na(), this.programConfigurations = new Ea(t2.layers, t2.zoom), this.segments = new oa(), this.maxLineLength = 0, this.stateDependentLayerIds = this.layers.filter((t3) => t3.isStateDependent()).map((t3) => t3.id);
        }
        populate(t2, e2, r2) {
          this.hasPattern = nl("line", this.layers, e2);
          const n2 = this.layers[0].layout.get("line-sort-key"), i2 = !n2.isConstant(), s2 = [];
          for (const { feature: e3, id: a2, index: o2, sourceLayerIndex: l2 } of t2) {
            const t3 = this.layers[0]._featureFilter.needGeometry, u3 = ja(e3, t3);
            if (!this.layers[0]._featureFilter.filter(new Ui(this.zoom), u3, r2)) continue;
            const c2 = i2 ? n2.evaluate(u3, {}, r2) : void 0, h2 = { id: a2, properties: e3.properties, type: e3.type, sourceLayerIndex: l2, index: o2, geometry: t3 ? u3.geometry : Oa(e3), patterns: {}, sortKey: c2 };
            s2.push(h2);
          }
          i2 && s2.sort((t3, e3) => t3.sortKey - e3.sortKey);
          for (const n3 of s2) {
            const { geometry: i3, index: s3, sourceLayerIndex: a2 } = n3;
            if (this.hasPattern) {
              const t3 = il("line", this.layers, n3, this.zoom, e2);
              this.patternFeatures.push(t3);
            } else this.addFeature(n3, i3, s3, r2, {});
            e2.featureIndex.insert(t2[s3].feature, i3, s3, a2, this.index);
          }
        }
        update(t2, e2, r2) {
          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t2, e2, this.stateDependentLayers, r2);
        }
        addFeatures(t2, e2, r2) {
          for (const t3 of this.patternFeatures) this.addFeature(t3, t3.geometry, t3.index, e2, r2);
        }
        isEmpty() {
          return 0 === this.layoutVertexArray.length;
        }
        uploadPending() {
          return !this.uploaded || this.programConfigurations.needsUpload;
        }
        upload(t2) {
          this.uploaded || (0 !== this.layoutVertexArray2.length && (this.layoutVertexBuffer2 = t2.createVertexBuffer(this.layoutVertexArray2, Ol)), this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, Ll), this.indexBuffer = t2.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t2), this.uploaded = true;
        }
        destroy() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
        }
        lineFeatureClips(t2) {
          if (t2.properties && Object.prototype.hasOwnProperty.call(t2.properties, "mapbox_clip_start") && Object.prototype.hasOwnProperty.call(t2.properties, "mapbox_clip_end")) return { start: +t2.properties.mapbox_clip_start, end: +t2.properties.mapbox_clip_end };
        }
        addFeature(t2, e2, r2, n2, i2) {
          const s2 = this.layers[0].layout, a2 = s2.get("line-join").evaluate(t2, {}), o2 = s2.get("line-cap"), l2 = s2.get("line-miter-limit"), u3 = s2.get("line-round-limit");
          this.lineClips = this.lineFeatureClips(t2);
          for (const r3 of e2) this.addLine(r3, t2, a2, o2, l2, u3);
          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t2, r2, i2, n2);
        }
        addLine(t2, e2, r2, n2, i2, s2) {
          if (this.distance = 0, this.scaledDistance = 0, this.totalDistance = 0, this.lineClips) {
            this.lineClipsArray.push(this.lineClips);
            for (let e3 = 0; e3 < t2.length - 1; e3++) this.totalDistance += t2[e3].dist(t2[e3 + 1]);
            this.updateScaledDistance(), this.maxLineLength = Math.max(this.maxLineLength, this.totalDistance);
          }
          const a2 = "Polygon" === jl[e2.type];
          let o2 = t2.length;
          for (; o2 >= 2 && t2[o2 - 1].equals(t2[o2 - 2]); ) o2--;
          let l2 = 0;
          for (; l2 < o2 - 1 && t2[l2].equals(t2[l2 + 1]); ) l2++;
          if (o2 < (a2 ? 3 : 2)) return;
          "bevel" === r2 && (i2 = 1.05);
          const u3 = this.overscaling <= 16 ? 15 * $a / (512 * this.overscaling) : 0, c2 = this.segments.prepareSegment(10 * o2, this.layoutVertexArray, this.indexArray);
          let h2, p3, f2, d2, y2;
          this.e1 = this.e2 = -1, a2 && (h2 = t2[o2 - 2], y2 = t2[l2].sub(h2)._unit()._perp());
          for (let e3 = l2; e3 < o2; e3++) {
            if (f2 = e3 === o2 - 1 ? a2 ? t2[l2 + 1] : void 0 : t2[e3 + 1], f2 && t2[e3].equals(f2)) continue;
            y2 && (d2 = y2), h2 && (p3 = h2), h2 = t2[e3], y2 = f2 ? f2.sub(h2)._unit()._perp() : d2, d2 = d2 || y2;
            let m2 = d2.add(y2);
            0 === m2.x && 0 === m2.y || m2._unit();
            const g2 = d2.x * y2.x + d2.y * y2.y, x2 = m2.x * y2.x + m2.y * y2.y, v2 = 0 !== x2 ? 1 / x2 : 1 / 0, b2 = 2 * Math.sqrt(2 - 2 * x2), w3 = x2 < Rl && p3 && f2, _2 = d2.x * y2.y - d2.y * y2.x > 0;
            if (w3 && e3 > l2) {
              const t3 = h2.dist(p3);
              if (t3 > 2 * u3) {
                const e4 = h2.sub(h2.sub(p3)._mult(u3 / t3)._round());
                this.updateDistance(p3, e4), this.addCurrentVertex(e4, d2, 0, 0, c2), p3 = e4;
              }
            }
            const A2 = p3 && f2;
            let S2 = A2 ? r2 : a2 ? "butt" : n2;
            if (A2 && "round" === S2 && (v2 < s2 ? S2 = "miter" : v2 <= 2 && (S2 = "fakeround")), "miter" === S2 && v2 > i2 && (S2 = "bevel"), "bevel" === S2 && (v2 > 2 && (S2 = "flipbevel"), v2 < i2 && (S2 = "miter")), p3 && this.updateDistance(p3, h2), "miter" === S2) m2._mult(v2), this.addCurrentVertex(h2, m2, 0, 0, c2);
            else if ("flipbevel" === S2) {
              if (v2 > 100) m2 = y2.mult(-1);
              else {
                const t3 = v2 * d2.add(y2).mag() / d2.sub(y2).mag();
                m2._perp()._mult(t3 * (_2 ? -1 : 1));
              }
              this.addCurrentVertex(h2, m2, 0, 0, c2), this.addCurrentVertex(h2, m2.mult(-1), 0, 0, c2);
            } else if ("bevel" === S2 || "fakeround" === S2) {
              const t3 = -Math.sqrt(v2 * v2 - 1), e4 = _2 ? t3 : 0, r3 = _2 ? 0 : t3;
              if (p3 && this.addCurrentVertex(h2, d2, e4, r3, c2), "fakeround" === S2) {
                const t4 = Math.round(180 * b2 / Math.PI / 20);
                for (let e5 = 1; e5 < t4; e5++) {
                  let r4 = e5 / t4;
                  if (0.5 !== r4) {
                    const t5 = r4 - 0.5;
                    r4 += r4 * t5 * (r4 - 1) * ((1.0904 + g2 * (g2 * (3.55645 - 1.43519 * g2) - 3.2452)) * t5 * t5 + (0.848013 + g2 * (0.215638 * g2 - 1.06021)));
                  }
                  const n3 = y2.sub(d2)._mult(r4)._add(d2)._unit()._mult(_2 ? -1 : 1);
                  this.addHalfVertex(h2, n3.x, n3.y, false, _2, 0, c2);
                }
              }
              f2 && this.addCurrentVertex(h2, y2, -e4, -r3, c2);
            } else if ("butt" === S2) this.addCurrentVertex(h2, m2, 0, 0, c2);
            else if ("square" === S2) {
              const t3 = p3 ? 1 : -1;
              this.addCurrentVertex(h2, m2, t3, t3, c2);
            } else "round" === S2 && (p3 && (this.addCurrentVertex(h2, d2, 0, 0, c2), this.addCurrentVertex(h2, d2, 1, 1, c2, true)), f2 && (this.addCurrentVertex(h2, y2, -1, -1, c2, true), this.addCurrentVertex(h2, y2, 0, 0, c2)));
            if (w3 && e3 < o2 - 1) {
              const t3 = h2.dist(f2);
              if (t3 > 2 * u3) {
                const e4 = h2.add(f2.sub(h2)._mult(u3 / t3)._round());
                this.updateDistance(h2, e4), this.addCurrentVertex(e4, y2, 0, 0, c2), h2 = e4;
              }
            }
          }
        }
        addCurrentVertex(t2, e2, r2, n2, i2, s2 = false) {
          const a2 = e2.y * n2 - e2.x, o2 = -e2.y - e2.x * n2;
          this.addHalfVertex(t2, e2.x + e2.y * r2, e2.y - e2.x * r2, s2, false, r2, i2), this.addHalfVertex(t2, a2, o2, s2, true, -n2, i2), this.distance > Ul / 2 && 0 === this.totalDistance && (this.distance = 0, this.updateScaledDistance(), this.addCurrentVertex(t2, e2, r2, n2, i2, s2));
        }
        addHalfVertex({ x: t2, y: e2 }, r2, n2, i2, s2, a2, o2) {
          const l2 = 0.5 * (this.lineClips ? this.scaledDistance * (Ul - 1) : this.scaledDistance);
          this.layoutVertexArray.emplaceBack((t2 << 1) + (i2 ? 1 : 0), (e2 << 1) + (s2 ? 1 : 0), Math.round(63 * r2) + 128, Math.round(63 * n2) + 128, 1 + (0 === a2 ? 0 : a2 < 0 ? -1 : 1) | (63 & l2) << 2, l2 >> 6), this.lineClips && this.layoutVertexArray2.emplaceBack((this.scaledDistance - this.lineClips.start) / (this.lineClips.end - this.lineClips.start), this.lineClipsArray.length);
          const u3 = o2.vertexLength++;
          this.e1 >= 0 && this.e2 >= 0 && (this.indexArray.emplaceBack(this.e1, this.e2, u3), o2.primitiveLength++), s2 ? this.e2 = u3 : this.e1 = u3;
        }
        updateScaledDistance() {
          this.scaledDistance = this.lineClips ? this.lineClips.start + (this.lineClips.end - this.lineClips.start) * this.distance / this.totalDistance : this.distance;
        }
        updateDistance(t2, e2) {
          this.distance += t2.dist(e2), this.updateScaledDistance();
        }
      }
      let Nl, Zl;
      wi("LineBucket", ql, { omit: ["layers", "patternFeatures"] });
      var Gl = { get paint() {
        return Zl = Zl || new rs({ "line-opacity": new Wi(G2.paint_line["line-opacity"]), "line-color": new Wi(G2.paint_line["line-color"]), "line-translate": new Ji(G2.paint_line["line-translate"]), "line-translate-anchor": new Ji(G2.paint_line["line-translate-anchor"]), "line-width": new Wi(G2.paint_line["line-width"]), "line-gap-width": new Wi(G2.paint_line["line-gap-width"]), "line-offset": new Wi(G2.paint_line["line-offset"]), "line-blur": new Wi(G2.paint_line["line-blur"]), "line-dasharray": new ts(G2.paint_line["line-dasharray"]), "line-pattern": new Qi(G2.paint_line["line-pattern"]), "line-gradient": new es(G2.paint_line["line-gradient"]) });
      }, get layout() {
        return Nl = Nl || new rs({ "line-cap": new Ji(G2.layout_line["line-cap"]), "line-join": new Wi(G2.layout_line["line-join"]), "line-miter-limit": new Ji(G2.layout_line["line-miter-limit"]), "line-round-limit": new Ji(G2.layout_line["line-round-limit"]), "line-sort-key": new Wi(G2.layout_line["line-sort-key"]) });
      } };
      class Kl extends Wi {
        possiblyEvaluate(t2, e2) {
          return e2 = new Ui(Math.floor(e2.zoom), { now: e2.now, fadeDuration: e2.fadeDuration, zoomHistory: e2.zoomHistory, transition: e2.transition }), super.possiblyEvaluate(t2, e2);
        }
        evaluate(t2, e2, r2, n2) {
          return e2 = g({}, e2, { zoom: Math.floor(e2.zoom) }), super.evaluate(t2, e2, r2, n2);
        }
      }
      let Xl;
      class Hl extends is {
        constructor(t2) {
          super(t2, Gl), this.gradientVersion = 0, Xl || (Xl = new Kl(Gl.paint.properties["line-width"].specification), Xl.useIntegerZoom = true);
        }
        _handleSpecialPaintPropertyUpdate(t2) {
          if ("line-gradient" === t2) {
            const t3 = this.gradientExpression();
            this.stepInterpolant = !!function(t4) {
              return void 0 !== t4._styleExpression;
            }(t3) && t3._styleExpression.expression instanceof Ae2, this.gradientVersion = (this.gradientVersion + 1) % Number.MAX_SAFE_INTEGER;
          }
        }
        gradientExpression() {
          return this._transitionablePaint._values["line-gradient"].value.expression;
        }
        recalculate(t2, e2) {
          super.recalculate(t2, e2), this.paint._values["line-floorwidth"] = Xl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value, t2);
        }
        createBucket(t2) {
          return new ql(t2);
        }
        queryRadius(t2) {
          const e2 = t2, r2 = Yl(to("line-width", this, e2), to("line-gap-width", this, e2)), n2 = to("line-offset", this, e2);
          return r2 / 2 + Math.abs(n2) + eo(this.paint.get("line-translate"));
        }
        queryIntersectsFeature(t2, e2, r2, n2, i2, a2, o2) {
          const l2 = ro(t2, this.paint.get("line-translate"), this.paint.get("line-translate-anchor"), a2.angle, o2), u3 = o2 / 2 * Yl(this.paint.get("line-width").evaluate(e2, r2), this.paint.get("line-gap-width").evaluate(e2, r2)), c2 = this.paint.get("line-offset").evaluate(e2, r2);
          return c2 && (n2 = function(t3, e3) {
            const r3 = [];
            for (let n3 = 0; n3 < t3.length; n3++) {
              const i3 = t3[n3], a3 = [];
              for (let t4 = 0; t4 < i3.length; t4++) {
                const r4 = i3[t4 - 1], n4 = i3[t4], o3 = i3[t4 + 1], l3 = 0 === t4 ? new s(0, 0) : n4.sub(r4)._unit()._perp(), u4 = t4 === i3.length - 1 ? new s(0, 0) : o3.sub(n4)._unit()._perp(), c3 = l3._add(u4)._unit(), h2 = c3.x * u4.x + c3.y * u4.y;
                0 !== h2 && c3._mult(1 / h2), a3.push(c3._mult(e3)._add(n4));
              }
              r3.push(a3);
            }
            return r3;
          }(n2, c2 * o2)), function(t3, e3, r3) {
            for (let n3 = 0; n3 < e3.length; n3++) {
              const i3 = e3[n3];
              if (t3.length >= 3) {
                for (let e4 = 0; e4 < i3.length; e4++) if (Wa(t3, i3[e4])) return true;
              }
              if (Ga(t3, i3, r3)) return true;
            }
            return false;
          }(l2, n2, u3);
        }
        isTileClipped() {
          return true;
        }
      }
      function Yl(t2, e2) {
        return e2 > 0 ? e2 + 2 * t2 : t2;
      }
      const Jl = ls([{ name: "a_pos_offset", components: 4, type: "Int16" }, { name: "a_data", components: 4, type: "Uint16" }, { name: "a_pixeloffset", components: 4, type: "Int16" }], 4), Wl = ls([{ name: "a_projected_pos", components: 3, type: "Float32" }], 4);
      ls([{ name: "a_fade_opacity", components: 1, type: "Uint32" }], 4);
      const Ql = ls([{ name: "a_placed", components: 2, type: "Uint8" }, { name: "a_shift", components: 2, type: "Float32" }, { name: "a_box_real", components: 2, type: "Int16" }]);
      ls([{ type: "Int16", name: "anchorPointX" }, { type: "Int16", name: "anchorPointY" }, { type: "Int16", name: "x1" }, { type: "Int16", name: "y1" }, { type: "Int16", name: "x2" }, { type: "Int16", name: "y2" }, { type: "Uint32", name: "featureIndex" }, { type: "Uint16", name: "sourceLayerIndex" }, { type: "Uint16", name: "bucketIndex" }]);
      const tu = ls([{ name: "a_pos", components: 2, type: "Int16" }, { name: "a_anchor_pos", components: 2, type: "Int16" }, { name: "a_extrude", components: 2, type: "Int16" }], 4), eu = ls([{ name: "a_pos", components: 2, type: "Float32" }, { name: "a_radius", components: 1, type: "Float32" }, { name: "a_flags", components: 2, type: "Int16" }], 4);
      function ru(t2, e2, r2) {
        return t2.sections.forEach((t3) => {
          t3.text = function(t4, e3, r3) {
            const n2 = e3.layout.get("text-transform").evaluate(r3, {});
            return "uppercase" === n2 ? t4 = t4.toLocaleUpperCase() : "lowercase" === n2 && (t4 = t4.toLocaleLowerCase()), Ri.applyArabicShaping && (t4 = Ri.applyArabicShaping(t4)), t4;
          }(t3.text, e2, r2);
        }), t2;
      }
      ls([{ name: "triangle", components: 3, type: "Uint16" }]), ls([{ type: "Int16", name: "anchorX" }, { type: "Int16", name: "anchorY" }, { type: "Uint16", name: "glyphStartIndex" }, { type: "Uint16", name: "numGlyphs" }, { type: "Uint32", name: "vertexStartIndex" }, { type: "Uint32", name: "lineStartIndex" }, { type: "Uint32", name: "lineLength" }, { type: "Uint16", name: "segment" }, { type: "Uint16", name: "lowerSize" }, { type: "Uint16", name: "upperSize" }, { type: "Float32", name: "lineOffsetX" }, { type: "Float32", name: "lineOffsetY" }, { type: "Uint8", name: "writingMode" }, { type: "Uint8", name: "placedOrientation" }, { type: "Uint8", name: "hidden" }, { type: "Uint32", name: "crossTileID" }, { type: "Int16", name: "associatedIconIndex" }]), ls([{ type: "Int16", name: "anchorX" }, { type: "Int16", name: "anchorY" }, { type: "Int16", name: "rightJustifiedTextSymbolIndex" }, { type: "Int16", name: "centerJustifiedTextSymbolIndex" }, { type: "Int16", name: "leftJustifiedTextSymbolIndex" }, { type: "Int16", name: "verticalPlacedTextSymbolIndex" }, { type: "Int16", name: "placedIconSymbolIndex" }, { type: "Int16", name: "verticalPlacedIconSymbolIndex" }, { type: "Uint16", name: "key" }, { type: "Uint16", name: "textBoxStartIndex" }, { type: "Uint16", name: "textBoxEndIndex" }, { type: "Uint16", name: "verticalTextBoxStartIndex" }, { type: "Uint16", name: "verticalTextBoxEndIndex" }, { type: "Uint16", name: "iconBoxStartIndex" }, { type: "Uint16", name: "iconBoxEndIndex" }, { type: "Uint16", name: "verticalIconBoxStartIndex" }, { type: "Uint16", name: "verticalIconBoxEndIndex" }, { type: "Uint16", name: "featureIndex" }, { type: "Uint16", name: "numHorizontalGlyphVertices" }, { type: "Uint16", name: "numVerticalGlyphVertices" }, { type: "Uint16", name: "numIconVertices" }, { type: "Uint16", name: "numVerticalIconVertices" }, { type: "Uint16", name: "useRuntimeCollisionCircles" }, { type: "Uint32", name: "crossTileID" }, { type: "Float32", name: "textBoxScale" }, { type: "Float32", name: "collisionCircleDiameter" }, { type: "Uint16", name: "textAnchorOffsetStartIndex" }, { type: "Uint16", name: "textAnchorOffsetEndIndex" }]), ls([{ type: "Float32", name: "offsetX" }]), ls([{ type: "Int16", name: "x" }, { type: "Int16", name: "y" }, { type: "Int16", name: "tileUnitDistanceFromAnchor" }]), ls([{ type: "Uint16", name: "textAnchor" }, { type: "Float32", components: 2, name: "textOffset" }]);
      const nu = { "!": "ï¸•", "#": "ï¼ƒ", $: "ï¼„", "%": "ï¼…", "&": "ï¼†", "(": "ï¸µ", ")": "ï¸¶", "*": "ï¼Š", "+": "ï¼‹", ",": "ï¸", "-": "ï¸²", ".": "ãƒ»", "/": "ï¼", ":": "ï¸“", ";": "ï¸”", "<": "ï¸¿", "=": "ï¼", ">": "ï¹€", "?": "ï¸–", "@": "ï¼ ", "[": "ï¹‡", "\\": "ï¼¼", "]": "ï¹ˆ", "^": "ï¼¾", _: "ï¸³", "`": "ï½€", "{": "ï¸·", "|": "â€•", "}": "ï¸¸", "~": "ï½ž", "Â¢": "ï¿ ", "Â£": "ï¿¡", "Â¥": "ï¿¥", "Â¦": "ï¿¤", "Â¬": "ï¿¢", "Â¯": "ï¿£", "â€“": "ï¸²", "â€”": "ï¸±", "â€˜": "ï¹ƒ", "â€™": "ï¹„", "â€œ": "ï¹", "â€": "ï¹‚", "â€¦": "ï¸™", "â€§": "ãƒ»", "â‚©": "ï¿¦", "ã€": "ï¸‘", "ã€‚": "ï¸’", "ã€ˆ": "ï¸¿", "ã€‰": "ï¹€", "ã€Š": "ï¸½", "ã€‹": "ï¸¾", "ã€Œ": "ï¹", "ã€": "ï¹‚", "ã€Ž": "ï¹ƒ", "ã€": "ï¹„", "ã€": "ï¸»", "ã€‘": "ï¸¼", "ã€”": "ï¸¹", "ã€•": "ï¸º", "ã€–": "ï¸—", "ã€—": "ï¸˜", "ï¼": "ï¸•", "ï¼ˆ": "ï¸µ", "ï¼‰": "ï¸¶", "ï¼Œ": "ï¸", "ï¼": "ï¸²", "ï¼Ž": "ãƒ»", "ï¼š": "ï¸“", "ï¼›": "ï¸”", "ï¼œ": "ï¸¿", "ï¼ž": "ï¹€", "ï¼Ÿ": "ï¸–", "ï¼»": "ï¹‡", "ï¼½": "ï¹ˆ", "ï¼¿": "ï¸³", "ï½›": "ï¸·", "ï½œ": "â€•", "ï½": "ï¸¸", "ï½Ÿ": "ï¸µ", "ï½ ": "ï¸¶", "ï½¡": "ï¸’", "ï½¢": "ï¹", "ï½£": "ï¹‚" };
      var iu = 24, su = lu, au = function(t2, e2, r2, n2, i2) {
        var s2, a2, o2 = 8 * i2 - n2 - 1, l2 = (1 << o2) - 1, u3 = l2 >> 1, c2 = -7, h2 = i2 - 1, p3 = -1, f2 = t2[e2 + h2];
        for (h2 += p3, s2 = f2 & (1 << -c2) - 1, f2 >>= -c2, c2 += o2; c2 > 0; s2 = 256 * s2 + t2[e2 + h2], h2 += p3, c2 -= 8) ;
        for (a2 = s2 & (1 << -c2) - 1, s2 >>= -c2, c2 += n2; c2 > 0; a2 = 256 * a2 + t2[e2 + h2], h2 += p3, c2 -= 8) ;
        if (0 === s2) s2 = 1 - u3;
        else {
          if (s2 === l2) return a2 ? NaN : 1 / 0 * (f2 ? -1 : 1);
          a2 += Math.pow(2, n2), s2 -= u3;
        }
        return (f2 ? -1 : 1) * a2 * Math.pow(2, s2 - n2);
      }, ou = function(t2, e2, r2, n2, i2, s2) {
        var a2, o2, l2, u3 = 8 * s2 - i2 - 1, c2 = (1 << u3) - 1, h2 = c2 >> 1, p3 = 23 === i2 ? Math.pow(2, -24) - Math.pow(2, -77) : 0, f2 = 0, d2 = 1, y2 = e2 < 0 || 0 === e2 && 1 / e2 < 0 ? 1 : 0;
        for (e2 = Math.abs(e2), isNaN(e2) || e2 === 1 / 0 ? (o2 = isNaN(e2) ? 1 : 0, a2 = c2) : (a2 = Math.floor(Math.log(e2) / Math.LN2), e2 * (l2 = Math.pow(2, -a2)) < 1 && (a2--, l2 *= 2), (e2 += a2 + h2 >= 1 ? p3 / l2 : p3 * Math.pow(2, 1 - h2)) * l2 >= 2 && (a2++, l2 /= 2), a2 + h2 >= c2 ? (o2 = 0, a2 = c2) : a2 + h2 >= 1 ? (o2 = (e2 * l2 - 1) * Math.pow(2, i2), a2 += h2) : (o2 = e2 * Math.pow(2, h2 - 1) * Math.pow(2, i2), a2 = 0)); i2 >= 8; t2[r2 + f2] = 255 & o2, f2 += d2, o2 /= 256, i2 -= 8) ;
        for (a2 = a2 << i2 | o2, u3 += i2; u3 > 0; t2[r2 + f2] = 255 & a2, f2 += d2, a2 /= 256, u3 -= 8) ;
        t2[r2 + f2 - d2] |= 128 * y2;
      };
      function lu(t2) {
        this.buf = ArrayBuffer.isView && ArrayBuffer.isView(t2) ? t2 : new Uint8Array(t2 || 0), this.pos = 0, this.type = 0, this.length = this.buf.length;
      }
      lu.Varint = 0, lu.Fixed64 = 1, lu.Bytes = 2, lu.Fixed32 = 5;
      var uu = 4294967296, cu = 1 / uu, hu = "undefined" == typeof TextDecoder ? null : new TextDecoder("utf-8");
      function pu(t2) {
        return t2.type === lu.Bytes ? t2.readVarint() + t2.pos : t2.pos + 1;
      }
      function fu(t2, e2, r2) {
        return r2 ? 4294967296 * e2 + (t2 >>> 0) : 4294967296 * (e2 >>> 0) + (t2 >>> 0);
      }
      function du(t2, e2, r2) {
        var n2 = e2 <= 16383 ? 1 : e2 <= 2097151 ? 2 : e2 <= 268435455 ? 3 : Math.floor(Math.log(e2) / (7 * Math.LN2));
        r2.realloc(n2);
        for (var i2 = r2.pos - 1; i2 >= t2; i2--) r2.buf[i2 + n2] = r2.buf[i2];
      }
      function yu(t2, e2) {
        for (var r2 = 0; r2 < t2.length; r2++) e2.writeVarint(t2[r2]);
      }
      function mu(t2, e2) {
        for (var r2 = 0; r2 < t2.length; r2++) e2.writeSVarint(t2[r2]);
      }
      function gu(t2, e2) {
        for (var r2 = 0; r2 < t2.length; r2++) e2.writeFloat(t2[r2]);
      }
      function xu(t2, e2) {
        for (var r2 = 0; r2 < t2.length; r2++) e2.writeDouble(t2[r2]);
      }
      function vu(t2, e2) {
        for (var r2 = 0; r2 < t2.length; r2++) e2.writeBoolean(t2[r2]);
      }
      function bu(t2, e2) {
        for (var r2 = 0; r2 < t2.length; r2++) e2.writeFixed32(t2[r2]);
      }
      function wu(t2, e2) {
        for (var r2 = 0; r2 < t2.length; r2++) e2.writeSFixed32(t2[r2]);
      }
      function _u(t2, e2) {
        for (var r2 = 0; r2 < t2.length; r2++) e2.writeFixed64(t2[r2]);
      }
      function Au(t2, e2) {
        for (var r2 = 0; r2 < t2.length; r2++) e2.writeSFixed64(t2[r2]);
      }
      function Su(t2, e2) {
        return (t2[e2] | t2[e2 + 1] << 8 | t2[e2 + 2] << 16) + 16777216 * t2[e2 + 3];
      }
      function ku(t2, e2, r2) {
        t2[r2] = e2, t2[r2 + 1] = e2 >>> 8, t2[r2 + 2] = e2 >>> 16, t2[r2 + 3] = e2 >>> 24;
      }
      function Mu(t2, e2) {
        return (t2[e2] | t2[e2 + 1] << 8 | t2[e2 + 2] << 16) + (t2[e2 + 3] << 24);
      }
      lu.prototype = { destroy: function() {
        this.buf = null;
      }, readFields: function(t2, e2, r2) {
        for (r2 = r2 || this.length; this.pos < r2; ) {
          var n2 = this.readVarint(), i2 = n2 >> 3, s2 = this.pos;
          this.type = 7 & n2, t2(i2, e2, this), this.pos === s2 && this.skip(n2);
        }
        return e2;
      }, readMessage: function(t2, e2) {
        return this.readFields(t2, e2, this.readVarint() + this.pos);
      }, readFixed32: function() {
        var t2 = Su(this.buf, this.pos);
        return this.pos += 4, t2;
      }, readSFixed32: function() {
        var t2 = Mu(this.buf, this.pos);
        return this.pos += 4, t2;
      }, readFixed64: function() {
        var t2 = Su(this.buf, this.pos) + Su(this.buf, this.pos + 4) * uu;
        return this.pos += 8, t2;
      }, readSFixed64: function() {
        var t2 = Su(this.buf, this.pos) + Mu(this.buf, this.pos + 4) * uu;
        return this.pos += 8, t2;
      }, readFloat: function() {
        var t2 = au(this.buf, this.pos, true, 23, 4);
        return this.pos += 4, t2;
      }, readDouble: function() {
        var t2 = au(this.buf, this.pos, true, 52, 8);
        return this.pos += 8, t2;
      }, readVarint: function(t2) {
        var e2, r2, n2 = this.buf;
        return e2 = 127 & (r2 = n2[this.pos++]), r2 < 128 ? e2 : (e2 |= (127 & (r2 = n2[this.pos++])) << 7, r2 < 128 ? e2 : (e2 |= (127 & (r2 = n2[this.pos++])) << 14, r2 < 128 ? e2 : (e2 |= (127 & (r2 = n2[this.pos++])) << 21, r2 < 128 ? e2 : function(t3, e3, r3) {
          var n3, i2, s2 = r3.buf;
          if (n3 = (112 & (i2 = s2[r3.pos++])) >> 4, i2 < 128) return fu(t3, n3, e3);
          if (n3 |= (127 & (i2 = s2[r3.pos++])) << 3, i2 < 128) return fu(t3, n3, e3);
          if (n3 |= (127 & (i2 = s2[r3.pos++])) << 10, i2 < 128) return fu(t3, n3, e3);
          if (n3 |= (127 & (i2 = s2[r3.pos++])) << 17, i2 < 128) return fu(t3, n3, e3);
          if (n3 |= (127 & (i2 = s2[r3.pos++])) << 24, i2 < 128) return fu(t3, n3, e3);
          if (n3 |= (1 & (i2 = s2[r3.pos++])) << 31, i2 < 128) return fu(t3, n3, e3);
          throw new Error("Expected varint not more than 10 bytes");
        }(e2 |= (15 & (r2 = n2[this.pos])) << 28, t2, this))));
      }, readVarint64: function() {
        return this.readVarint(true);
      }, readSVarint: function() {
        var t2 = this.readVarint();
        return t2 % 2 == 1 ? (t2 + 1) / -2 : t2 / 2;
      }, readBoolean: function() {
        return Boolean(this.readVarint());
      }, readString: function() {
        var t2 = this.readVarint() + this.pos, e2 = this.pos;
        return this.pos = t2, t2 - e2 >= 12 && hu ? function(t3, e3, r2) {
          return hu.decode(t3.subarray(e3, r2));
        }(this.buf, e2, t2) : function(t3, e3, r2) {
          for (var n2 = "", i2 = e3; i2 < r2; ) {
            var s2, a2, o2, l2 = t3[i2], u3 = null, c2 = l2 > 239 ? 4 : l2 > 223 ? 3 : l2 > 191 ? 2 : 1;
            if (i2 + c2 > r2) break;
            1 === c2 ? l2 < 128 && (u3 = l2) : 2 === c2 ? 128 == (192 & (s2 = t3[i2 + 1])) && (u3 = (31 & l2) << 6 | 63 & s2) <= 127 && (u3 = null) : 3 === c2 ? (a2 = t3[i2 + 2], 128 == (192 & (s2 = t3[i2 + 1])) && 128 == (192 & a2) && ((u3 = (15 & l2) << 12 | (63 & s2) << 6 | 63 & a2) <= 2047 || u3 >= 55296 && u3 <= 57343) && (u3 = null)) : 4 === c2 && (a2 = t3[i2 + 2], o2 = t3[i2 + 3], 128 == (192 & (s2 = t3[i2 + 1])) && 128 == (192 & a2) && 128 == (192 & o2) && ((u3 = (15 & l2) << 18 | (63 & s2) << 12 | (63 & a2) << 6 | 63 & o2) <= 65535 || u3 >= 1114112) && (u3 = null)), null === u3 ? (u3 = 65533, c2 = 1) : u3 > 65535 && (u3 -= 65536, n2 += String.fromCharCode(u3 >>> 10 & 1023 | 55296), u3 = 56320 | 1023 & u3), n2 += String.fromCharCode(u3), i2 += c2;
          }
          return n2;
        }(this.buf, e2, t2);
      }, readBytes: function() {
        var t2 = this.readVarint() + this.pos, e2 = this.buf.subarray(this.pos, t2);
        return this.pos = t2, e2;
      }, readPackedVarint: function(t2, e2) {
        if (this.type !== lu.Bytes) return t2.push(this.readVarint(e2));
        var r2 = pu(this);
        for (t2 = t2 || []; this.pos < r2; ) t2.push(this.readVarint(e2));
        return t2;
      }, readPackedSVarint: function(t2) {
        if (this.type !== lu.Bytes) return t2.push(this.readSVarint());
        var e2 = pu(this);
        for (t2 = t2 || []; this.pos < e2; ) t2.push(this.readSVarint());
        return t2;
      }, readPackedBoolean: function(t2) {
        if (this.type !== lu.Bytes) return t2.push(this.readBoolean());
        var e2 = pu(this);
        for (t2 = t2 || []; this.pos < e2; ) t2.push(this.readBoolean());
        return t2;
      }, readPackedFloat: function(t2) {
        if (this.type !== lu.Bytes) return t2.push(this.readFloat());
        var e2 = pu(this);
        for (t2 = t2 || []; this.pos < e2; ) t2.push(this.readFloat());
        return t2;
      }, readPackedDouble: function(t2) {
        if (this.type !== lu.Bytes) return t2.push(this.readDouble());
        var e2 = pu(this);
        for (t2 = t2 || []; this.pos < e2; ) t2.push(this.readDouble());
        return t2;
      }, readPackedFixed32: function(t2) {
        if (this.type !== lu.Bytes) return t2.push(this.readFixed32());
        var e2 = pu(this);
        for (t2 = t2 || []; this.pos < e2; ) t2.push(this.readFixed32());
        return t2;
      }, readPackedSFixed32: function(t2) {
        if (this.type !== lu.Bytes) return t2.push(this.readSFixed32());
        var e2 = pu(this);
        for (t2 = t2 || []; this.pos < e2; ) t2.push(this.readSFixed32());
        return t2;
      }, readPackedFixed64: function(t2) {
        if (this.type !== lu.Bytes) return t2.push(this.readFixed64());
        var e2 = pu(this);
        for (t2 = t2 || []; this.pos < e2; ) t2.push(this.readFixed64());
        return t2;
      }, readPackedSFixed64: function(t2) {
        if (this.type !== lu.Bytes) return t2.push(this.readSFixed64());
        var e2 = pu(this);
        for (t2 = t2 || []; this.pos < e2; ) t2.push(this.readSFixed64());
        return t2;
      }, skip: function(t2) {
        var e2 = 7 & t2;
        if (e2 === lu.Varint) for (; this.buf[this.pos++] > 127; ) ;
        else if (e2 === lu.Bytes) this.pos = this.readVarint() + this.pos;
        else if (e2 === lu.Fixed32) this.pos += 4;
        else {
          if (e2 !== lu.Fixed64) throw new Error("Unimplemented type: " + e2);
          this.pos += 8;
        }
      }, writeTag: function(t2, e2) {
        this.writeVarint(t2 << 3 | e2);
      }, realloc: function(t2) {
        for (var e2 = this.length || 16; e2 < this.pos + t2; ) e2 *= 2;
        if (e2 !== this.length) {
          var r2 = new Uint8Array(e2);
          r2.set(this.buf), this.buf = r2, this.length = e2;
        }
      }, finish: function() {
        return this.length = this.pos, this.pos = 0, this.buf.subarray(0, this.length);
      }, writeFixed32: function(t2) {
        this.realloc(4), ku(this.buf, t2, this.pos), this.pos += 4;
      }, writeSFixed32: function(t2) {
        this.realloc(4), ku(this.buf, t2, this.pos), this.pos += 4;
      }, writeFixed64: function(t2) {
        this.realloc(8), ku(this.buf, -1 & t2, this.pos), ku(this.buf, Math.floor(t2 * cu), this.pos + 4), this.pos += 8;
      }, writeSFixed64: function(t2) {
        this.realloc(8), ku(this.buf, -1 & t2, this.pos), ku(this.buf, Math.floor(t2 * cu), this.pos + 4), this.pos += 8;
      }, writeVarint: function(t2) {
        (t2 = +t2 || 0) > 268435455 || t2 < 0 ? function(t3, e2) {
          var r2, n2;
          if (t3 >= 0 ? (r2 = t3 % 4294967296 | 0, n2 = t3 / 4294967296 | 0) : (n2 = ~(-t3 / 4294967296), 4294967295 ^ (r2 = ~(-t3 % 4294967296)) ? r2 = r2 + 1 | 0 : (r2 = 0, n2 = n2 + 1 | 0)), t3 >= 18446744073709552e3 || t3 < -18446744073709552e3) throw new Error("Given varint doesn't fit into 10 bytes");
          e2.realloc(10), function(t4, e3, r3) {
            r3.buf[r3.pos++] = 127 & t4 | 128, t4 >>>= 7, r3.buf[r3.pos++] = 127 & t4 | 128, t4 >>>= 7, r3.buf[r3.pos++] = 127 & t4 | 128, t4 >>>= 7, r3.buf[r3.pos++] = 127 & t4 | 128, r3.buf[r3.pos] = 127 & (t4 >>>= 7);
          }(r2, 0, e2), function(t4, e3) {
            var r3 = (7 & t4) << 4;
            e3.buf[e3.pos++] |= r3 | ((t4 >>>= 3) ? 128 : 0), t4 && (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), t4 && (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), t4 && (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), t4 && (e3.buf[e3.pos++] = 127 & t4 | ((t4 >>>= 7) ? 128 : 0), t4 && (e3.buf[e3.pos++] = 127 & t4)))));
          }(n2, e2);
        }(t2, this) : (this.realloc(4), this.buf[this.pos++] = 127 & t2 | (t2 > 127 ? 128 : 0), t2 <= 127 || (this.buf[this.pos++] = 127 & (t2 >>>= 7) | (t2 > 127 ? 128 : 0), t2 <= 127 || (this.buf[this.pos++] = 127 & (t2 >>>= 7) | (t2 > 127 ? 128 : 0), t2 <= 127 || (this.buf[this.pos++] = t2 >>> 7 & 127))));
      }, writeSVarint: function(t2) {
        this.writeVarint(t2 < 0 ? 2 * -t2 - 1 : 2 * t2);
      }, writeBoolean: function(t2) {
        this.writeVarint(Boolean(t2));
      }, writeString: function(t2) {
        t2 = String(t2), this.realloc(4 * t2.length), this.pos++;
        var e2 = this.pos;
        this.pos = function(t3, e3, r3) {
          for (var n2, i2, s2 = 0; s2 < e3.length; s2++) {
            if ((n2 = e3.charCodeAt(s2)) > 55295 && n2 < 57344) {
              if (!i2) {
                n2 > 56319 || s2 + 1 === e3.length ? (t3[r3++] = 239, t3[r3++] = 191, t3[r3++] = 189) : i2 = n2;
                continue;
              }
              if (n2 < 56320) {
                t3[r3++] = 239, t3[r3++] = 191, t3[r3++] = 189, i2 = n2;
                continue;
              }
              n2 = i2 - 55296 << 10 | n2 - 56320 | 65536, i2 = null;
            } else i2 && (t3[r3++] = 239, t3[r3++] = 191, t3[r3++] = 189, i2 = null);
            n2 < 128 ? t3[r3++] = n2 : (n2 < 2048 ? t3[r3++] = n2 >> 6 | 192 : (n2 < 65536 ? t3[r3++] = n2 >> 12 | 224 : (t3[r3++] = n2 >> 18 | 240, t3[r3++] = n2 >> 12 & 63 | 128), t3[r3++] = n2 >> 6 & 63 | 128), t3[r3++] = 63 & n2 | 128);
          }
          return r3;
        }(this.buf, t2, this.pos);
        var r2 = this.pos - e2;
        r2 >= 128 && du(e2, r2, this), this.pos = e2 - 1, this.writeVarint(r2), this.pos += r2;
      }, writeFloat: function(t2) {
        this.realloc(4), ou(this.buf, t2, this.pos, true, 23, 4), this.pos += 4;
      }, writeDouble: function(t2) {
        this.realloc(8), ou(this.buf, t2, this.pos, true, 52, 8), this.pos += 8;
      }, writeBytes: function(t2) {
        var e2 = t2.length;
        this.writeVarint(e2), this.realloc(e2);
        for (var r2 = 0; r2 < e2; r2++) this.buf[this.pos++] = t2[r2];
      }, writeRawMessage: function(t2, e2) {
        this.pos++;
        var r2 = this.pos;
        t2(e2, this);
        var n2 = this.pos - r2;
        n2 >= 128 && du(r2, n2, this), this.pos = r2 - 1, this.writeVarint(n2), this.pos += n2;
      }, writeMessage: function(t2, e2, r2) {
        this.writeTag(t2, lu.Bytes), this.writeRawMessage(e2, r2);
      }, writePackedVarint: function(t2, e2) {
        e2.length && this.writeMessage(t2, yu, e2);
      }, writePackedSVarint: function(t2, e2) {
        e2.length && this.writeMessage(t2, mu, e2);
      }, writePackedBoolean: function(t2, e2) {
        e2.length && this.writeMessage(t2, vu, e2);
      }, writePackedFloat: function(t2, e2) {
        e2.length && this.writeMessage(t2, gu, e2);
      }, writePackedDouble: function(t2, e2) {
        e2.length && this.writeMessage(t2, xu, e2);
      }, writePackedFixed32: function(t2, e2) {
        e2.length && this.writeMessage(t2, bu, e2);
      }, writePackedSFixed32: function(t2, e2) {
        e2.length && this.writeMessage(t2, wu, e2);
      }, writePackedFixed64: function(t2, e2) {
        e2.length && this.writeMessage(t2, _u, e2);
      }, writePackedSFixed64: function(t2, e2) {
        e2.length && this.writeMessage(t2, Au, e2);
      }, writeBytesField: function(t2, e2) {
        this.writeTag(t2, lu.Bytes), this.writeBytes(e2);
      }, writeFixed32Field: function(t2, e2) {
        this.writeTag(t2, lu.Fixed32), this.writeFixed32(e2);
      }, writeSFixed32Field: function(t2, e2) {
        this.writeTag(t2, lu.Fixed32), this.writeSFixed32(e2);
      }, writeFixed64Field: function(t2, e2) {
        this.writeTag(t2, lu.Fixed64), this.writeFixed64(e2);
      }, writeSFixed64Field: function(t2, e2) {
        this.writeTag(t2, lu.Fixed64), this.writeSFixed64(e2);
      }, writeVarintField: function(t2, e2) {
        this.writeTag(t2, lu.Varint), this.writeVarint(e2);
      }, writeSVarintField: function(t2, e2) {
        this.writeTag(t2, lu.Varint), this.writeSVarint(e2);
      }, writeStringField: function(t2, e2) {
        this.writeTag(t2, lu.Bytes), this.writeString(e2);
      }, writeFloatField: function(t2, e2) {
        this.writeTag(t2, lu.Fixed32), this.writeFloat(e2);
      }, writeDoubleField: function(t2, e2) {
        this.writeTag(t2, lu.Fixed64), this.writeDouble(e2);
      }, writeBooleanField: function(t2, e2) {
        this.writeVarintField(t2, Boolean(e2));
      } };
      var Iu = r(su);
      const zu = 3;
      function Pu(t2, e2, r2) {
        1 === t2 && r2.readMessage(Cu, e2);
      }
      function Cu(t2, e2, r2) {
        if (3 === t2) {
          const { id: t3, bitmap: n2, width: i2, height: s2, left: a2, top: o2, advance: l2 } = r2.readMessage(Bu, {});
          e2.push({ id: t3, bitmap: new _o({ width: i2 + 2 * zu, height: s2 + 2 * zu }, n2), metrics: { width: i2, height: s2, left: a2, top: o2, advance: l2 } });
        }
      }
      function Bu(t2, e2, r2) {
        1 === t2 ? e2.id = r2.readVarint() : 2 === t2 ? e2.bitmap = r2.readBytes() : 3 === t2 ? e2.width = r2.readVarint() : 4 === t2 ? e2.height = r2.readVarint() : 5 === t2 ? e2.left = r2.readSVarint() : 6 === t2 ? e2.top = r2.readSVarint() : 7 === t2 && (e2.advance = r2.readVarint());
      }
      const Vu = zu;
      function Eu(t2) {
        let e2 = 0, r2 = 0;
        for (const n3 of t2) e2 += n3.w * n3.h, r2 = Math.max(r2, n3.w);
        t2.sort((t3, e3) => e3.h - t3.h);
        const n2 = [{ x: 0, y: 0, w: Math.max(Math.ceil(Math.sqrt(e2 / 0.95)), r2), h: 1 / 0 }];
        let i2 = 0, s2 = 0;
        for (const e3 of t2) for (let t3 = n2.length - 1; t3 >= 0; t3--) {
          const r3 = n2[t3];
          if (!(e3.w > r3.w || e3.h > r3.h)) {
            if (e3.x = r3.x, e3.y = r3.y, s2 = Math.max(s2, e3.y + e3.h), i2 = Math.max(i2, e3.x + e3.w), e3.w === r3.w && e3.h === r3.h) {
              const e4 = n2.pop();
              t3 < n2.length && (n2[t3] = e4);
            } else e3.h === r3.h ? (r3.x += e3.w, r3.w -= e3.w) : e3.w === r3.w ? (r3.y += e3.h, r3.h -= e3.h) : (n2.push({ x: r3.x + e3.w, y: r3.y, w: r3.w - e3.w, h: e3.h }), r3.y += e3.h, r3.h -= e3.h);
            break;
          }
        }
        return { w: i2, h: s2, fill: e2 / (i2 * s2) || 0 };
      }
      const Fu = 1;
      class Tu {
        constructor(t2, { pixelRatio: e2, version: r2, stretchX: n2, stretchY: i2, content: s2, textFitWidth: a2, textFitHeight: o2 }) {
          this.paddedRect = t2, this.pixelRatio = e2, this.stretchX = n2, this.stretchY = i2, this.content = s2, this.version = r2, this.textFitWidth = a2, this.textFitHeight = o2;
        }
        get tl() {
          return [this.paddedRect.x + Fu, this.paddedRect.y + Fu];
        }
        get br() {
          return [this.paddedRect.x + this.paddedRect.w - Fu, this.paddedRect.y + this.paddedRect.h - Fu];
        }
        get tlbr() {
          return this.tl.concat(this.br);
        }
        get displaySize() {
          return [(this.paddedRect.w - 2 * Fu) / this.pixelRatio, (this.paddedRect.h - 2 * Fu) / this.pixelRatio];
        }
      }
      class $u {
        constructor(t2, e2) {
          const r2 = {}, n2 = {};
          this.haveRenderCallbacks = [];
          const i2 = [];
          this.addImages(t2, r2, i2), this.addImages(e2, n2, i2);
          const { w: s2, h: a2 } = Eu(i2), o2 = new Ao({ width: s2 || 1, height: a2 || 1 });
          for (const e3 in t2) {
            const n3 = t2[e3], i3 = r2[e3].paddedRect;
            Ao.copy(n3.data, o2, { x: 0, y: 0 }, { x: i3.x + Fu, y: i3.y + Fu }, n3.data);
          }
          for (const t3 in e2) {
            const r3 = e2[t3], i3 = n2[t3].paddedRect, s3 = i3.x + Fu, a3 = i3.y + Fu, l2 = r3.data.width, u3 = r3.data.height;
            Ao.copy(r3.data, o2, { x: 0, y: 0 }, { x: s3, y: a3 }, r3.data), Ao.copy(r3.data, o2, { x: 0, y: u3 - 1 }, { x: s3, y: a3 - 1 }, { width: l2, height: 1 }), Ao.copy(r3.data, o2, { x: 0, y: 0 }, { x: s3, y: a3 + u3 }, { width: l2, height: 1 }), Ao.copy(r3.data, o2, { x: l2 - 1, y: 0 }, { x: s3 - 1, y: a3 }, { width: 1, height: u3 }), Ao.copy(r3.data, o2, { x: 0, y: 0 }, { x: s3 + l2, y: a3 }, { width: 1, height: u3 });
          }
          this.image = o2, this.iconPositions = r2, this.patternPositions = n2;
        }
        addImages(t2, e2, r2) {
          for (const n2 in t2) {
            const i2 = t2[n2], s2 = { x: 0, y: 0, w: i2.data.width + 2 * Fu, h: i2.data.height + 2 * Fu };
            r2.push(s2), e2[n2] = new Tu(s2, i2), i2.hasRenderCallback && this.haveRenderCallbacks.push(n2);
          }
        }
        patchUpdatedImages(t2, e2) {
          t2.dispatchRenderCallbacks(this.haveRenderCallbacks);
          for (const r2 in t2.updatedImages) this.patchUpdatedImage(this.iconPositions[r2], t2.getImage(r2), e2), this.patchUpdatedImage(this.patternPositions[r2], t2.getImage(r2), e2);
        }
        patchUpdatedImage(t2, e2, r2) {
          if (!t2 || !e2) return;
          if (t2.version === e2.version) return;
          t2.version = e2.version;
          const [n2, i2] = t2.tl;
          r2.update(e2.data, void 0, { x: n2, y: i2 });
        }
      }
      var Lu;
      wi("ImagePosition", Tu), wi("ImageAtlas", $u), t.ah = void 0, (Lu = t.ah || (t.ah = {}))[Lu.none = 0] = "none", Lu[Lu.horizontal = 1] = "horizontal", Lu[Lu.vertical = 2] = "vertical", Lu[Lu.horizontalOnly = 3] = "horizontalOnly";
      const Du = -17;
      class Ou {
        constructor() {
          this.scale = 1, this.fontStack = "", this.imageName = null;
        }
        static forText(t2, e2) {
          const r2 = new Ou();
          return r2.scale = t2 || 1, r2.fontStack = e2, r2;
        }
        static forImage(t2) {
          const e2 = new Ou();
          return e2.imageName = t2, e2;
        }
      }
      class ju {
        constructor() {
          this.text = "", this.sectionIndex = [], this.sections = [], this.imageSectionID = null;
        }
        static fromFeature(t2, e2) {
          const r2 = new ju();
          for (let n2 = 0; n2 < t2.sections.length; n2++) {
            const i2 = t2.sections[n2];
            i2.image ? r2.addImageSection(i2) : r2.addTextSection(i2, e2);
          }
          return r2;
        }
        length() {
          return this.text.length;
        }
        getSection(t2) {
          return this.sections[this.sectionIndex[t2]];
        }
        getSectionIndex(t2) {
          return this.sectionIndex[t2];
        }
        getCharCode(t2) {
          return this.text.charCodeAt(t2);
        }
        verticalizePunctuation() {
          this.text = function(t2) {
            let e2 = "";
            for (let r2 = 0; r2 < t2.length; r2++) {
              const n2 = t2.charCodeAt(r2 + 1) || null, i2 = t2.charCodeAt(r2 - 1) || null;
              e2 += n2 && $i(n2) && !nu[t2[r2 + 1]] || i2 && $i(i2) && !nu[t2[r2 - 1]] || !nu[t2[r2]] ? t2[r2] : nu[t2[r2]];
            }
            return e2;
          }(this.text);
        }
        trim() {
          let t2 = 0;
          for (let e3 = 0; e3 < this.text.length && Uu[this.text.charCodeAt(e3)]; e3++) t2++;
          let e2 = this.text.length;
          for (let r2 = this.text.length - 1; r2 >= 0 && r2 >= t2 && Uu[this.text.charCodeAt(r2)]; r2--) e2--;
          this.text = this.text.substring(t2, e2), this.sectionIndex = this.sectionIndex.slice(t2, e2);
        }
        substring(t2, e2) {
          const r2 = new ju();
          return r2.text = this.text.substring(t2, e2), r2.sectionIndex = this.sectionIndex.slice(t2, e2), r2.sections = this.sections, r2;
        }
        toString() {
          return this.text;
        }
        getMaxScale() {
          return this.sectionIndex.reduce((t2, e2) => Math.max(t2, this.sections[e2].scale), 0);
        }
        addTextSection(t2, e2) {
          this.text += t2.text, this.sections.push(Ou.forText(t2.scale, t2.fontStack || e2));
          const r2 = this.sections.length - 1;
          for (let e3 = 0; e3 < t2.text.length; ++e3) this.sectionIndex.push(r2);
        }
        addImageSection(t2) {
          const e2 = t2.image ? t2.image.name : "";
          if (0 === e2.length) return void A("Can't add FormattedSection with an empty image.");
          const r2 = this.getNextImageSectionCharCode();
          r2 ? (this.text += String.fromCharCode(r2), this.sections.push(Ou.forImage(e2)), this.sectionIndex.push(this.sections.length - 1)) : A("Reached maximum number of images 6401");
        }
        getNextImageSectionCharCode() {
          return this.imageSectionID ? this.imageSectionID >= 63743 ? null : ++this.imageSectionID : (this.imageSectionID = 57344, this.imageSectionID);
        }
      }
      function Ru(e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2, p3, f2, d2, y2) {
        const m2 = ju.fromFeature(e2, s2);
        let g2;
        p3 === t.ah.vertical && m2.verticalizePunctuation();
        const { processBidirectionalText: x2, processStyledBidirectionalText: v2 } = Ri;
        if (x2 && 1 === m2.sections.length) {
          g2 = [];
          const t2 = x2(m2.toString(), Yu(m2, c2, a2, r2, i2, d2));
          for (const e3 of t2) {
            const t3 = new ju();
            t3.text = e3, t3.sections = m2.sections;
            for (let r3 = 0; r3 < e3.length; r3++) t3.sectionIndex.push(0);
            g2.push(t3);
          }
        } else if (v2) {
          g2 = [];
          const t2 = v2(m2.text, m2.sectionIndex, Yu(m2, c2, a2, r2, i2, d2));
          for (const e3 of t2) {
            const t3 = new ju();
            t3.text = e3[0], t3.sectionIndex = e3[1], t3.sections = m2.sections, g2.push(t3);
          }
        } else g2 = function(t2, e3) {
          const r3 = [], n3 = t2.text;
          let i3 = 0;
          for (const n4 of e3) r3.push(t2.substring(i3, n4)), i3 = n4;
          return i3 < n3.length && r3.push(t2.substring(i3, n3.length)), r3;
        }(m2, Yu(m2, c2, a2, r2, i2, d2));
        const b2 = [], w3 = { positionedLines: b2, text: m2.toString(), top: h2[1], bottom: h2[1], left: h2[0], right: h2[0], writingMode: p3, iconsInText: false, verticalizable: false };
        return function(e3, r3, n3, i3, s3, a3, o3, l3, u4, c3, h3, p4) {
          let f3 = 0, d3 = Du, y3 = 0, m3 = 0;
          const g3 = "right" === l3 ? 1 : "left" === l3 ? 0 : 0.5;
          let x3 = 0;
          for (const o4 of s3) {
            o4.trim();
            const s4 = o4.getMaxScale(), l4 = (s4 - 1) * iu, b4 = { positionedGlyphs: [], lineOffset: 0 };
            e3.positionedLines[x3] = b4;
            const w5 = b4.positionedGlyphs;
            let _3 = 0;
            if (!o4.length()) {
              d3 += a3, ++x3;
              continue;
            }
            for (let a4 = 0; a4 < o4.length(); a4++) {
              const y4 = o4.getSection(a4), m4 = o4.getSectionIndex(a4), g4 = o4.getCharCode(a4);
              let x4 = 0, b5 = null, A3 = null, S2 = null, k2 = iu;
              const M2 = !(u4 === t.ah.horizontal || !h3 && !Ti(g4) || h3 && (Uu[g4] || (v3 = g4, new RegExp("\\p{sc=Arab}", "u").test(String.fromCodePoint(v3)))));
              if (y4.imageName) {
                const t2 = i3[y4.imageName];
                if (!t2) continue;
                S2 = y4.imageName, e3.iconsInText = e3.iconsInText || true, A3 = t2.paddedRect;
                const r4 = t2.displaySize;
                y4.scale = y4.scale * iu / p4, b5 = { width: r4[0], height: r4[1], left: Fu, top: -Vu, advance: M2 ? r4[1] : r4[0] }, x4 = l4 + (iu - r4[1] * y4.scale), k2 = b5.advance;
                const n4 = M2 ? r4[0] * y4.scale - iu * s4 : r4[1] * y4.scale - iu * s4;
                n4 > 0 && n4 > _3 && (_3 = n4);
              } else {
                const t2 = n3[y4.fontStack], e4 = t2 && t2[g4];
                if (e4 && e4.rect) A3 = e4.rect, b5 = e4.metrics;
                else {
                  const t3 = r3[y4.fontStack], e5 = t3 && t3[g4];
                  if (!e5) continue;
                  b5 = e5.metrics;
                }
                x4 = (s4 - y4.scale) * iu;
              }
              M2 ? (e3.verticalizable = true, w5.push({ glyph: g4, imageName: S2, x: f3, y: d3 + x4, vertical: M2, scale: y4.scale, fontStack: y4.fontStack, sectionIndex: m4, metrics: b5, rect: A3 }), f3 += k2 * y4.scale + c3) : (w5.push({ glyph: g4, imageName: S2, x: f3, y: d3 + x4, vertical: M2, scale: y4.scale, fontStack: y4.fontStack, sectionIndex: m4, metrics: b5, rect: A3 }), f3 += b5.advance * y4.scale + c3);
            }
            0 !== w5.length && (y3 = Math.max(f3 - c3, y3), Wu(w5, 0, w5.length - 1, g3, _3)), f3 = 0;
            const A2 = a3 * s4 + _3;
            b4.lineOffset = Math.max(_3, l4), d3 += A2, m3 = Math.max(A2, m3), ++x3;
          }
          var v3;
          const b3 = d3 - Du, { horizontalAlign: w4, verticalAlign: _2 } = Ju(o3);
          (function(t2, e4, r4, n4, i4, s4, a4, o4, l4) {
            const u5 = (e4 - r4) * i4;
            let c4 = 0;
            c4 = s4 !== a4 ? -o4 * n4 - Du : (-n4 * l4 + 0.5) * a4;
            for (const e5 of t2) for (const t3 of e5.positionedGlyphs) t3.x += u5, t3.y += c4;
          })(e3.positionedLines, g3, w4, _2, y3, m3, a3, b3, s3.length), e3.top += -_2 * b3, e3.bottom = e3.top + b3, e3.left += -w4 * y3, e3.right = e3.left + y3;
        }(w3, r2, n2, i2, g2, o2, l2, u3, p3, c2, f2, y2), !function(t2) {
          for (const e3 of t2) if (0 !== e3.positionedGlyphs.length) return false;
          return true;
        }(b2) && w3;
      }
      const Uu = { 9: true, 10: true, 11: true, 12: true, 13: true, 32: true }, qu = { 10: true, 32: true, 38: true, 41: true, 43: true, 45: true, 47: true, 173: true, 183: true, 8203: true, 8208: true, 8211: true, 8231: true }, Nu = { 40: true };
      function Zu(t2, e2, r2, n2, i2, s2) {
        if (e2.imageName) {
          const t3 = n2[e2.imageName];
          return t3 ? t3.displaySize[0] * e2.scale * iu / s2 + i2 : 0;
        }
        {
          const n3 = r2[e2.fontStack], s3 = n3 && n3[t2];
          return s3 ? s3.metrics.advance * e2.scale + i2 : 0;
        }
      }
      function Gu(t2, e2, r2, n2) {
        const i2 = Math.pow(t2 - e2, 2);
        return n2 ? t2 < e2 ? i2 / 2 : 2 * i2 : i2 + Math.abs(r2) * r2;
      }
      function Ku(t2, e2, r2) {
        let n2 = 0;
        return 10 === t2 && (n2 -= 1e4), r2 && (n2 += 150), 40 !== t2 && 65288 !== t2 || (n2 += 50), 41 !== e2 && 65289 !== e2 || (n2 += 50), n2;
      }
      function Xu(t2, e2, r2, n2, i2, s2) {
        let a2 = null, o2 = Gu(e2, r2, i2, s2);
        for (const t3 of n2) {
          const n3 = Gu(e2 - t3.x, r2, i2, s2) + t3.badness;
          n3 <= o2 && (a2 = t3, o2 = n3);
        }
        return { index: t2, x: e2, priorBreak: a2, badness: o2 };
      }
      function Hu(t2) {
        return t2 ? Hu(t2.priorBreak).concat(t2.index) : [];
      }
      function Yu(t2, e2, r2, n2, i2, s2) {
        if (!t2) return [];
        const a2 = [], o2 = function(t3, e3, r3, n3, i3, s3) {
          let a3 = 0;
          for (let r4 = 0; r4 < t3.length(); r4++) {
            const o3 = t3.getSection(r4);
            a3 += Zu(t3.getCharCode(r4), o3, n3, i3, e3, s3);
          }
          return a3 / Math.max(1, Math.ceil(a3 / r3));
        }(t2, e2, r2, n2, i2, s2), l2 = t2.text.indexOf("â€‹") >= 0;
        let u3 = 0;
        for (let r3 = 0; r3 < t2.length(); r3++) {
          const h2 = t2.getSection(r3), p3 = t2.getCharCode(r3);
          if (Uu[p3] || (u3 += Zu(p3, h2, n2, i2, e2, s2)), r3 < t2.length() - 1) {
            const e3 = !((c2 = p3) < 11904) && (!!zi["CJK Compatibility Forms"](c2) || !!zi["CJK Compatibility"](c2) || !!zi["CJK Strokes"](c2) || !!zi["CJK Symbols and Punctuation"](c2) || !!zi["Enclosed CJK Letters and Months"](c2) || !!zi["Halfwidth and Fullwidth Forms"](c2) || !!zi["Ideographic Description Characters"](c2) || !!zi["Vertical Forms"](c2) || Fi.test(String.fromCodePoint(c2)));
            (qu[p3] || e3 || h2.imageName || r3 !== t2.length() - 2 && Nu[t2.getCharCode(r3 + 1)]) && a2.push(Xu(r3 + 1, u3, o2, a2, Ku(p3, t2.getCharCode(r3 + 1), e3 && l2), false));
          }
        }
        var c2;
        return Hu(Xu(t2.length(), u3, o2, a2, 0, true));
      }
      function Ju(t2) {
        let e2 = 0.5, r2 = 0.5;
        switch (t2) {
          case "right":
          case "top-right":
          case "bottom-right":
            e2 = 1;
            break;
          case "left":
          case "top-left":
          case "bottom-left":
            e2 = 0;
        }
        switch (t2) {
          case "bottom":
          case "bottom-right":
          case "bottom-left":
            r2 = 1;
            break;
          case "top":
          case "top-right":
          case "top-left":
            r2 = 0;
        }
        return { horizontalAlign: e2, verticalAlign: r2 };
      }
      function Wu(t2, e2, r2, n2, i2) {
        if (!n2 && !i2) return;
        const s2 = t2[r2], a2 = (t2[r2].x + s2.metrics.advance * s2.scale) * n2;
        for (let n3 = e2; n3 <= r2; n3++) t2[n3].x -= a2, t2[n3].y += i2;
      }
      function Qu(t2, e2, r2) {
        const { horizontalAlign: n2, verticalAlign: i2 } = Ju(r2), s2 = e2[0] - t2.displaySize[0] * n2, a2 = e2[1] - t2.displaySize[1] * i2;
        return { image: t2, top: a2, bottom: a2 + t2.displaySize[1], left: s2, right: s2 + t2.displaySize[0] };
      }
      function tc(t2) {
        var e2, r2;
        let n2 = t2.left, i2 = t2.top, s2 = t2.right - n2, a2 = t2.bottom - i2;
        const o2 = null !== (e2 = t2.image.textFitWidth) && void 0 !== e2 ? e2 : "stretchOrShrink", l2 = null !== (r2 = t2.image.textFitHeight) && void 0 !== r2 ? r2 : "stretchOrShrink", u3 = (t2.image.content[2] - t2.image.content[0]) / (t2.image.content[3] - t2.image.content[1]);
        if ("proportional" === l2) {
          if ("stretchOnly" === o2 && s2 / a2 < u3 || "proportional" === o2) {
            const t3 = Math.ceil(a2 * u3);
            n2 *= t3 / s2, s2 = t3;
          }
        } else if ("proportional" === o2 && "stretchOnly" === l2 && 0 !== u3 && s2 / a2 > u3) {
          const t3 = Math.ceil(s2 / u3);
          i2 *= t3 / a2, a2 = t3;
        }
        return { x1: n2, y1: i2, x2: n2 + s2, y2: i2 + a2 };
      }
      function ec(t2, e2, r2, n2, i2, s2) {
        const a2 = t2.image;
        let o2;
        if (a2.content) {
          const t3 = a2.content, e3 = a2.pixelRatio || 1;
          o2 = [t3[0] / e3, t3[1] / e3, a2.displaySize[0] - t3[2] / e3, a2.displaySize[1] - t3[3] / e3];
        }
        const l2 = e2.left * s2, u3 = e2.right * s2;
        let c2, h2, p3, f2;
        "width" === r2 || "both" === r2 ? (f2 = i2[0] + l2 - n2[3], h2 = i2[0] + u3 + n2[1]) : (f2 = i2[0] + (l2 + u3 - a2.displaySize[0]) / 2, h2 = f2 + a2.displaySize[0]);
        const d2 = e2.top * s2, y2 = e2.bottom * s2;
        return "height" === r2 || "both" === r2 ? (c2 = i2[1] + d2 - n2[0], p3 = i2[1] + y2 + n2[2]) : (c2 = i2[1] + (d2 + y2 - a2.displaySize[1]) / 2, p3 = c2 + a2.displaySize[1]), { image: a2, top: c2, right: h2, bottom: p3, left: f2, collisionPadding: o2 };
      }
      const rc = 255, nc = 128, ic = rc * nc;
      function sc(t2, e2) {
        const { expression: r2 } = e2;
        if ("constant" === r2.kind) return { kind: "constant", layoutSize: r2.evaluate(new Ui(t2 + 1)) };
        if ("source" === r2.kind) return { kind: "source" };
        {
          const { zoomStops: e3, interpolationType: n2 } = r2;
          let i2 = 0;
          for (; i2 < e3.length && e3[i2] <= t2; ) i2++;
          i2 = Math.max(0, i2 - 1);
          let s2 = i2;
          for (; s2 < e3.length && e3[s2] < t2 + 1; ) s2++;
          s2 = Math.min(e3.length - 1, s2);
          const a2 = e3[i2], o2 = e3[s2];
          return "composite" === r2.kind ? { kind: "composite", minZoom: a2, maxZoom: o2, interpolationType: n2 } : { kind: "camera", minZoom: a2, maxZoom: o2, minSize: r2.evaluate(new Ui(a2)), maxSize: r2.evaluate(new Ui(o2)), interpolationType: n2 };
        }
      }
      function ac(t2, e2, r2) {
        let n2 = "never";
        const i2 = t2.get(e2);
        return i2 ? n2 = i2 : t2.get(r2) && (n2 = "always"), n2;
      }
      const oc = fl.VectorTileFeature.types, lc = [{ name: "a_fade_opacity", components: 1, type: "Uint8", offset: 0 }];
      function uc(t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2, p3) {
        const f2 = o2 ? Math.min(ic, Math.round(o2[0])) : 0, d2 = o2 ? Math.min(ic, Math.round(o2[1])) : 0;
        t2.emplaceBack(e2, r2, Math.round(32 * n2), Math.round(32 * i2), s2, a2, (f2 << 1) + (l2 ? 1 : 0), d2, 16 * u3, 16 * c2, 256 * h2, 256 * p3);
      }
      function cc(t2, e2, r2) {
        t2.emplaceBack(e2.x, e2.y, r2), t2.emplaceBack(e2.x, e2.y, r2), t2.emplaceBack(e2.x, e2.y, r2), t2.emplaceBack(e2.x, e2.y, r2);
      }
      function hc(t2) {
        for (const e2 of t2.sections) if (ji(e2.text)) return true;
        return false;
      }
      class pc {
        constructor(t2) {
          this.layoutVertexArray = new Ws(), this.indexArray = new na(), this.programConfigurations = t2, this.segments = new oa(), this.dynamicLayoutVertexArray = new Qs(), this.opacityVertexArray = new ta(), this.hasVisibleVertices = false, this.placedSymbolArray = new $s();
        }
        isEmpty() {
          return 0 === this.layoutVertexArray.length && 0 === this.indexArray.length && 0 === this.dynamicLayoutVertexArray.length && 0 === this.opacityVertexArray.length;
        }
        upload(t2, e2, r2, n2) {
          this.isEmpty() || (r2 && (this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, Jl.members), this.indexBuffer = t2.createIndexBuffer(this.indexArray, e2), this.dynamicLayoutVertexBuffer = t2.createVertexBuffer(this.dynamicLayoutVertexArray, Wl.members, true), this.opacityVertexBuffer = t2.createVertexBuffer(this.opacityVertexArray, lc, true), this.opacityVertexBuffer.itemSize = 1), (r2 || n2) && this.programConfigurations.upload(t2));
        }
        destroy() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.dynamicLayoutVertexBuffer.destroy(), this.opacityVertexBuffer.destroy());
        }
      }
      wi("SymbolBuffers", pc);
      class fc {
        constructor(t2, e2, r2) {
          this.layoutVertexArray = new t2(), this.layoutAttributes = e2, this.indexArray = new r2(), this.segments = new oa(), this.collisionVertexArray = new ra();
        }
        upload(t2) {
          this.layoutVertexBuffer = t2.createVertexBuffer(this.layoutVertexArray, this.layoutAttributes), this.indexBuffer = t2.createIndexBuffer(this.indexArray), this.collisionVertexBuffer = t2.createVertexBuffer(this.collisionVertexArray, Ql.members, true);
        }
        destroy() {
          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.segments.destroy(), this.collisionVertexBuffer.destroy());
        }
      }
      wi("CollisionBuffers", fc);
      class dc {
        constructor(e2) {
          this.collisionBoxArray = e2.collisionBoxArray, this.zoom = e2.zoom, this.overscaling = e2.overscaling, this.layers = e2.layers, this.layerIds = this.layers.map((t2) => t2.id), this.index = e2.index, this.pixelRatio = e2.pixelRatio, this.sourceLayerIndex = e2.sourceLayerIndex, this.hasPattern = false, this.hasRTLText = false, this.sortKeyRanges = [], this.collisionCircleArray = [], this.placementInvProjMatrix = lo([]), this.placementViewportMatrix = lo([]);
          const r2 = this.layers[0]._unevaluatedLayout._values;
          this.textSizeData = sc(this.zoom, r2["text-size"]), this.iconSizeData = sc(this.zoom, r2["icon-size"]);
          const n2 = this.layers[0].layout, i2 = n2.get("symbol-sort-key"), s2 = n2.get("symbol-z-order");
          this.canOverlap = "never" !== ac(n2, "text-overlap", "text-allow-overlap") || "never" !== ac(n2, "icon-overlap", "icon-allow-overlap") || n2.get("text-ignore-placement") || n2.get("icon-ignore-placement"), this.sortFeaturesByKey = "viewport-y" !== s2 && !i2.isConstant(), this.sortFeaturesByY = ("viewport-y" === s2 || "auto" === s2 && !this.sortFeaturesByKey) && this.canOverlap, "point" === n2.get("symbol-placement") && (this.writingModes = n2.get("text-writing-mode").map((e3) => t.ah[e3])), this.stateDependentLayerIds = this.layers.filter((t2) => t2.isStateDependent()).map((t2) => t2.id), this.sourceID = e2.sourceID;
        }
        createArrays() {
          this.text = new pc(new Ea(this.layers, this.zoom, (t2) => /^text/.test(t2))), this.icon = new pc(new Ea(this.layers, this.zoom, (t2) => /^icon/.test(t2))), this.glyphOffsetArray = new Os(), this.lineVertexArray = new js(), this.symbolInstances = new Ds(), this.textAnchorOffsets = new Us();
        }
        calculateGlyphDependencies(t2, e2, r2, n2, i2) {
          for (let s2 = 0; s2 < t2.length; s2++) if (e2[t2.charCodeAt(s2)] = true, (r2 || n2) && i2) {
            const r3 = nu[t2.charAt(s2)];
            r3 && (e2[r3.charCodeAt(0)] = true);
          }
        }
        populate(e2, r2, n2) {
          const i2 = this.layers[0], s2 = i2.layout, a2 = s2.get("text-font"), o2 = s2.get("text-field"), l2 = s2.get("icon-image"), u3 = ("constant" !== o2.value.kind || o2.value.value instanceof Yt && !o2.value.value.isEmpty() || o2.value.value.toString().length > 0) && ("constant" !== a2.value.kind || a2.value.value.length > 0), c2 = "constant" !== l2.value.kind || !!l2.value.value || Object.keys(l2.parameters).length > 0, h2 = s2.get("symbol-sort-key");
          if (this.features = [], !u3 && !c2) return;
          const p3 = r2.iconDependencies, f2 = r2.glyphDependencies, d2 = r2.availableImages, y2 = new Ui(this.zoom);
          for (const { feature: r3, id: o3, index: l3, sourceLayerIndex: m2 } of e2) {
            const e3 = i2._featureFilter.needGeometry, g2 = ja(r3, e3);
            if (!i2._featureFilter.filter(y2, g2, n2)) continue;
            let x2, v2;
            if (e3 || (g2.geometry = Oa(r3)), u3) {
              const t2 = i2.getValueAndResolveTokens("text-field", g2, n2, d2), e4 = Yt.factory(t2), r4 = this.hasRTLText = this.hasRTLText || hc(e4);
              (!r4 || "unavailable" === Ri.getRTLTextPluginStatus() || r4 && Ri.isParsed()) && (x2 = ru(e4, i2, g2));
            }
            if (c2) {
              const t2 = i2.getValueAndResolveTokens("icon-image", g2, n2, d2);
              v2 = t2 instanceof te2 ? t2 : te2.fromString(t2);
            }
            if (!x2 && !v2) continue;
            const b2 = this.sortFeaturesByKey ? h2.evaluate(g2, {}, n2) : void 0;
            if (this.features.push({ id: o3, text: x2, icon: v2, index: l3, sourceLayerIndex: m2, geometry: g2.geometry, properties: r3.properties, type: oc[r3.type], sortKey: b2 }), v2 && (p3[v2.name] = true), x2) {
              const e4 = a2.evaluate(g2, {}, n2).join(","), r4 = "viewport" !== s2.get("text-rotation-alignment") && "point" !== s2.get("symbol-placement");
              this.allowVerticalPlacement = this.writingModes && this.writingModes.indexOf(t.ah.vertical) >= 0;
              for (const t2 of x2.sections) if (t2.image) p3[t2.image.name] = true;
              else {
                const n3 = Pi(x2.toString()), i3 = t2.fontStack || e4, s3 = f2[i3] = f2[i3] || {};
                this.calculateGlyphDependencies(t2.text, s3, r4, this.allowVerticalPlacement, n3);
              }
            }
          }
          "line" === s2.get("symbol-placement") && (this.features = function(t2) {
            const e3 = {}, r3 = {}, n3 = [];
            let i3 = 0;
            function s3(e4) {
              n3.push(t2[e4]), i3++;
            }
            function a3(t3, e4, i4) {
              const s4 = r3[t3];
              return delete r3[t3], r3[e4] = s4, n3[s4].geometry[0].pop(), n3[s4].geometry[0] = n3[s4].geometry[0].concat(i4[0]), s4;
            }
            function o3(t3, r4, i4) {
              const s4 = e3[r4];
              return delete e3[r4], e3[t3] = s4, n3[s4].geometry[0].shift(), n3[s4].geometry[0] = i4[0].concat(n3[s4].geometry[0]), s4;
            }
            function l3(t3, e4, r4) {
              const n4 = r4 ? e4[0][e4[0].length - 1] : e4[0][0];
              return `${t3}:${n4.x}:${n4.y}`;
            }
            for (let u4 = 0; u4 < t2.length; u4++) {
              const c3 = t2[u4], h3 = c3.geometry, p4 = c3.text ? c3.text.toString() : null;
              if (!p4) {
                s3(u4);
                continue;
              }
              const f3 = l3(p4, h3), d3 = l3(p4, h3, true);
              if (f3 in r3 && d3 in e3 && r3[f3] !== e3[d3]) {
                const t3 = o3(f3, d3, h3), i4 = a3(f3, d3, n3[t3].geometry);
                delete e3[f3], delete r3[d3], r3[l3(p4, n3[i4].geometry, true)] = i4, n3[t3].geometry = null;
              } else f3 in r3 ? a3(f3, d3, h3) : d3 in e3 ? o3(f3, d3, h3) : (s3(u4), e3[f3] = i3 - 1, r3[d3] = i3 - 1);
            }
            return n3.filter((t3) => t3.geometry);
          }(this.features)), this.sortFeaturesByKey && this.features.sort((t2, e3) => t2.sortKey - e3.sortKey);
        }
        update(t2, e2, r2) {
          this.stateDependentLayers.length && (this.text.programConfigurations.updatePaintArrays(t2, e2, this.layers, r2), this.icon.programConfigurations.updatePaintArrays(t2, e2, this.layers, r2));
        }
        isEmpty() {
          return 0 === this.symbolInstances.length && !this.hasRTLText;
        }
        uploadPending() {
          return !this.uploaded || this.text.programConfigurations.needsUpload || this.icon.programConfigurations.needsUpload;
        }
        upload(t2) {
          !this.uploaded && this.hasDebugData() && (this.textCollisionBox.upload(t2), this.iconCollisionBox.upload(t2)), this.text.upload(t2, this.sortFeaturesByY, !this.uploaded, this.text.programConfigurations.needsUpload), this.icon.upload(t2, this.sortFeaturesByY, !this.uploaded, this.icon.programConfigurations.needsUpload), this.uploaded = true;
        }
        destroyDebugData() {
          this.textCollisionBox.destroy(), this.iconCollisionBox.destroy();
        }
        destroy() {
          this.text.destroy(), this.icon.destroy(), this.hasDebugData() && this.destroyDebugData();
        }
        addToLineVertexArray(t2, e2) {
          const r2 = this.lineVertexArray.length;
          if (void 0 !== t2.segment) {
            let r3 = t2.dist(e2[t2.segment + 1]), n2 = t2.dist(e2[t2.segment]);
            const i2 = {};
            for (let n3 = t2.segment + 1; n3 < e2.length; n3++) i2[n3] = { x: e2[n3].x, y: e2[n3].y, tileUnitDistanceFromAnchor: r3 }, n3 < e2.length - 1 && (r3 += e2[n3 + 1].dist(e2[n3]));
            for (let r4 = t2.segment || 0; r4 >= 0; r4--) i2[r4] = { x: e2[r4].x, y: e2[r4].y, tileUnitDistanceFromAnchor: n2 }, r4 > 0 && (n2 += e2[r4 - 1].dist(e2[r4]));
            for (let t3 = 0; t3 < e2.length; t3++) {
              const e3 = i2[t3];
              this.lineVertexArray.emplaceBack(e3.x, e3.y, e3.tileUnitDistanceFromAnchor);
            }
          }
          return { lineStartIndex: r2, lineLength: this.lineVertexArray.length - r2 };
        }
        addSymbols(e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2, p3) {
          const f2 = e2.indexArray, d2 = e2.layoutVertexArray, y2 = e2.segments.prepareSegment(4 * r2.length, d2, f2, this.canOverlap ? a2.sortKey : void 0), m2 = this.glyphOffsetArray.length, g2 = y2.vertexLength, x2 = this.allowVerticalPlacement && o2 === t.ah.vertical ? Math.PI / 2 : 0, v2 = a2.text && a2.text.sections;
          for (let t2 = 0; t2 < r2.length; t2++) {
            const { tl: i3, tr: s3, bl: o3, br: u4, tex: c3, pixelOffsetTL: h3, pixelOffsetBR: m3, minFontScaleX: g3, minFontScaleY: b2, glyphOffset: w3, isSDF: _2, sectionIndex: A2 } = r2[t2], S2 = y2.vertexLength, k2 = w3[1];
            uc(d2, l2.x, l2.y, i3.x, k2 + i3.y, c3.x, c3.y, n2, _2, h3.x, h3.y, g3, b2), uc(d2, l2.x, l2.y, s3.x, k2 + s3.y, c3.x + c3.w, c3.y, n2, _2, m3.x, h3.y, g3, b2), uc(d2, l2.x, l2.y, o3.x, k2 + o3.y, c3.x, c3.y + c3.h, n2, _2, h3.x, m3.y, g3, b2), uc(d2, l2.x, l2.y, u4.x, k2 + u4.y, c3.x + c3.w, c3.y + c3.h, n2, _2, m3.x, m3.y, g3, b2), cc(e2.dynamicLayoutVertexArray, l2, x2), f2.emplaceBack(S2, S2 + 1, S2 + 2), f2.emplaceBack(S2 + 1, S2 + 2, S2 + 3), y2.vertexLength += 4, y2.primitiveLength += 2, this.glyphOffsetArray.emplaceBack(w3[0]), t2 !== r2.length - 1 && A2 === r2[t2 + 1].sectionIndex || e2.programConfigurations.populatePaintArrays(d2.length, a2, a2.index, {}, p3, v2 && v2[A2]);
          }
          e2.placedSymbolArray.emplaceBack(l2.x, l2.y, m2, this.glyphOffsetArray.length - m2, g2, u3, c2, l2.segment, n2 ? n2[0] : 0, n2 ? n2[1] : 0, i2[0], i2[1], o2, 0, false, 0, h2);
        }
        _addCollisionDebugVertex(t2, e2, r2, n2, i2, s2) {
          return e2.emplaceBack(0, 0), t2.emplaceBack(r2.x, r2.y, n2, i2, Math.round(s2.x), Math.round(s2.y));
        }
        addCollisionDebugVertices(t2, e2, r2, n2, i2, a2, o2) {
          const l2 = i2.segments.prepareSegment(4, i2.layoutVertexArray, i2.indexArray), u3 = l2.vertexLength, c2 = i2.layoutVertexArray, h2 = i2.collisionVertexArray, p3 = o2.anchorX, f2 = o2.anchorY;
          this._addCollisionDebugVertex(c2, h2, a2, p3, f2, new s(t2, e2)), this._addCollisionDebugVertex(c2, h2, a2, p3, f2, new s(r2, e2)), this._addCollisionDebugVertex(c2, h2, a2, p3, f2, new s(r2, n2)), this._addCollisionDebugVertex(c2, h2, a2, p3, f2, new s(t2, n2)), l2.vertexLength += 4;
          const d2 = i2.indexArray;
          d2.emplaceBack(u3, u3 + 1), d2.emplaceBack(u3 + 1, u3 + 2), d2.emplaceBack(u3 + 2, u3 + 3), d2.emplaceBack(u3 + 3, u3), l2.primitiveLength += 4;
        }
        addDebugCollisionBoxes(t2, e2, r2, n2) {
          for (let i2 = t2; i2 < e2; i2++) {
            const t3 = this.collisionBoxArray.get(i2);
            this.addCollisionDebugVertices(t3.x1, t3.y1, t3.x2, t3.y2, n2 ? this.textCollisionBox : this.iconCollisionBox, t3.anchorPoint, r2);
          }
        }
        generateCollisionDebugBuffers() {
          this.hasDebugData() && this.destroyDebugData(), this.textCollisionBox = new fc(ea, tu.members, ia), this.iconCollisionBox = new fc(ea, tu.members, ia);
          for (let t2 = 0; t2 < this.symbolInstances.length; t2++) {
            const e2 = this.symbolInstances.get(t2);
            this.addDebugCollisionBoxes(e2.textBoxStartIndex, e2.textBoxEndIndex, e2, true), this.addDebugCollisionBoxes(e2.verticalTextBoxStartIndex, e2.verticalTextBoxEndIndex, e2, true), this.addDebugCollisionBoxes(e2.iconBoxStartIndex, e2.iconBoxEndIndex, e2, false), this.addDebugCollisionBoxes(e2.verticalIconBoxStartIndex, e2.verticalIconBoxEndIndex, e2, false);
          }
        }
        _deserializeCollisionBoxesForSymbol(t2, e2, r2, n2, i2, s2, a2, o2, l2) {
          const u3 = {};
          for (let n3 = e2; n3 < r2; n3++) {
            const e3 = t2.get(n3);
            u3.textBox = { x1: e3.x1, y1: e3.y1, x2: e3.x2, y2: e3.y2, anchorPointX: e3.anchorPointX, anchorPointY: e3.anchorPointY }, u3.textFeatureIndex = e3.featureIndex;
            break;
          }
          for (let e3 = n2; e3 < i2; e3++) {
            const r3 = t2.get(e3);
            u3.verticalTextBox = { x1: r3.x1, y1: r3.y1, x2: r3.x2, y2: r3.y2, anchorPointX: r3.anchorPointX, anchorPointY: r3.anchorPointY }, u3.verticalTextFeatureIndex = r3.featureIndex;
            break;
          }
          for (let e3 = s2; e3 < a2; e3++) {
            const r3 = t2.get(e3);
            u3.iconBox = { x1: r3.x1, y1: r3.y1, x2: r3.x2, y2: r3.y2, anchorPointX: r3.anchorPointX, anchorPointY: r3.anchorPointY }, u3.iconFeatureIndex = r3.featureIndex;
            break;
          }
          for (let e3 = o2; e3 < l2; e3++) {
            const r3 = t2.get(e3);
            u3.verticalIconBox = { x1: r3.x1, y1: r3.y1, x2: r3.x2, y2: r3.y2, anchorPointX: r3.anchorPointX, anchorPointY: r3.anchorPointY }, u3.verticalIconFeatureIndex = r3.featureIndex;
            break;
          }
          return u3;
        }
        deserializeCollisionBoxes(t2) {
          this.collisionArrays = [];
          for (let e2 = 0; e2 < this.symbolInstances.length; e2++) {
            const r2 = this.symbolInstances.get(e2);
            this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t2, r2.textBoxStartIndex, r2.textBoxEndIndex, r2.verticalTextBoxStartIndex, r2.verticalTextBoxEndIndex, r2.iconBoxStartIndex, r2.iconBoxEndIndex, r2.verticalIconBoxStartIndex, r2.verticalIconBoxEndIndex));
          }
        }
        hasTextData() {
          return this.text.segments.get().length > 0;
        }
        hasIconData() {
          return this.icon.segments.get().length > 0;
        }
        hasDebugData() {
          return this.textCollisionBox && this.iconCollisionBox;
        }
        hasTextCollisionBoxData() {
          return this.hasDebugData() && this.textCollisionBox.segments.get().length > 0;
        }
        hasIconCollisionBoxData() {
          return this.hasDebugData() && this.iconCollisionBox.segments.get().length > 0;
        }
        addIndicesForPlacedSymbol(t2, e2) {
          const r2 = t2.placedSymbolArray.get(e2), n2 = r2.vertexStartIndex + 4 * r2.numGlyphs;
          for (let e3 = r2.vertexStartIndex; e3 < n2; e3 += 4) t2.indexArray.emplaceBack(e3, e3 + 1, e3 + 2), t2.indexArray.emplaceBack(e3 + 1, e3 + 2, e3 + 3);
        }
        getSortedSymbolIndexes(t2) {
          if (this.sortedAngle === t2 && void 0 !== this.symbolInstanceIndexes) return this.symbolInstanceIndexes;
          const e2 = Math.sin(t2), r2 = Math.cos(t2), n2 = [], i2 = [], s2 = [];
          for (let t3 = 0; t3 < this.symbolInstances.length; ++t3) {
            s2.push(t3);
            const a2 = this.symbolInstances.get(t3);
            n2.push(0 | Math.round(e2 * a2.anchorX + r2 * a2.anchorY)), i2.push(a2.featureIndex);
          }
          return s2.sort((t3, e3) => n2[t3] - n2[e3] || i2[e3] - i2[t3]), s2;
        }
        addToSortKeyRanges(t2, e2) {
          const r2 = this.sortKeyRanges[this.sortKeyRanges.length - 1];
          r2 && r2.sortKey === e2 ? r2.symbolInstanceEnd = t2 + 1 : this.sortKeyRanges.push({ sortKey: e2, symbolInstanceStart: t2, symbolInstanceEnd: t2 + 1 });
        }
        sortFeatures(t2) {
          if (this.sortFeaturesByY && this.sortedAngle !== t2 && !(this.text.segments.get().length > 1 || this.icon.segments.get().length > 1)) {
            this.symbolInstanceIndexes = this.getSortedSymbolIndexes(t2), this.sortedAngle = t2, this.text.indexArray.clear(), this.icon.indexArray.clear(), this.featureSortOrder = [];
            for (const t3 of this.symbolInstanceIndexes) {
              const e2 = this.symbolInstances.get(t3);
              this.featureSortOrder.push(e2.featureIndex), [e2.rightJustifiedTextSymbolIndex, e2.centerJustifiedTextSymbolIndex, e2.leftJustifiedTextSymbolIndex].forEach((t4, e3, r2) => {
                t4 >= 0 && r2.indexOf(t4) === e3 && this.addIndicesForPlacedSymbol(this.text, t4);
              }), e2.verticalPlacedTextSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.text, e2.verticalPlacedTextSymbolIndex), e2.placedIconSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.icon, e2.placedIconSymbolIndex), e2.verticalPlacedIconSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.icon, e2.verticalPlacedIconSymbolIndex);
            }
            this.text.indexBuffer && this.text.indexBuffer.updateData(this.text.indexArray), this.icon.indexBuffer && this.icon.indexBuffer.updateData(this.icon.indexArray);
          }
        }
      }
      let yc, mc;
      wi("SymbolBucket", dc, { omit: ["layers", "collisionBoxArray", "features", "compareText"] }), dc.MAX_GLYPHS = 65535, dc.addDynamicAttributes = cc;
      var gc = { get paint() {
        return mc = mc || new rs({ "icon-opacity": new Wi(G2.paint_symbol["icon-opacity"]), "icon-color": new Wi(G2.paint_symbol["icon-color"]), "icon-halo-color": new Wi(G2.paint_symbol["icon-halo-color"]), "icon-halo-width": new Wi(G2.paint_symbol["icon-halo-width"]), "icon-halo-blur": new Wi(G2.paint_symbol["icon-halo-blur"]), "icon-translate": new Ji(G2.paint_symbol["icon-translate"]), "icon-translate-anchor": new Ji(G2.paint_symbol["icon-translate-anchor"]), "text-opacity": new Wi(G2.paint_symbol["text-opacity"]), "text-color": new Wi(G2.paint_symbol["text-color"], { runtimeType: pt2, getOverride: (t2) => t2.textColor, hasOverride: (t2) => !!t2.textColor }), "text-halo-color": new Wi(G2.paint_symbol["text-halo-color"]), "text-halo-width": new Wi(G2.paint_symbol["text-halo-width"]), "text-halo-blur": new Wi(G2.paint_symbol["text-halo-blur"]), "text-translate": new Ji(G2.paint_symbol["text-translate"]), "text-translate-anchor": new Ji(G2.paint_symbol["text-translate-anchor"]) });
      }, get layout() {
        return yc = yc || new rs({ "symbol-placement": new Ji(G2.layout_symbol["symbol-placement"]), "symbol-spacing": new Ji(G2.layout_symbol["symbol-spacing"]), "symbol-avoid-edges": new Ji(G2.layout_symbol["symbol-avoid-edges"]), "symbol-sort-key": new Wi(G2.layout_symbol["symbol-sort-key"]), "symbol-z-order": new Ji(G2.layout_symbol["symbol-z-order"]), "icon-allow-overlap": new Ji(G2.layout_symbol["icon-allow-overlap"]), "icon-overlap": new Ji(G2.layout_symbol["icon-overlap"]), "icon-ignore-placement": new Ji(G2.layout_symbol["icon-ignore-placement"]), "icon-optional": new Ji(G2.layout_symbol["icon-optional"]), "icon-rotation-alignment": new Ji(G2.layout_symbol["icon-rotation-alignment"]), "icon-size": new Wi(G2.layout_symbol["icon-size"]), "icon-text-fit": new Ji(G2.layout_symbol["icon-text-fit"]), "icon-text-fit-padding": new Ji(G2.layout_symbol["icon-text-fit-padding"]), "icon-image": new Wi(G2.layout_symbol["icon-image"]), "icon-rotate": new Wi(G2.layout_symbol["icon-rotate"]), "icon-padding": new Wi(G2.layout_symbol["icon-padding"]), "icon-keep-upright": new Ji(G2.layout_symbol["icon-keep-upright"]), "icon-offset": new Wi(G2.layout_symbol["icon-offset"]), "icon-anchor": new Wi(G2.layout_symbol["icon-anchor"]), "icon-pitch-alignment": new Ji(G2.layout_symbol["icon-pitch-alignment"]), "text-pitch-alignment": new Ji(G2.layout_symbol["text-pitch-alignment"]), "text-rotation-alignment": new Ji(G2.layout_symbol["text-rotation-alignment"]), "text-field": new Wi(G2.layout_symbol["text-field"]), "text-font": new Wi(G2.layout_symbol["text-font"]), "text-size": new Wi(G2.layout_symbol["text-size"]), "text-max-width": new Wi(G2.layout_symbol["text-max-width"]), "text-line-height": new Ji(G2.layout_symbol["text-line-height"]), "text-letter-spacing": new Wi(G2.layout_symbol["text-letter-spacing"]), "text-justify": new Wi(G2.layout_symbol["text-justify"]), "text-radial-offset": new Wi(G2.layout_symbol["text-radial-offset"]), "text-variable-anchor": new Ji(G2.layout_symbol["text-variable-anchor"]), "text-variable-anchor-offset": new Wi(G2.layout_symbol["text-variable-anchor-offset"]), "text-anchor": new Wi(G2.layout_symbol["text-anchor"]), "text-max-angle": new Ji(G2.layout_symbol["text-max-angle"]), "text-writing-mode": new Ji(G2.layout_symbol["text-writing-mode"]), "text-rotate": new Wi(G2.layout_symbol["text-rotate"]), "text-padding": new Ji(G2.layout_symbol["text-padding"]), "text-keep-upright": new Ji(G2.layout_symbol["text-keep-upright"]), "text-transform": new Wi(G2.layout_symbol["text-transform"]), "text-offset": new Wi(G2.layout_symbol["text-offset"]), "text-allow-overlap": new Ji(G2.layout_symbol["text-allow-overlap"]), "text-overlap": new Ji(G2.layout_symbol["text-overlap"]), "text-ignore-placement": new Ji(G2.layout_symbol["text-ignore-placement"]), "text-optional": new Ji(G2.layout_symbol["text-optional"]) });
      } };
      class xc {
        constructor(t2) {
          if (void 0 === t2.property.overrides) throw new Error("overrides must be provided to instantiate FormatSectionOverride class");
          this.type = t2.property.overrides ? t2.property.overrides.runtimeType : lt2, this.defaultValue = t2;
        }
        evaluate(t2) {
          if (t2.formattedSection) {
            const e2 = this.defaultValue.property.overrides;
            if (e2 && e2.hasOverride(t2.formattedSection)) return e2.getOverride(t2.formattedSection);
          }
          return t2.feature && t2.featureState ? this.defaultValue.evaluate(t2.feature, t2.featureState) : this.defaultValue.property.specification.default;
        }
        eachChild(t2) {
          this.defaultValue.isConstant() || t2(this.defaultValue.value._styleExpression.expression);
        }
        outputDefined() {
          return false;
        }
        serialize() {
          return null;
        }
      }
      wi("FormatSectionOverride", xc, { omit: ["defaultValue"] });
      class vc extends is {
        constructor(t2) {
          super(t2, gc);
        }
        recalculate(t2, e2) {
          if (super.recalculate(t2, e2), "auto" === this.layout.get("icon-rotation-alignment") && (this.layout._values["icon-rotation-alignment"] = "point" !== this.layout.get("symbol-placement") ? "map" : "viewport"), "auto" === this.layout.get("text-rotation-alignment") && (this.layout._values["text-rotation-alignment"] = "point" !== this.layout.get("symbol-placement") ? "map" : "viewport"), "auto" === this.layout.get("text-pitch-alignment") && (this.layout._values["text-pitch-alignment"] = "map" === this.layout.get("text-rotation-alignment") ? "map" : "viewport"), "auto" === this.layout.get("icon-pitch-alignment") && (this.layout._values["icon-pitch-alignment"] = this.layout.get("icon-rotation-alignment")), "point" === this.layout.get("symbol-placement")) {
            const t3 = this.layout.get("text-writing-mode");
            if (t3) {
              const e3 = [];
              for (const r2 of t3) e3.indexOf(r2) < 0 && e3.push(r2);
              this.layout._values["text-writing-mode"] = e3;
            } else this.layout._values["text-writing-mode"] = ["horizontal"];
          }
          this._setPaintOverrides();
        }
        getValueAndResolveTokens(t2, e2, r2, n2) {
          const i2 = this.layout.get(t2).evaluate(e2, {}, r2, n2), s2 = this._unevaluatedLayout._values[t2];
          return s2.isDataDriven() || vn(s2.value) || !i2 ? i2 : function(t3, e3) {
            return e3.replace(/{([^{}]+)}/g, (e4, r3) => t3 && r3 in t3 ? String(t3[r3]) : "");
          }(e2.properties, i2);
        }
        createBucket(t2) {
          return new dc(t2);
        }
        queryRadius() {
          return 0;
        }
        queryIntersectsFeature() {
          throw new Error("Should take a different path in FeatureIndex");
        }
        _setPaintOverrides() {
          for (const t2 of gc.paint.overridableProperties) {
            if (!vc.hasPaintOverride(this.layout, t2)) continue;
            const e2 = this.paint.get(t2), r2 = new xc(e2), n2 = new xn(r2, e2.property.specification);
            let i2 = null;
            i2 = "constant" === e2.value.kind || "source" === e2.value.kind ? new wn("source", n2) : new _n("composite", n2, e2.value.zoomStops), this.paint._values[t2] = new Hi(e2.property, i2, e2.parameters);
          }
        }
        _handleOverridablePaintPropertyUpdate(t2, e2, r2) {
          return !(!this.layout || e2.isDataDriven() || r2.isDataDriven()) && vc.hasPaintOverride(this.layout, t2);
        }
        static hasPaintOverride(t2, e2) {
          const r2 = t2.get("text-field"), n2 = gc.paint.properties[e2];
          let i2 = false;
          const s2 = (t3) => {
            for (const e3 of t3) if (n2.overrides && n2.overrides.hasOverride(e3)) return void (i2 = true);
          };
          if ("constant" === r2.value.kind && r2.value.value instanceof Yt) s2(r2.value.value.sections);
          else if ("source" === r2.value.kind) {
            const t3 = (e4) => {
              i2 || (e4 instanceof se && ne(e4.value) === mt ? s2(e4.value.sections) : e4 instanceof Ze2 ? s2(e4.sections) : e4.eachChild(t3));
            }, e3 = r2.value;
            e3._styleExpression && t3(e3._styleExpression.expression);
          }
          return i2;
        }
      }
      let bc;
      var wc = { get paint() {
        return bc = bc || new rs({ "background-color": new Ji(G2.paint_background["background-color"]), "background-pattern": new ts(G2.paint_background["background-pattern"]), "background-opacity": new Ji(G2.paint_background["background-opacity"]) });
      } };
      class _c extends is {
        constructor(t2) {
          super(t2, wc);
        }
      }
      let Ac;
      var Sc = { get paint() {
        return Ac = Ac || new rs({ "raster-opacity": new Ji(G2.paint_raster["raster-opacity"]), "raster-hue-rotate": new Ji(G2.paint_raster["raster-hue-rotate"]), "raster-brightness-min": new Ji(G2.paint_raster["raster-brightness-min"]), "raster-brightness-max": new Ji(G2.paint_raster["raster-brightness-max"]), "raster-saturation": new Ji(G2.paint_raster["raster-saturation"]), "raster-contrast": new Ji(G2.paint_raster["raster-contrast"]), "raster-resampling": new Ji(G2.paint_raster["raster-resampling"]), "raster-fade-duration": new Ji(G2.paint_raster["raster-fade-duration"]) });
      } };
      class kc extends is {
        constructor(t2) {
          super(t2, Sc);
        }
      }
      class Mc extends is {
        constructor(t2) {
          super(t2, {}), this.onAdd = (t3) => {
            this.implementation.onAdd && this.implementation.onAdd(t3, t3.painter.context.gl);
          }, this.onRemove = (t3) => {
            this.implementation.onRemove && this.implementation.onRemove(t3, t3.painter.context.gl);
          }, this.implementation = t2;
        }
        is3D() {
          return "3d" === this.implementation.renderingMode;
        }
        hasOffscreenPass() {
          return void 0 !== this.implementation.prerender;
        }
        recalculate() {
        }
        updateTransitions() {
        }
        hasTransition() {
          return false;
        }
        serialize() {
          throw new Error("Custom layers cannot be serialized");
        }
      }
      class Ic {
        constructor(t2) {
          this._methodToThrottle = t2, this._triggered = false, "undefined" != typeof MessageChannel && (this._channel = new MessageChannel(), this._channel.port2.onmessage = () => {
            this._triggered = false, this._methodToThrottle();
          });
        }
        trigger() {
          this._triggered || (this._triggered = true, this._channel ? this._channel.port1.postMessage(true) : setTimeout(() => {
            this._triggered = false, this._methodToThrottle();
          }, 0));
        }
        remove() {
          delete this._channel, this._methodToThrottle = () => {
          };
        }
      }
      const zc = 63710088e-1;
      class Pc {
        constructor(t2, e2) {
          if (isNaN(t2) || isNaN(e2)) throw new Error(`Invalid LngLat object: (${t2}, ${e2})`);
          if (this.lng = +t2, this.lat = +e2, this.lat > 90 || this.lat < -90) throw new Error("Invalid LngLat latitude value: must be between -90 and 90");
        }
        wrap() {
          return new Pc(m(this.lng, -180, 180), this.lat);
        }
        toArray() {
          return [this.lng, this.lat];
        }
        toString() {
          return `LngLat(${this.lng}, ${this.lat})`;
        }
        distanceTo(t2) {
          const e2 = Math.PI / 180, r2 = this.lat * e2, n2 = t2.lat * e2, i2 = Math.sin(r2) * Math.sin(n2) + Math.cos(r2) * Math.cos(n2) * Math.cos((t2.lng - this.lng) * e2);
          return zc * Math.acos(Math.min(i2, 1));
        }
        static convert(t2) {
          if (t2 instanceof Pc) return t2;
          if (Array.isArray(t2) && (2 === t2.length || 3 === t2.length)) return new Pc(Number(t2[0]), Number(t2[1]));
          if (!Array.isArray(t2) && "object" == typeof t2 && null !== t2) return new Pc(Number("lng" in t2 ? t2.lng : t2.lon), Number(t2.lat));
          throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]");
        }
      }
      const Cc = 2 * Math.PI * zc;
      function Bc(t2) {
        return Cc * Math.cos(t2 * Math.PI / 180);
      }
      function Vc(t2) {
        return (180 + t2) / 360;
      }
      function Ec(t2) {
        return (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t2 * Math.PI / 360))) / 360;
      }
      function Fc(t2, e2) {
        return t2 / Bc(e2);
      }
      function Tc(t2) {
        return 360 / Math.PI * Math.atan(Math.exp((180 - 360 * t2) * Math.PI / 180)) - 90;
      }
      class $c {
        constructor(t2, e2, r2 = 0) {
          this.x = +t2, this.y = +e2, this.z = +r2;
        }
        static fromLngLat(t2, e2 = 0) {
          const r2 = Pc.convert(t2);
          return new $c(Vc(r2.lng), Ec(r2.lat), Fc(e2, r2.lat));
        }
        toLngLat() {
          return new Pc(360 * this.x - 180, Tc(this.y));
        }
        toAltitude() {
          return this.z * Bc(Tc(this.y));
        }
        meterInMercatorCoordinateUnits() {
          return 1 / Cc * (t2 = Tc(this.y), 1 / Math.cos(t2 * Math.PI / 180));
          var t2;
        }
      }
      function Lc(t2, e2, r2) {
        var n2 = 2 * Math.PI * 6378137 / 256 / Math.pow(2, r2);
        return [t2 * n2 - 2 * Math.PI * 6378137 / 2, e2 * n2 - 2 * Math.PI * 6378137 / 2];
      }
      class Dc {
        constructor(t2, e2, r2) {
          if (!function(t3, e3, r3) {
            return !(t3 < 0 || t3 > 25 || r3 < 0 || r3 >= Math.pow(2, t3) || e3 < 0 || e3 >= Math.pow(2, t3));
          }(t2, e2, r2)) throw new Error(`x=${e2}, y=${r2}, z=${t2} outside of bounds. 0<=x<${Math.pow(2, t2)}, 0<=y<${Math.pow(2, t2)} 0<=z<=25 `);
          this.z = t2, this.x = e2, this.y = r2, this.key = Rc(0, t2, t2, e2, r2);
        }
        equals(t2) {
          return this.z === t2.z && this.x === t2.x && this.y === t2.y;
        }
        url(t2, e2, r2) {
          const n2 = (s2 = this.y, a2 = this.z, o2 = Lc(256 * (i2 = this.x), 256 * (s2 = Math.pow(2, a2) - s2 - 1), a2), l2 = Lc(256 * (i2 + 1), 256 * (s2 + 1), a2), o2[0] + "," + o2[1] + "," + l2[0] + "," + l2[1]);
          var i2, s2, a2, o2, l2;
          const u3 = function(t3, e3, r3) {
            let n3, i3 = "";
            for (let s3 = t3; s3 > 0; s3--) n3 = 1 << s3 - 1, i3 += (e3 & n3 ? 1 : 0) + (r3 & n3 ? 2 : 0);
            return i3;
          }(this.z, this.x, this.y);
          return t2[(this.x + this.y) % t2.length].replace(/{prefix}/g, (this.x % 16).toString(16) + (this.y % 16).toString(16)).replace(/{z}/g, String(this.z)).replace(/{x}/g, String(this.x)).replace(/{y}/g, String("tms" === r2 ? Math.pow(2, this.z) - this.y - 1 : this.y)).replace(/{ratio}/g, e2 > 1 ? "@2x" : "").replace(/{quadkey}/g, u3).replace(/{bbox-epsg-3857}/g, n2);
        }
        isChildOf(t2) {
          const e2 = this.z - t2.z;
          return e2 > 0 && t2.x === this.x >> e2 && t2.y === this.y >> e2;
        }
        getTilePoint(t2) {
          const e2 = Math.pow(2, this.z);
          return new s((t2.x * e2 - this.x) * $a, (t2.y * e2 - this.y) * $a);
        }
        toString() {
          return `${this.z}/${this.x}/${this.y}`;
        }
      }
      class Oc {
        constructor(t2, e2) {
          this.wrap = t2, this.canonical = e2, this.key = Rc(t2, e2.z, e2.z, e2.x, e2.y);
        }
      }
      class jc {
        constructor(t2, e2, r2, n2, i2) {
          if (t2 < r2) throw new Error(`overscaledZ should be >= z; overscaledZ = ${t2}; z = ${r2}`);
          this.overscaledZ = t2, this.wrap = e2, this.canonical = new Dc(r2, +n2, +i2), this.key = Rc(e2, t2, r2, n2, i2);
        }
        clone() {
          return new jc(this.overscaledZ, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y);
        }
        equals(t2) {
          return this.overscaledZ === t2.overscaledZ && this.wrap === t2.wrap && this.canonical.equals(t2.canonical);
        }
        scaledTo(t2) {
          if (t2 > this.overscaledZ) throw new Error(`targetZ > this.overscaledZ; targetZ = ${t2}; overscaledZ = ${this.overscaledZ}`);
          const e2 = this.canonical.z - t2;
          return t2 > this.canonical.z ? new jc(t2, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y) : new jc(t2, this.wrap, t2, this.canonical.x >> e2, this.canonical.y >> e2);
        }
        calculateScaledKey(t2, e2) {
          if (t2 > this.overscaledZ) throw new Error(`targetZ > this.overscaledZ; targetZ = ${t2}; overscaledZ = ${this.overscaledZ}`);
          const r2 = this.canonical.z - t2;
          return t2 > this.canonical.z ? Rc(this.wrap * +e2, t2, this.canonical.z, this.canonical.x, this.canonical.y) : Rc(this.wrap * +e2, t2, t2, this.canonical.x >> r2, this.canonical.y >> r2);
        }
        isChildOf(t2) {
          if (t2.wrap !== this.wrap) return false;
          const e2 = this.canonical.z - t2.canonical.z;
          return 0 === t2.overscaledZ || t2.overscaledZ < this.overscaledZ && t2.canonical.x === this.canonical.x >> e2 && t2.canonical.y === this.canonical.y >> e2;
        }
        children(t2) {
          if (this.overscaledZ >= t2) return [new jc(this.overscaledZ + 1, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y)];
          const e2 = this.canonical.z + 1, r2 = 2 * this.canonical.x, n2 = 2 * this.canonical.y;
          return [new jc(e2, this.wrap, e2, r2, n2), new jc(e2, this.wrap, e2, r2 + 1, n2), new jc(e2, this.wrap, e2, r2, n2 + 1), new jc(e2, this.wrap, e2, r2 + 1, n2 + 1)];
        }
        isLessThan(t2) {
          return this.wrap < t2.wrap || !(this.wrap > t2.wrap) && (this.overscaledZ < t2.overscaledZ || !(this.overscaledZ > t2.overscaledZ) && (this.canonical.x < t2.canonical.x || !(this.canonical.x > t2.canonical.x) && this.canonical.y < t2.canonical.y));
        }
        wrapped() {
          return new jc(this.overscaledZ, 0, this.canonical.z, this.canonical.x, this.canonical.y);
        }
        unwrapTo(t2) {
          return new jc(this.overscaledZ, t2, this.canonical.z, this.canonical.x, this.canonical.y);
        }
        overscaleFactor() {
          return Math.pow(2, this.overscaledZ - this.canonical.z);
        }
        toUnwrapped() {
          return new Oc(this.wrap, this.canonical);
        }
        toString() {
          return `${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`;
        }
        getTilePoint(t2) {
          return this.canonical.getTilePoint(new $c(t2.x - this.wrap, t2.y));
        }
      }
      function Rc(t2, e2, r2, n2, i2) {
        (t2 *= 2) < 0 && (t2 = -1 * t2 - 1);
        const s2 = 1 << r2;
        return (s2 * s2 * t2 + s2 * i2 + n2).toString(36) + r2.toString(36) + e2.toString(36);
      }
      wi("CanonicalTileID", Dc), wi("OverscaledTileID", jc, { omit: ["posMatrix"] });
      class Uc {
        constructor(t2, e2, r2, n2 = 1, i2 = 1, s2 = 1, a2 = 0) {
          if (this.uid = t2, e2.height !== e2.width) throw new RangeError("DEM tiles must be square");
          if (r2 && !["mapbox", "terrarium", "custom"].includes(r2)) return void A(`"${r2}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);
          this.stride = e2.height;
          const o2 = this.dim = e2.height - 2;
          switch (this.data = new Uint32Array(e2.data.buffer), r2) {
            case "terrarium":
              this.redFactor = 256, this.greenFactor = 1, this.blueFactor = 1 / 256, this.baseShift = 32768;
              break;
            case "custom":
              this.redFactor = n2, this.greenFactor = i2, this.blueFactor = s2, this.baseShift = a2;
              break;
            default:
              this.redFactor = 6553.6, this.greenFactor = 25.6, this.blueFactor = 0.1, this.baseShift = 1e4;
          }
          for (let t3 = 0; t3 < o2; t3++) this.data[this._idx(-1, t3)] = this.data[this._idx(0, t3)], this.data[this._idx(o2, t3)] = this.data[this._idx(o2 - 1, t3)], this.data[this._idx(t3, -1)] = this.data[this._idx(t3, 0)], this.data[this._idx(t3, o2)] = this.data[this._idx(t3, o2 - 1)];
          this.data[this._idx(-1, -1)] = this.data[this._idx(0, 0)], this.data[this._idx(o2, -1)] = this.data[this._idx(o2 - 1, 0)], this.data[this._idx(-1, o2)] = this.data[this._idx(0, o2 - 1)], this.data[this._idx(o2, o2)] = this.data[this._idx(o2 - 1, o2 - 1)], this.min = Number.MAX_SAFE_INTEGER, this.max = Number.MIN_SAFE_INTEGER;
          for (let t3 = 0; t3 < o2; t3++) for (let e3 = 0; e3 < o2; e3++) {
            const r3 = this.get(t3, e3);
            r3 > this.max && (this.max = r3), r3 < this.min && (this.min = r3);
          }
        }
        get(t2, e2) {
          const r2 = new Uint8Array(this.data.buffer), n2 = 4 * this._idx(t2, e2);
          return this.unpack(r2[n2], r2[n2 + 1], r2[n2 + 2]);
        }
        getUnpackVector() {
          return [this.redFactor, this.greenFactor, this.blueFactor, this.baseShift];
        }
        _idx(t2, e2) {
          if (t2 < -1 || t2 >= this.dim + 1 || e2 < -1 || e2 >= this.dim + 1) throw new RangeError("out of range source coordinates for DEM data");
          return (e2 + 1) * this.stride + (t2 + 1);
        }
        unpack(t2, e2, r2) {
          return t2 * this.redFactor + e2 * this.greenFactor + r2 * this.blueFactor - this.baseShift;
        }
        getPixels() {
          return new Ao({ width: this.stride, height: this.stride }, new Uint8Array(this.data.buffer));
        }
        backfillBorder(t2, e2, r2) {
          if (this.dim !== t2.dim) throw new Error("dem dimension mismatch");
          let n2 = e2 * this.dim, i2 = e2 * this.dim + this.dim, s2 = r2 * this.dim, a2 = r2 * this.dim + this.dim;
          switch (e2) {
            case -1:
              n2 = i2 - 1;
              break;
            case 1:
              i2 = n2 + 1;
          }
          switch (r2) {
            case -1:
              s2 = a2 - 1;
              break;
            case 1:
              a2 = s2 + 1;
          }
          const o2 = -e2 * this.dim, l2 = -r2 * this.dim;
          for (let e3 = s2; e3 < a2; e3++) for (let r3 = n2; r3 < i2; r3++) this.data[this._idx(r3, e3)] = t2.data[this._idx(r3 + o2, e3 + l2)];
        }
      }
      wi("DEMData", Uc);
      class qc {
        constructor(t2) {
          this._stringToNumber = {}, this._numberToString = [];
          for (let e2 = 0; e2 < t2.length; e2++) {
            const r2 = t2[e2];
            this._stringToNumber[r2] = e2, this._numberToString[e2] = r2;
          }
        }
        encode(t2) {
          return this._stringToNumber[t2];
        }
        decode(t2) {
          if (t2 >= this._numberToString.length) throw new Error(`Out of bounds. Index requested n=${t2} can't be >= this._numberToString.length ${this._numberToString.length}`);
          return this._numberToString[t2];
        }
      }
      class Nc {
        constructor(t2, e2, r2, n2, i2) {
          this.type = "Feature", this._vectorTileFeature = t2, t2._z = e2, t2._x = r2, t2._y = n2, this.properties = t2.properties, this.id = i2;
        }
        get geometry() {
          return void 0 === this._geometry && (this._geometry = this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x, this._vectorTileFeature._y, this._vectorTileFeature._z).geometry), this._geometry;
        }
        set geometry(t2) {
          this._geometry = t2;
        }
        toJSON() {
          const t2 = { geometry: this.geometry };
          for (const e2 in this) "_geometry" !== e2 && "_vectorTileFeature" !== e2 && (t2[e2] = this[e2]);
          return t2;
        }
      }
      class Zc {
        constructor(t2, e2) {
          this.tileID = t2, this.x = t2.canonical.x, this.y = t2.canonical.y, this.z = t2.canonical.z, this.grid = new vi($a, 16, 0), this.grid3D = new vi($a, 16, 0), this.featureIndexArray = new Ns(), this.promoteId = e2;
        }
        insert(t2, e2, r2, n2, i2, s2) {
          const a2 = this.featureIndexArray.length;
          this.featureIndexArray.emplaceBack(r2, n2, i2);
          const o2 = s2 ? this.grid3D : this.grid;
          for (let t3 = 0; t3 < e2.length; t3++) {
            const r3 = e2[t3], n3 = [1 / 0, 1 / 0, -1 / 0, -1 / 0];
            for (let t4 = 0; t4 < r3.length; t4++) {
              const e3 = r3[t4];
              n3[0] = Math.min(n3[0], e3.x), n3[1] = Math.min(n3[1], e3.y), n3[2] = Math.max(n3[2], e3.x), n3[3] = Math.max(n3[3], e3.y);
            }
            n3[0] < $a && n3[1] < $a && n3[2] >= 0 && n3[3] >= 0 && o2.insert(a2, n3[0], n3[1], n3[2], n3[3]);
          }
        }
        loadVTLayers() {
          return this.vtLayers || (this.vtLayers = new fl.VectorTile(new Iu(this.rawTileData)).layers, this.sourceLayerCoder = new qc(this.vtLayers ? Object.keys(this.vtLayers).sort() : ["_geojsonTileLayer"])), this.vtLayers;
        }
        query(t2, e2, r2, n2) {
          this.loadVTLayers();
          const i2 = t2.params || {}, a2 = $a / t2.tileSize / t2.scale, o2 = zn(i2.filter), l2 = t2.queryGeometry, u3 = t2.queryPadding * a2, c2 = Kc(l2), h2 = this.grid.query(c2.minX - u3, c2.minY - u3, c2.maxX + u3, c2.maxY + u3), p3 = Kc(t2.cameraQueryGeometry), f2 = this.grid3D.query(p3.minX - u3, p3.minY - u3, p3.maxX + u3, p3.maxY + u3, (e3, r3, n3, i3) => function(t3, e4, r4, n4, i4) {
            for (const s2 of t3) if (e4 <= s2.x && r4 <= s2.y && n4 >= s2.x && i4 >= s2.y) return true;
            const a3 = [new s(e4, r4), new s(e4, i4), new s(n4, i4), new s(n4, r4)];
            if (t3.length > 2) {
              for (const e5 of a3) if (Wa(t3, e5)) return true;
            }
            for (let e5 = 0; e5 < t3.length - 1; e5++) if (Qa(t3[e5], t3[e5 + 1], a3)) return true;
            return false;
          }(t2.cameraQueryGeometry, e3 - u3, r3 - u3, n3 + u3, i3 + u3));
          for (const t3 of f2) h2.push(t3);
          h2.sort(Xc);
          const d2 = {};
          let y2;
          for (let s2 = 0; s2 < h2.length; s2++) {
            const u4 = h2[s2];
            if (u4 === y2) continue;
            y2 = u4;
            const c3 = this.featureIndexArray.get(u4);
            let p4 = null;
            this.loadMatchingFeature(d2, c3.bucketIndex, c3.sourceLayerIndex, c3.featureIndex, o2, i2.layers, i2.availableImages, e2, r2, n2, (e3, r3, n3) => (p4 || (p4 = Oa(e3)), r3.queryIntersectsFeature(l2, e3, n3, p4, this.z, t2.transform, a2, t2.pixelPosMatrix)));
          }
          return d2;
        }
        loadMatchingFeature(t2, e2, r2, n2, i2, s2, a2, o2, l2, u3, c2) {
          const h2 = this.bucketLayerIDs[e2];
          if (s2 && !function(t3, e3) {
            for (let r3 = 0; r3 < t3.length; r3++) if (e3.indexOf(t3[r3]) >= 0) return true;
            return false;
          }(s2, h2)) return;
          const p3 = this.sourceLayerCoder.decode(r2), f2 = this.vtLayers[p3].feature(n2);
          if (i2.needGeometry) {
            const t3 = ja(f2, true);
            if (!i2.filter(new Ui(this.tileID.overscaledZ), t3, this.tileID.canonical)) return;
          } else if (!i2.filter(new Ui(this.tileID.overscaledZ), f2)) return;
          const d2 = this.getId(f2, p3);
          for (let e3 = 0; e3 < h2.length; e3++) {
            const r3 = h2[e3];
            if (s2 && s2.indexOf(r3) < 0) continue;
            const i3 = o2[r3];
            if (!i3) continue;
            let p4 = {};
            d2 && u3 && (p4 = u3.getState(i3.sourceLayer || "_geojsonTileLayer", d2));
            const y2 = g({}, l2[r3]);
            y2.paint = Gc(y2.paint, i3.paint, f2, p4, a2), y2.layout = Gc(y2.layout, i3.layout, f2, p4, a2);
            const m2 = !c2 || c2(f2, i3, p4);
            if (!m2) continue;
            const x2 = new Nc(f2, this.z, this.x, this.y, d2);
            x2.layer = y2;
            let v2 = t2[r3];
            void 0 === v2 && (v2 = t2[r3] = []), v2.push({ featureIndex: n2, feature: x2, intersectionZ: m2 });
          }
        }
        lookupSymbolFeatures(t2, e2, r2, n2, i2, s2, a2, o2) {
          const l2 = {};
          this.loadVTLayers();
          const u3 = zn(i2);
          for (const i3 of t2) this.loadMatchingFeature(l2, r2, n2, i3, u3, s2, a2, o2, e2);
          return l2;
        }
        hasLayer(t2) {
          for (const e2 of this.bucketLayerIDs) for (const r2 of e2) if (t2 === r2) return true;
          return false;
        }
        getId(t2, e2) {
          let r2 = t2.id;
          return this.promoteId && (r2 = t2.properties["string" == typeof this.promoteId ? this.promoteId : this.promoteId[e2]], "boolean" == typeof r2 && (r2 = Number(r2))), r2;
        }
      }
      function Gc(t2, e2, r2, n2, i2) {
        return v(t2, (t3, s2) => {
          const a2 = e2 instanceof Yi ? e2.get(s2) : null;
          return a2 && a2.evaluate ? a2.evaluate(r2, n2, i2) : a2;
        });
      }
      function Kc(t2) {
        let e2 = 1 / 0, r2 = 1 / 0, n2 = -1 / 0, i2 = -1 / 0;
        for (const s2 of t2) e2 = Math.min(e2, s2.x), r2 = Math.min(r2, s2.y), n2 = Math.max(n2, s2.x), i2 = Math.max(i2, s2.y);
        return { minX: e2, minY: r2, maxX: n2, maxY: i2 };
      }
      function Xc(t2, e2) {
        return e2 - t2;
      }
      function Hc(t2, e2, r2, n2, i2) {
        const a2 = [];
        for (let o2 = 0; o2 < t2.length; o2++) {
          const l2 = t2[o2];
          let u3;
          for (let t3 = 0; t3 < l2.length - 1; t3++) {
            let o3 = l2[t3], c2 = l2[t3 + 1];
            o3.x < e2 && c2.x < e2 || (o3.x < e2 ? o3 = new s(e2, o3.y + (e2 - o3.x) / (c2.x - o3.x) * (c2.y - o3.y))._round() : c2.x < e2 && (c2 = new s(e2, o3.y + (e2 - o3.x) / (c2.x - o3.x) * (c2.y - o3.y))._round()), o3.y < r2 && c2.y < r2 || (o3.y < r2 ? o3 = new s(o3.x + (r2 - o3.y) / (c2.y - o3.y) * (c2.x - o3.x), r2)._round() : c2.y < r2 && (c2 = new s(o3.x + (r2 - o3.y) / (c2.y - o3.y) * (c2.x - o3.x), r2)._round()), o3.x >= n2 && c2.x >= n2 || (o3.x >= n2 ? o3 = new s(n2, o3.y + (n2 - o3.x) / (c2.x - o3.x) * (c2.y - o3.y))._round() : c2.x >= n2 && (c2 = new s(n2, o3.y + (n2 - o3.x) / (c2.x - o3.x) * (c2.y - o3.y))._round()), o3.y >= i2 && c2.y >= i2 || (o3.y >= i2 ? o3 = new s(o3.x + (i2 - o3.y) / (c2.y - o3.y) * (c2.x - o3.x), i2)._round() : c2.y >= i2 && (c2 = new s(o3.x + (i2 - o3.y) / (c2.y - o3.y) * (c2.x - o3.x), i2)._round()), u3 && o3.equals(u3[u3.length - 1]) || (u3 = [o3], a2.push(u3)), u3.push(c2)))));
          }
        }
        return a2;
      }
      wi("FeatureIndex", Zc, { omit: ["rawTileData", "sourceLayerCoder"] });
      class Yc extends s {
        constructor(t2, e2, r2, n2) {
          super(t2, e2), this.angle = r2, void 0 !== n2 && (this.segment = n2);
        }
        clone() {
          return new Yc(this.x, this.y, this.angle, this.segment);
        }
      }
      function Jc(t2, e2, r2, n2, i2) {
        if (void 0 === e2.segment || 0 === r2) return true;
        let s2 = e2, a2 = e2.segment + 1, o2 = 0;
        for (; o2 > -r2 / 2; ) {
          if (a2--, a2 < 0) return false;
          o2 -= t2[a2].dist(s2), s2 = t2[a2];
        }
        o2 += t2[a2].dist(t2[a2 + 1]), a2++;
        const l2 = [];
        let u3 = 0;
        for (; o2 < r2 / 2; ) {
          const e3 = t2[a2], r3 = t2[a2 + 1];
          if (!r3) return false;
          let s3 = t2[a2 - 1].angleTo(e3) - e3.angleTo(r3);
          for (s3 = Math.abs((s3 + 3 * Math.PI) % (2 * Math.PI) - Math.PI), l2.push({ distance: o2, angleDelta: s3 }), u3 += s3; o2 - l2[0].distance > n2; ) u3 -= l2.shift().angleDelta;
          if (u3 > i2) return false;
          a2++, o2 += e3.dist(r3);
        }
        return true;
      }
      function Wc(t2) {
        let e2 = 0;
        for (let r2 = 0; r2 < t2.length - 1; r2++) e2 += t2[r2].dist(t2[r2 + 1]);
        return e2;
      }
      function Qc(t2, e2, r2) {
        return t2 ? 0.6 * e2 * r2 : 0;
      }
      function th(t2, e2) {
        return Math.max(t2 ? t2.right - t2.left : 0, e2 ? e2.right - e2.left : 0);
      }
      function eh(t2, e2, r2, n2, i2, s2) {
        const a2 = Qc(r2, i2, s2), o2 = th(r2, n2) * s2;
        let l2 = 0;
        const u3 = Wc(t2) / 2;
        for (let r3 = 0; r3 < t2.length - 1; r3++) {
          const n3 = t2[r3], i3 = t2[r3 + 1], s3 = n3.dist(i3);
          if (l2 + s3 > u3) {
            const c2 = (u3 - l2) / s3, h2 = Ce2.number(n3.x, i3.x, c2), p3 = Ce2.number(n3.y, i3.y, c2), f2 = new Yc(h2, p3, i3.angleTo(n3), r3);
            return f2._round(), !a2 || Jc(t2, f2, o2, a2, e2) ? f2 : void 0;
          }
          l2 += s3;
        }
      }
      function rh(t2, e2, r2, n2, i2, s2, a2, o2, l2) {
        const u3 = Qc(n2, s2, a2), c2 = th(n2, i2), h2 = c2 * a2, p3 = 0 === t2[0].x || t2[0].x === l2 || 0 === t2[0].y || t2[0].y === l2;
        return e2 - h2 < e2 / 4 && (e2 = h2 + e2 / 4), nh(t2, p3 ? e2 / 2 * o2 % e2 : (c2 / 2 + 2 * s2) * a2 * o2 % e2, e2, u3, r2, h2, p3, false, l2);
      }
      function nh(t2, e2, r2, n2, i2, s2, a2, o2, l2) {
        const u3 = s2 / 2, c2 = Wc(t2);
        let h2 = 0, p3 = e2 - r2, f2 = [];
        for (let e3 = 0; e3 < t2.length - 1; e3++) {
          const a3 = t2[e3], o3 = t2[e3 + 1], d2 = a3.dist(o3), y2 = o3.angleTo(a3);
          for (; p3 + r2 < h2 + d2; ) {
            p3 += r2;
            const m2 = (p3 - h2) / d2, g2 = Ce2.number(a3.x, o3.x, m2), x2 = Ce2.number(a3.y, o3.y, m2);
            if (g2 >= 0 && g2 < l2 && x2 >= 0 && x2 < l2 && p3 - u3 >= 0 && p3 + u3 <= c2) {
              const r3 = new Yc(g2, x2, y2, e3);
              r3._round(), n2 && !Jc(t2, r3, s2, n2, i2) || f2.push(r3);
            }
          }
          h2 += d2;
        }
        return o2 || f2.length || a2 || (f2 = nh(t2, h2 / 2, r2, n2, i2, s2, a2, true, l2)), f2;
      }
      wi("Anchor", Yc);
      const ih = Fu;
      function sh(t2, e2, r2, n2) {
        const i2 = [], a2 = t2.image, o2 = a2.pixelRatio, l2 = a2.paddedRect.w - 2 * ih, u3 = a2.paddedRect.h - 2 * ih;
        let c2 = { x1: t2.left, y1: t2.top, x2: t2.right, y2: t2.bottom };
        const h2 = a2.stretchX || [[0, l2]], p3 = a2.stretchY || [[0, u3]], f2 = (t3, e3) => t3 + e3[1] - e3[0], d2 = h2.reduce(f2, 0), y2 = p3.reduce(f2, 0), m2 = l2 - d2, g2 = u3 - y2;
        let x2 = 0, v2 = d2, b2 = 0, w3 = y2, _2 = 0, A2 = m2, S2 = 0, k2 = g2;
        if (a2.content && n2) {
          const e3 = a2.content, r3 = e3[2] - e3[0], n3 = e3[3] - e3[1];
          (a2.textFitWidth || a2.textFitHeight) && (c2 = tc(t2)), x2 = ah(h2, 0, e3[0]), b2 = ah(p3, 0, e3[1]), v2 = ah(h2, e3[0], e3[2]), w3 = ah(p3, e3[1], e3[3]), _2 = e3[0] - x2, S2 = e3[1] - b2, A2 = r3 - v2, k2 = n3 - w3;
        }
        const M2 = c2.x1, I2 = c2.y1, z3 = c2.x2 - M2, P3 = c2.y2 - I2, C2 = (t3, n3, i3, l3) => {
          const u4 = lh(t3.stretch - x2, v2, z3, M2), c3 = uh(t3.fixed - _2, A2, t3.stretch, d2), h3 = lh(n3.stretch - b2, w3, P3, I2), p4 = uh(n3.fixed - S2, k2, n3.stretch, y2), f3 = lh(i3.stretch - x2, v2, z3, M2), m3 = uh(i3.fixed - _2, A2, i3.stretch, d2), g3 = lh(l3.stretch - b2, w3, P3, I2), C3 = uh(l3.fixed - S2, k2, l3.stretch, y2), B3 = new s(u4, h3), V3 = new s(f3, h3), E2 = new s(f3, g3), F2 = new s(u4, g3), T2 = new s(c3 / o2, p4 / o2), $3 = new s(m3 / o2, C3 / o2), L3 = e2 * Math.PI / 180;
          if (L3) {
            const t4 = Math.sin(L3), e3 = Math.cos(L3), r3 = [e3, -t4, t4, e3];
            B3._matMult(r3), V3._matMult(r3), F2._matMult(r3), E2._matMult(r3);
          }
          const D2 = t3.stretch + t3.fixed, O3 = n3.stretch + n3.fixed;
          return { tl: B3, tr: V3, bl: F2, br: E2, tex: { x: a2.paddedRect.x + ih + D2, y: a2.paddedRect.y + ih + O3, w: i3.stretch + i3.fixed - D2, h: l3.stretch + l3.fixed - O3 }, writingMode: void 0, glyphOffset: [0, 0], sectionIndex: 0, pixelOffsetTL: T2, pixelOffsetBR: $3, minFontScaleX: A2 / o2 / z3, minFontScaleY: k2 / o2 / P3, isSDF: r2 };
        };
        if (n2 && (a2.stretchX || a2.stretchY)) {
          const t3 = oh(h2, m2, d2), e3 = oh(p3, g2, y2);
          for (let r3 = 0; r3 < t3.length - 1; r3++) {
            const n3 = t3[r3], s2 = t3[r3 + 1];
            for (let t4 = 0; t4 < e3.length - 1; t4++) i2.push(C2(n3, e3[t4], s2, e3[t4 + 1]));
          }
        } else i2.push(C2({ fixed: 0, stretch: -1 }, { fixed: 0, stretch: -1 }, { fixed: 0, stretch: l2 + 1 }, { fixed: 0, stretch: u3 + 1 }));
        return i2;
      }
      function ah(t2, e2, r2) {
        let n2 = 0;
        for (const i2 of t2) n2 += Math.max(e2, Math.min(r2, i2[1])) - Math.max(e2, Math.min(r2, i2[0]));
        return n2;
      }
      function oh(t2, e2, r2) {
        const n2 = [{ fixed: -ih, stretch: 0 }];
        for (const [e3, r3] of t2) {
          const t3 = n2[n2.length - 1];
          n2.push({ fixed: e3 - t3.stretch, stretch: t3.stretch }), n2.push({ fixed: e3 - t3.stretch, stretch: t3.stretch + (r3 - e3) });
        }
        return n2.push({ fixed: e2 + ih, stretch: r2 }), n2;
      }
      function lh(t2, e2, r2, n2) {
        return t2 / e2 * r2 + n2;
      }
      function uh(t2, e2, r2, n2) {
        return t2 - e2 * r2 / n2;
      }
      class ch {
        constructor(t2, e2, r2, n2, i2, a2, o2, l2, u3, c2) {
          var h2;
          if (this.boxStartIndex = t2.length, u3) {
            let t3 = a2.top, e3 = a2.bottom;
            const r3 = a2.collisionPadding;
            r3 && (t3 -= r3[1], e3 += r3[3]);
            let n3 = e3 - t3;
            n3 > 0 && (n3 = Math.max(10, n3), this.circleDiameter = n3);
          } else {
            const u4 = (null === (h2 = a2.image) || void 0 === h2 ? void 0 : h2.content) && (a2.image.textFitWidth || a2.image.textFitHeight) ? tc(a2) : { x1: a2.left, y1: a2.top, x2: a2.right, y2: a2.bottom };
            u4.y1 = u4.y1 * o2 - l2[0], u4.y2 = u4.y2 * o2 + l2[2], u4.x1 = u4.x1 * o2 - l2[3], u4.x2 = u4.x2 * o2 + l2[1];
            const p3 = a2.collisionPadding;
            if (p3 && (u4.x1 -= p3[0] * o2, u4.y1 -= p3[1] * o2, u4.x2 += p3[2] * o2, u4.y2 += p3[3] * o2), c2) {
              const t3 = new s(u4.x1, u4.y1), e3 = new s(u4.x2, u4.y1), r3 = new s(u4.x1, u4.y2), n3 = new s(u4.x2, u4.y2), i3 = c2 * Math.PI / 180;
              t3._rotate(i3), e3._rotate(i3), r3._rotate(i3), n3._rotate(i3), u4.x1 = Math.min(t3.x, e3.x, r3.x, n3.x), u4.x2 = Math.max(t3.x, e3.x, r3.x, n3.x), u4.y1 = Math.min(t3.y, e3.y, r3.y, n3.y), u4.y2 = Math.max(t3.y, e3.y, r3.y, n3.y);
            }
            t2.emplaceBack(e2.x, e2.y, u4.x1, u4.y1, u4.x2, u4.y2, r2, n2, i2);
          }
          this.boxEndIndex = t2.length;
        }
      }
      class hh {
        constructor(t2 = [], e2 = (t3, e3) => t3 < e3 ? -1 : t3 > e3 ? 1 : 0) {
          if (this.data = t2, this.length = this.data.length, this.compare = e2, this.length > 0) for (let t3 = (this.length >> 1) - 1; t3 >= 0; t3--) this._down(t3);
        }
        push(t2) {
          this.data.push(t2), this._up(this.length++);
        }
        pop() {
          if (0 === this.length) return;
          const t2 = this.data[0], e2 = this.data.pop();
          return --this.length > 0 && (this.data[0] = e2, this._down(0)), t2;
        }
        peek() {
          return this.data[0];
        }
        _up(t2) {
          const { data: e2, compare: r2 } = this, n2 = e2[t2];
          for (; t2 > 0; ) {
            const i2 = t2 - 1 >> 1, s2 = e2[i2];
            if (r2(n2, s2) >= 0) break;
            e2[t2] = s2, t2 = i2;
          }
          e2[t2] = n2;
        }
        _down(t2) {
          const { data: e2, compare: r2 } = this, n2 = this.length >> 1, i2 = e2[t2];
          for (; t2 < n2; ) {
            let n3 = 1 + (t2 << 1);
            const s2 = n3 + 1;
            if (s2 < this.length && r2(e2[s2], e2[n3]) < 0 && (n3 = s2), r2(e2[n3], i2) >= 0) break;
            e2[t2] = e2[n3], t2 = n3;
          }
          e2[t2] = i2;
        }
      }
      function ph(t2, e2 = 1, r2 = false) {
        let n2 = 1 / 0, i2 = 1 / 0, a2 = -1 / 0, o2 = -1 / 0;
        const l2 = t2[0];
        for (let t3 = 0; t3 < l2.length; t3++) {
          const e3 = l2[t3];
          (!t3 || e3.x < n2) && (n2 = e3.x), (!t3 || e3.y < i2) && (i2 = e3.y), (!t3 || e3.x > a2) && (a2 = e3.x), (!t3 || e3.y > o2) && (o2 = e3.y);
        }
        const u3 = Math.min(a2 - n2, o2 - i2);
        let c2 = u3 / 2;
        const h2 = new hh([], fh);
        if (0 === u3) return new s(n2, i2);
        for (let e3 = n2; e3 < a2; e3 += u3) for (let r3 = i2; r3 < o2; r3 += u3) h2.push(new dh(e3 + c2, r3 + c2, c2, t2));
        let p3 = function(t3) {
          let e3 = 0, r3 = 0, n3 = 0;
          const i3 = t3[0];
          for (let t4 = 0, s2 = i3.length, a3 = s2 - 1; t4 < s2; a3 = t4++) {
            const s3 = i3[t4], o3 = i3[a3], l3 = s3.x * o3.y - o3.x * s3.y;
            r3 += (s3.x + o3.x) * l3, n3 += (s3.y + o3.y) * l3, e3 += 3 * l3;
          }
          return new dh(r3 / e3, n3 / e3, 0, t3);
        }(t2), f2 = h2.length;
        for (; h2.length; ) {
          const n3 = h2.pop();
          (n3.d > p3.d || !p3.d) && (p3 = n3, r2 && console.log("found best %d after %d probes", Math.round(1e4 * n3.d) / 1e4, f2)), n3.max - p3.d <= e2 || (c2 = n3.h / 2, h2.push(new dh(n3.p.x - c2, n3.p.y - c2, c2, t2)), h2.push(new dh(n3.p.x + c2, n3.p.y - c2, c2, t2)), h2.push(new dh(n3.p.x - c2, n3.p.y + c2, c2, t2)), h2.push(new dh(n3.p.x + c2, n3.p.y + c2, c2, t2)), f2 += 4);
        }
        return r2 && (console.log(`num probes: ${f2}`), console.log(`best distance: ${p3.d}`)), p3.p;
      }
      function fh(t2, e2) {
        return e2.max - t2.max;
      }
      function dh(t2, e2, r2, n2) {
        this.p = new s(t2, e2), this.h = r2, this.d = function(t3, e3) {
          let r3 = false, n3 = 1 / 0;
          for (let i2 = 0; i2 < e3.length; i2++) {
            const s2 = e3[i2];
            for (let e4 = 0, i3 = s2.length, a2 = i3 - 1; e4 < i3; a2 = e4++) {
              const i4 = s2[e4], o2 = s2[a2];
              i4.y > t3.y != o2.y > t3.y && t3.x < (o2.x - i4.x) * (t3.y - i4.y) / (o2.y - i4.y) + i4.x && (r3 = !r3), n3 = Math.min(n3, Ya(t3, i4, o2));
            }
          }
          return (r3 ? 1 : -1) * Math.sqrt(n3);
        }(this.p, n2), this.max = this.d + this.h * Math.SQRT2;
      }
      var yh;
      t.aq = void 0, (yh = t.aq || (t.aq = {}))[yh.center = 1] = "center", yh[yh.left = 2] = "left", yh[yh.right = 3] = "right", yh[yh.top = 4] = "top", yh[yh.bottom = 5] = "bottom", yh[yh["top-left"] = 6] = "top-left", yh[yh["top-right"] = 7] = "top-right", yh[yh["bottom-left"] = 8] = "bottom-left", yh[yh["bottom-right"] = 9] = "bottom-right";
      const mh = 7, gh = Number.POSITIVE_INFINITY;
      function xh(t2, e2) {
        return e2[1] !== gh ? function(t3, e3, r2) {
          let n2 = 0, i2 = 0;
          switch (e3 = Math.abs(e3), r2 = Math.abs(r2), t3) {
            case "top-right":
            case "top-left":
            case "top":
              i2 = r2 - mh;
              break;
            case "bottom-right":
            case "bottom-left":
            case "bottom":
              i2 = -r2 + mh;
          }
          switch (t3) {
            case "top-right":
            case "bottom-right":
            case "right":
              n2 = -e3;
              break;
            case "top-left":
            case "bottom-left":
            case "left":
              n2 = e3;
          }
          return [n2, i2];
        }(t2, e2[0], e2[1]) : function(t3, e3) {
          let r2 = 0, n2 = 0;
          e3 < 0 && (e3 = 0);
          const i2 = e3 / Math.SQRT2;
          switch (t3) {
            case "top-right":
            case "top-left":
              n2 = i2 - mh;
              break;
            case "bottom-right":
            case "bottom-left":
              n2 = -i2 + mh;
              break;
            case "bottom":
              n2 = -e3 + mh;
              break;
            case "top":
              n2 = e3 - mh;
          }
          switch (t3) {
            case "top-right":
            case "bottom-right":
              r2 = -i2;
              break;
            case "top-left":
            case "bottom-left":
              r2 = i2;
              break;
            case "left":
              r2 = e3;
              break;
            case "right":
              r2 = -e3;
          }
          return [r2, n2];
        }(t2, e2[0]);
      }
      function vh(t2, e2, r2) {
        var n2;
        const i2 = t2.layout, s2 = null === (n2 = i2.get("text-variable-anchor-offset")) || void 0 === n2 ? void 0 : n2.evaluate(e2, {}, r2);
        if (s2) {
          const t3 = s2.values, e3 = [];
          for (let r3 = 0; r3 < t3.length; r3 += 2) {
            const n3 = e3[r3] = t3[r3], i3 = t3[r3 + 1].map((t4) => t4 * iu);
            n3.startsWith("top") ? i3[1] -= mh : n3.startsWith("bottom") && (i3[1] += mh), e3[r3 + 1] = i3;
          }
          return new Qt(e3);
        }
        const a2 = i2.get("text-variable-anchor");
        if (a2) {
          let n3;
          n3 = void 0 !== t2._unevaluatedLayout.getValue("text-radial-offset") ? [i2.get("text-radial-offset").evaluate(e2, {}, r2) * iu, gh] : i2.get("text-offset").evaluate(e2, {}, r2).map((t3) => t3 * iu);
          const s3 = [];
          for (const t3 of a2) s3.push(t3, xh(t3, n3));
          return new Qt(s3);
        }
        return null;
      }
      function bh(t2) {
        switch (t2) {
          case "right":
          case "top-right":
          case "bottom-right":
            return "right";
          case "left":
          case "top-left":
          case "bottom-left":
            return "left";
        }
        return "center";
      }
      function wh(e2, r2, n2, i2, s2, a2, o2, l2, u3, c2, h2) {
        let p3 = a2.textMaxSize.evaluate(r2, {});
        void 0 === p3 && (p3 = o2);
        const f2 = e2.layers[0].layout, d2 = f2.get("icon-offset").evaluate(r2, {}, h2), y2 = Ah(n2.horizontal), m2 = o2 / 24, g2 = e2.tilePixelRatio * m2, x2 = e2.tilePixelRatio * p3 / 24, v2 = e2.tilePixelRatio * l2, b2 = e2.tilePixelRatio * f2.get("symbol-spacing"), w3 = f2.get("text-padding") * e2.tilePixelRatio, _2 = function(t2, e3, r3, n3 = 1) {
          const i3 = t2.get("icon-padding").evaluate(e3, {}, r3), s3 = i3 && i3.values;
          return [s3[0] * n3, s3[1] * n3, s3[2] * n3, s3[3] * n3];
        }(f2, r2, h2, e2.tilePixelRatio), S2 = f2.get("text-max-angle") / 180 * Math.PI, k2 = "viewport" !== f2.get("text-rotation-alignment") && "point" !== f2.get("symbol-placement"), M2 = "map" === f2.get("icon-rotation-alignment") && "point" !== f2.get("symbol-placement"), I2 = f2.get("symbol-placement"), z3 = b2 / 2, P3 = f2.get("icon-text-fit");
        let C2;
        i2 && "none" !== P3 && (e2.allowVerticalPlacement && n2.vertical && (C2 = ec(i2, n2.vertical, P3, f2.get("icon-text-fit-padding"), d2, m2)), y2 && (i2 = ec(i2, y2, P3, f2.get("icon-text-fit-padding"), d2, m2)));
        const B3 = (l3, p4) => {
          p4.x < 0 || p4.x >= $a || p4.y < 0 || p4.y >= $a || function(e3, r3, n3, i3, s3, a3, o3, l4, u4, c3, h3, p5, f3, d3, y3, m3, g3, x3, v3, b3, w4, _3, S3, k3, M3) {
            const I3 = e3.addToLineVertexArray(r3, n3);
            let z4, P4, C3, B4, V3 = 0, E2 = 0, F2 = 0, T2 = 0, $3 = -1, L3 = -1;
            const D2 = {};
            let O3 = ma("");
            if (e3.allowVerticalPlacement && i3.vertical) {
              const t2 = l4.layout.get("text-rotate").evaluate(w4, {}, k3) + 90;
              C3 = new ch(u4, r3, c3, h3, p5, i3.vertical, f3, d3, y3, t2), o3 && (B4 = new ch(u4, r3, c3, h3, p5, o3, g3, x3, y3, t2));
            }
            if (s3) {
              const n4 = l4.layout.get("icon-rotate").evaluate(w4, {}), i4 = "none" !== l4.layout.get("icon-text-fit"), a4 = sh(s3, n4, S3, i4), f4 = o3 ? sh(o3, n4, S3, i4) : void 0;
              P4 = new ch(u4, r3, c3, h3, p5, s3, g3, x3, false, n4), V3 = 4 * a4.length;
              const d4 = e3.iconSizeData;
              let y4 = null;
              "source" === d4.kind ? (y4 = [nc * l4.layout.get("icon-size").evaluate(w4, {})], y4[0] > ic && A(`${e3.layerIds[0]}: Value for "icon-size" is >= ${rc}. Reduce your "icon-size".`)) : "composite" === d4.kind && (y4 = [nc * _3.compositeIconSizes[0].evaluate(w4, {}, k3), nc * _3.compositeIconSizes[1].evaluate(w4, {}, k3)], (y4[0] > ic || y4[1] > ic) && A(`${e3.layerIds[0]}: Value for "icon-size" is >= ${rc}. Reduce your "icon-size".`)), e3.addSymbols(e3.icon, a4, y4, b3, v3, w4, t.ah.none, r3, I3.lineStartIndex, I3.lineLength, -1, k3), $3 = e3.icon.placedSymbolArray.length - 1, f4 && (E2 = 4 * f4.length, e3.addSymbols(e3.icon, f4, y4, b3, v3, w4, t.ah.vertical, r3, I3.lineStartIndex, I3.lineLength, -1, k3), L3 = e3.icon.placedSymbolArray.length - 1);
            }
            const j3 = Object.keys(i3.horizontal);
            for (const n4 of j3) {
              const s4 = i3.horizontal[n4];
              if (!z4) {
                O3 = ma(s4.text);
                const t2 = l4.layout.get("text-rotate").evaluate(w4, {}, k3);
                z4 = new ch(u4, r3, c3, h3, p5, s4, f3, d3, y3, t2);
              }
              const o4 = 1 === s4.positionedLines.length;
              if (F2 += _h(e3, r3, s4, a3, l4, y3, w4, m3, I3, i3.vertical ? t.ah.horizontal : t.ah.horizontalOnly, o4 ? j3 : [n4], D2, $3, _3, k3), o4) break;
            }
            i3.vertical && (T2 += _h(e3, r3, i3.vertical, a3, l4, y3, w4, m3, I3, t.ah.vertical, ["vertical"], D2, L3, _3, k3));
            const R2 = z4 ? z4.boxStartIndex : e3.collisionBoxArray.length, U2 = z4 ? z4.boxEndIndex : e3.collisionBoxArray.length, q3 = C3 ? C3.boxStartIndex : e3.collisionBoxArray.length, N3 = C3 ? C3.boxEndIndex : e3.collisionBoxArray.length, Z3 = P4 ? P4.boxStartIndex : e3.collisionBoxArray.length, G3 = P4 ? P4.boxEndIndex : e3.collisionBoxArray.length, K2 = B4 ? B4.boxStartIndex : e3.collisionBoxArray.length, X3 = B4 ? B4.boxEndIndex : e3.collisionBoxArray.length;
            let H2 = -1;
            const Y2 = (t2, e4) => t2 && t2.circleDiameter ? Math.max(t2.circleDiameter, e4) : e4;
            H2 = Y2(z4, H2), H2 = Y2(C3, H2), H2 = Y2(P4, H2), H2 = Y2(B4, H2);
            const J3 = H2 > -1 ? 1 : 0;
            J3 && (H2 *= M3 / iu), e3.glyphOffsetArray.length >= dc.MAX_GLYPHS && A("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"), void 0 !== w4.sortKey && e3.addToSortKeyRanges(e3.symbolInstances.length, w4.sortKey);
            const W2 = vh(l4, w4, k3), [Q2, tt3] = function(e4, r4) {
              const n4 = e4.length, i4 = null == r4 ? void 0 : r4.values;
              if ((null == i4 ? void 0 : i4.length) > 0) for (let r5 = 0; r5 < i4.length; r5 += 2) {
                const n5 = i4[r5 + 1];
                e4.emplaceBack(t.aq[i4[r5]], n5[0], n5[1]);
              }
              return [n4, e4.length];
            }(e3.textAnchorOffsets, W2);
            e3.symbolInstances.emplaceBack(r3.x, r3.y, D2.right >= 0 ? D2.right : -1, D2.center >= 0 ? D2.center : -1, D2.left >= 0 ? D2.left : -1, D2.vertical || -1, $3, L3, O3, R2, U2, q3, N3, Z3, G3, K2, X3, c3, F2, T2, V3, E2, J3, 0, f3, H2, Q2, tt3);
          }(e2, p4, l3, n2, i2, s2, C2, e2.layers[0], e2.collisionBoxArray, r2.index, r2.sourceLayerIndex, e2.index, g2, [w3, w3, w3, w3], k2, u3, v2, _2, M2, d2, r2, a2, c2, h2, o2);
        };
        if ("line" === I2) for (const t2 of Hc(r2.geometry, 0, 0, $a, $a)) {
          const r3 = rh(t2, b2, S2, n2.vertical || y2, i2, 24, x2, e2.overscaling, $a);
          for (const n3 of r3) y2 && Sh(e2, y2.text, z3, n3) || B3(t2, n3);
        }
        else if ("line-center" === I2) {
          for (const t2 of r2.geometry) if (t2.length > 1) {
            const e3 = eh(t2, S2, n2.vertical || y2, i2, 24, x2);
            e3 && B3(t2, e3);
          }
        } else if ("Polygon" === r2.type) for (const t2 of xr(r2.geometry, 0)) {
          const e3 = ph(t2, 16);
          B3(t2[0], new Yc(e3.x, e3.y, 0));
        }
        else if ("LineString" === r2.type) for (const t2 of r2.geometry) B3(t2, new Yc(t2[0].x, t2[0].y, 0));
        else if ("Point" === r2.type) for (const t2 of r2.geometry) for (const e3 of t2) B3([e3], new Yc(e3.x, e3.y, 0));
      }
      function _h(t2, e2, r2, n2, i2, a2, o2, l2, u3, c2, h2, p3, f2, d2, y2) {
        const m2 = function(t3, e3, r3, n3, i3, a3, o3, l3) {
          const u4 = n3.layout.get("text-rotate").evaluate(a3, {}) * Math.PI / 180, c3 = [];
          for (const t4 of e3.positionedLines) for (const n4 of t4.positionedGlyphs) {
            if (!n4.rect) continue;
            const a4 = n4.rect || {};
            let h3 = Vu + 1, p4 = true, f3 = 1, d3 = 0;
            const y3 = (i3 || l3) && n4.vertical, m3 = n4.metrics.advance * n4.scale / 2;
            if (l3 && e3.verticalizable && (d3 = t4.lineOffset / 2 - (n4.imageName ? -(iu - n4.metrics.width * n4.scale) / 2 : (n4.scale - 1) * iu)), n4.imageName) {
              const t5 = o3[n4.imageName];
              p4 = t5.sdf, f3 = t5.pixelRatio, h3 = Fu / f3;
            }
            const g3 = i3 ? [n4.x + m3, n4.y] : [0, 0];
            let x3 = i3 ? [0, 0] : [n4.x + m3 + r3[0], n4.y + r3[1] - d3], v2 = [0, 0];
            y3 && (v2 = x3, x3 = [0, 0]);
            const b2 = n4.metrics.isDoubleResolution ? 2 : 1, w3 = (n4.metrics.left - h3) * n4.scale - m3 + x3[0], _2 = (-n4.metrics.top - h3) * n4.scale + x3[1], A2 = w3 + a4.w / b2 * n4.scale / f3, S2 = _2 + a4.h / b2 * n4.scale / f3, k2 = new s(w3, _2), M2 = new s(A2, _2), I2 = new s(w3, S2), z3 = new s(A2, S2);
            if (y3) {
              const t5 = new s(-m3, m3 - Du), e4 = -Math.PI / 2, r4 = iu / 2 - m3, i4 = new s(5 - Du - r4, -(n4.imageName ? r4 : 0)), a5 = new s(...v2);
              k2._rotateAround(e4, t5)._add(i4)._add(a5), M2._rotateAround(e4, t5)._add(i4)._add(a5), I2._rotateAround(e4, t5)._add(i4)._add(a5), z3._rotateAround(e4, t5)._add(i4)._add(a5);
            }
            if (u4) {
              const t5 = Math.sin(u4), e4 = Math.cos(u4), r4 = [e4, -t5, t5, e4];
              k2._matMult(r4), M2._matMult(r4), I2._matMult(r4), z3._matMult(r4);
            }
            const P3 = new s(0, 0), C2 = new s(0, 0);
            c3.push({ tl: k2, tr: M2, bl: I2, br: z3, tex: a4, writingMode: e3.writingMode, glyphOffset: g3, sectionIndex: n4.sectionIndex, isSDF: p4, pixelOffsetTL: P3, pixelOffsetBR: C2, minFontScaleX: 0, minFontScaleY: 0 });
          }
          return c3;
        }(0, r2, l2, i2, a2, o2, n2, t2.allowVerticalPlacement), g2 = t2.textSizeData;
        let x2 = null;
        "source" === g2.kind ? (x2 = [nc * i2.layout.get("text-size").evaluate(o2, {})], x2[0] > ic && A(`${t2.layerIds[0]}: Value for "text-size" is >= ${rc}. Reduce your "text-size".`)) : "composite" === g2.kind && (x2 = [nc * d2.compositeTextSizes[0].evaluate(o2, {}, y2), nc * d2.compositeTextSizes[1].evaluate(o2, {}, y2)], (x2[0] > ic || x2[1] > ic) && A(`${t2.layerIds[0]}: Value for "text-size" is >= ${rc}. Reduce your "text-size".`)), t2.addSymbols(t2.text, m2, x2, l2, a2, o2, c2, e2, u3.lineStartIndex, u3.lineLength, f2, y2);
        for (const e3 of h2) p3[e3] = t2.text.placedSymbolArray.length - 1;
        return 4 * m2.length;
      }
      function Ah(t2) {
        for (const e2 in t2) return t2[e2];
        return null;
      }
      function Sh(t2, e2, r2, n2) {
        const i2 = t2.compareText;
        if (e2 in i2) {
          const t3 = i2[e2];
          for (let e3 = t3.length - 1; e3 >= 0; e3--) if (n2.dist(t3[e3]) < r2) return true;
        } else i2[e2] = [];
        return i2[e2].push(n2), false;
      }
      const kh = [Int8Array, Uint8Array, Uint8ClampedArray, Int16Array, Uint16Array, Int32Array, Uint32Array, Float32Array, Float64Array];
      class Mh {
        static from(t2) {
          if (!(t2 instanceof ArrayBuffer)) throw new Error("Data must be an instance of ArrayBuffer.");
          const [e2, r2] = new Uint8Array(t2, 0, 2);
          if (219 !== e2) throw new Error("Data does not appear to be in a KDBush format.");
          const n2 = r2 >> 4;
          if (1 !== n2) throw new Error(`Got v${n2} data when expected v1.`);
          const i2 = kh[15 & r2];
          if (!i2) throw new Error("Unrecognized array type.");
          const [s2] = new Uint16Array(t2, 2, 1), [a2] = new Uint32Array(t2, 4, 1);
          return new Mh(a2, s2, i2, t2);
        }
        constructor(t2, e2 = 64, r2 = Float64Array, n2) {
          if (isNaN(t2) || t2 < 0) throw new Error(`Unpexpected numItems value: ${t2}.`);
          this.numItems = +t2, this.nodeSize = Math.min(Math.max(+e2, 2), 65535), this.ArrayType = r2, this.IndexArrayType = t2 < 65536 ? Uint16Array : Uint32Array;
          const i2 = kh.indexOf(this.ArrayType), s2 = 2 * t2 * this.ArrayType.BYTES_PER_ELEMENT, a2 = t2 * this.IndexArrayType.BYTES_PER_ELEMENT, o2 = (8 - a2 % 8) % 8;
          if (i2 < 0) throw new Error(`Unexpected typed array class: ${r2}.`);
          n2 && n2 instanceof ArrayBuffer ? (this.data = n2, this.ids = new this.IndexArrayType(this.data, 8, t2), this.coords = new this.ArrayType(this.data, 8 + a2 + o2, 2 * t2), this._pos = 2 * t2, this._finished = true) : (this.data = new ArrayBuffer(8 + s2 + a2 + o2), this.ids = new this.IndexArrayType(this.data, 8, t2), this.coords = new this.ArrayType(this.data, 8 + a2 + o2, 2 * t2), this._pos = 0, this._finished = false, new Uint8Array(this.data, 0, 2).set([219, 16 + i2]), new Uint16Array(this.data, 2, 1)[0] = e2, new Uint32Array(this.data, 4, 1)[0] = t2);
        }
        add(t2, e2) {
          const r2 = this._pos >> 1;
          return this.ids[r2] = r2, this.coords[this._pos++] = t2, this.coords[this._pos++] = e2, r2;
        }
        finish() {
          const t2 = this._pos >> 1;
          if (t2 !== this.numItems) throw new Error(`Added ${t2} items when expected ${this.numItems}.`);
          return Ih(this.ids, this.coords, this.nodeSize, 0, this.numItems - 1, 0), this._finished = true, this;
        }
        range(t2, e2, r2, n2) {
          if (!this._finished) throw new Error("Data not yet indexed - call index.finish().");
          const { ids: i2, coords: s2, nodeSize: a2 } = this, o2 = [0, i2.length - 1, 0], l2 = [];
          for (; o2.length; ) {
            const u3 = o2.pop() || 0, c2 = o2.pop() || 0, h2 = o2.pop() || 0;
            if (c2 - h2 <= a2) {
              for (let a3 = h2; a3 <= c2; a3++) {
                const o3 = s2[2 * a3], u4 = s2[2 * a3 + 1];
                o3 >= t2 && o3 <= r2 && u4 >= e2 && u4 <= n2 && l2.push(i2[a3]);
              }
              continue;
            }
            const p3 = h2 + c2 >> 1, f2 = s2[2 * p3], d2 = s2[2 * p3 + 1];
            f2 >= t2 && f2 <= r2 && d2 >= e2 && d2 <= n2 && l2.push(i2[p3]), (0 === u3 ? t2 <= f2 : e2 <= d2) && (o2.push(h2), o2.push(p3 - 1), o2.push(1 - u3)), (0 === u3 ? r2 >= f2 : n2 >= d2) && (o2.push(p3 + 1), o2.push(c2), o2.push(1 - u3));
          }
          return l2;
        }
        within(t2, e2, r2) {
          if (!this._finished) throw new Error("Data not yet indexed - call index.finish().");
          const { ids: n2, coords: i2, nodeSize: s2 } = this, a2 = [0, n2.length - 1, 0], o2 = [], l2 = r2 * r2;
          for (; a2.length; ) {
            const u3 = a2.pop() || 0, c2 = a2.pop() || 0, h2 = a2.pop() || 0;
            if (c2 - h2 <= s2) {
              for (let r3 = h2; r3 <= c2; r3++) Bh(i2[2 * r3], i2[2 * r3 + 1], t2, e2) <= l2 && o2.push(n2[r3]);
              continue;
            }
            const p3 = h2 + c2 >> 1, f2 = i2[2 * p3], d2 = i2[2 * p3 + 1];
            Bh(f2, d2, t2, e2) <= l2 && o2.push(n2[p3]), (0 === u3 ? t2 - r2 <= f2 : e2 - r2 <= d2) && (a2.push(h2), a2.push(p3 - 1), a2.push(1 - u3)), (0 === u3 ? t2 + r2 >= f2 : e2 + r2 >= d2) && (a2.push(p3 + 1), a2.push(c2), a2.push(1 - u3));
          }
          return o2;
        }
      }
      function Ih(t2, e2, r2, n2, i2, s2) {
        if (i2 - n2 <= r2) return;
        const a2 = n2 + i2 >> 1;
        zh(t2, e2, a2, n2, i2, s2), Ih(t2, e2, r2, n2, a2 - 1, 1 - s2), Ih(t2, e2, r2, a2 + 1, i2, 1 - s2);
      }
      function zh(t2, e2, r2, n2, i2, s2) {
        for (; i2 > n2; ) {
          if (i2 - n2 > 600) {
            const a3 = i2 - n2 + 1, o3 = r2 - n2 + 1, l3 = Math.log(a3), u3 = 0.5 * Math.exp(2 * l3 / 3), c2 = 0.5 * Math.sqrt(l3 * u3 * (a3 - u3) / a3) * (o3 - a3 / 2 < 0 ? -1 : 1);
            zh(t2, e2, r2, Math.max(n2, Math.floor(r2 - o3 * u3 / a3 + c2)), Math.min(i2, Math.floor(r2 + (a3 - o3) * u3 / a3 + c2)), s2);
          }
          const a2 = e2[2 * r2 + s2];
          let o2 = n2, l2 = i2;
          for (Ph(t2, e2, n2, r2), e2[2 * i2 + s2] > a2 && Ph(t2, e2, n2, i2); o2 < l2; ) {
            for (Ph(t2, e2, o2, l2), o2++, l2--; e2[2 * o2 + s2] < a2; ) o2++;
            for (; e2[2 * l2 + s2] > a2; ) l2--;
          }
          e2[2 * n2 + s2] === a2 ? Ph(t2, e2, n2, l2) : (l2++, Ph(t2, e2, l2, i2)), l2 <= r2 && (n2 = l2 + 1), r2 <= l2 && (i2 = l2 - 1);
        }
      }
      function Ph(t2, e2, r2, n2) {
        Ch(t2, r2, n2), Ch(e2, 2 * r2, 2 * n2), Ch(e2, 2 * r2 + 1, 2 * n2 + 1);
      }
      function Ch(t2, e2, r2) {
        const n2 = t2[e2];
        t2[e2] = t2[r2], t2[r2] = n2;
      }
      function Bh(t2, e2, r2, n2) {
        const i2 = t2 - r2, s2 = e2 - n2;
        return i2 * i2 + s2 * s2;
      }
      var Vh;
      t.bg = void 0, (Vh = t.bg || (t.bg = {})).create = "create", Vh.load = "load", Vh.fullLoad = "fullLoad";
      let Eh = null, Fh = [];
      const Th = 1e3 / 60, $h = "loadTime", Lh = "fullLoadTime", Dh = { mark(t2) {
        performance.mark(t2);
      }, frame(t2) {
        const e2 = t2;
        null != Eh && Fh.push(e2 - Eh), Eh = e2;
      }, clearMetrics() {
        Eh = null, Fh = [], performance.clearMeasures($h), performance.clearMeasures(Lh);
        for (const e2 in t.bg) performance.clearMarks(t.bg[e2]);
      }, getPerformanceMetrics() {
        performance.measure($h, t.bg.create, t.bg.load), performance.measure(Lh, t.bg.create, t.bg.fullLoad);
        const e2 = performance.getEntriesByName($h)[0].duration, r2 = performance.getEntriesByName(Lh)[0].duration, n2 = Fh.length, i2 = 1 / (Fh.reduce((t2, e3) => t2 + e3, 0) / n2 / 1e3), s2 = Fh.filter((t2) => t2 > Th).reduce((t2, e3) => t2 + (e3 - Th) / Th, 0);
        return { loadTime: e2, fullLoadTime: r2, fps: i2, percentDroppedFrames: s2 / (n2 + s2) * 100, totalFrames: n2 };
      } };
      t.$ = class extends ps {
      }, t.A = oo, t.B = yi, t.C = function(t2) {
        if (null == M) {
          const e2 = t2.navigator ? t2.navigator.userAgent : null;
          M = !!t2.safari || !(!e2 || !(/\b(iPad|iPhone|iPod)\b/.test(e2) || e2.match("Safari") && !e2.match("Chrome")));
        }
        return M;
      }, t.D = Ji, t.E = Z2, t.F = class {
        constructor(t2, e2) {
          this.target = t2, this.mapId = e2, this.resolveRejects = {}, this.tasks = {}, this.taskQueue = [], this.abortControllers = {}, this.messageHandlers = {}, this.invoker = new Ic(() => this.process()), this.subscription = function(t3, e3, r2, n2) {
            return t3.addEventListener(e3, r2, false), { unsubscribe: () => {
              t3.removeEventListener(e3, r2, false);
            } };
          }(this.target, "message", (t3) => this.receive(t3)), this.globalScope = k(self) ? t2 : window;
        }
        registerMessageHandler(t2, e2) {
          this.messageHandlers[t2] = e2;
        }
        sendAsync(t2, e2) {
          return new Promise((r2, n2) => {
            const i2 = Math.round(1e18 * Math.random()).toString(36).substring(0, 10);
            this.resolveRejects[i2] = { resolve: r2, reject: n2 }, e2 && e2.signal.addEventListener("abort", () => {
              delete this.resolveRejects[i2];
              const e3 = { id: i2, type: "<cancel>", origin: location.origin, targetMapId: t2.targetMapId, sourceMapId: this.mapId };
              this.target.postMessage(e3);
            }, { once: true });
            const s2 = [], a2 = Object.assign(Object.assign({}, t2), { id: i2, sourceMapId: this.mapId, origin: location.origin, data: ki(t2.data, s2) });
            this.target.postMessage(a2, { transfer: s2 });
          });
        }
        receive(t2) {
          const e2 = t2.data, r2 = e2.id;
          if (!("file://" !== e2.origin && "file://" !== location.origin && "resource://android" !== e2.origin && "resource://android" !== location.origin && e2.origin !== location.origin || e2.targetMapId && this.mapId !== e2.targetMapId)) {
            if ("<cancel>" === e2.type) {
              delete this.tasks[r2];
              const t3 = this.abortControllers[r2];
              return delete this.abortControllers[r2], void (t3 && t3.abort());
            }
            if (k(self) || e2.mustQueue) return this.tasks[r2] = e2, this.taskQueue.push(r2), void this.invoker.trigger();
            this.processTask(r2, e2);
          }
        }
        process() {
          if (0 === this.taskQueue.length) return;
          const t2 = this.taskQueue.shift(), e2 = this.tasks[t2];
          delete this.tasks[t2], this.taskQueue.length > 0 && this.invoker.trigger(), e2 && this.processTask(t2, e2);
        }
        processTask(t2, r2) {
          return e(this, void 0, void 0, function* () {
            if ("<response>" === r2.type) {
              const e3 = this.resolveRejects[t2];
              if (delete this.resolveRejects[t2], !e3) return;
              return void (r2.error ? e3.reject(Mi(r2.error)) : e3.resolve(Mi(r2.data)));
            }
            if (!this.messageHandlers[r2.type]) return void this.completeTask(t2, new Error(`Could not find a registered handler for ${r2.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));
            const e2 = Mi(r2.data), n2 = new AbortController();
            this.abortControllers[t2] = n2;
            try {
              const i2 = yield this.messageHandlers[r2.type](r2.sourceMapId, e2, n2);
              this.completeTask(t2, null, i2);
            } catch (e3) {
              this.completeTask(t2, e3);
            }
          });
        }
        completeTask(t2, e2, r2) {
          const n2 = [];
          delete this.abortControllers[t2];
          const i2 = { id: t2, type: "<response>", sourceMapId: this.mapId, origin: location.origin, error: e2 ? ki(e2) : null, data: ki(r2, n2) };
          this.target.postMessage(i2, { transfer: n2 });
        }
        remove() {
          this.invoker.remove(), this.subscription.unsubscribe();
        }
      }, t.G = $2, t.H = function() {
        var t2 = new oo(16);
        return oo != Float32Array && (t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[11] = 0, t2[12] = 0, t2[13] = 0, t2[14] = 0), t2[0] = 1, t2[5] = 1, t2[10] = 1, t2[15] = 1, t2;
      }, t.I = Tu, t.J = function(t2, e2, r2) {
        var n2, i2, s2, a2, o2, l2, u3, c2, h2, p3, f2, d2, y2 = r2[0], m2 = r2[1], g2 = r2[2];
        return e2 === t2 ? (t2[12] = e2[0] * y2 + e2[4] * m2 + e2[8] * g2 + e2[12], t2[13] = e2[1] * y2 + e2[5] * m2 + e2[9] * g2 + e2[13], t2[14] = e2[2] * y2 + e2[6] * m2 + e2[10] * g2 + e2[14], t2[15] = e2[3] * y2 + e2[7] * m2 + e2[11] * g2 + e2[15]) : (i2 = e2[1], s2 = e2[2], a2 = e2[3], o2 = e2[4], l2 = e2[5], u3 = e2[6], c2 = e2[7], h2 = e2[8], p3 = e2[9], f2 = e2[10], d2 = e2[11], t2[0] = n2 = e2[0], t2[1] = i2, t2[2] = s2, t2[3] = a2, t2[4] = o2, t2[5] = l2, t2[6] = u3, t2[7] = c2, t2[8] = h2, t2[9] = p3, t2[10] = f2, t2[11] = d2, t2[12] = n2 * y2 + o2 * m2 + h2 * g2 + e2[12], t2[13] = i2 * y2 + l2 * m2 + p3 * g2 + e2[13], t2[14] = s2 * y2 + u3 * m2 + f2 * g2 + e2[14], t2[15] = a2 * y2 + c2 * m2 + d2 * g2 + e2[15]), t2;
      }, t.K = function(t2, e2, r2) {
        var n2 = r2[0], i2 = r2[1], s2 = r2[2];
        return t2[0] = e2[0] * n2, t2[1] = e2[1] * n2, t2[2] = e2[2] * n2, t2[3] = e2[3] * n2, t2[4] = e2[4] * i2, t2[5] = e2[5] * i2, t2[6] = e2[6] * i2, t2[7] = e2[7] * i2, t2[8] = e2[8] * s2, t2[9] = e2[9] * s2, t2[10] = e2[10] * s2, t2[11] = e2[11] * s2, t2[12] = e2[12], t2[13] = e2[13], t2[14] = e2[14], t2[15] = e2[15], t2;
      }, t.L = uo, t.M = function(t2, e2) {
        const r2 = {};
        for (let n2 = 0; n2 < e2.length; n2++) {
          const i2 = e2[n2];
          i2 in t2 && (r2[i2] = t2[i2]);
        }
        return r2;
      }, t.N = Pc, t.O = Vc, t.P = s, t.Q = Ec, t.R = Ao, t.S = jc, t.T = Zi, t.U = h, t.V = p2, t.W = P2, t.X = $a, t.Y = ls, t.Z = $c, t._ = e, t.a = F, t.a$ = function(t2, e2) {
        var r2 = t2[0], n2 = t2[1], i2 = t2[2], s2 = t2[3], a2 = t2[4], o2 = t2[5], l2 = t2[6], u3 = t2[7], c2 = t2[8], h2 = t2[9], p3 = t2[10], f2 = t2[11], d2 = t2[12], y2 = t2[13], m2 = t2[14], g2 = t2[15], x2 = e2[0], v2 = e2[1], b2 = e2[2], w3 = e2[3], _2 = e2[4], A2 = e2[5], S2 = e2[6], k2 = e2[7], M2 = e2[8], I2 = e2[9], z3 = e2[10], P3 = e2[11], C2 = e2[12], B3 = e2[13], V3 = e2[14], E2 = e2[15];
        return Math.abs(r2 - x2) <= ao * Math.max(1, Math.abs(r2), Math.abs(x2)) && Math.abs(n2 - v2) <= ao * Math.max(1, Math.abs(n2), Math.abs(v2)) && Math.abs(i2 - b2) <= ao * Math.max(1, Math.abs(i2), Math.abs(b2)) && Math.abs(s2 - w3) <= ao * Math.max(1, Math.abs(s2), Math.abs(w3)) && Math.abs(a2 - _2) <= ao * Math.max(1, Math.abs(a2), Math.abs(_2)) && Math.abs(o2 - A2) <= ao * Math.max(1, Math.abs(o2), Math.abs(A2)) && Math.abs(l2 - S2) <= ao * Math.max(1, Math.abs(l2), Math.abs(S2)) && Math.abs(u3 - k2) <= ao * Math.max(1, Math.abs(u3), Math.abs(k2)) && Math.abs(c2 - M2) <= ao * Math.max(1, Math.abs(c2), Math.abs(M2)) && Math.abs(h2 - I2) <= ao * Math.max(1, Math.abs(h2), Math.abs(I2)) && Math.abs(p3 - z3) <= ao * Math.max(1, Math.abs(p3), Math.abs(z3)) && Math.abs(f2 - P3) <= ao * Math.max(1, Math.abs(f2), Math.abs(P3)) && Math.abs(d2 - C2) <= ao * Math.max(1, Math.abs(d2), Math.abs(C2)) && Math.abs(y2 - B3) <= ao * Math.max(1, Math.abs(y2), Math.abs(B3)) && Math.abs(m2 - V3) <= ao * Math.max(1, Math.abs(m2), Math.abs(V3)) && Math.abs(g2 - E2) <= ao * Math.max(1, Math.abs(g2), Math.abs(E2));
      }, t.a0 = oa, t.a1 = Dc, t.a2 = it2, t.a3 = (t2) => {
        const e2 = window.document.createElement("video");
        return e2.muted = true, new Promise((r2) => {
          e2.onloadstart = () => {
            r2(e2);
          };
          for (const r3 of t2) {
            const t3 = window.document.createElement("source");
            j2(r3) || (e2.crossOrigin = "Anonymous"), t3.src = r3, e2.appendChild(t3);
          }
        });
      }, t.a4 = function() {
        return x++;
      }, t.a5 = Fs, t.a6 = dc, t.a7 = zn, t.a8 = ja, t.a9 = Nc, t.aA = function(t2) {
        if ("custom" === t2.type) return new Mc(t2);
        switch (t2.type) {
          case "background":
            return new _c(t2);
          case "circle":
            return new fo(t2);
          case "fill":
            return new ul(t2);
          case "fill-extrusion":
            return new El(t2);
          case "heatmap":
            return new Mo(t2);
          case "hillshade":
            return new Po(t2);
          case "line":
            return new Hl(t2);
          case "raster":
            return new kc(t2);
          case "symbol":
            return new vc(t2);
        }
      }, t.aB = w2, t.aC = function(t2, e2) {
        if (!t2) return [{ command: "setStyle", args: [e2] }];
        let r2 = [];
        try {
          if (!H(t2.version, e2.version)) return [{ command: "setStyle", args: [e2] }];
          H(t2.center, e2.center) || r2.push({ command: "setCenter", args: [e2.center] }), H(t2.zoom, e2.zoom) || r2.push({ command: "setZoom", args: [e2.zoom] }), H(t2.bearing, e2.bearing) || r2.push({ command: "setBearing", args: [e2.bearing] }), H(t2.pitch, e2.pitch) || r2.push({ command: "setPitch", args: [e2.pitch] }), H(t2.sprite, e2.sprite) || r2.push({ command: "setSprite", args: [e2.sprite] }), H(t2.glyphs, e2.glyphs) || r2.push({ command: "setGlyphs", args: [e2.glyphs] }), H(t2.transition, e2.transition) || r2.push({ command: "setTransition", args: [e2.transition] }), H(t2.light, e2.light) || r2.push({ command: "setLight", args: [e2.light] }), H(t2.terrain, e2.terrain) || r2.push({ command: "setTerrain", args: [e2.terrain] }), H(t2.sky, e2.sky) || r2.push({ command: "setSky", args: [e2.sky] }), H(t2.projection, e2.projection) || r2.push({ command: "setProjection", args: [e2.projection] });
          const n2 = {}, i2 = [];
          !function(t3, e3, r3, n3) {
            let i3;
            for (i3 in e3 = e3 || {}, t3 = t3 || {}) Object.prototype.hasOwnProperty.call(t3, i3) && (Object.prototype.hasOwnProperty.call(e3, i3) || W(i3, r3, n3));
            for (i3 in e3) Object.prototype.hasOwnProperty.call(e3, i3) && (Object.prototype.hasOwnProperty.call(t3, i3) ? H(t3[i3], e3[i3]) || ("geojson" === t3[i3].type && "geojson" === e3[i3].type && tt2(t3, e3, i3) ? Y(r3, { command: "setGeoJSONSourceData", args: [i3, e3[i3].data] }) : Q(i3, e3, r3, n3)) : J2(i3, e3, r3));
          }(t2.sources, e2.sources, i2, n2);
          const s2 = [];
          t2.layers && t2.layers.forEach((t3) => {
            "source" in t3 && n2[t3.source] ? r2.push({ command: "removeLayer", args: [t3.id] }) : s2.push(t3);
          }), r2 = r2.concat(i2), function(t3, e3, r3) {
            e3 = e3 || [];
            const n3 = (t3 = t3 || []).map(rt2), i3 = e3.map(rt2), s3 = t3.reduce(nt2, {}), a2 = e3.reduce(nt2, {}), o2 = n3.slice(), l2 = /* @__PURE__ */ Object.create(null);
            let u3, c2, h2, p3, f2;
            for (let t4 = 0, e4 = 0; t4 < n3.length; t4++) u3 = n3[t4], Object.prototype.hasOwnProperty.call(a2, u3) ? e4++ : (Y(r3, { command: "removeLayer", args: [u3] }), o2.splice(o2.indexOf(u3, e4), 1));
            for (let t4 = 0, e4 = 0; t4 < i3.length; t4++) u3 = i3[i3.length - 1 - t4], o2[o2.length - 1 - t4] !== u3 && (Object.prototype.hasOwnProperty.call(s3, u3) ? (Y(r3, { command: "removeLayer", args: [u3] }), o2.splice(o2.lastIndexOf(u3, o2.length - e4), 1)) : e4++, p3 = o2[o2.length - t4], Y(r3, { command: "addLayer", args: [a2[u3], p3] }), o2.splice(o2.length - t4, 0, u3), l2[u3] = true);
            for (let t4 = 0; t4 < i3.length; t4++) if (u3 = i3[t4], c2 = s3[u3], h2 = a2[u3], !l2[u3] && !H(c2, h2)) if (H(c2.source, h2.source) && H(c2["source-layer"], h2["source-layer"]) && H(c2.type, h2.type)) {
              for (f2 in et2(c2.layout, h2.layout, r3, u3, null, "setLayoutProperty"), et2(c2.paint, h2.paint, r3, u3, null, "setPaintProperty"), H(c2.filter, h2.filter) || Y(r3, { command: "setFilter", args: [u3, h2.filter] }), H(c2.minzoom, h2.minzoom) && H(c2.maxzoom, h2.maxzoom) || Y(r3, { command: "setLayerZoomRange", args: [u3, h2.minzoom, h2.maxzoom] }), c2) Object.prototype.hasOwnProperty.call(c2, f2) && "layout" !== f2 && "paint" !== f2 && "filter" !== f2 && "metadata" !== f2 && "minzoom" !== f2 && "maxzoom" !== f2 && (0 === f2.indexOf("paint.") ? et2(c2[f2], h2[f2], r3, u3, f2.slice(6), "setPaintProperty") : H(c2[f2], h2[f2]) || Y(r3, { command: "setLayerProperty", args: [u3, f2, h2[f2]] }));
              for (f2 in h2) Object.prototype.hasOwnProperty.call(h2, f2) && !Object.prototype.hasOwnProperty.call(c2, f2) && "layout" !== f2 && "paint" !== f2 && "filter" !== f2 && "metadata" !== f2 && "minzoom" !== f2 && "maxzoom" !== f2 && (0 === f2.indexOf("paint.") ? et2(c2[f2], h2[f2], r3, u3, f2.slice(6), "setPaintProperty") : H(c2[f2], h2[f2]) || Y(r3, { command: "setLayerProperty", args: [u3, f2, h2[f2]] }));
            } else Y(r3, { command: "removeLayer", args: [u3] }), p3 = o2[o2.lastIndexOf(u3) + 1], Y(r3, { command: "addLayer", args: [h2, p3] });
          }(s2, e2.layers, r2);
        } catch (t3) {
          console.warn("Unable to compute style diff:", t3), r2 = [{ command: "setStyle", args: [e2] }];
        }
        return r2;
      }, t.aD = function(t2) {
        const e2 = [], r2 = t2.id;
        return void 0 === r2 && e2.push({ message: `layers.${r2}: missing required property "id"` }), void 0 === t2.render && e2.push({ message: `layers.${r2}: missing required method "render"` }), t2.renderingMode && "2d" !== t2.renderingMode && "3d" !== t2.renderingMode && e2.push({ message: `layers.${r2}: property "renderingMode" must be either "2d" or "3d"` }), e2;
      }, t.aE = function t2(e2, r2) {
        if (Array.isArray(e2)) {
          if (!Array.isArray(r2) || e2.length !== r2.length) return false;
          for (let n2 = 0; n2 < e2.length; n2++) if (!t2(e2[n2], r2[n2])) return false;
          return true;
        }
        if ("object" == typeof e2 && null !== e2 && null !== r2) {
          if ("object" != typeof r2) return false;
          if (Object.keys(e2).length !== Object.keys(r2).length) return false;
          for (const n2 in e2) if (!t2(e2[n2], r2[n2])) return false;
          return true;
        }
        return e2 === r2;
      }, t.aF = v, t.aG = b, t.aH = class extends wa {
        constructor(t2, e2) {
          super(t2, e2), this.current = 0;
        }
        set(t2) {
          this.current !== t2 && (this.current = t2, this.gl.uniform1i(this.location, t2));
        }
      }, t.aI = _a, t.aJ = class extends wa {
        constructor(t2, e2) {
          super(t2, e2), this.current = ka;
        }
        set(t2) {
          if (t2[12] !== this.current[12] || t2[0] !== this.current[0]) return this.current = t2, void this.gl.uniformMatrix4fv(this.location, false, t2);
          for (let e2 = 1; e2 < 16; e2++) if (t2[e2] !== this.current[e2]) {
            this.current = t2, this.gl.uniformMatrix4fv(this.location, false, t2);
            break;
          }
        }
      }, t.aK = Aa, t.aL = Sa, t.aM = Kt, t.aN = class extends wa {
        constructor(t2, e2) {
          super(t2, e2), this.current = [0, 0, 0];
        }
        set(t2) {
          t2[0] === this.current[0] && t2[1] === this.current[1] && t2[2] === this.current[2] || (this.current = t2, this.gl.uniform3f(this.location, t2[0], t2[1], t2[2]));
        }
      }, t.aO = class extends wa {
        constructor(t2, e2) {
          super(t2, e2), this.current = [0, 0];
        }
        set(t2) {
          t2[0] === this.current[0] && t2[1] === this.current[1] || (this.current = t2, this.gl.uniform2f(this.location, t2[0], t2[1]));
        }
      }, t.aP = function(t2, e2, r2, n2, i2, s2, a2) {
        var o2 = 1 / (e2 - r2), l2 = 1 / (n2 - i2), u3 = 1 / (s2 - a2);
        return t2[0] = -2 * o2, t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[5] = -2 * l2, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[10] = 2 * u3, t2[11] = 0, t2[12] = (e2 + r2) * o2, t2[13] = (i2 + n2) * l2, t2[14] = (a2 + s2) * u3, t2[15] = 1, t2;
      }, t.aQ = ho, t.aR = class extends _s {
      }, t.aS = eu, t.aT = class extends Ss {
      }, t.aU = ko, t.aV = function(t2) {
        return t2 <= 1 ? 1 : Math.pow(2, Math.ceil(Math.log(t2) / Math.LN2));
      }, t.aW = So, t.aX = Zs, t.aY = na, t.aZ = class extends Bs {
      }, t.a_ = function(t2, e2) {
        return t2[0] === e2[0] && t2[1] === e2[1] && t2[2] === e2[2] && t2[3] === e2[3] && t2[4] === e2[4] && t2[5] === e2[5] && t2[6] === e2[6] && t2[7] === e2[7] && t2[8] === e2[8] && t2[9] === e2[9] && t2[10] === e2[10] && t2[11] === e2[11] && t2[12] === e2[12] && t2[13] === e2[13] && t2[14] === e2[14] && t2[15] === e2[15];
      }, t.aa = function(t2) {
        const e2 = {};
        if (t2.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g, (t3, r2, n2, i2) => {
          const s2 = n2 || i2;
          return e2[r2] = !s2 || s2.toLowerCase(), "";
        }), e2["max-age"]) {
          const t3 = parseInt(e2["max-age"], 10);
          isNaN(t3) ? delete e2["max-age"] : e2["max-age"] = t3;
        }
        return e2;
      }, t.ab = function(t2, e2) {
        const r2 = [];
        for (const n2 in t2) n2 in e2 || r2.push(n2);
        return r2;
      }, t.ac = y, t.ad = function(t2, e2, r2) {
        var n2 = Math.sin(r2), i2 = Math.cos(r2), s2 = e2[0], a2 = e2[1], o2 = e2[2], l2 = e2[3], u3 = e2[4], c2 = e2[5], h2 = e2[6], p3 = e2[7];
        return e2 !== t2 && (t2[8] = e2[8], t2[9] = e2[9], t2[10] = e2[10], t2[11] = e2[11], t2[12] = e2[12], t2[13] = e2[13], t2[14] = e2[14], t2[15] = e2[15]), t2[0] = s2 * i2 + u3 * n2, t2[1] = a2 * i2 + c2 * n2, t2[2] = o2 * i2 + h2 * n2, t2[3] = l2 * i2 + p3 * n2, t2[4] = u3 * i2 - s2 * n2, t2[5] = c2 * i2 - a2 * n2, t2[6] = h2 * i2 - o2 * n2, t2[7] = p3 * i2 - l2 * n2, t2;
      }, t.ae = function(t2) {
        var e2 = new oo(16);
        return e2[0] = t2[0], e2[1] = t2[1], e2[2] = t2[2], e2[3] = t2[3], e2[4] = t2[4], e2[5] = t2[5], e2[6] = t2[6], e2[7] = t2[7], e2[8] = t2[8], e2[9] = t2[9], e2[10] = t2[10], e2[11] = t2[11], e2[12] = t2[12], e2[13] = t2[13], e2[14] = t2[14], e2[15] = t2[15], e2;
      }, t.af = po, t.ag = function(t2, e2) {
        let r2 = 0, n2 = 0;
        if ("constant" === t2.kind) n2 = t2.layoutSize;
        else if ("source" !== t2.kind) {
          const { interpolationType: i2, minZoom: s2, maxZoom: a2 } = t2, o2 = i2 ? y(Be.interpolationFactor(i2, e2, s2, a2), 0, 1) : 0;
          "camera" === t2.kind ? n2 = Ce2.number(t2.minSize, t2.maxSize, o2) : r2 = o2;
        }
        return { uSizeT: r2, uSize: n2 };
      }, t.ai = function(t2, { uSize: e2, uSizeT: r2 }, { lowerSize: n2, upperSize: i2 }) {
        return "source" === t2.kind ? n2 / nc : "composite" === t2.kind ? Ce2.number(n2 / nc, i2 / nc, r2) : e2;
      }, t.aj = cc, t.ak = function(t2, e2, r2, n2) {
        const i2 = e2.y - t2.y, a2 = e2.x - t2.x, o2 = n2.y - r2.y, l2 = n2.x - r2.x, u3 = o2 * a2 - l2 * i2;
        if (0 === u3) return null;
        const c2 = (l2 * (t2.y - r2.y) - o2 * (t2.x - r2.x)) / u3;
        return new s(t2.x + c2 * a2, t2.y + c2 * i2);
      }, t.al = Hc, t.am = qa, t.an = lo, t.ao = function(t2) {
        let e2 = 1 / 0, r2 = 1 / 0, n2 = -1 / 0, i2 = -1 / 0;
        for (const s2 of t2) e2 = Math.min(e2, s2.x), r2 = Math.min(r2, s2.y), n2 = Math.max(n2, s2.x), i2 = Math.max(i2, s2.y);
        return [e2, r2, n2, i2];
      }, t.ap = iu, t.ar = ac, t.as = function(t2, e2) {
        var r2 = e2[0], n2 = e2[1], i2 = e2[2], s2 = e2[3], a2 = e2[4], o2 = e2[5], l2 = e2[6], u3 = e2[7], c2 = e2[8], h2 = e2[9], p3 = e2[10], f2 = e2[11], d2 = e2[12], y2 = e2[13], m2 = e2[14], g2 = e2[15], x2 = r2 * o2 - n2 * a2, v2 = r2 * l2 - i2 * a2, b2 = r2 * u3 - s2 * a2, w3 = n2 * l2 - i2 * o2, _2 = n2 * u3 - s2 * o2, A2 = i2 * u3 - s2 * l2, S2 = c2 * y2 - h2 * d2, k2 = c2 * m2 - p3 * d2, M2 = c2 * g2 - f2 * d2, I2 = h2 * m2 - p3 * y2, z3 = h2 * g2 - f2 * y2, P3 = p3 * g2 - f2 * m2, C2 = x2 * P3 - v2 * z3 + b2 * I2 + w3 * M2 - _2 * k2 + A2 * S2;
        return C2 ? (t2[0] = (o2 * P3 - l2 * z3 + u3 * I2) * (C2 = 1 / C2), t2[1] = (i2 * z3 - n2 * P3 - s2 * I2) * C2, t2[2] = (y2 * A2 - m2 * _2 + g2 * w3) * C2, t2[3] = (p3 * _2 - h2 * A2 - f2 * w3) * C2, t2[4] = (l2 * M2 - a2 * P3 - u3 * k2) * C2, t2[5] = (r2 * P3 - i2 * M2 + s2 * k2) * C2, t2[6] = (m2 * b2 - d2 * A2 - g2 * v2) * C2, t2[7] = (c2 * A2 - p3 * b2 + f2 * v2) * C2, t2[8] = (a2 * z3 - o2 * M2 + u3 * S2) * C2, t2[9] = (n2 * M2 - r2 * z3 - s2 * S2) * C2, t2[10] = (d2 * _2 - y2 * b2 + g2 * x2) * C2, t2[11] = (h2 * b2 - c2 * _2 - f2 * x2) * C2, t2[12] = (o2 * k2 - a2 * I2 - l2 * S2) * C2, t2[13] = (r2 * I2 - n2 * k2 + i2 * S2) * C2, t2[14] = (y2 * v2 - d2 * w3 - m2 * x2) * C2, t2[15] = (c2 * w3 - h2 * v2 + p3 * x2) * C2, t2) : null;
      }, t.at = bh, t.au = Ju, t.av = Mh, t.aw = function() {
        const t2 = {}, e2 = G2.$version;
        for (const r2 in G2.$root) {
          const n2 = G2.$root[r2];
          if (n2.required) {
            let i2 = null;
            i2 = "version" === r2 ? e2 : "array" === n2.type ? [] : {}, null != i2 && (t2[r2] = i2);
          }
        }
        return t2;
      }, t.ax = Ii, t.ay = D, t.az = function(t2) {
        t2 = t2.slice();
        const e2 = /* @__PURE__ */ Object.create(null);
        for (let r2 = 0; r2 < t2.length; r2++) e2[t2[r2].id] = t2[r2];
        for (let r2 = 0; r2 < t2.length; r2++) "ref" in t2[r2] && (t2[r2] = X2(t2[r2], e2[t2[r2].ref]));
        return t2;
      }, t.b = I, t.b0 = function(t2, e2) {
        return t2[0] = e2[0], t2[1] = e2[1], t2[2] = e2[2], t2[3] = e2[3], t2[4] = e2[4], t2[5] = e2[5], t2[6] = e2[6], t2[7] = e2[7], t2[8] = e2[8], t2[9] = e2[9], t2[10] = e2[10], t2[11] = e2[11], t2[12] = e2[12], t2[13] = e2[13], t2[14] = e2[14], t2[15] = e2[15], t2;
      }, t.b1 = function(t2, e2, r2) {
        return t2[0] = e2[0] * r2[0], t2[1] = e2[1] * r2[1], t2[2] = e2[2] * r2[2], t2[3] = e2[3] * r2[3], t2;
      }, t.b2 = function(t2, e2) {
        return t2[0] * e2[0] + t2[1] * e2[1] + t2[2] * e2[2] + t2[3] * e2[3];
      }, t.b3 = m, t.b4 = Oc, t.b5 = Fc, t.b6 = function(t2, e2, r2, n2, i2) {
        var s2, a2 = 1 / Math.tan(e2 / 2);
        return t2[0] = a2 / r2, t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[5] = a2, t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[11] = -1, t2[12] = 0, t2[13] = 0, t2[15] = 0, null != i2 && i2 !== 1 / 0 ? (t2[10] = (i2 + n2) * (s2 = 1 / (n2 - i2)), t2[14] = 2 * i2 * n2 * s2) : (t2[10] = -1, t2[14] = -2 * n2), t2;
      }, t.b7 = function(t2, e2, r2) {
        var n2 = Math.sin(r2), i2 = Math.cos(r2), s2 = e2[4], a2 = e2[5], o2 = e2[6], l2 = e2[7], u3 = e2[8], c2 = e2[9], h2 = e2[10], p3 = e2[11];
        return e2 !== t2 && (t2[0] = e2[0], t2[1] = e2[1], t2[2] = e2[2], t2[3] = e2[3], t2[12] = e2[12], t2[13] = e2[13], t2[14] = e2[14], t2[15] = e2[15]), t2[4] = s2 * i2 + u3 * n2, t2[5] = a2 * i2 + c2 * n2, t2[6] = o2 * i2 + h2 * n2, t2[7] = l2 * i2 + p3 * n2, t2[8] = u3 * i2 - s2 * n2, t2[9] = c2 * i2 - a2 * n2, t2[10] = h2 * i2 - o2 * n2, t2[11] = p3 * i2 - l2 * n2, t2;
      }, t.b8 = f, t.b9 = d, t.bA = su, t.bB = function(t2) {
        return t2.message === V2;
      }, t.bC = bn, t.bD = Ri, t.ba = function(t2) {
        return t2 * Math.PI / 180;
      }, t.bb = function(t2, e2) {
        const { x: r2, y: n2 } = $c.fromLngLat(e2);
        return !(t2 < 0 || t2 > 25 || n2 < 0 || n2 >= 1 || r2 < 0 || r2 >= 1);
      }, t.bc = function(t2, e2) {
        return t2[0] = e2[0], t2[1] = 0, t2[2] = 0, t2[3] = 0, t2[4] = 0, t2[5] = e2[1], t2[6] = 0, t2[7] = 0, t2[8] = 0, t2[9] = 0, t2[10] = e2[2], t2[11] = 0, t2[12] = 0, t2[13] = 0, t2[14] = 0, t2[15] = 1, t2;
      }, t.bd = class extends hs {
      }, t.be = zc, t.bf = Dh, t.bh = L2, t.bi = function(t2, e2) {
        F.REGISTERED_PROTOCOLS[t2] = e2;
      }, t.bj = function(t2) {
        delete F.REGISTERED_PROTOCOLS[t2];
      }, t.bk = function(t2, e2) {
        const r2 = {};
        for (let n3 = 0; n3 < t2.length; n3++) {
          const i2 = e2 && e2[t2[n3].id] || Ln(t2[n3]);
          e2 && (e2[t2[n3].id] = i2);
          let s2 = r2[i2];
          s2 || (s2 = r2[i2] = []), s2.push(t2[n3]);
        }
        const n2 = [];
        for (const t3 in r2) n2.push(r2[t3]);
        return n2;
      }, t.bl = wi, t.bm = qc, t.bn = Zc, t.bo = $u, t.bp = function(e2) {
        e2.bucket.createArrays(), e2.bucket.tilePixelRatio = $a / (512 * e2.bucket.overscaling), e2.bucket.compareText = {}, e2.bucket.iconsNeedLinear = false;
        const r2 = e2.bucket.layers[0], n2 = r2.layout, i2 = r2._unevaluatedLayout._values, s2 = { layoutIconSize: i2["icon-size"].possiblyEvaluate(new Ui(e2.bucket.zoom + 1), e2.canonical), layoutTextSize: i2["text-size"].possiblyEvaluate(new Ui(e2.bucket.zoom + 1), e2.canonical), textMaxSize: i2["text-size"].possiblyEvaluate(new Ui(18)) };
        if ("composite" === e2.bucket.textSizeData.kind) {
          const { minZoom: t2, maxZoom: r3 } = e2.bucket.textSizeData;
          s2.compositeTextSizes = [i2["text-size"].possiblyEvaluate(new Ui(t2), e2.canonical), i2["text-size"].possiblyEvaluate(new Ui(r3), e2.canonical)];
        }
        if ("composite" === e2.bucket.iconSizeData.kind) {
          const { minZoom: t2, maxZoom: r3 } = e2.bucket.iconSizeData;
          s2.compositeIconSizes = [i2["icon-size"].possiblyEvaluate(new Ui(t2), e2.canonical), i2["icon-size"].possiblyEvaluate(new Ui(r3), e2.canonical)];
        }
        const a2 = n2.get("text-line-height") * iu, o2 = "viewport" !== n2.get("text-rotation-alignment") && "point" !== n2.get("symbol-placement"), l2 = n2.get("text-keep-upright"), u3 = n2.get("text-size");
        for (const i3 of e2.bucket.features) {
          const c2 = n2.get("text-font").evaluate(i3, {}, e2.canonical).join(","), h2 = u3.evaluate(i3, {}, e2.canonical), p3 = s2.layoutTextSize.evaluate(i3, {}, e2.canonical), f2 = s2.layoutIconSize.evaluate(i3, {}, e2.canonical), d2 = { horizontal: {}, vertical: void 0 }, y2 = i3.text;
          let m2, g2 = [0, 0];
          if (y2) {
            const s3 = y2.toString(), u4 = n2.get("text-letter-spacing").evaluate(i3, {}, e2.canonical) * iu, f3 = Ci(s3) ? u4 : 0, m3 = n2.get("text-anchor").evaluate(i3, {}, e2.canonical), x3 = vh(r2, i3, e2.canonical);
            if (!x3) {
              const t2 = n2.get("text-radial-offset").evaluate(i3, {}, e2.canonical);
              g2 = t2 ? xh(m3, [t2 * iu, gh]) : n2.get("text-offset").evaluate(i3, {}, e2.canonical).map((t3) => t3 * iu);
            }
            let v3 = o2 ? "center" : n2.get("text-justify").evaluate(i3, {}, e2.canonical);
            const b2 = "point" === n2.get("symbol-placement") ? n2.get("text-max-width").evaluate(i3, {}, e2.canonical) * iu : 1 / 0, w3 = () => {
              e2.bucket.allowVerticalPlacement && Pi(s3) && (d2.vertical = Ru(y2, e2.glyphMap, e2.glyphPositions, e2.imagePositions, c2, b2, a2, m3, "left", f3, g2, t.ah.vertical, true, p3, h2));
            };
            if (!o2 && x3) {
              const r3 = /* @__PURE__ */ new Set();
              if ("auto" === v3) for (let t2 = 0; t2 < x3.values.length; t2 += 2) r3.add(bh(x3.values[t2]));
              else r3.add(v3);
              let n3 = false;
              for (const i4 of r3) if (!d2.horizontal[i4]) if (n3) d2.horizontal[i4] = d2.horizontal[0];
              else {
                const r4 = Ru(y2, e2.glyphMap, e2.glyphPositions, e2.imagePositions, c2, b2, a2, "center", i4, f3, g2, t.ah.horizontal, false, p3, h2);
                r4 && (d2.horizontal[i4] = r4, n3 = 1 === r4.positionedLines.length);
              }
              w3();
            } else {
              "auto" === v3 && (v3 = bh(m3));
              const r3 = Ru(y2, e2.glyphMap, e2.glyphPositions, e2.imagePositions, c2, b2, a2, m3, v3, f3, g2, t.ah.horizontal, false, p3, h2);
              r3 && (d2.horizontal[v3] = r3), w3(), Pi(s3) && o2 && l2 && (d2.vertical = Ru(y2, e2.glyphMap, e2.glyphPositions, e2.imagePositions, c2, b2, a2, m3, v3, f3, g2, t.ah.vertical, false, p3, h2));
            }
          }
          let x2 = false;
          if (i3.icon && i3.icon.name) {
            const t2 = e2.imageMap[i3.icon.name];
            t2 && (m2 = Qu(e2.imagePositions[i3.icon.name], n2.get("icon-offset").evaluate(i3, {}, e2.canonical), n2.get("icon-anchor").evaluate(i3, {}, e2.canonical)), x2 = !!t2.sdf, void 0 === e2.bucket.sdfIcons ? e2.bucket.sdfIcons = x2 : e2.bucket.sdfIcons !== x2 && A("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"), (t2.pixelRatio !== e2.bucket.pixelRatio || 0 !== n2.get("icon-rotate").constantOr(1)) && (e2.bucket.iconsNeedLinear = true));
          }
          const v2 = Ah(d2.horizontal) || d2.vertical;
          e2.bucket.iconsInText = !!v2 && v2.iconsInText, (v2 || m2) && wh(e2.bucket, i3, d2, m2, e2.imageMap, s2, p3, f2, g2, x2, e2.canonical);
        }
        e2.showCollisionBoxes && e2.bucket.generateCollisionDebugBuffers();
      }, t.bq = ql, t.br = sl, t.bs = zl, t.bt = fl, t.bu = Iu, t.bv = class {
        constructor(t2) {
          this._marks = { start: [t2.url, "start"].join("#"), end: [t2.url, "end"].join("#"), measure: t2.url.toString() }, performance.mark(this._marks.start);
        }
        finish() {
          performance.mark(this._marks.end);
          let t2 = performance.getEntriesByName(this._marks.measure);
          return 0 === t2.length && (performance.measure(this._marks.measure, this._marks.start, this._marks.end), t2 = performance.getEntriesByName(this._marks.measure), performance.clearMarks(this._marks.start), performance.clearMarks(this._marks.end), performance.clearMeasures(this._marks.measure)), t2;
        }
      }, t.bw = function(t2, r2, n2, i2, s2) {
        return e(this, void 0, void 0, function* () {
          if (p2()) try {
            return yield P2(t2, r2, n2, i2, s2);
          } catch (t3) {
          }
          return function(t3, e2, r3, n3, i3) {
            const s3 = t3.width, a2 = t3.height;
            C && B2 || (C = new OffscreenCanvas(s3, a2), B2 = C.getContext("2d", { willReadFrequently: true })), C.width = s3, C.height = a2, B2.drawImage(t3, 0, 0, s3, a2);
            const o2 = B2.getImageData(e2, r3, n3, i3);
            return B2.clearRect(0, 0, s3, a2), o2.data;
          }(t2, r2, n2, i2, s2);
        });
      }, t.bx = Uc, t.by = r, t.bz = n, t.c = E, t.d = (t2) => e(void 0, void 0, void 0, function* () {
        if (0 === t2.byteLength) return createImageBitmap(new ImageData(1, 1));
        const e2 = new Blob([new Uint8Array(t2)], { type: "image/png" });
        try {
          return createImageBitmap(e2);
        } catch (t3) {
          throw new Error(`Could not load image because of ${t3.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`);
        }
      }), t.e = g, t.f = (t2) => new Promise((e2, r2) => {
        const n2 = new Image();
        n2.onload = () => {
          e2(n2), URL.revokeObjectURL(n2.src), n2.onload = null, window.requestAnimationFrame(() => {
            n2.src = z2;
          });
        }, n2.onerror = () => r2(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));
        const i2 = new Blob([new Uint8Array(t2)], { type: "image/png" });
        n2.src = t2.byteLength ? URL.createObjectURL(i2) : z2;
      }), t.g = T, t.h = (t2, e2) => O2(g(t2, { type: "json" }), e2), t.i = k, t.j = N2, t.k = q2, t.l = (t2, e2) => O2(g(t2, { type: "arrayBuffer" }), e2), t.m = O2, t.n = function(t2) {
        return new Iu(t2).readFields(Pu, []);
      }, t.o = _o, t.p = Eu, t.q = rs, t.r = di, t.s = j2, t.t = xi, t.u = fi, t.v = G2, t.w = A, t.x = function([t2, e2, r2]) {
        return e2 += 90, e2 *= Math.PI / 180, r2 *= Math.PI / 180, { x: t2 * Math.cos(e2) * Math.sin(r2), y: t2 * Math.sin(e2) * Math.sin(r2), z: t2 * Math.cos(r2) };
      }, t.y = Ce2, t.z = Ui;
    });
    define("worker", ["./shared"], function(e) {
      class t {
        constructor(e2) {
          this.keyCache = {}, e2 && this.replace(e2);
        }
        replace(e2) {
          this._layerConfigs = {}, this._layers = {}, this.update(e2, []);
        }
        update(t2, o2) {
          for (const o3 of t2) {
            this._layerConfigs[o3.id] = o3;
            const t3 = this._layers[o3.id] = e.aA(o3);
            t3._featureFilter = e.a7(t3.filter), this.keyCache[o3.id] && delete this.keyCache[o3.id];
          }
          for (const e2 of o2) delete this.keyCache[e2], delete this._layerConfigs[e2], delete this._layers[e2];
          this.familiesBySource = {};
          const i2 = e.bk(Object.values(this._layerConfigs), this.keyCache);
          for (const e2 of i2) {
            const t3 = e2.map((e3) => this._layers[e3.id]), o3 = t3[0];
            if ("none" === o3.visibility) continue;
            const i3 = o3.source || "";
            let s2 = this.familiesBySource[i3];
            s2 || (s2 = this.familiesBySource[i3] = {});
            const r2 = o3.sourceLayer || "_geojsonTileLayer";
            let n2 = s2[r2];
            n2 || (n2 = s2[r2] = []), n2.push(t3);
          }
        }
      }
      class o {
        constructor(t2) {
          const o2 = {}, i2 = [];
          for (const e2 in t2) {
            const s3 = t2[e2], r3 = o2[e2] = {};
            for (const e3 in s3) {
              const t3 = s3[+e3];
              if (!t3 || 0 === t3.bitmap.width || 0 === t3.bitmap.height) continue;
              const o3 = { x: 0, y: 0, w: t3.bitmap.width + 2, h: t3.bitmap.height + 2 };
              i2.push(o3), r3[e3] = { rect: o3, metrics: t3.metrics };
            }
          }
          const { w: s2, h: r2 } = e.p(i2), n2 = new e.o({ width: s2 || 1, height: r2 || 1 });
          for (const i3 in t2) {
            const s3 = t2[i3];
            for (const t3 in s3) {
              const r3 = s3[+t3];
              if (!r3 || 0 === r3.bitmap.width || 0 === r3.bitmap.height) continue;
              const a2 = o2[i3][t3].rect;
              e.o.copy(r3.bitmap, n2, { x: 0, y: 0 }, { x: a2.x + 1, y: a2.y + 1 }, r3.bitmap);
            }
          }
          this.image = n2, this.positions = o2;
        }
      }
      e.bl("GlyphAtlas", o);
      class i {
        constructor(t2) {
          this.tileID = new e.S(t2.tileID.overscaledZ, t2.tileID.wrap, t2.tileID.canonical.z, t2.tileID.canonical.x, t2.tileID.canonical.y), this.uid = t2.uid, this.zoom = t2.zoom, this.pixelRatio = t2.pixelRatio, this.tileSize = t2.tileSize, this.source = t2.source, this.overscaling = this.tileID.overscaleFactor(), this.showCollisionBoxes = t2.showCollisionBoxes, this.collectResourceTiming = !!t2.collectResourceTiming, this.returnDependencies = !!t2.returnDependencies, this.promoteId = t2.promoteId, this.inFlightDependencies = [];
        }
        parse(t2, i2, r2, n2) {
          return e._(this, void 0, void 0, function* () {
            this.status = "parsing", this.data = t2, this.collisionBoxArray = new e.a5();
            const a2 = new e.bm(Object.keys(t2.layers).sort()), l2 = new e.bn(this.tileID, this.promoteId);
            l2.bucketLayerIDs = [];
            const c2 = {}, u3 = { featureIndex: l2, iconDependencies: {}, patternDependencies: {}, glyphDependencies: {}, availableImages: r2 }, h2 = i2.familiesBySource[this.source];
            for (const o2 in h2) {
              const i3 = t2.layers[o2];
              if (!i3) continue;
              1 === i3.version && e.w(`Vector tile source "${this.source}" layer "${o2}" does not use vector tile spec v2 and therefore may have some rendering errors.`);
              const n3 = a2.encode(o2), d3 = [];
              for (let e2 = 0; e2 < i3.length; e2++) {
                const t3 = i3.feature(e2), s2 = l2.getId(t3, o2);
                d3.push({ feature: t3, id: s2, index: e2, sourceLayerIndex: n3 });
              }
              for (const t3 of h2[o2]) {
                const o3 = t3[0];
                o3.source !== this.source && e.w(`layer.source = ${o3.source} does not equal this.source = ${this.source}`), o3.minzoom && this.zoom < Math.floor(o3.minzoom) || o3.maxzoom && this.zoom >= o3.maxzoom || "none" !== o3.visibility && (s(t3, this.zoom, r2), (c2[o3.id] = o3.createBucket({ index: l2.bucketLayerIDs.length, layers: t3, zoom: this.zoom, pixelRatio: this.pixelRatio, overscaling: this.overscaling, collisionBoxArray: this.collisionBoxArray, sourceLayerIndex: n3, sourceID: this.source })).populate(d3, u3, this.tileID.canonical), l2.bucketLayerIDs.push(t3.map((e2) => e2.id)));
              }
            }
            const d2 = e.aF(u3.glyphDependencies, (e2) => Object.keys(e2).map(Number));
            this.inFlightDependencies.forEach((e2) => null == e2 ? void 0 : e2.abort()), this.inFlightDependencies = [];
            let f2 = Promise.resolve({});
            if (Object.keys(d2).length) {
              const e2 = new AbortController();
              this.inFlightDependencies.push(e2), f2 = n2.sendAsync({ type: "GG", data: { stacks: d2, source: this.source, tileID: this.tileID, type: "glyphs" } }, e2);
            }
            const g2 = Object.keys(u3.iconDependencies);
            let p3 = Promise.resolve({});
            if (g2.length) {
              const e2 = new AbortController();
              this.inFlightDependencies.push(e2), p3 = n2.sendAsync({ type: "GI", data: { icons: g2, source: this.source, tileID: this.tileID, type: "icons" } }, e2);
            }
            const m2 = Object.keys(u3.patternDependencies);
            let y2 = Promise.resolve({});
            if (m2.length) {
              const e2 = new AbortController();
              this.inFlightDependencies.push(e2), y2 = n2.sendAsync({ type: "GI", data: { icons: m2, source: this.source, tileID: this.tileID, type: "patterns" } }, e2);
            }
            const [v2, w3, x2] = yield Promise.all([f2, p3, y2]), b2 = new o(v2), S2 = new e.bo(w3, x2);
            for (const t3 in c2) {
              const o2 = c2[t3];
              o2 instanceof e.a6 ? (s(o2.layers, this.zoom, r2), e.bp({ bucket: o2, glyphMap: v2, glyphPositions: b2.positions, imageMap: w3, imagePositions: S2.iconPositions, showCollisionBoxes: this.showCollisionBoxes, canonical: this.tileID.canonical })) : o2.hasPattern && (o2 instanceof e.bq || o2 instanceof e.br || o2 instanceof e.bs) && (s(o2.layers, this.zoom, r2), o2.addFeatures(u3, this.tileID.canonical, S2.patternPositions));
            }
            return this.status = "done", { buckets: Object.values(c2).filter((e2) => !e2.isEmpty()), featureIndex: l2, collisionBoxArray: this.collisionBoxArray, glyphAtlasImage: b2.image, imageAtlas: S2, glyphMap: this.returnDependencies ? v2 : null, iconMap: this.returnDependencies ? w3 : null, glyphPositions: this.returnDependencies ? b2.positions : null };
          });
        }
      }
      function s(t2, o2, i2) {
        const s2 = new e.z(o2);
        for (const e2 of t2) e2.recalculate(s2, i2);
      }
      class r {
        constructor(e2, t2, o2) {
          this.actor = e2, this.layerIndex = t2, this.availableImages = o2, this.fetching = {}, this.loading = {}, this.loaded = {};
        }
        loadVectorTile(t2, o2) {
          return e._(this, void 0, void 0, function* () {
            const i2 = yield e.l(t2.request, o2);
            try {
              return { vectorTile: new e.bt.VectorTile(new e.bu(i2.data)), rawData: i2.data, cacheControl: i2.cacheControl, expires: i2.expires };
            } catch (e2) {
              const o3 = new Uint8Array(i2.data);
              let s2 = `Unable to parse the tile at ${t2.request.url}, `;
              throw s2 += 31 === o3[0] && 139 === o3[1] ? "please make sure the data is not gzipped and that you have configured the relevant header in the server" : `got error: ${e2.message}`, new Error(s2);
            }
          });
        }
        loadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            const o2 = t2.uid, s2 = !!(t2 && t2.request && t2.request.collectResourceTiming) && new e.bv(t2.request), r2 = new i(t2);
            this.loading[o2] = r2;
            const n2 = new AbortController();
            r2.abort = n2;
            try {
              const i2 = yield this.loadVectorTile(t2, n2);
              if (delete this.loading[o2], !i2) return null;
              const a2 = i2.rawData, l2 = {};
              i2.expires && (l2.expires = i2.expires), i2.cacheControl && (l2.cacheControl = i2.cacheControl);
              const c2 = {};
              if (s2) {
                const e2 = s2.finish();
                e2 && (c2.resourceTiming = JSON.parse(JSON.stringify(e2)));
              }
              r2.vectorTile = i2.vectorTile;
              const u3 = r2.parse(i2.vectorTile, this.layerIndex, this.availableImages, this.actor);
              this.loaded[o2] = r2, this.fetching[o2] = { rawTileData: a2, cacheControl: l2, resourceTiming: c2 };
              try {
                const t3 = yield u3;
                return e.e({ rawTileData: a2.slice(0) }, t3, l2, c2);
              } finally {
                delete this.fetching[o2];
              }
            } catch (e2) {
              throw delete this.loading[o2], r2.status = "done", this.loaded[o2] = r2, e2;
            }
          });
        }
        reloadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            const o2 = t2.uid;
            if (!this.loaded || !this.loaded[o2]) throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");
            const i2 = this.loaded[o2];
            if (i2.showCollisionBoxes = t2.showCollisionBoxes, "parsing" === i2.status) {
              const t3 = yield i2.parse(i2.vectorTile, this.layerIndex, this.availableImages, this.actor);
              let s2;
              if (this.fetching[o2]) {
                const { rawTileData: i3, cacheControl: r2, resourceTiming: n2 } = this.fetching[o2];
                delete this.fetching[o2], s2 = e.e({ rawTileData: i3.slice(0) }, t3, r2, n2);
              } else s2 = t3;
              return s2;
            }
            if ("done" === i2.status && i2.vectorTile) return i2.parse(i2.vectorTile, this.layerIndex, this.availableImages, this.actor);
          });
        }
        abortTile(t2) {
          return e._(this, void 0, void 0, function* () {
            const e2 = this.loading, o2 = t2.uid;
            e2 && e2[o2] && e2[o2].abort && (e2[o2].abort.abort(), delete e2[o2]);
          });
        }
        removeTile(t2) {
          return e._(this, void 0, void 0, function* () {
            this.loaded && this.loaded[t2.uid] && delete this.loaded[t2.uid];
          });
        }
      }
      class n {
        constructor() {
          this.loaded = {};
        }
        loadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            const { uid: o2, encoding: i2, rawImageData: s2, redFactor: r2, greenFactor: n2, blueFactor: a2, baseShift: l2 } = t2, c2 = s2.width + 2, u3 = s2.height + 2, h2 = e.b(s2) ? new e.R({ width: c2, height: u3 }, yield e.bw(s2, -1, -1, c2, u3)) : s2, d2 = new e.bx(o2, h2, i2, r2, n2, a2, l2);
            return this.loaded = this.loaded || {}, this.loaded[o2] = d2, d2;
          });
        }
        removeTile(e2) {
          const t2 = this.loaded, o2 = e2.uid;
          t2 && t2[o2] && delete t2[o2];
        }
      }
      function a(e2, t2) {
        if (0 !== e2.length) {
          l(e2[0], t2);
          for (var o2 = 1; o2 < e2.length; o2++) l(e2[o2], !t2);
        }
      }
      function l(e2, t2) {
        for (var o2 = 0, i2 = 0, s2 = 0, r2 = e2.length, n2 = r2 - 1; s2 < r2; n2 = s2++) {
          var a2 = (e2[s2][0] - e2[n2][0]) * (e2[n2][1] + e2[s2][1]), l2 = o2 + a2;
          i2 += Math.abs(o2) >= Math.abs(a2) ? o2 - l2 + a2 : a2 - l2 + o2, o2 = l2;
        }
        o2 + i2 >= 0 != !!t2 && e2.reverse();
      }
      var c = e.by(function e2(t2, o2) {
        var i2, s2 = t2 && t2.type;
        if ("FeatureCollection" === s2) for (i2 = 0; i2 < t2.features.length; i2++) e2(t2.features[i2], o2);
        else if ("GeometryCollection" === s2) for (i2 = 0; i2 < t2.geometries.length; i2++) e2(t2.geometries[i2], o2);
        else if ("Feature" === s2) e2(t2.geometry, o2);
        else if ("Polygon" === s2) a(t2.coordinates, o2);
        else if ("MultiPolygon" === s2) for (i2 = 0; i2 < t2.coordinates.length; i2++) a(t2.coordinates[i2], o2);
        return t2;
      });
      const u2 = e.bt.VectorTileFeature.prototype.toGeoJSON;
      var h = { exports: {} }, d = e.bz, f = e.bt.VectorTileFeature, g = p2;
      function p2(e2, t2) {
        this.options = t2 || {}, this.features = e2, this.length = e2.length;
      }
      function m(e2, t2) {
        this.id = "number" == typeof e2.id ? e2.id : void 0, this.type = e2.type, this.rawGeometry = 1 === e2.type ? [e2.geometry] : e2.geometry, this.properties = e2.tags, this.extent = t2 || 4096;
      }
      p2.prototype.feature = function(e2) {
        return new m(this.features[e2], this.options.extent);
      }, m.prototype.loadGeometry = function() {
        var e2 = this.rawGeometry;
        this.geometry = [];
        for (var t2 = 0; t2 < e2.length; t2++) {
          for (var o2 = e2[t2], i2 = [], s2 = 0; s2 < o2.length; s2++) i2.push(new d(o2[s2][0], o2[s2][1]));
          this.geometry.push(i2);
        }
        return this.geometry;
      }, m.prototype.bbox = function() {
        this.geometry || this.loadGeometry();
        for (var e2 = this.geometry, t2 = 1 / 0, o2 = -1 / 0, i2 = 1 / 0, s2 = -1 / 0, r2 = 0; r2 < e2.length; r2++) for (var n2 = e2[r2], a2 = 0; a2 < n2.length; a2++) {
          var l2 = n2[a2];
          t2 = Math.min(t2, l2.x), o2 = Math.max(o2, l2.x), i2 = Math.min(i2, l2.y), s2 = Math.max(s2, l2.y);
        }
        return [t2, i2, o2, s2];
      }, m.prototype.toGeoJSON = f.prototype.toGeoJSON;
      var y = e.bA, v = g;
      function w2(e2) {
        var t2 = new y();
        return function(e3, t3) {
          for (var o2 in e3.layers) t3.writeMessage(3, x, e3.layers[o2]);
        }(e2, t2), t2.finish();
      }
      function x(e2, t2) {
        var o2;
        t2.writeVarintField(15, e2.version || 1), t2.writeStringField(1, e2.name || ""), t2.writeVarintField(5, e2.extent || 4096);
        var i2 = { keys: [], values: [], keycache: {}, valuecache: {} };
        for (o2 = 0; o2 < e2.length; o2++) i2.feature = e2.feature(o2), t2.writeMessage(2, b, i2);
        var s2 = i2.keys;
        for (o2 = 0; o2 < s2.length; o2++) t2.writeStringField(3, s2[o2]);
        var r2 = i2.values;
        for (o2 = 0; o2 < r2.length; o2++) t2.writeMessage(4, P2, r2[o2]);
      }
      function b(e2, t2) {
        var o2 = e2.feature;
        void 0 !== o2.id && t2.writeVarintField(1, o2.id), t2.writeMessage(2, S, e2), t2.writeVarintField(3, o2.type), t2.writeMessage(4, I, o2);
      }
      function S(e2, t2) {
        var o2 = e2.feature, i2 = e2.keys, s2 = e2.values, r2 = e2.keycache, n2 = e2.valuecache;
        for (var a2 in o2.properties) {
          var l2 = o2.properties[a2], c2 = r2[a2];
          if (null !== l2) {
            void 0 === c2 && (i2.push(a2), r2[a2] = c2 = i2.length - 1), t2.writeVarint(c2);
            var u3 = typeof l2;
            "string" !== u3 && "boolean" !== u3 && "number" !== u3 && (l2 = JSON.stringify(l2));
            var h2 = u3 + ":" + l2, d2 = n2[h2];
            void 0 === d2 && (s2.push(l2), n2[h2] = d2 = s2.length - 1), t2.writeVarint(d2);
          }
        }
      }
      function _(e2, t2) {
        return (t2 << 3) + (7 & e2);
      }
      function M(e2) {
        return e2 << 1 ^ e2 >> 31;
      }
      function I(e2, t2) {
        for (var o2 = e2.loadGeometry(), i2 = e2.type, s2 = 0, r2 = 0, n2 = o2.length, a2 = 0; a2 < n2; a2++) {
          var l2 = o2[a2], c2 = 1;
          1 === i2 && (c2 = l2.length), t2.writeVarint(_(1, c2));
          for (var u3 = 3 === i2 ? l2.length - 1 : l2.length, h2 = 0; h2 < u3; h2++) {
            1 === h2 && 1 !== i2 && t2.writeVarint(_(2, u3 - 1));
            var d2 = l2[h2].x - s2, f2 = l2[h2].y - r2;
            t2.writeVarint(M(d2)), t2.writeVarint(M(f2)), s2 += d2, r2 += f2;
          }
          3 === i2 && t2.writeVarint(_(7, 1));
        }
      }
      function P2(e2, t2) {
        var o2 = typeof e2;
        "string" === o2 ? t2.writeStringField(1, e2) : "boolean" === o2 ? t2.writeBooleanField(7, e2) : "number" === o2 && (e2 % 1 != 0 ? t2.writeDoubleField(3, e2) : e2 < 0 ? t2.writeSVarintField(6, e2) : t2.writeVarintField(5, e2));
      }
      h.exports = w2, h.exports.fromVectorTileJs = w2, h.exports.fromGeojsonVt = function(e2, t2) {
        t2 = t2 || {};
        var o2 = {};
        for (var i2 in e2) o2[i2] = new v(e2[i2].features, t2), o2[i2].name = i2, o2[i2].version = t2.version, o2[i2].extent = t2.extent;
        return w2({ layers: o2 });
      }, h.exports.GeoJSONWrapper = v;
      var k = e.by(h.exports);
      const T = { minZoom: 0, maxZoom: 16, minPoints: 2, radius: 40, extent: 512, nodeSize: 64, log: false, generateId: false, reduce: null, map: (e2) => e2 }, D = Math.fround || (C = new Float32Array(1), (e2) => (C[0] = +e2, C[0]));
      var C;
      const L2 = 3, O2 = 5, F = 6;
      class z2 {
        constructor(e2) {
          this.options = Object.assign(Object.create(T), e2), this.trees = new Array(this.options.maxZoom + 1), this.stride = this.options.reduce ? 7 : 6, this.clusterProps = [];
        }
        load(e2) {
          const { log: t2, minZoom: o2, maxZoom: i2 } = this.options;
          t2 && console.time("total time");
          const s2 = `prepare ${e2.length} points`;
          t2 && console.time(s2), this.points = e2;
          const r2 = [];
          for (let t3 = 0; t3 < e2.length; t3++) {
            const o3 = e2[t3];
            if (!o3.geometry) continue;
            const [i3, s3] = o3.geometry.coordinates, n3 = D(G2(i3)), a2 = D(j2(s3));
            r2.push(n3, a2, 1 / 0, t3, -1, 1), this.options.reduce && r2.push(0);
          }
          let n2 = this.trees[i2 + 1] = this._createTree(r2);
          t2 && console.timeEnd(s2);
          for (let e3 = i2; e3 >= o2; e3--) {
            const o3 = +Date.now();
            n2 = this.trees[e3] = this._createTree(this._cluster(n2, e3)), t2 && console.log("z%d: %d clusters in %dms", e3, n2.numItems, +Date.now() - o3);
          }
          return t2 && console.timeEnd("total time"), this;
        }
        getClusters(e2, t2) {
          let o2 = ((e2[0] + 180) % 360 + 360) % 360 - 180;
          const i2 = Math.max(-90, Math.min(90, e2[1]));
          let s2 = 180 === e2[2] ? 180 : ((e2[2] + 180) % 360 + 360) % 360 - 180;
          const r2 = Math.max(-90, Math.min(90, e2[3]));
          if (e2[2] - e2[0] >= 360) o2 = -180, s2 = 180;
          else if (o2 > s2) {
            const e3 = this.getClusters([o2, i2, 180, r2], t2), n3 = this.getClusters([-180, i2, s2, r2], t2);
            return e3.concat(n3);
          }
          const n2 = this.trees[this._limitZoom(t2)], a2 = n2.range(G2(o2), j2(r2), G2(s2), j2(i2)), l2 = n2.data, c2 = [];
          for (const e3 of a2) {
            const t3 = this.stride * e3;
            c2.push(l2[t3 + O2] > 1 ? A(l2, t3, this.clusterProps) : this.points[l2[t3 + L2]]);
          }
          return c2;
        }
        getChildren(e2) {
          const t2 = this._getOriginId(e2), o2 = this._getOriginZoom(e2), i2 = "No cluster with the specified id.", s2 = this.trees[o2];
          if (!s2) throw new Error(i2);
          const r2 = s2.data;
          if (t2 * this.stride >= r2.length) throw new Error(i2);
          const n2 = this.options.radius / (this.options.extent * Math.pow(2, o2 - 1)), a2 = s2.within(r2[t2 * this.stride], r2[t2 * this.stride + 1], n2), l2 = [];
          for (const t3 of a2) {
            const o3 = t3 * this.stride;
            r2[o3 + 4] === e2 && l2.push(r2[o3 + O2] > 1 ? A(r2, o3, this.clusterProps) : this.points[r2[o3 + L2]]);
          }
          if (0 === l2.length) throw new Error(i2);
          return l2;
        }
        getLeaves(e2, t2, o2) {
          const i2 = [];
          return this._appendLeaves(i2, e2, t2 = t2 || 10, o2 = o2 || 0, 0), i2;
        }
        getTile(e2, t2, o2) {
          const i2 = this.trees[this._limitZoom(e2)], s2 = Math.pow(2, e2), { extent: r2, radius: n2 } = this.options, a2 = n2 / r2, l2 = (o2 - a2) / s2, c2 = (o2 + 1 + a2) / s2, u3 = { features: [] };
          return this._addTileFeatures(i2.range((t2 - a2) / s2, l2, (t2 + 1 + a2) / s2, c2), i2.data, t2, o2, s2, u3), 0 === t2 && this._addTileFeatures(i2.range(1 - a2 / s2, l2, 1, c2), i2.data, s2, o2, s2, u3), t2 === s2 - 1 && this._addTileFeatures(i2.range(0, l2, a2 / s2, c2), i2.data, -1, o2, s2, u3), u3.features.length ? u3 : null;
        }
        getClusterExpansionZoom(e2) {
          let t2 = this._getOriginZoom(e2) - 1;
          for (; t2 <= this.options.maxZoom; ) {
            const o2 = this.getChildren(e2);
            if (t2++, 1 !== o2.length) break;
            e2 = o2[0].properties.cluster_id;
          }
          return t2;
        }
        _appendLeaves(e2, t2, o2, i2, s2) {
          const r2 = this.getChildren(t2);
          for (const t3 of r2) {
            const r3 = t3.properties;
            if (r3 && r3.cluster ? s2 + r3.point_count <= i2 ? s2 += r3.point_count : s2 = this._appendLeaves(e2, r3.cluster_id, o2, i2, s2) : s2 < i2 ? s2++ : e2.push(t3), e2.length === o2) break;
          }
          return s2;
        }
        _createTree(t2) {
          const o2 = new e.av(t2.length / this.stride | 0, this.options.nodeSize, Float32Array);
          for (let e2 = 0; e2 < t2.length; e2 += this.stride) o2.add(t2[e2], t2[e2 + 1]);
          return o2.finish(), o2.data = t2, o2;
        }
        _addTileFeatures(e2, t2, o2, i2, s2, r2) {
          for (const n2 of e2) {
            const e3 = n2 * this.stride, a2 = t2[e3 + O2] > 1;
            let l2, c2, u3;
            if (a2) l2 = E(t2, e3, this.clusterProps), c2 = t2[e3], u3 = t2[e3 + 1];
            else {
              const o3 = this.points[t2[e3 + L2]];
              l2 = o3.properties;
              const [i3, s3] = o3.geometry.coordinates;
              c2 = G2(i3), u3 = j2(s3);
            }
            const h2 = { type: 1, geometry: [[Math.round(this.options.extent * (c2 * s2 - o2)), Math.round(this.options.extent * (u3 * s2 - i2))]], tags: l2 };
            let d2;
            d2 = a2 || this.options.generateId ? t2[e3 + L2] : this.points[t2[e3 + L2]].id, void 0 !== d2 && (h2.id = d2), r2.features.push(h2);
          }
        }
        _limitZoom(e2) {
          return Math.max(this.options.minZoom, Math.min(Math.floor(+e2), this.options.maxZoom + 1));
        }
        _cluster(e2, t2) {
          const { radius: o2, extent: i2, reduce: s2, minPoints: r2 } = this.options, n2 = o2 / (i2 * Math.pow(2, t2)), a2 = e2.data, l2 = [], c2 = this.stride;
          for (let o3 = 0; o3 < a2.length; o3 += c2) {
            if (a2[o3 + 2] <= t2) continue;
            a2[o3 + 2] = t2;
            const i3 = a2[o3], u3 = a2[o3 + 1], h2 = e2.within(a2[o3], a2[o3 + 1], n2), d2 = a2[o3 + O2];
            let f2 = d2;
            for (const e3 of h2) {
              const o4 = e3 * c2;
              a2[o4 + 2] > t2 && (f2 += a2[o4 + O2]);
            }
            if (f2 > d2 && f2 >= r2) {
              let e3, r3 = i3 * d2, n3 = u3 * d2, g2 = -1;
              const p3 = ((o3 / c2 | 0) << 5) + (t2 + 1) + this.points.length;
              for (const i4 of h2) {
                const l3 = i4 * c2;
                if (a2[l3 + 2] <= t2) continue;
                a2[l3 + 2] = t2;
                const u4 = a2[l3 + O2];
                r3 += a2[l3] * u4, n3 += a2[l3 + 1] * u4, a2[l3 + 4] = p3, s2 && (e3 || (e3 = this._map(a2, o3, true), g2 = this.clusterProps.length, this.clusterProps.push(e3)), s2(e3, this._map(a2, l3)));
              }
              a2[o3 + 4] = p3, l2.push(r3 / f2, n3 / f2, 1 / 0, p3, -1, f2), s2 && l2.push(g2);
            } else {
              for (let e3 = 0; e3 < c2; e3++) l2.push(a2[o3 + e3]);
              if (f2 > 1) for (const e3 of h2) {
                const o4 = e3 * c2;
                if (!(a2[o4 + 2] <= t2)) {
                  a2[o4 + 2] = t2;
                  for (let e4 = 0; e4 < c2; e4++) l2.push(a2[o4 + e4]);
                }
              }
            }
          }
          return l2;
        }
        _getOriginId(e2) {
          return e2 - this.points.length >> 5;
        }
        _getOriginZoom(e2) {
          return (e2 - this.points.length) % 32;
        }
        _map(e2, t2, o2) {
          if (e2[t2 + O2] > 1) {
            const i3 = this.clusterProps[e2[t2 + F]];
            return o2 ? Object.assign({}, i3) : i3;
          }
          const i2 = this.points[e2[t2 + L2]].properties, s2 = this.options.map(i2);
          return o2 && s2 === i2 ? Object.assign({}, s2) : s2;
        }
      }
      function A(e2, t2, o2) {
        return { type: "Feature", id: e2[t2 + L2], properties: E(e2, t2, o2), geometry: { type: "Point", coordinates: [(i2 = e2[t2], 360 * (i2 - 0.5)), R(e2[t2 + 1])] } };
        var i2;
      }
      function E(e2, t2, o2) {
        const i2 = e2[t2 + O2], s2 = i2 >= 1e4 ? `${Math.round(i2 / 1e3)}k` : i2 >= 1e3 ? Math.round(i2 / 100) / 10 + "k" : i2, r2 = e2[t2 + F], n2 = -1 === r2 ? {} : Object.assign({}, o2[r2]);
        return Object.assign(n2, { cluster: true, cluster_id: e2[t2 + L2], point_count: i2, point_count_abbreviated: s2 });
      }
      function G2(e2) {
        return e2 / 360 + 0.5;
      }
      function j2(e2) {
        const t2 = Math.sin(e2 * Math.PI / 180), o2 = 0.5 - 0.25 * Math.log((1 + t2) / (1 - t2)) / Math.PI;
        return o2 < 0 ? 0 : o2 > 1 ? 1 : o2;
      }
      function R(e2) {
        const t2 = (180 - 360 * e2) * Math.PI / 180;
        return 360 * Math.atan(Math.exp(t2)) / Math.PI - 90;
      }
      function Z2(e2, t2, o2, i2) {
        let s2 = i2;
        const r2 = t2 + (o2 - t2 >> 1);
        let n2, a2 = o2 - t2;
        const l2 = e2[t2], c2 = e2[t2 + 1], u3 = e2[o2], h2 = e2[o2 + 1];
        for (let i3 = t2 + 3; i3 < o2; i3 += 3) {
          const t3 = N2(e2[i3], e2[i3 + 1], l2, c2, u3, h2);
          if (t3 > s2) n2 = i3, s2 = t3;
          else if (t3 === s2) {
            const e3 = Math.abs(i3 - r2);
            e3 < a2 && (n2 = i3, a2 = e3);
          }
        }
        s2 > i2 && (n2 - t2 > 3 && Z2(e2, t2, n2, i2), e2[n2 + 2] = s2, o2 - n2 > 3 && Z2(e2, n2, o2, i2));
      }
      function N2(e2, t2, o2, i2, s2, r2) {
        let n2 = s2 - o2, a2 = r2 - i2;
        if (0 !== n2 || 0 !== a2) {
          const l2 = ((e2 - o2) * n2 + (t2 - i2) * a2) / (n2 * n2 + a2 * a2);
          l2 > 1 ? (o2 = s2, i2 = r2) : l2 > 0 && (o2 += n2 * l2, i2 += a2 * l2);
        }
        return n2 = e2 - o2, a2 = t2 - i2, n2 * n2 + a2 * a2;
      }
      function J2(e2, t2, o2, i2) {
        const s2 = { id: null == e2 ? null : e2, type: t2, geometry: o2, tags: i2, minX: 1 / 0, minY: 1 / 0, maxX: -1 / 0, maxY: -1 / 0 };
        if ("Point" === t2 || "MultiPoint" === t2 || "LineString" === t2) W(s2, o2);
        else if ("Polygon" === t2) W(s2, o2[0]);
        else if ("MultiLineString" === t2) for (const e3 of o2) W(s2, e3);
        else if ("MultiPolygon" === t2) for (const e3 of o2) W(s2, e3[0]);
        return s2;
      }
      function W(e2, t2) {
        for (let o2 = 0; o2 < t2.length; o2 += 3) e2.minX = Math.min(e2.minX, t2[o2]), e2.minY = Math.min(e2.minY, t2[o2 + 1]), e2.maxX = Math.max(e2.maxX, t2[o2]), e2.maxY = Math.max(e2.maxY, t2[o2 + 1]);
      }
      function Y(e2, t2, o2, i2) {
        if (!t2.geometry) return;
        const s2 = t2.geometry.coordinates;
        if (s2 && 0 === s2.length) return;
        const r2 = t2.geometry.type, n2 = Math.pow(o2.tolerance / ((1 << o2.maxZoom) * o2.extent), 2);
        let a2 = [], l2 = t2.id;
        if (o2.promoteId ? l2 = t2.properties[o2.promoteId] : o2.generateId && (l2 = i2 || 0), "Point" === r2) V2(s2, a2);
        else if ("MultiPoint" === r2) for (const e3 of s2) V2(e3, a2);
        else if ("LineString" === r2) X2(s2, a2, n2, false);
        else if ("MultiLineString" === r2) {
          if (o2.lineMetrics) {
            for (const o3 of s2) a2 = [], X2(o3, a2, n2, false), e2.push(J2(l2, "LineString", a2, t2.properties));
            return;
          }
          q2(s2, a2, n2, false);
        } else if ("Polygon" === r2) q2(s2, a2, n2, true);
        else {
          if ("MultiPolygon" !== r2) {
            if ("GeometryCollection" === r2) {
              for (const s3 of t2.geometry.geometries) Y(e2, { id: l2, geometry: s3, properties: t2.properties }, o2, i2);
              return;
            }
            throw new Error("Input data is not a valid GeoJSON object.");
          }
          for (const e3 of s2) {
            const t3 = [];
            q2(e3, t3, n2, true), a2.push(t3);
          }
        }
        e2.push(J2(l2, r2, a2, t2.properties));
      }
      function V2(e2, t2) {
        t2.push(H(e2[0]), B2(e2[1]), 0);
      }
      function X2(e2, t2, o2, i2) {
        let s2, r2, n2 = 0;
        for (let o3 = 0; o3 < e2.length; o3++) {
          const a3 = H(e2[o3][0]), l2 = B2(e2[o3][1]);
          t2.push(a3, l2, 0), o3 > 0 && (n2 += i2 ? (s2 * l2 - a3 * r2) / 2 : Math.sqrt(Math.pow(a3 - s2, 2) + Math.pow(l2 - r2, 2))), s2 = a3, r2 = l2;
        }
        const a2 = t2.length - 3;
        t2[2] = 1, Z2(t2, 0, a2, o2), t2[a2 + 2] = 1, t2.size = Math.abs(n2), t2.start = 0, t2.end = t2.size;
      }
      function q2(e2, t2, o2, i2) {
        for (let s2 = 0; s2 < e2.length; s2++) {
          const r2 = [];
          X2(e2[s2], r2, o2, i2), t2.push(r2);
        }
      }
      function H(e2) {
        return e2 / 360 + 0.5;
      }
      function B2(e2) {
        const t2 = Math.sin(e2 * Math.PI / 180), o2 = 0.5 - 0.25 * Math.log((1 + t2) / (1 - t2)) / Math.PI;
        return o2 < 0 ? 0 : o2 > 1 ? 1 : o2;
      }
      function U(e2, t2, o2, i2, s2, r2, n2, a2) {
        if (i2 /= t2, r2 >= (o2 /= t2) && n2 < i2) return e2;
        if (n2 < o2 || r2 >= i2) return null;
        const l2 = [];
        for (const t3 of e2) {
          const e3 = t3.geometry;
          let r3 = t3.type;
          const n3 = 0 === s2 ? t3.minX : t3.minY, c2 = 0 === s2 ? t3.maxX : t3.maxY;
          if (n3 >= o2 && c2 < i2) {
            l2.push(t3);
            continue;
          }
          if (c2 < o2 || n3 >= i2) continue;
          let u3 = [];
          if ("Point" === r3 || "MultiPoint" === r3) $2(e3, u3, o2, i2, s2);
          else if ("LineString" === r3) K(e3, u3, o2, i2, s2, false, a2.lineMetrics);
          else if ("MultiLineString" === r3) ee2(e3, u3, o2, i2, s2, false);
          else if ("Polygon" === r3) ee2(e3, u3, o2, i2, s2, true);
          else if ("MultiPolygon" === r3) for (const t4 of e3) {
            const e4 = [];
            ee2(t4, e4, o2, i2, s2, true), e4.length && u3.push(e4);
          }
          if (u3.length) {
            if (a2.lineMetrics && "LineString" === r3) {
              for (const e4 of u3) l2.push(J2(t3.id, r3, e4, t3.tags));
              continue;
            }
            "LineString" !== r3 && "MultiLineString" !== r3 || (1 === u3.length ? (r3 = "LineString", u3 = u3[0]) : r3 = "MultiLineString"), "Point" !== r3 && "MultiPoint" !== r3 || (r3 = 3 === u3.length ? "Point" : "MultiPoint"), l2.push(J2(t3.id, r3, u3, t3.tags));
          }
        }
        return l2.length ? l2 : null;
      }
      function $2(e2, t2, o2, i2, s2) {
        for (let r2 = 0; r2 < e2.length; r2 += 3) {
          const n2 = e2[r2 + s2];
          n2 >= o2 && n2 <= i2 && te2(t2, e2[r2], e2[r2 + 1], e2[r2 + 2]);
        }
      }
      function K(e2, t2, o2, i2, s2, r2, n2) {
        let a2 = Q(e2);
        const l2 = 0 === s2 ? oe : ie2;
        let c2, u3, h2 = e2.start;
        for (let d3 = 0; d3 < e2.length - 3; d3 += 3) {
          const f3 = e2[d3], g3 = e2[d3 + 1], p4 = e2[d3 + 2], m2 = e2[d3 + 3], y2 = e2[d3 + 4], v2 = 0 === s2 ? f3 : g3, w3 = 0 === s2 ? m2 : y2;
          let x2 = false;
          n2 && (c2 = Math.sqrt(Math.pow(f3 - m2, 2) + Math.pow(g3 - y2, 2))), v2 < o2 ? w3 > o2 && (u3 = l2(a2, f3, g3, m2, y2, o2), n2 && (a2.start = h2 + c2 * u3)) : v2 > i2 ? w3 < i2 && (u3 = l2(a2, f3, g3, m2, y2, i2), n2 && (a2.start = h2 + c2 * u3)) : te2(a2, f3, g3, p4), w3 < o2 && v2 >= o2 && (u3 = l2(a2, f3, g3, m2, y2, o2), x2 = true), w3 > i2 && v2 <= i2 && (u3 = l2(a2, f3, g3, m2, y2, i2), x2 = true), !r2 && x2 && (n2 && (a2.end = h2 + c2 * u3), t2.push(a2), a2 = Q(e2)), n2 && (h2 += c2);
        }
        let d2 = e2.length - 3;
        const f2 = e2[d2], g2 = e2[d2 + 1], p3 = 0 === s2 ? f2 : g2;
        p3 >= o2 && p3 <= i2 && te2(a2, f2, g2, e2[d2 + 2]), d2 = a2.length - 3, r2 && d2 >= 3 && (a2[d2] !== a2[0] || a2[d2 + 1] !== a2[1]) && te2(a2, a2[0], a2[1], a2[2]), a2.length && t2.push(a2);
      }
      function Q(e2) {
        const t2 = [];
        return t2.size = e2.size, t2.start = e2.start, t2.end = e2.end, t2;
      }
      function ee2(e2, t2, o2, i2, s2, r2) {
        for (const n2 of e2) K(n2, t2, o2, i2, s2, r2, false);
      }
      function te2(e2, t2, o2, i2) {
        e2.push(t2, o2, i2);
      }
      function oe(e2, t2, o2, i2, s2, r2) {
        const n2 = (r2 - t2) / (i2 - t2);
        return te2(e2, r2, o2 + (s2 - o2) * n2, 1), n2;
      }
      function ie2(e2, t2, o2, i2, s2, r2) {
        const n2 = (r2 - o2) / (s2 - o2);
        return te2(e2, t2 + (i2 - t2) * n2, r2, 1), n2;
      }
      function se(e2, t2) {
        const o2 = [];
        for (let i2 = 0; i2 < e2.length; i2++) {
          const s2 = e2[i2], r2 = s2.type;
          let n2;
          if ("Point" === r2 || "MultiPoint" === r2 || "LineString" === r2) n2 = re(s2.geometry, t2);
          else if ("MultiLineString" === r2 || "Polygon" === r2) {
            n2 = [];
            for (const e3 of s2.geometry) n2.push(re(e3, t2));
          } else if ("MultiPolygon" === r2) {
            n2 = [];
            for (const e3 of s2.geometry) {
              const o3 = [];
              for (const i3 of e3) o3.push(re(i3, t2));
              n2.push(o3);
            }
          }
          o2.push(J2(s2.id, r2, n2, s2.tags));
        }
        return o2;
      }
      function re(e2, t2) {
        const o2 = [];
        o2.size = e2.size, void 0 !== e2.start && (o2.start = e2.start, o2.end = e2.end);
        for (let i2 = 0; i2 < e2.length; i2 += 3) o2.push(e2[i2] + t2, e2[i2 + 1], e2[i2 + 2]);
        return o2;
      }
      function ne(e2, t2) {
        if (e2.transformed) return e2;
        const o2 = 1 << e2.z, i2 = e2.x, s2 = e2.y;
        for (const r2 of e2.features) {
          const e3 = r2.geometry, n2 = r2.type;
          if (r2.geometry = [], 1 === n2) for (let n3 = 0; n3 < e3.length; n3 += 2) r2.geometry.push(ae2(e3[n3], e3[n3 + 1], t2, o2, i2, s2));
          else for (let n3 = 0; n3 < e3.length; n3++) {
            const a2 = [];
            for (let r3 = 0; r3 < e3[n3].length; r3 += 2) a2.push(ae2(e3[n3][r3], e3[n3][r3 + 1], t2, o2, i2, s2));
            r2.geometry.push(a2);
          }
        }
        return e2.transformed = true, e2;
      }
      function ae2(e2, t2, o2, i2, s2, r2) {
        return [Math.round(o2 * (e2 * i2 - s2)), Math.round(o2 * (t2 * i2 - r2))];
      }
      function le2(e2, t2, o2, i2, s2) {
        const r2 = t2 === s2.maxZoom ? 0 : s2.tolerance / ((1 << t2) * s2.extent), n2 = { features: [], numPoints: 0, numSimplified: 0, numFeatures: e2.length, source: null, x: o2, y: i2, z: t2, transformed: false, minX: 2, minY: 1, maxX: -1, maxY: 0 };
        for (const t3 of e2) ce2(n2, t3, r2, s2);
        return n2;
      }
      function ce2(e2, t2, o2, i2) {
        const s2 = t2.geometry, r2 = t2.type, n2 = [];
        if (e2.minX = Math.min(e2.minX, t2.minX), e2.minY = Math.min(e2.minY, t2.minY), e2.maxX = Math.max(e2.maxX, t2.maxX), e2.maxY = Math.max(e2.maxY, t2.maxY), "Point" === r2 || "MultiPoint" === r2) for (let t3 = 0; t3 < s2.length; t3 += 3) n2.push(s2[t3], s2[t3 + 1]), e2.numPoints++, e2.numSimplified++;
        else if ("LineString" === r2) ue2(n2, s2, e2, o2, false, false);
        else if ("MultiLineString" === r2 || "Polygon" === r2) for (let t3 = 0; t3 < s2.length; t3++) ue2(n2, s2[t3], e2, o2, "Polygon" === r2, 0 === t3);
        else if ("MultiPolygon" === r2) for (let t3 = 0; t3 < s2.length; t3++) {
          const i3 = s2[t3];
          for (let t4 = 0; t4 < i3.length; t4++) ue2(n2, i3[t4], e2, o2, true, 0 === t4);
        }
        if (n2.length) {
          let o3 = t2.tags || null;
          if ("LineString" === r2 && i2.lineMetrics) {
            o3 = {};
            for (const e3 in t2.tags) o3[e3] = t2.tags[e3];
            o3.mapbox_clip_start = s2.start / s2.size, o3.mapbox_clip_end = s2.end / s2.size;
          }
          const a2 = { geometry: n2, type: "Polygon" === r2 || "MultiPolygon" === r2 ? 3 : "LineString" === r2 || "MultiLineString" === r2 ? 2 : 1, tags: o3 };
          null !== t2.id && (a2.id = t2.id), e2.features.push(a2);
        }
      }
      function ue2(e2, t2, o2, i2, s2, r2) {
        const n2 = i2 * i2;
        if (i2 > 0 && t2.size < (s2 ? n2 : i2)) return void (o2.numPoints += t2.length / 3);
        const a2 = [];
        for (let e3 = 0; e3 < t2.length; e3 += 3) (0 === i2 || t2[e3 + 2] > n2) && (o2.numSimplified++, a2.push(t2[e3], t2[e3 + 1])), o2.numPoints++;
        s2 && function(e3, t3) {
          let o3 = 0;
          for (let t4 = 0, i3 = e3.length, s3 = i3 - 2; t4 < i3; s3 = t4, t4 += 2) o3 += (e3[t4] - e3[s3]) * (e3[t4 + 1] + e3[s3 + 1]);
          if (o3 > 0 === t3) for (let t4 = 0, o4 = e3.length; t4 < o4 / 2; t4 += 2) {
            const i3 = e3[t4], s3 = e3[t4 + 1];
            e3[t4] = e3[o4 - 2 - t4], e3[t4 + 1] = e3[o4 - 1 - t4], e3[o4 - 2 - t4] = i3, e3[o4 - 1 - t4] = s3;
          }
        }(a2, r2), e2.push(a2);
      }
      const he2 = { maxZoom: 14, indexMaxZoom: 5, indexMaxPoints: 1e5, tolerance: 3, extent: 4096, buffer: 64, lineMetrics: false, promoteId: null, generateId: false, debug: 0 };
      class de2 {
        constructor(e2, t2) {
          const o2 = (t2 = this.options = function(e3, t3) {
            for (const o3 in t3) e3[o3] = t3[o3];
            return e3;
          }(Object.create(he2), t2)).debug;
          if (o2 && console.time("preprocess data"), t2.maxZoom < 0 || t2.maxZoom > 24) throw new Error("maxZoom should be in the 0-24 range");
          if (t2.promoteId && t2.generateId) throw new Error("promoteId and generateId cannot be used together.");
          let i2 = function(e3, t3) {
            const o3 = [];
            if ("FeatureCollection" === e3.type) for (let i3 = 0; i3 < e3.features.length; i3++) Y(o3, e3.features[i3], t3, i3);
            else Y(o3, "Feature" === e3.type ? e3 : { geometry: e3 }, t3);
            return o3;
          }(e2, t2);
          this.tiles = {}, this.tileCoords = [], o2 && (console.timeEnd("preprocess data"), console.log("index: maxZoom: %d, maxPoints: %d", t2.indexMaxZoom, t2.indexMaxPoints), console.time("generate tiles"), this.stats = {}, this.total = 0), i2 = function(e3, t3) {
            const o3 = t3.buffer / t3.extent;
            let i3 = e3;
            const s2 = U(e3, 1, -1 - o3, o3, 0, -1, 2, t3), r2 = U(e3, 1, 1 - o3, 2 + o3, 0, -1, 2, t3);
            return (s2 || r2) && (i3 = U(e3, 1, -o3, 1 + o3, 0, -1, 2, t3) || [], s2 && (i3 = se(s2, 1).concat(i3)), r2 && (i3 = i3.concat(se(r2, -1)))), i3;
          }(i2, t2), i2.length && this.splitTile(i2, 0, 0, 0), o2 && (i2.length && console.log("features: %d, points: %d", this.tiles[0].numFeatures, this.tiles[0].numPoints), console.timeEnd("generate tiles"), console.log("tiles generated:", this.total, JSON.stringify(this.stats)));
        }
        splitTile(e2, t2, o2, i2, s2, r2, n2) {
          const a2 = [e2, t2, o2, i2], l2 = this.options, c2 = l2.debug;
          for (; a2.length; ) {
            i2 = a2.pop(), o2 = a2.pop(), t2 = a2.pop(), e2 = a2.pop();
            const u3 = 1 << t2, h2 = fe2(t2, o2, i2);
            let d2 = this.tiles[h2];
            if (!d2 && (c2 > 1 && console.time("creation"), d2 = this.tiles[h2] = le2(e2, t2, o2, i2, l2), this.tileCoords.push({ z: t2, x: o2, y: i2 }), c2)) {
              c2 > 1 && (console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)", t2, o2, i2, d2.numFeatures, d2.numPoints, d2.numSimplified), console.timeEnd("creation"));
              const e3 = `z${t2}`;
              this.stats[e3] = (this.stats[e3] || 0) + 1, this.total++;
            }
            if (d2.source = e2, null == s2) {
              if (t2 === l2.indexMaxZoom || d2.numPoints <= l2.indexMaxPoints) continue;
            } else {
              if (t2 === l2.maxZoom || t2 === s2) continue;
              if (null != s2) {
                const e3 = s2 - t2;
                if (o2 !== r2 >> e3 || i2 !== n2 >> e3) continue;
              }
            }
            if (d2.source = null, 0 === e2.length) continue;
            c2 > 1 && console.time("clipping");
            const f2 = 0.5 * l2.buffer / l2.extent, g2 = 0.5 - f2, p3 = 0.5 + f2, m2 = 1 + f2;
            let y2 = null, v2 = null, w3 = null, x2 = null, b2 = U(e2, u3, o2 - f2, o2 + p3, 0, d2.minX, d2.maxX, l2), S2 = U(e2, u3, o2 + g2, o2 + m2, 0, d2.minX, d2.maxX, l2);
            e2 = null, b2 && (y2 = U(b2, u3, i2 - f2, i2 + p3, 1, d2.minY, d2.maxY, l2), v2 = U(b2, u3, i2 + g2, i2 + m2, 1, d2.minY, d2.maxY, l2), b2 = null), S2 && (w3 = U(S2, u3, i2 - f2, i2 + p3, 1, d2.minY, d2.maxY, l2), x2 = U(S2, u3, i2 + g2, i2 + m2, 1, d2.minY, d2.maxY, l2), S2 = null), c2 > 1 && console.timeEnd("clipping"), a2.push(y2 || [], t2 + 1, 2 * o2, 2 * i2), a2.push(v2 || [], t2 + 1, 2 * o2, 2 * i2 + 1), a2.push(w3 || [], t2 + 1, 2 * o2 + 1, 2 * i2), a2.push(x2 || [], t2 + 1, 2 * o2 + 1, 2 * i2 + 1);
          }
        }
        getTile(e2, t2, o2) {
          e2 = +e2, t2 = +t2, o2 = +o2;
          const i2 = this.options, { extent: s2, debug: r2 } = i2;
          if (e2 < 0 || e2 > 24) return null;
          const n2 = 1 << e2, a2 = fe2(e2, t2 = t2 + n2 & n2 - 1, o2);
          if (this.tiles[a2]) return ne(this.tiles[a2], s2);
          r2 > 1 && console.log("drilling down to z%d-%d-%d", e2, t2, o2);
          let l2, c2 = e2, u3 = t2, h2 = o2;
          for (; !l2 && c2 > 0; ) c2--, u3 >>= 1, h2 >>= 1, l2 = this.tiles[fe2(c2, u3, h2)];
          return l2 && l2.source ? (r2 > 1 && (console.log("found parent tile z%d-%d-%d", c2, u3, h2), console.time("drilling down")), this.splitTile(l2.source, c2, u3, h2, e2, t2, o2), r2 > 1 && console.timeEnd("drilling down"), this.tiles[a2] ? ne(this.tiles[a2], s2) : null) : null;
        }
      }
      function fe2(e2, t2, o2) {
        return 32 * ((1 << e2) * o2 + t2) + e2;
      }
      function ge2(e2, t2) {
        return t2 ? e2.properties[t2] : e2.id;
      }
      function pe2(e2, t2) {
        if (null == e2) return true;
        if ("Feature" === e2.type) return null != ge2(e2, t2);
        if ("FeatureCollection" === e2.type) {
          const o2 = /* @__PURE__ */ new Set();
          for (const i2 of e2.features) {
            const e3 = ge2(i2, t2);
            if (null == e3) return false;
            if (o2.has(e3)) return false;
            o2.add(e3);
          }
          return true;
        }
        return false;
      }
      function me2(e2, t2) {
        const o2 = /* @__PURE__ */ new Map();
        if (null == e2) ;
        else if ("Feature" === e2.type) o2.set(ge2(e2, t2), e2);
        else for (const i2 of e2.features) o2.set(ge2(i2, t2), i2);
        return o2;
      }
      class ye extends r {
        constructor() {
          super(...arguments), this._dataUpdateable = /* @__PURE__ */ new Map();
        }
        loadVectorTile(t2, o2) {
          return e._(this, void 0, void 0, function* () {
            const o3 = t2.tileID.canonical;
            if (!this._geoJSONIndex) throw new Error("Unable to parse the data into a cluster or geojson");
            const i2 = this._geoJSONIndex.getTile(o3.z, o3.x, o3.y);
            if (!i2) return null;
            const s2 = new class {
              constructor(t3) {
                this.layers = { _geojsonTileLayer: this }, this.name = "_geojsonTileLayer", this.extent = e.X, this.length = t3.length, this._features = t3;
              }
              feature(t3) {
                return new class {
                  constructor(t4) {
                    this._feature = t4, this.extent = e.X, this.type = t4.type, this.properties = t4.tags, "id" in t4 && !isNaN(t4.id) && (this.id = parseInt(t4.id, 10));
                  }
                  loadGeometry() {
                    if (1 === this._feature.type) {
                      const t4 = [];
                      for (const o4 of this._feature.geometry) t4.push([new e.P(o4[0], o4[1])]);
                      return t4;
                    }
                    {
                      const t4 = [];
                      for (const o4 of this._feature.geometry) {
                        const i3 = [];
                        for (const t5 of o4) i3.push(new e.P(t5[0], t5[1]));
                        t4.push(i3);
                      }
                      return t4;
                    }
                  }
                  toGeoJSON(e2, t4, o4) {
                    return u2.call(this, e2, t4, o4);
                  }
                }(this._features[t3]);
              }
            }(i2.features);
            let r2 = k(s2);
            return 0 === r2.byteOffset && r2.byteLength === r2.buffer.byteLength || (r2 = new Uint8Array(r2)), { vectorTile: s2, rawData: r2.buffer };
          });
        }
        loadData(t2) {
          return e._(this, void 0, void 0, function* () {
            var o2;
            null === (o2 = this._pendingRequest) || void 0 === o2 || o2.abort();
            const i2 = !!(t2 && t2.request && t2.request.collectResourceTiming) && new e.bv(t2.request);
            this._pendingRequest = new AbortController();
            try {
              this._pendingData = this.loadAndProcessGeoJSON(t2, this._pendingRequest), this._geoJSONIndex = t2.cluster ? new z2(function({ superclusterOptions: t3, clusterProperties: o4 }) {
                if (!o4 || !t3) return t3;
                const i3 = {}, s3 = {}, r2 = { accumulated: null, zoom: 0 }, n2 = { properties: null }, a2 = Object.keys(o4);
                for (const t4 of a2) {
                  const [r3, n3] = o4[t4], a3 = e.bC(n3), l2 = e.bC("string" == typeof r3 ? [r3, ["accumulated"], ["get", t4]] : r3);
                  i3[t4] = a3.value, s3[t4] = l2.value;
                }
                return t3.map = (e2) => {
                  n2.properties = e2;
                  const t4 = {};
                  for (const e3 of a2) t4[e3] = i3[e3].evaluate(r2, n2);
                  return t4;
                }, t3.reduce = (e2, t4) => {
                  n2.properties = t4;
                  for (const t5 of a2) r2.accumulated = e2[t5], e2[t5] = s3[t5].evaluate(r2, n2);
                }, t3;
              }(t2)).load((yield this._pendingData).features) : (s2 = yield this._pendingData, new de2(s2, t2.geojsonVtOptions)), this.loaded = {};
              const o3 = {};
              if (i2) {
                const e2 = i2.finish();
                e2 && (o3.resourceTiming = {}, o3.resourceTiming[t2.source] = JSON.parse(JSON.stringify(e2)));
              }
              return o3;
            } catch (t3) {
              if (delete this._pendingRequest, e.bB(t3)) return { abandoned: true };
              throw t3;
            }
            var s2;
          });
        }
        getData() {
          return e._(this, void 0, void 0, function* () {
            return this._pendingData;
          });
        }
        reloadTile(e2) {
          const t2 = this.loaded;
          return t2 && t2[e2.uid] ? super.reloadTile(e2) : this.loadTile(e2);
        }
        loadAndProcessGeoJSON(t2, o2) {
          return e._(this, void 0, void 0, function* () {
            let i2 = yield this.loadGeoJSON(t2, o2);
            if (delete this._pendingRequest, "object" != typeof i2) throw new Error(`Input data given to '${t2.source}' is not a valid GeoJSON object.`);
            if (c(i2, true), t2.filter) {
              const o3 = e.bC(t2.filter, { type: "boolean", "property-type": "data-driven", overridable: false, transition: false });
              if ("error" === o3.result) throw new Error(o3.value.map((e2) => `${e2.key}: ${e2.message}`).join(", "));
              const s2 = i2.features.filter((e2) => o3.value.evaluate({ zoom: 0 }, e2));
              i2 = { type: "FeatureCollection", features: s2 };
            }
            return i2;
          });
        }
        loadGeoJSON(t2, o2) {
          return e._(this, void 0, void 0, function* () {
            const { promoteId: i2 } = t2;
            if (t2.request) {
              const s2 = yield e.h(t2.request, o2);
              return this._dataUpdateable = pe2(s2.data, i2) ? me2(s2.data, i2) : void 0, s2.data;
            }
            if ("string" == typeof t2.data) try {
              const e2 = JSON.parse(t2.data);
              return this._dataUpdateable = pe2(e2, i2) ? me2(e2, i2) : void 0, e2;
            } catch (e2) {
              throw new Error(`Input data given to '${t2.source}' is not a valid GeoJSON object.`);
            }
            if (!t2.dataDiff) throw new Error(`Input data given to '${t2.source}' is not a valid GeoJSON object.`);
            if (!this._dataUpdateable) throw new Error(`Cannot update existing geojson data in ${t2.source}`);
            return function(e2, t3, o3) {
              var i3, s2, r2, n2;
              if (t3.removeAll && e2.clear(), t3.remove) for (const o4 of t3.remove) e2.delete(o4);
              if (t3.add) for (const i4 of t3.add) {
                const t4 = ge2(i4, o3);
                null != t4 && e2.set(t4, i4);
              }
              if (t3.update) for (const o4 of t3.update) {
                let t4 = e2.get(o4.id);
                if (null == t4) continue;
                const a2 = !o4.removeAllProperties && ((null === (i3 = o4.removeProperties) || void 0 === i3 ? void 0 : i3.length) > 0 || (null === (s2 = o4.addOrUpdateProperties) || void 0 === s2 ? void 0 : s2.length) > 0);
                if ((o4.newGeometry || o4.removeAllProperties || a2) && (t4 = Object.assign({}, t4), e2.set(o4.id, t4), a2 && (t4.properties = Object.assign({}, t4.properties))), o4.newGeometry && (t4.geometry = o4.newGeometry), o4.removeAllProperties) t4.properties = {};
                else if ((null === (r2 = o4.removeProperties) || void 0 === r2 ? void 0 : r2.length) > 0) for (const e3 of o4.removeProperties) Object.prototype.hasOwnProperty.call(t4.properties, e3) && delete t4.properties[e3];
                if ((null === (n2 = o4.addOrUpdateProperties) || void 0 === n2 ? void 0 : n2.length) > 0) for (const { key: e3, value: i4 } of o4.addOrUpdateProperties) t4.properties[e3] = i4;
              }
            }(this._dataUpdateable, t2.dataDiff, i2), { type: "FeatureCollection", features: Array.from(this._dataUpdateable.values()) };
          });
        }
        removeSource(t2) {
          return e._(this, void 0, void 0, function* () {
            this._pendingRequest && this._pendingRequest.abort();
          });
        }
        getClusterExpansionZoom(e2) {
          return this._geoJSONIndex.getClusterExpansionZoom(e2.clusterId);
        }
        getClusterChildren(e2) {
          return this._geoJSONIndex.getChildren(e2.clusterId);
        }
        getClusterLeaves(e2) {
          return this._geoJSONIndex.getLeaves(e2.clusterId, e2.limit, e2.offset);
        }
      }
      class ve2 {
        constructor(t2) {
          this.self = t2, this.actor = new e.F(t2), this.layerIndexes = {}, this.availableImages = {}, this.workerSources = {}, this.demWorkerSources = {}, this.externalWorkerSourceTypes = {}, this.self.registerWorkerSource = (e2, t3) => {
            if (this.externalWorkerSourceTypes[e2]) throw new Error(`Worker source with name "${e2}" already registered.`);
            this.externalWorkerSourceTypes[e2] = t3;
          }, this.self.addProtocol = e.bi, this.self.removeProtocol = e.bj, this.self.registerRTLTextPlugin = (t3) => {
            if (e.bD.isParsed()) throw new Error("RTL text plugin already registered.");
            e.bD.setMethods(t3);
          }, this.actor.registerMessageHandler("LDT", (e2, t3) => this._getDEMWorkerSource(e2, t3.source).loadTile(t3)), this.actor.registerMessageHandler("RDT", (t3, o2) => e._(this, void 0, void 0, function* () {
            this._getDEMWorkerSource(t3, o2.source).removeTile(o2);
          })), this.actor.registerMessageHandler("GCEZ", (t3, o2) => e._(this, void 0, void 0, function* () {
            return this._getWorkerSource(t3, o2.type, o2.source).getClusterExpansionZoom(o2);
          })), this.actor.registerMessageHandler("GCC", (t3, o2) => e._(this, void 0, void 0, function* () {
            return this._getWorkerSource(t3, o2.type, o2.source).getClusterChildren(o2);
          })), this.actor.registerMessageHandler("GCL", (t3, o2) => e._(this, void 0, void 0, function* () {
            return this._getWorkerSource(t3, o2.type, o2.source).getClusterLeaves(o2);
          })), this.actor.registerMessageHandler("LD", (e2, t3) => this._getWorkerSource(e2, t3.type, t3.source).loadData(t3)), this.actor.registerMessageHandler("GD", (e2, t3) => this._getWorkerSource(e2, t3.type, t3.source).getData()), this.actor.registerMessageHandler("LT", (e2, t3) => this._getWorkerSource(e2, t3.type, t3.source).loadTile(t3)), this.actor.registerMessageHandler("RT", (e2, t3) => this._getWorkerSource(e2, t3.type, t3.source).reloadTile(t3)), this.actor.registerMessageHandler("AT", (e2, t3) => this._getWorkerSource(e2, t3.type, t3.source).abortTile(t3)), this.actor.registerMessageHandler("RMT", (e2, t3) => this._getWorkerSource(e2, t3.type, t3.source).removeTile(t3)), this.actor.registerMessageHandler("RS", (t3, o2) => e._(this, void 0, void 0, function* () {
            if (!this.workerSources[t3] || !this.workerSources[t3][o2.type] || !this.workerSources[t3][o2.type][o2.source]) return;
            const e2 = this.workerSources[t3][o2.type][o2.source];
            delete this.workerSources[t3][o2.type][o2.source], void 0 !== e2.removeSource && e2.removeSource(o2);
          })), this.actor.registerMessageHandler("RM", (t3) => e._(this, void 0, void 0, function* () {
            delete this.layerIndexes[t3], delete this.availableImages[t3], delete this.workerSources[t3], delete this.demWorkerSources[t3];
          })), this.actor.registerMessageHandler("SR", (t3, o2) => e._(this, void 0, void 0, function* () {
            this.referrer = o2;
          })), this.actor.registerMessageHandler("SRPS", (e2, t3) => this._syncRTLPluginState(e2, t3)), this.actor.registerMessageHandler("IS", (t3, o2) => e._(this, void 0, void 0, function* () {
            this.self.importScripts(o2);
          })), this.actor.registerMessageHandler("SI", (e2, t3) => this._setImages(e2, t3)), this.actor.registerMessageHandler("UL", (t3, o2) => e._(this, void 0, void 0, function* () {
            this._getLayerIndex(t3).update(o2.layers, o2.removedIds);
          })), this.actor.registerMessageHandler("SL", (t3, o2) => e._(this, void 0, void 0, function* () {
            this._getLayerIndex(t3).replace(o2);
          }));
        }
        _setImages(t2, o2) {
          return e._(this, void 0, void 0, function* () {
            this.availableImages[t2] = o2;
            for (const e2 in this.workerSources[t2]) {
              const i2 = this.workerSources[t2][e2];
              for (const e3 in i2) i2[e3].availableImages = o2;
            }
          });
        }
        _syncRTLPluginState(t2, o2) {
          return e._(this, void 0, void 0, function* () {
            if (e.bD.isParsed()) return e.bD.getState();
            if ("loading" !== o2.pluginStatus) return e.bD.setState(o2), o2;
            const t3 = o2.pluginURL;
            if (this.self.importScripts(t3), e.bD.isParsed()) {
              const o3 = { pluginStatus: "loaded", pluginURL: t3 };
              return e.bD.setState(o3), o3;
            }
            throw e.bD.setState({ pluginStatus: "error", pluginURL: "" }), new Error(`RTL Text Plugin failed to import scripts from ${t3}`);
          });
        }
        _getAvailableImages(e2) {
          let t2 = this.availableImages[e2];
          return t2 || (t2 = []), t2;
        }
        _getLayerIndex(e2) {
          let o2 = this.layerIndexes[e2];
          return o2 || (o2 = this.layerIndexes[e2] = new t()), o2;
        }
        _getWorkerSource(e2, t2, o2) {
          if (this.workerSources[e2] || (this.workerSources[e2] = {}), this.workerSources[e2][t2] || (this.workerSources[e2][t2] = {}), !this.workerSources[e2][t2][o2]) {
            const i2 = { sendAsync: (t3, o3) => (t3.targetMapId = e2, this.actor.sendAsync(t3, o3)) };
            switch (t2) {
              case "vector":
                this.workerSources[e2][t2][o2] = new r(i2, this._getLayerIndex(e2), this._getAvailableImages(e2));
                break;
              case "geojson":
                this.workerSources[e2][t2][o2] = new ye(i2, this._getLayerIndex(e2), this._getAvailableImages(e2));
                break;
              default:
                this.workerSources[e2][t2][o2] = new this.externalWorkerSourceTypes[t2](i2, this._getLayerIndex(e2), this._getAvailableImages(e2));
            }
          }
          return this.workerSources[e2][t2][o2];
        }
        _getDEMWorkerSource(e2, t2) {
          return this.demWorkerSources[e2] || (this.demWorkerSources[e2] = {}), this.demWorkerSources[e2][t2] || (this.demWorkerSources[e2][t2] = new n()), this.demWorkerSources[e2][t2];
        }
      }
      return e.i(self) && (self.worker = new ve2(self)), ve2;
    });
    define("index", ["exports", "./shared"], function(t, e) {
      var i = "4.7.1";
      let a, s;
      const o = { now: "undefined" != typeof performance && performance && performance.now ? performance.now.bind(performance) : Date.now.bind(Date), frameAsync: (t2) => new Promise((i2, a2) => {
        const s2 = requestAnimationFrame(i2);
        t2.signal.addEventListener("abort", () => {
          cancelAnimationFrame(s2), a2(e.c());
        });
      }), getImageData(t2, e2 = 0) {
        return this.getImageCanvasContext(t2).getImageData(-e2, -e2, t2.width + 2 * e2, t2.height + 2 * e2);
      }, getImageCanvasContext(t2) {
        const e2 = window.document.createElement("canvas"), i2 = e2.getContext("2d", { willReadFrequently: true });
        if (!i2) throw new Error("failed to create canvas 2d context");
        return e2.width = t2.width, e2.height = t2.height, i2.drawImage(t2, 0, 0, t2.width, t2.height), i2;
      }, resolveURL: (t2) => (a || (a = document.createElement("a")), a.href = t2, a.href), hardwareConcurrency: "undefined" != typeof navigator && navigator.hardwareConcurrency || 4, get prefersReducedMotion() {
        return !!matchMedia && (null == s && (s = matchMedia("(prefers-reduced-motion: reduce)")), s.matches);
      } };
      class r {
        static testProp(t2) {
          if (!r.docStyle) return t2[0];
          for (let e2 = 0; e2 < t2.length; e2++) if (t2[e2] in r.docStyle) return t2[e2];
          return t2[0];
        }
        static create(t2, e2, i2) {
          const a2 = window.document.createElement(t2);
          return void 0 !== e2 && (a2.className = e2), i2 && i2.appendChild(a2), a2;
        }
        static createNS(t2, e2) {
          return window.document.createElementNS(t2, e2);
        }
        static disableDrag() {
          r.docStyle && r.selectProp && (r.userSelect = r.docStyle[r.selectProp], r.docStyle[r.selectProp] = "none");
        }
        static enableDrag() {
          r.docStyle && r.selectProp && (r.docStyle[r.selectProp] = r.userSelect);
        }
        static setTransform(t2, e2) {
          t2.style[r.transformProp] = e2;
        }
        static addEventListener(t2, e2, i2, a2 = {}) {
          t2.addEventListener(e2, i2, "passive" in a2 ? a2 : a2.capture);
        }
        static removeEventListener(t2, e2, i2, a2 = {}) {
          t2.removeEventListener(e2, i2, "passive" in a2 ? a2 : a2.capture);
        }
        static suppressClickInternal(t2) {
          t2.preventDefault(), t2.stopPropagation(), window.removeEventListener("click", r.suppressClickInternal, true);
        }
        static suppressClick() {
          window.addEventListener("click", r.suppressClickInternal, true), window.setTimeout(() => {
            window.removeEventListener("click", r.suppressClickInternal, true);
          }, 0);
        }
        static getScale(t2) {
          const e2 = t2.getBoundingClientRect();
          return { x: e2.width / t2.offsetWidth || 1, y: e2.height / t2.offsetHeight || 1, boundingClientRect: e2 };
        }
        static getPoint(t2, i2, a2) {
          const s2 = i2.boundingClientRect;
          return new e.P((a2.clientX - s2.left) / i2.x - t2.clientLeft, (a2.clientY - s2.top) / i2.y - t2.clientTop);
        }
        static mousePos(t2, e2) {
          const i2 = r.getScale(t2);
          return r.getPoint(t2, i2, e2);
        }
        static touchPos(t2, e2) {
          const i2 = [], a2 = r.getScale(t2);
          for (let s2 = 0; s2 < e2.length; s2++) i2.push(r.getPoint(t2, a2, e2[s2]));
          return i2;
        }
        static mouseButton(t2) {
          return t2.button;
        }
        static remove(t2) {
          t2.parentNode && t2.parentNode.removeChild(t2);
        }
      }
      r.docStyle = "undefined" != typeof window && window.document && window.document.documentElement.style, r.selectProp = r.testProp(["userSelect", "MozUserSelect", "WebkitUserSelect", "msUserSelect"]), r.transformProp = r.testProp(["transform", "WebkitTransform"]);
      const n = { supported: false, testSupport: function(t2) {
        !c && h && (u2 ? d(t2) : l = t2);
      } };
      let l, h, c = false, u2 = false;
      function d(t2) {
        const e2 = t2.createTexture();
        t2.bindTexture(t2.TEXTURE_2D, e2);
        try {
          if (t2.texImage2D(t2.TEXTURE_2D, 0, t2.RGBA, t2.RGBA, t2.UNSIGNED_BYTE, h), t2.isContextLost()) return;
          n.supported = true;
        } catch (t3) {
        }
        t2.deleteTexture(e2), c = true;
      }
      var _;
      "undefined" != typeof document && (h = document.createElement("img"), h.onload = () => {
        l && d(l), l = null, u2 = true;
      }, h.onerror = () => {
        c = true, l = null;
      }, h.src = "data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="), function(t2) {
        let i2, a2, s2, o2;
        t2.resetRequestQueue = () => {
          i2 = [], a2 = 0, s2 = 0, o2 = {};
        }, t2.addThrottleControl = (t3) => {
          const e2 = s2++;
          return o2[e2] = t3, e2;
        }, t2.removeThrottleControl = (t3) => {
          delete o2[t3], l2();
        }, t2.getImage = (t3, a3, s3 = true) => new Promise((o3, r3) => {
          n.supported && (t3.headers || (t3.headers = {}), t3.headers.accept = "image/webp,*/*"), e.e(t3, { type: "image" }), i2.push({ abortController: a3, requestParameters: t3, supportImageRefresh: s3, state: "queued", onError: (t4) => {
            r3(t4);
          }, onSuccess: (t4) => {
            o3(t4);
          } }), l2();
        });
        const r2 = (t3) => e._(this, void 0, void 0, function* () {
          t3.state = "running";
          const { requestParameters: i3, supportImageRefresh: s3, onError: o3, onSuccess: r3, abortController: n2 } = t3, c2 = false === s3 && !e.i(self) && !e.g(i3.url) && (!i3.headers || Object.keys(i3.headers).reduce((t4, e2) => t4 && "accept" === e2, true));
          a2++;
          const u3 = c2 ? h2(i3, n2) : e.m(i3, n2);
          try {
            const i4 = yield u3;
            delete t3.abortController, t3.state = "completed", i4.data instanceof HTMLImageElement || e.b(i4.data) ? r3(i4) : i4.data && r3({ data: yield (d2 = i4.data, "function" == typeof createImageBitmap ? e.d(d2) : e.f(d2)), cacheControl: i4.cacheControl, expires: i4.expires });
          } catch (e2) {
            delete t3.abortController, o3(e2);
          } finally {
            a2--, l2();
          }
          var d2;
        }), l2 = () => {
          const t3 = (() => {
            for (const t4 of Object.keys(o2)) if (o2[t4]()) return true;
            return false;
          })() ? e.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME : e.a.MAX_PARALLEL_IMAGE_REQUESTS;
          for (let e2 = a2; e2 < t3 && i2.length > 0; e2++) {
            const t4 = i2.shift();
            t4.abortController.signal.aborted ? e2-- : r2(t4);
          }
        }, h2 = (t3, i3) => new Promise((a3, s3) => {
          const o3 = new Image(), r3 = t3.url, n2 = t3.credentials;
          n2 && "include" === n2 ? o3.crossOrigin = "use-credentials" : (n2 && "same-origin" === n2 || !e.s(r3)) && (o3.crossOrigin = "anonymous"), i3.signal.addEventListener("abort", () => {
            o3.src = "", s3(e.c());
          }), o3.fetchPriority = "high", o3.onload = () => {
            o3.onerror = o3.onload = null, a3({ data: o3 });
          }, o3.onerror = () => {
            o3.onerror = o3.onload = null, i3.signal.aborted || s3(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));
          }, o3.src = r3;
        });
      }(_ || (_ = {})), _.resetRequestQueue();
      class p2 {
        constructor(t2) {
          this._transformRequestFn = t2;
        }
        transformRequest(t2, e2) {
          return this._transformRequestFn && this._transformRequestFn(t2, e2) || { url: t2 };
        }
        setTransformRequest(t2) {
          this._transformRequestFn = t2;
        }
      }
      function m(t2) {
        var i2 = new e.A(3);
        return i2[0] = t2[0], i2[1] = t2[1], i2[2] = t2[2], i2;
      }
      var f, g = function(t2, e2, i2) {
        return t2[0] = e2[0] - i2[0], t2[1] = e2[1] - i2[1], t2[2] = e2[2] - i2[2], t2;
      };
      f = new e.A(3), e.A != Float32Array && (f[0] = 0, f[1] = 0, f[2] = 0);
      var v = function(t2) {
        var e2 = t2[0], i2 = t2[1];
        return e2 * e2 + i2 * i2;
      };
      function x(t2) {
        const e2 = [];
        if ("string" == typeof t2) e2.push({ id: "default", url: t2 });
        else if (t2 && t2.length > 0) {
          const i2 = [];
          for (const { id: a2, url: s2 } of t2) {
            const t3 = `${a2}${s2}`;
            -1 === i2.indexOf(t3) && (i2.push(t3), e2.push({ id: a2, url: s2 }));
          }
        }
        return e2;
      }
      function y(t2, e2, i2) {
        const a2 = t2.split("?");
        return a2[0] += `${e2}${i2}`, a2.join("?");
      }
      !function() {
        var t2 = new e.A(2);
        e.A != Float32Array && (t2[0] = 0, t2[1] = 0);
      }();
      class b {
        constructor(t2, e2, i2, a2) {
          this.context = t2, this.format = i2, this.texture = t2.gl.createTexture(), this.update(e2, a2);
        }
        update(t2, i2, a2) {
          const { width: s2, height: o2 } = t2, r2 = !(this.size && this.size[0] === s2 && this.size[1] === o2 || a2), { context: n2 } = this, { gl: l2 } = n2;
          if (this.useMipmap = Boolean(i2 && i2.useMipmap), l2.bindTexture(l2.TEXTURE_2D, this.texture), n2.pixelStoreUnpackFlipY.set(false), n2.pixelStoreUnpack.set(1), n2.pixelStoreUnpackPremultiplyAlpha.set(this.format === l2.RGBA && (!i2 || false !== i2.premultiply)), r2) this.size = [s2, o2], t2 instanceof HTMLImageElement || t2 instanceof HTMLCanvasElement || t2 instanceof HTMLVideoElement || t2 instanceof ImageData || e.b(t2) ? l2.texImage2D(l2.TEXTURE_2D, 0, this.format, this.format, l2.UNSIGNED_BYTE, t2) : l2.texImage2D(l2.TEXTURE_2D, 0, this.format, s2, o2, 0, this.format, l2.UNSIGNED_BYTE, t2.data);
          else {
            const { x: i3, y: r3 } = a2 || { x: 0, y: 0 };
            t2 instanceof HTMLImageElement || t2 instanceof HTMLCanvasElement || t2 instanceof HTMLVideoElement || t2 instanceof ImageData || e.b(t2) ? l2.texSubImage2D(l2.TEXTURE_2D, 0, i3, r3, l2.RGBA, l2.UNSIGNED_BYTE, t2) : l2.texSubImage2D(l2.TEXTURE_2D, 0, i3, r3, s2, o2, l2.RGBA, l2.UNSIGNED_BYTE, t2.data);
          }
          this.useMipmap && this.isSizePowerOfTwo() && l2.generateMipmap(l2.TEXTURE_2D);
        }
        bind(t2, e2, i2) {
          const { context: a2 } = this, { gl: s2 } = a2;
          s2.bindTexture(s2.TEXTURE_2D, this.texture), i2 !== s2.LINEAR_MIPMAP_NEAREST || this.isSizePowerOfTwo() || (i2 = s2.LINEAR), t2 !== this.filter && (s2.texParameteri(s2.TEXTURE_2D, s2.TEXTURE_MAG_FILTER, t2), s2.texParameteri(s2.TEXTURE_2D, s2.TEXTURE_MIN_FILTER, i2 || t2), this.filter = t2), e2 !== this.wrap && (s2.texParameteri(s2.TEXTURE_2D, s2.TEXTURE_WRAP_S, e2), s2.texParameteri(s2.TEXTURE_2D, s2.TEXTURE_WRAP_T, e2), this.wrap = e2);
        }
        isSizePowerOfTwo() {
          return this.size[0] === this.size[1] && Math.log(this.size[0]) / Math.LN2 % 1 == 0;
        }
        destroy() {
          const { gl: t2 } = this.context;
          t2.deleteTexture(this.texture), this.texture = null;
        }
      }
      function w2(t2) {
        const { userImage: e2 } = t2;
        return !!(e2 && e2.render && e2.render()) && (t2.data.replace(new Uint8Array(e2.data.buffer)), true);
      }
      class T extends e.E {
        constructor() {
          super(), this.images = {}, this.updatedImages = {}, this.callbackDispatchedThisFrame = {}, this.loaded = false, this.requestors = [], this.patterns = {}, this.atlasImage = new e.R({ width: 1, height: 1 }), this.dirty = true;
        }
        isLoaded() {
          return this.loaded;
        }
        setLoaded(t2) {
          if (this.loaded !== t2 && (this.loaded = t2, t2)) {
            for (const { ids: t3, promiseResolve: e2 } of this.requestors) e2(this._getImagesForIds(t3));
            this.requestors = [];
          }
        }
        getImage(t2) {
          const i2 = this.images[t2];
          if (i2 && !i2.data && i2.spriteData) {
            const t3 = i2.spriteData;
            i2.data = new e.R({ width: t3.width, height: t3.height }, t3.context.getImageData(t3.x, t3.y, t3.width, t3.height).data), i2.spriteData = null;
          }
          return i2;
        }
        addImage(t2, e2) {
          if (this.images[t2]) throw new Error(`Image id ${t2} already exist, use updateImage instead`);
          this._validate(t2, e2) && (this.images[t2] = e2);
        }
        _validate(t2, i2) {
          let a2 = true;
          const s2 = i2.data || i2.spriteData;
          return this._validateStretch(i2.stretchX, s2 && s2.width) || (this.fire(new e.j(new Error(`Image "${t2}" has invalid "stretchX" value`))), a2 = false), this._validateStretch(i2.stretchY, s2 && s2.height) || (this.fire(new e.j(new Error(`Image "${t2}" has invalid "stretchY" value`))), a2 = false), this._validateContent(i2.content, i2) || (this.fire(new e.j(new Error(`Image "${t2}" has invalid "content" value`))), a2 = false), a2;
        }
        _validateStretch(t2, e2) {
          if (!t2) return true;
          let i2 = 0;
          for (const a2 of t2) {
            if (a2[0] < i2 || a2[1] < a2[0] || e2 < a2[1]) return false;
            i2 = a2[1];
          }
          return true;
        }
        _validateContent(t2, e2) {
          if (!t2) return true;
          if (4 !== t2.length) return false;
          const i2 = e2.spriteData, a2 = i2 && i2.width || e2.data.width, s2 = i2 && i2.height || e2.data.height;
          return !(t2[0] < 0 || a2 < t2[0] || t2[1] < 0 || s2 < t2[1] || t2[2] < 0 || a2 < t2[2] || t2[3] < 0 || s2 < t2[3] || t2[2] < t2[0] || t2[3] < t2[1]);
        }
        updateImage(t2, e2, i2 = true) {
          const a2 = this.getImage(t2);
          if (i2 && (a2.data.width !== e2.data.width || a2.data.height !== e2.data.height)) throw new Error(`size mismatch between old image (${a2.data.width}x${a2.data.height}) and new image (${e2.data.width}x${e2.data.height}).`);
          e2.version = a2.version + 1, this.images[t2] = e2, this.updatedImages[t2] = true;
        }
        removeImage(t2) {
          const e2 = this.images[t2];
          delete this.images[t2], delete this.patterns[t2], e2.userImage && e2.userImage.onRemove && e2.userImage.onRemove();
        }
        listImages() {
          return Object.keys(this.images);
        }
        getImages(t2) {
          return new Promise((e2, i2) => {
            let a2 = true;
            if (!this.isLoaded()) for (const e3 of t2) this.images[e3] || (a2 = false);
            this.isLoaded() || a2 ? e2(this._getImagesForIds(t2)) : this.requestors.push({ ids: t2, promiseResolve: e2 });
          });
        }
        _getImagesForIds(t2) {
          const i2 = {};
          for (const a2 of t2) {
            let t3 = this.getImage(a2);
            t3 || (this.fire(new e.k("styleimagemissing", { id: a2 })), t3 = this.getImage(a2)), t3 ? i2[a2] = { data: t3.data.clone(), pixelRatio: t3.pixelRatio, sdf: t3.sdf, version: t3.version, stretchX: t3.stretchX, stretchY: t3.stretchY, content: t3.content, textFitWidth: t3.textFitWidth, textFitHeight: t3.textFitHeight, hasRenderCallback: Boolean(t3.userImage && t3.userImage.render) } : e.w(`Image "${a2}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`);
          }
          return i2;
        }
        getPixelSize() {
          const { width: t2, height: e2 } = this.atlasImage;
          return { width: t2, height: e2 };
        }
        getPattern(t2) {
          const i2 = this.patterns[t2], a2 = this.getImage(t2);
          if (!a2) return null;
          if (i2 && i2.position.version === a2.version) return i2.position;
          if (i2) i2.position.version = a2.version;
          else {
            const i3 = { w: a2.data.width + 2, h: a2.data.height + 2, x: 0, y: 0 }, s2 = new e.I(i3, a2);
            this.patterns[t2] = { bin: i3, position: s2 };
          }
          return this._updatePatternAtlas(), this.patterns[t2].position;
        }
        bind(t2) {
          const e2 = t2.gl;
          this.atlasTexture ? this.dirty && (this.atlasTexture.update(this.atlasImage), this.dirty = false) : this.atlasTexture = new b(t2, this.atlasImage, e2.RGBA), this.atlasTexture.bind(e2.LINEAR, e2.CLAMP_TO_EDGE);
        }
        _updatePatternAtlas() {
          const t2 = [];
          for (const e2 in this.patterns) t2.push(this.patterns[e2].bin);
          const { w: i2, h: a2 } = e.p(t2), s2 = this.atlasImage;
          s2.resize({ width: i2 || 1, height: a2 || 1 });
          for (const t3 in this.patterns) {
            const { bin: i3 } = this.patterns[t3], a3 = i3.x + 1, o2 = i3.y + 1, r2 = this.getImage(t3).data, n2 = r2.width, l2 = r2.height;
            e.R.copy(r2, s2, { x: 0, y: 0 }, { x: a3, y: o2 }, { width: n2, height: l2 }), e.R.copy(r2, s2, { x: 0, y: l2 - 1 }, { x: a3, y: o2 - 1 }, { width: n2, height: 1 }), e.R.copy(r2, s2, { x: 0, y: 0 }, { x: a3, y: o2 + l2 }, { width: n2, height: 1 }), e.R.copy(r2, s2, { x: n2 - 1, y: 0 }, { x: a3 - 1, y: o2 }, { width: 1, height: l2 }), e.R.copy(r2, s2, { x: 0, y: 0 }, { x: a3 + n2, y: o2 }, { width: 1, height: l2 });
          }
          this.dirty = true;
        }
        beginFrame() {
          this.callbackDispatchedThisFrame = {};
        }
        dispatchRenderCallbacks(t2) {
          for (const i2 of t2) {
            if (this.callbackDispatchedThisFrame[i2]) continue;
            this.callbackDispatchedThisFrame[i2] = true;
            const t3 = this.getImage(i2);
            t3 || e.w(`Image with ID: "${i2}" was not found`), w2(t3) && this.updateImage(i2, t3);
          }
        }
      }
      const I = 1e20;
      function E(t2, e2, i2, a2, s2, o2, r2, n2, l2) {
        for (let h2 = e2; h2 < e2 + a2; h2++) P2(t2, i2 * o2 + h2, o2, s2, r2, n2, l2);
        for (let h2 = i2; h2 < i2 + s2; h2++) P2(t2, h2 * o2 + e2, 1, a2, r2, n2, l2);
      }
      function P2(t2, e2, i2, a2, s2, o2, r2) {
        o2[0] = 0, r2[0] = -I, r2[1] = I, s2[0] = t2[e2];
        for (let n2 = 1, l2 = 0, h2 = 0; n2 < a2; n2++) {
          s2[n2] = t2[e2 + n2 * i2];
          const a3 = n2 * n2;
          do {
            const t3 = o2[l2];
            h2 = (s2[n2] - s2[t3] + a3 - t3 * t3) / (n2 - t3) / 2;
          } while (h2 <= r2[l2] && --l2 > -1);
          l2++, o2[l2] = n2, r2[l2] = h2, r2[l2 + 1] = I;
        }
        for (let n2 = 0, l2 = 0; n2 < a2; n2++) {
          for (; r2[l2 + 1] < n2; ) l2++;
          const a3 = o2[l2], h2 = n2 - a3;
          t2[e2 + n2 * i2] = s2[a3] + h2 * h2;
        }
      }
      class C {
        constructor(t2, e2) {
          this.requestManager = t2, this.localIdeographFontFamily = e2, this.entries = {};
        }
        setURL(t2) {
          this.url = t2;
        }
        getGlyphs(t2) {
          return e._(this, void 0, void 0, function* () {
            const e2 = [];
            for (const i3 in t2) for (const a3 of t2[i3]) e2.push(this._getAndCacheGlyphsPromise(i3, a3));
            const i2 = yield Promise.all(e2), a2 = {};
            for (const { stack: t3, id: e3, glyph: s2 } of i2) a2[t3] || (a2[t3] = {}), a2[t3][e3] = s2 && { id: s2.id, bitmap: s2.bitmap.clone(), metrics: s2.metrics };
            return a2;
          });
        }
        _getAndCacheGlyphsPromise(t2, i2) {
          return e._(this, void 0, void 0, function* () {
            let e2 = this.entries[t2];
            e2 || (e2 = this.entries[t2] = { glyphs: {}, requests: {}, ranges: {} });
            let a2 = e2.glyphs[i2];
            if (void 0 !== a2) return { stack: t2, id: i2, glyph: a2 };
            if (a2 = this._tinySDF(e2, t2, i2), a2) return e2.glyphs[i2] = a2, { stack: t2, id: i2, glyph: a2 };
            const s2 = Math.floor(i2 / 256);
            if (256 * s2 > 65535) throw new Error("glyphs > 65535 not supported");
            if (e2.ranges[s2]) return { stack: t2, id: i2, glyph: a2 };
            if (!this.url) throw new Error("glyphsUrl is not set");
            if (!e2.requests[s2]) {
              const i3 = C.loadGlyphRange(t2, s2, this.url, this.requestManager);
              e2.requests[s2] = i3;
            }
            const o2 = yield e2.requests[s2];
            for (const t3 in o2) this._doesCharSupportLocalGlyph(+t3) || (e2.glyphs[+t3] = o2[+t3]);
            return e2.ranges[s2] = true, { stack: t2, id: i2, glyph: o2[i2] || null };
          });
        }
        _doesCharSupportLocalGlyph(t2) {
          return !!this.localIdeographFontFamily && new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}", "u").test(String.fromCodePoint(t2));
        }
        _tinySDF(t2, i2, a2) {
          const s2 = this.localIdeographFontFamily;
          if (!s2) return;
          if (!this._doesCharSupportLocalGlyph(a2)) return;
          let o2 = t2.tinySDF;
          if (!o2) {
            let e2 = "400";
            /bold/i.test(i2) ? e2 = "900" : /medium/i.test(i2) ? e2 = "500" : /light/i.test(i2) && (e2 = "200"), o2 = t2.tinySDF = new C.TinySDF({ fontSize: 48, buffer: 6, radius: 16, cutoff: 0.25, fontFamily: s2, fontWeight: e2 });
          }
          const r2 = o2.draw(String.fromCharCode(a2));
          return { id: a2, bitmap: new e.o({ width: r2.width || 60, height: r2.height || 60 }, r2.data), metrics: { width: r2.glyphWidth / 2 || 24, height: r2.glyphHeight / 2 || 24, left: r2.glyphLeft / 2 + 0.5 || 0, top: r2.glyphTop / 2 - 27.5 || -8, advance: r2.glyphAdvance / 2 || 24, isDoubleResolution: true } };
        }
      }
      C.loadGlyphRange = function(t2, i2, a2, s2) {
        return e._(this, void 0, void 0, function* () {
          const o2 = 256 * i2, r2 = o2 + 255, n2 = s2.transformRequest(a2.replace("{fontstack}", t2).replace("{range}", `${o2}-${r2}`), "Glyphs"), l2 = yield e.l(n2, new AbortController());
          if (!l2 || !l2.data) throw new Error(`Could not load glyph range. range: ${i2}, ${o2}-${r2}`);
          const h2 = {};
          for (const t3 of e.n(l2.data)) h2[t3.id] = t3;
          return h2;
        });
      }, C.TinySDF = class {
        constructor({ fontSize: t2 = 24, buffer: e2 = 3, radius: i2 = 8, cutoff: a2 = 0.25, fontFamily: s2 = "sans-serif", fontWeight: o2 = "normal", fontStyle: r2 = "normal" } = {}) {
          this.buffer = e2, this.cutoff = a2, this.radius = i2;
          const n2 = this.size = t2 + 4 * e2, l2 = this._createCanvas(n2), h2 = this.ctx = l2.getContext("2d", { willReadFrequently: true });
          h2.font = `${r2} ${o2} ${t2}px ${s2}`, h2.textBaseline = "alphabetic", h2.textAlign = "left", h2.fillStyle = "black", this.gridOuter = new Float64Array(n2 * n2), this.gridInner = new Float64Array(n2 * n2), this.f = new Float64Array(n2), this.z = new Float64Array(n2 + 1), this.v = new Uint16Array(n2);
        }
        _createCanvas(t2) {
          const e2 = document.createElement("canvas");
          return e2.width = e2.height = t2, e2;
        }
        draw(t2) {
          const { width: e2, actualBoundingBoxAscent: i2, actualBoundingBoxDescent: a2, actualBoundingBoxLeft: s2, actualBoundingBoxRight: o2 } = this.ctx.measureText(t2), r2 = Math.ceil(i2), n2 = Math.max(0, Math.min(this.size - this.buffer, Math.ceil(o2 - s2))), l2 = Math.min(this.size - this.buffer, r2 + Math.ceil(a2)), h2 = n2 + 2 * this.buffer, c2 = l2 + 2 * this.buffer, u3 = Math.max(h2 * c2, 0), d2 = new Uint8ClampedArray(u3), _2 = { data: d2, width: h2, height: c2, glyphWidth: n2, glyphHeight: l2, glyphTop: r2, glyphLeft: 0, glyphAdvance: e2 };
          if (0 === n2 || 0 === l2) return _2;
          const { ctx: p3, buffer: m2, gridInner: f2, gridOuter: g2 } = this;
          p3.clearRect(m2, m2, n2, l2), p3.fillText(t2, m2, m2 + r2);
          const v2 = p3.getImageData(m2, m2, n2, l2);
          g2.fill(I, 0, u3), f2.fill(0, 0, u3);
          for (let t3 = 0; t3 < l2; t3++) for (let e3 = 0; e3 < n2; e3++) {
            const i3 = v2.data[4 * (t3 * n2 + e3) + 3] / 255;
            if (0 === i3) continue;
            const a3 = (t3 + m2) * h2 + e3 + m2;
            if (1 === i3) g2[a3] = 0, f2[a3] = I;
            else {
              const t4 = 0.5 - i3;
              g2[a3] = t4 > 0 ? t4 * t4 : 0, f2[a3] = t4 < 0 ? t4 * t4 : 0;
            }
          }
          E(g2, 0, 0, h2, c2, h2, this.f, this.v, this.z), E(f2, m2, m2, n2, l2, h2, this.f, this.v, this.z);
          for (let t3 = 0; t3 < u3; t3++) {
            const e3 = Math.sqrt(g2[t3]) - Math.sqrt(f2[t3]);
            d2[t3] = Math.round(255 - 255 * (e3 / this.radius + this.cutoff));
          }
          return _2;
        }
      };
      class S {
        constructor() {
          this.specification = e.v.light.position;
        }
        possiblyEvaluate(t2, i2) {
          return e.x(t2.expression.evaluate(i2));
        }
        interpolate(t2, i2, a2) {
          return { x: e.y.number(t2.x, i2.x, a2), y: e.y.number(t2.y, i2.y, a2), z: e.y.number(t2.z, i2.z, a2) };
        }
      }
      let z2;
      class D extends e.E {
        constructor(t2) {
          super(), z2 = z2 || new e.q({ anchor: new e.D(e.v.light.anchor), position: new S(), color: new e.D(e.v.light.color), intensity: new e.D(e.v.light.intensity) }), this._transitionable = new e.T(z2), this.setLight(t2), this._transitioning = this._transitionable.untransitioned();
        }
        getLight() {
          return this._transitionable.serialize();
        }
        setLight(t2, i2 = {}) {
          if (!this._validate(e.r, t2, i2)) for (const e2 in t2) {
            const i3 = t2[e2];
            e2.endsWith("-transition") ? this._transitionable.setTransition(e2.slice(0, -11), i3) : this._transitionable.setValue(e2, i3);
          }
        }
        updateTransitions(t2) {
          this._transitioning = this._transitionable.transitioned(t2, this._transitioning);
        }
        hasTransition() {
          return this._transitioning.hasTransition();
        }
        recalculate(t2) {
          this.properties = this._transitioning.possiblyEvaluate(t2);
        }
        _validate(t2, i2, a2) {
          return (!a2 || false !== a2.validate) && e.t(this, t2.call(e.u, { value: i2, style: { glyphs: true, sprite: true }, styleSpec: e.v }));
        }
      }
      const M = new e.q({ "sky-color": new e.D(e.v.sky["sky-color"]), "horizon-color": new e.D(e.v.sky["horizon-color"]), "fog-color": new e.D(e.v.sky["fog-color"]), "fog-ground-blend": new e.D(e.v.sky["fog-ground-blend"]), "horizon-fog-blend": new e.D(e.v.sky["horizon-fog-blend"]), "sky-horizon-blend": new e.D(e.v.sky["sky-horizon-blend"]), "atmosphere-blend": new e.D(e.v.sky["atmosphere-blend"]) });
      class A extends e.E {
        constructor(t2) {
          super(), this._transitionable = new e.T(M), this.setSky(t2), this._transitioning = this._transitionable.untransitioned(), this.recalculate(new e.z(0));
        }
        setSky(t2, i2 = {}) {
          if (!this._validate(e.B, t2, i2)) {
            t2 || (t2 = { "sky-color": "transparent", "horizon-color": "transparent", "fog-color": "transparent", "fog-ground-blend": 1, "atmosphere-blend": 0 });
            for (const e2 in t2) {
              const i3 = t2[e2];
              e2.endsWith("-transition") ? this._transitionable.setTransition(e2.slice(0, -11), i3) : this._transitionable.setValue(e2, i3);
            }
          }
        }
        getSky() {
          return this._transitionable.serialize();
        }
        updateTransitions(t2) {
          this._transitioning = this._transitionable.transitioned(t2, this._transitioning);
        }
        hasTransition() {
          return this._transitioning.hasTransition();
        }
        recalculate(t2) {
          this.properties = this._transitioning.possiblyEvaluate(t2);
        }
        _validate(t2, i2, a2 = {}) {
          return false !== (null == a2 ? void 0 : a2.validate) && e.t(this, t2.call(e.u, e.e({ value: i2, style: { glyphs: true, sprite: true }, styleSpec: e.v })));
        }
        calculateFogBlendOpacity(t2) {
          return t2 < 60 ? 0 : t2 < 70 ? (t2 - 60) / 10 : 1;
        }
      }
      class R {
        constructor(t2, e2) {
          this.width = t2, this.height = e2, this.nextRow = 0, this.data = new Uint8Array(this.width * this.height), this.dashEntry = {};
        }
        getDash(t2, e2) {
          const i2 = t2.join(",") + String(e2);
          return this.dashEntry[i2] || (this.dashEntry[i2] = this.addDash(t2, e2)), this.dashEntry[i2];
        }
        getDashRanges(t2, e2, i2) {
          const a2 = [];
          let s2 = t2.length % 2 == 1 ? -t2[t2.length - 1] * i2 : 0, o2 = t2[0] * i2, r2 = true;
          a2.push({ left: s2, right: o2, isDash: r2, zeroLength: 0 === t2[0] });
          let n2 = t2[0];
          for (let e3 = 1; e3 < t2.length; e3++) {
            r2 = !r2;
            const l2 = t2[e3];
            s2 = n2 * i2, n2 += l2, o2 = n2 * i2, a2.push({ left: s2, right: o2, isDash: r2, zeroLength: 0 === l2 });
          }
          return a2;
        }
        addRoundDash(t2, e2, i2) {
          const a2 = e2 / 2;
          for (let e3 = -i2; e3 <= i2; e3++) {
            const s2 = this.width * (this.nextRow + i2 + e3);
            let o2 = 0, r2 = t2[o2];
            for (let n2 = 0; n2 < this.width; n2++) {
              n2 / r2.right > 1 && (r2 = t2[++o2]);
              const l2 = Math.abs(n2 - r2.left), h2 = Math.abs(n2 - r2.right), c2 = Math.min(l2, h2);
              let u3;
              const d2 = e3 / i2 * (a2 + 1);
              if (r2.isDash) {
                const t3 = a2 - Math.abs(d2);
                u3 = Math.sqrt(c2 * c2 + t3 * t3);
              } else u3 = a2 - Math.sqrt(c2 * c2 + d2 * d2);
              this.data[s2 + n2] = Math.max(0, Math.min(255, u3 + 128));
            }
          }
        }
        addRegularDash(t2) {
          for (let e3 = t2.length - 1; e3 >= 0; --e3) {
            const i3 = t2[e3], a3 = t2[e3 + 1];
            i3.zeroLength ? t2.splice(e3, 1) : a3 && a3.isDash === i3.isDash && (a3.left = i3.left, t2.splice(e3, 1));
          }
          const e2 = t2[0], i2 = t2[t2.length - 1];
          e2.isDash === i2.isDash && (e2.left = i2.left - this.width, i2.right = e2.right + this.width);
          const a2 = this.width * this.nextRow;
          let s2 = 0, o2 = t2[s2];
          for (let e3 = 0; e3 < this.width; e3++) {
            e3 / o2.right > 1 && (o2 = t2[++s2]);
            const i3 = Math.abs(e3 - o2.left), r2 = Math.abs(e3 - o2.right), n2 = Math.min(i3, r2);
            this.data[a2 + e3] = Math.max(0, Math.min(255, (o2.isDash ? n2 : -n2) + 128));
          }
        }
        addDash(t2, i2) {
          const a2 = i2 ? 7 : 0, s2 = 2 * a2 + 1;
          if (this.nextRow + s2 > this.height) return e.w("LineAtlas out of space"), null;
          let o2 = 0;
          for (let e2 = 0; e2 < t2.length; e2++) o2 += t2[e2];
          if (0 !== o2) {
            const e2 = this.width / o2, s3 = this.getDashRanges(t2, this.width, e2);
            i2 ? this.addRoundDash(s3, e2, a2) : this.addRegularDash(s3);
          }
          const r2 = { y: (this.nextRow + a2 + 0.5) / this.height, height: 2 * a2 / this.height, width: o2 };
          return this.nextRow += s2, this.dirty = true, r2;
        }
        bind(t2) {
          const e2 = t2.gl;
          this.texture ? (e2.bindTexture(e2.TEXTURE_2D, this.texture), this.dirty && (this.dirty = false, e2.texSubImage2D(e2.TEXTURE_2D, 0, 0, 0, this.width, this.height, e2.ALPHA, e2.UNSIGNED_BYTE, this.data))) : (this.texture = e2.createTexture(), e2.bindTexture(e2.TEXTURE_2D, this.texture), e2.texParameteri(e2.TEXTURE_2D, e2.TEXTURE_WRAP_S, e2.REPEAT), e2.texParameteri(e2.TEXTURE_2D, e2.TEXTURE_WRAP_T, e2.REPEAT), e2.texParameteri(e2.TEXTURE_2D, e2.TEXTURE_MIN_FILTER, e2.LINEAR), e2.texParameteri(e2.TEXTURE_2D, e2.TEXTURE_MAG_FILTER, e2.LINEAR), e2.texImage2D(e2.TEXTURE_2D, 0, e2.ALPHA, this.width, this.height, 0, e2.ALPHA, e2.UNSIGNED_BYTE, this.data));
        }
      }
      const k = "maplibre_preloaded_worker_pool";
      class L2 {
        constructor() {
          this.active = {};
        }
        acquire(t2) {
          if (!this.workers) for (this.workers = []; this.workers.length < L2.workerCount; ) this.workers.push(new Worker(e.a.WORKER_URL));
          return this.active[t2] = true, this.workers.slice();
        }
        release(t2) {
          delete this.active[t2], 0 === this.numActive() && (this.workers.forEach((t3) => {
            t3.terminate();
          }), this.workers = null);
        }
        isPreloaded() {
          return !!this.active[k];
        }
        numActive() {
          return Object.keys(this.active).length;
        }
      }
      const F = Math.floor(o.hardwareConcurrency / 2);
      let B2, O2;
      function N2() {
        return B2 || (B2 = new L2()), B2;
      }
      L2.workerCount = e.C(globalThis) ? Math.max(Math.min(F, 3), 1) : 1;
      class U {
        constructor(t2, i2) {
          this.workerPool = t2, this.actors = [], this.currentActor = 0, this.id = i2;
          const a2 = this.workerPool.acquire(i2);
          for (let t3 = 0; t3 < a2.length; t3++) {
            const s2 = new e.F(a2[t3], i2);
            s2.name = `Worker ${t3}`, this.actors.push(s2);
          }
          if (!this.actors.length) throw new Error("No actors found");
        }
        broadcast(t2, e2) {
          const i2 = [];
          for (const a2 of this.actors) i2.push(a2.sendAsync({ type: t2, data: e2 }));
          return Promise.all(i2);
        }
        getActor() {
          return this.currentActor = (this.currentActor + 1) % this.actors.length, this.actors[this.currentActor];
        }
        remove(t2 = true) {
          this.actors.forEach((t3) => {
            t3.remove();
          }), this.actors = [], t2 && this.workerPool.release(this.id);
        }
        registerMessageHandler(t2, e2) {
          for (const i2 of this.actors) i2.registerMessageHandler(t2, e2);
        }
      }
      function j2() {
        return O2 || (O2 = new U(N2(), e.G), O2.registerMessageHandler("GR", (t2, i2, a2) => e.m(i2, a2))), O2;
      }
      function Z2(t2, i2) {
        const a2 = e.H();
        return e.J(a2, a2, [1, 1, 0]), e.K(a2, a2, [0.5 * t2.width, 0.5 * t2.height, 1]), e.L(a2, a2, t2.calculatePosMatrix(i2.toUnwrapped()));
      }
      function q2(t2, e2, i2, a2, s2, o2) {
        const r2 = function(t3, e3, i3) {
          if (t3) for (const a3 of t3) {
            const t4 = e3[a3];
            if (t4 && t4.source === i3 && "fill-extrusion" === t4.type) return true;
          }
          else for (const t4 in e3) {
            const a3 = e3[t4];
            if (a3.source === i3 && "fill-extrusion" === a3.type) return true;
          }
          return false;
        }(s2 && s2.layers, e2, t2.id), n2 = o2.maxPitchScaleFactor(), l2 = t2.tilesIn(a2, n2, r2);
        l2.sort(V2);
        const h2 = [];
        for (const a3 of l2) h2.push({ wrappedTileID: a3.tileID.wrapped().key, queryResults: a3.tile.queryRenderedFeatures(e2, i2, t2._state, a3.queryGeometry, a3.cameraQueryGeometry, a3.scale, s2, o2, n2, Z2(t2.transform, a3.tileID)) });
        const c2 = function(t3) {
          const e3 = {}, i3 = {};
          for (const a3 of t3) {
            const t4 = a3.queryResults, s3 = a3.wrappedTileID, o3 = i3[s3] = i3[s3] || {};
            for (const i4 in t4) {
              const a4 = t4[i4], s4 = o3[i4] = o3[i4] || {}, r3 = e3[i4] = e3[i4] || [];
              for (const t5 of a4) s4[t5.featureIndex] || (s4[t5.featureIndex] = true, r3.push(t5));
            }
          }
          return e3;
        }(h2);
        for (const e3 in c2) c2[e3].forEach((e4) => {
          const i3 = e4.feature, a3 = t2.getFeatureState(i3.layer["source-layer"], i3.id);
          i3.source = i3.layer.source, i3.layer["source-layer"] && (i3.sourceLayer = i3.layer["source-layer"]), i3.state = a3;
        });
        return c2;
      }
      function V2(t2, e2) {
        const i2 = t2.tileID, a2 = e2.tileID;
        return i2.overscaledZ - a2.overscaledZ || i2.canonical.y - a2.canonical.y || i2.wrap - a2.wrap || i2.canonical.x - a2.canonical.x;
      }
      function G2(t2, i2, a2) {
        return e._(this, void 0, void 0, function* () {
          let s2 = t2;
          if (t2.url ? s2 = (yield e.h(i2.transformRequest(t2.url, "Source"), a2)).data : yield o.frameAsync(a2), !s2) return null;
          const r2 = e.M(e.e(s2, t2), ["tiles", "minzoom", "maxzoom", "attribution", "bounds", "scheme", "tileSize", "encoding"]);
          return "vector_layers" in s2 && s2.vector_layers && (r2.vectorLayerIds = s2.vector_layers.map((t3) => t3.id)), r2;
        });
      }
      class H {
        constructor(t2, e2) {
          t2 && (e2 ? this.setSouthWest(t2).setNorthEast(e2) : Array.isArray(t2) && (4 === t2.length ? this.setSouthWest([t2[0], t2[1]]).setNorthEast([t2[2], t2[3]]) : this.setSouthWest(t2[0]).setNorthEast(t2[1])));
        }
        setNorthEast(t2) {
          return this._ne = t2 instanceof e.N ? new e.N(t2.lng, t2.lat) : e.N.convert(t2), this;
        }
        setSouthWest(t2) {
          return this._sw = t2 instanceof e.N ? new e.N(t2.lng, t2.lat) : e.N.convert(t2), this;
        }
        extend(t2) {
          const i2 = this._sw, a2 = this._ne;
          let s2, o2;
          if (t2 instanceof e.N) s2 = t2, o2 = t2;
          else {
            if (!(t2 instanceof H)) return Array.isArray(t2) ? 4 === t2.length || t2.every(Array.isArray) ? this.extend(H.convert(t2)) : this.extend(e.N.convert(t2)) : t2 && ("lng" in t2 || "lon" in t2) && "lat" in t2 ? this.extend(e.N.convert(t2)) : this;
            if (s2 = t2._sw, o2 = t2._ne, !s2 || !o2) return this;
          }
          return i2 || a2 ? (i2.lng = Math.min(s2.lng, i2.lng), i2.lat = Math.min(s2.lat, i2.lat), a2.lng = Math.max(o2.lng, a2.lng), a2.lat = Math.max(o2.lat, a2.lat)) : (this._sw = new e.N(s2.lng, s2.lat), this._ne = new e.N(o2.lng, o2.lat)), this;
        }
        getCenter() {
          return new e.N((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2);
        }
        getSouthWest() {
          return this._sw;
        }
        getNorthEast() {
          return this._ne;
        }
        getNorthWest() {
          return new e.N(this.getWest(), this.getNorth());
        }
        getSouthEast() {
          return new e.N(this.getEast(), this.getSouth());
        }
        getWest() {
          return this._sw.lng;
        }
        getSouth() {
          return this._sw.lat;
        }
        getEast() {
          return this._ne.lng;
        }
        getNorth() {
          return this._ne.lat;
        }
        toArray() {
          return [this._sw.toArray(), this._ne.toArray()];
        }
        toString() {
          return `LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`;
        }
        isEmpty() {
          return !(this._sw && this._ne);
        }
        contains(t2) {
          const { lng: i2, lat: a2 } = e.N.convert(t2);
          let s2 = this._sw.lng <= i2 && i2 <= this._ne.lng;
          return this._sw.lng > this._ne.lng && (s2 = this._sw.lng >= i2 && i2 >= this._ne.lng), this._sw.lat <= a2 && a2 <= this._ne.lat && s2;
        }
        static convert(t2) {
          return t2 instanceof H ? t2 : t2 ? new H(t2) : t2;
        }
        static fromLngLat(t2, i2 = 0) {
          const a2 = 360 * i2 / 40075017, s2 = a2 / Math.cos(Math.PI / 180 * t2.lat);
          return new H(new e.N(t2.lng - s2, t2.lat - a2), new e.N(t2.lng + s2, t2.lat + a2));
        }
        adjustAntiMeridian() {
          const t2 = new e.N(this._sw.lng, this._sw.lat), i2 = new e.N(this._ne.lng, this._ne.lat);
          return new H(t2, t2.lng > i2.lng ? new e.N(i2.lng + 360, i2.lat) : i2);
        }
      }
      class W {
        constructor(t2, e2, i2) {
          this.bounds = H.convert(this.validateBounds(t2)), this.minzoom = e2 || 0, this.maxzoom = i2 || 24;
        }
        validateBounds(t2) {
          return Array.isArray(t2) && 4 === t2.length ? [Math.max(-180, t2[0]), Math.max(-90, t2[1]), Math.min(180, t2[2]), Math.min(90, t2[3])] : [-180, -90, 180, 90];
        }
        contains(t2) {
          const i2 = Math.pow(2, t2.z), a2 = Math.floor(e.O(this.bounds.getWest()) * i2), s2 = Math.floor(e.Q(this.bounds.getNorth()) * i2), o2 = Math.ceil(e.O(this.bounds.getEast()) * i2), r2 = Math.ceil(e.Q(this.bounds.getSouth()) * i2);
          return t2.x >= a2 && t2.x < o2 && t2.y >= s2 && t2.y < r2;
        }
      }
      class $2 extends e.E {
        constructor(t2, i2, a2, s2) {
          if (super(), this.id = t2, this.dispatcher = a2, this.type = "vector", this.minzoom = 0, this.maxzoom = 22, this.scheme = "xyz", this.tileSize = 512, this.reparseOverscaled = true, this.isTileClipped = true, this._loaded = false, e.e(this, e.M(i2, ["url", "scheme", "tileSize", "promoteId"])), this._options = e.e({ type: "vector" }, i2), this._collectResourceTiming = i2.collectResourceTiming, 512 !== this.tileSize) throw new Error("vector tile sources must have a tileSize of 512");
          this.setEventedParent(s2);
        }
        load() {
          return e._(this, void 0, void 0, function* () {
            this._loaded = false, this.fire(new e.k("dataloading", { dataType: "source" })), this._tileJSONRequest = new AbortController();
            try {
              const t2 = yield G2(this._options, this.map._requestManager, this._tileJSONRequest);
              this._tileJSONRequest = null, this._loaded = true, this.map.style.sourceCaches[this.id].clearTiles(), t2 && (e.e(this, t2), t2.bounds && (this.tileBounds = new W(t2.bounds, this.minzoom, this.maxzoom)), this.fire(new e.k("data", { dataType: "source", sourceDataType: "metadata" })), this.fire(new e.k("data", { dataType: "source", sourceDataType: "content" })));
            } catch (t2) {
              this._tileJSONRequest = null, this.fire(new e.j(t2));
            }
          });
        }
        loaded() {
          return this._loaded;
        }
        hasTile(t2) {
          return !this.tileBounds || this.tileBounds.contains(t2.canonical);
        }
        onAdd(t2) {
          this.map = t2, this.load();
        }
        setSourceProperty(t2) {
          this._tileJSONRequest && this._tileJSONRequest.abort(), t2(), this.load();
        }
        setTiles(t2) {
          return this.setSourceProperty(() => {
            this._options.tiles = t2;
          }), this;
        }
        setUrl(t2) {
          return this.setSourceProperty(() => {
            this.url = t2, this._options.url = t2;
          }), this;
        }
        onRemove() {
          this._tileJSONRequest && (this._tileJSONRequest.abort(), this._tileJSONRequest = null);
        }
        serialize() {
          return e.e({}, this._options);
        }
        loadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            const e2 = t2.tileID.canonical.url(this.tiles, this.map.getPixelRatio(), this.scheme), i2 = { request: this.map._requestManager.transformRequest(e2, "Tile"), uid: t2.uid, tileID: t2.tileID, zoom: t2.tileID.overscaledZ, tileSize: this.tileSize * t2.tileID.overscaleFactor(), type: this.type, source: this.id, pixelRatio: this.map.getPixelRatio(), showCollisionBoxes: this.map.showCollisionBoxes, promoteId: this.promoteId };
            i2.request.collectResourceTiming = this._collectResourceTiming;
            let a2 = "RT";
            if (t2.actor && "expired" !== t2.state) {
              if ("loading" === t2.state) return new Promise((e3, i3) => {
                t2.reloadPromise = { resolve: e3, reject: i3 };
              });
            } else t2.actor = this.dispatcher.getActor(), a2 = "LT";
            t2.abortController = new AbortController();
            try {
              const e3 = yield t2.actor.sendAsync({ type: a2, data: i2 }, t2.abortController);
              if (delete t2.abortController, t2.aborted) return;
              this._afterTileLoadWorkerResponse(t2, e3);
            } catch (e3) {
              if (delete t2.abortController, t2.aborted) return;
              if (e3 && 404 !== e3.status) throw e3;
              this._afterTileLoadWorkerResponse(t2, null);
            }
          });
        }
        _afterTileLoadWorkerResponse(t2, e2) {
          if (e2 && e2.resourceTiming && (t2.resourceTiming = e2.resourceTiming), e2 && this.map._refreshExpiredTiles && t2.setExpiryData(e2), t2.loadVectorData(e2, this.map.painter), t2.reloadPromise) {
            const e3 = t2.reloadPromise;
            t2.reloadPromise = null, this.loadTile(t2).then(e3.resolve).catch(e3.reject);
          }
        }
        abortTile(t2) {
          return e._(this, void 0, void 0, function* () {
            t2.abortController && (t2.abortController.abort(), delete t2.abortController), t2.actor && (yield t2.actor.sendAsync({ type: "AT", data: { uid: t2.uid, type: this.type, source: this.id } }));
          });
        }
        unloadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            t2.unloadVectorData(), t2.actor && (yield t2.actor.sendAsync({ type: "RMT", data: { uid: t2.uid, type: this.type, source: this.id } }));
          });
        }
        hasTransition() {
          return false;
        }
      }
      class X2 extends e.E {
        constructor(t2, i2, a2, s2) {
          super(), this.id = t2, this.dispatcher = a2, this.setEventedParent(s2), this.type = "raster", this.minzoom = 0, this.maxzoom = 22, this.roundZoom = true, this.scheme = "xyz", this.tileSize = 512, this._loaded = false, this._options = e.e({ type: "raster" }, i2), e.e(this, e.M(i2, ["url", "scheme", "tileSize"]));
        }
        load() {
          return e._(this, void 0, void 0, function* () {
            this._loaded = false, this.fire(new e.k("dataloading", { dataType: "source" })), this._tileJSONRequest = new AbortController();
            try {
              const t2 = yield G2(this._options, this.map._requestManager, this._tileJSONRequest);
              this._tileJSONRequest = null, this._loaded = true, t2 && (e.e(this, t2), t2.bounds && (this.tileBounds = new W(t2.bounds, this.minzoom, this.maxzoom)), this.fire(new e.k("data", { dataType: "source", sourceDataType: "metadata" })), this.fire(new e.k("data", { dataType: "source", sourceDataType: "content" })));
            } catch (t2) {
              this._tileJSONRequest = null, this.fire(new e.j(t2));
            }
          });
        }
        loaded() {
          return this._loaded;
        }
        onAdd(t2) {
          this.map = t2, this.load();
        }
        onRemove() {
          this._tileJSONRequest && (this._tileJSONRequest.abort(), this._tileJSONRequest = null);
        }
        setSourceProperty(t2) {
          this._tileJSONRequest && (this._tileJSONRequest.abort(), this._tileJSONRequest = null), t2(), this.load();
        }
        setTiles(t2) {
          return this.setSourceProperty(() => {
            this._options.tiles = t2;
          }), this;
        }
        setUrl(t2) {
          return this.setSourceProperty(() => {
            this.url = t2, this._options.url = t2;
          }), this;
        }
        serialize() {
          return e.e({}, this._options);
        }
        hasTile(t2) {
          return !this.tileBounds || this.tileBounds.contains(t2.canonical);
        }
        loadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            const e2 = t2.tileID.canonical.url(this.tiles, this.map.getPixelRatio(), this.scheme);
            t2.abortController = new AbortController();
            try {
              const i2 = yield _.getImage(this.map._requestManager.transformRequest(e2, "Tile"), t2.abortController, this.map._refreshExpiredTiles);
              if (delete t2.abortController, t2.aborted) return void (t2.state = "unloaded");
              if (i2 && i2.data) {
                this.map._refreshExpiredTiles && i2.cacheControl && i2.expires && t2.setExpiryData({ cacheControl: i2.cacheControl, expires: i2.expires });
                const e3 = this.map.painter.context, a2 = e3.gl, s2 = i2.data;
                t2.texture = this.map.painter.getTileTexture(s2.width), t2.texture ? t2.texture.update(s2, { useMipmap: true }) : (t2.texture = new b(e3, s2, a2.RGBA, { useMipmap: true }), t2.texture.bind(a2.LINEAR, a2.CLAMP_TO_EDGE, a2.LINEAR_MIPMAP_NEAREST)), t2.state = "loaded";
              }
            } catch (e3) {
              if (delete t2.abortController, t2.aborted) t2.state = "unloaded";
              else if (e3) throw t2.state = "errored", e3;
            }
          });
        }
        abortTile(t2) {
          return e._(this, void 0, void 0, function* () {
            t2.abortController && (t2.abortController.abort(), delete t2.abortController);
          });
        }
        unloadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            t2.texture && this.map.painter.saveTileTexture(t2.texture);
          });
        }
        hasTransition() {
          return false;
        }
      }
      class K extends X2 {
        constructor(t2, i2, a2, s2) {
          super(t2, i2, a2, s2), this.type = "raster-dem", this.maxzoom = 22, this._options = e.e({ type: "raster-dem" }, i2), this.encoding = i2.encoding || "mapbox", this.redFactor = i2.redFactor, this.greenFactor = i2.greenFactor, this.blueFactor = i2.blueFactor, this.baseShift = i2.baseShift;
        }
        loadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            const i2 = t2.tileID.canonical.url(this.tiles, this.map.getPixelRatio(), this.scheme), a2 = this.map._requestManager.transformRequest(i2, "Tile");
            t2.neighboringTiles = this._getNeighboringTiles(t2.tileID), t2.abortController = new AbortController();
            try {
              const i3 = yield _.getImage(a2, t2.abortController, this.map._refreshExpiredTiles);
              if (delete t2.abortController, t2.aborted) return void (t2.state = "unloaded");
              if (i3 && i3.data) {
                const a3 = i3.data;
                this.map._refreshExpiredTiles && i3.cacheControl && i3.expires && t2.setExpiryData({ cacheControl: i3.cacheControl, expires: i3.expires });
                const s2 = e.b(a3) && e.U() ? a3 : yield this.readImageNow(a3), o2 = { type: this.type, uid: t2.uid, source: this.id, rawImageData: s2, encoding: this.encoding, redFactor: this.redFactor, greenFactor: this.greenFactor, blueFactor: this.blueFactor, baseShift: this.baseShift };
                if (!t2.actor || "expired" === t2.state) {
                  t2.actor = this.dispatcher.getActor();
                  const e2 = yield t2.actor.sendAsync({ type: "LDT", data: o2 });
                  t2.dem = e2, t2.needsHillshadePrepare = true, t2.needsTerrainPrepare = true, t2.state = "loaded";
                }
              }
            } catch (e2) {
              if (delete t2.abortController, t2.aborted) t2.state = "unloaded";
              else if (e2) throw t2.state = "errored", e2;
            }
          });
        }
        readImageNow(t2) {
          return e._(this, void 0, void 0, function* () {
            if ("undefined" != typeof VideoFrame && e.V()) {
              const i2 = t2.width + 2, a2 = t2.height + 2;
              try {
                return new e.R({ width: i2, height: a2 }, yield e.W(t2, -1, -1, i2, a2));
              } catch (t3) {
              }
            }
            return o.getImageData(t2, 1);
          });
        }
        _getNeighboringTiles(t2) {
          const i2 = t2.canonical, a2 = Math.pow(2, i2.z), s2 = (i2.x - 1 + a2) % a2, o2 = 0 === i2.x ? t2.wrap - 1 : t2.wrap, r2 = (i2.x + 1 + a2) % a2, n2 = i2.x + 1 === a2 ? t2.wrap + 1 : t2.wrap, l2 = {};
          return l2[new e.S(t2.overscaledZ, o2, i2.z, s2, i2.y).key] = { backfilled: false }, l2[new e.S(t2.overscaledZ, n2, i2.z, r2, i2.y).key] = { backfilled: false }, i2.y > 0 && (l2[new e.S(t2.overscaledZ, o2, i2.z, s2, i2.y - 1).key] = { backfilled: false }, l2[new e.S(t2.overscaledZ, t2.wrap, i2.z, i2.x, i2.y - 1).key] = { backfilled: false }, l2[new e.S(t2.overscaledZ, n2, i2.z, r2, i2.y - 1).key] = { backfilled: false }), i2.y + 1 < a2 && (l2[new e.S(t2.overscaledZ, o2, i2.z, s2, i2.y + 1).key] = { backfilled: false }, l2[new e.S(t2.overscaledZ, t2.wrap, i2.z, i2.x, i2.y + 1).key] = { backfilled: false }, l2[new e.S(t2.overscaledZ, n2, i2.z, r2, i2.y + 1).key] = { backfilled: false }), l2;
        }
        unloadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            t2.demTexture && this.map.painter.saveTileTexture(t2.demTexture), t2.fbo && (t2.fbo.destroy(), delete t2.fbo), t2.dem && delete t2.dem, delete t2.neighboringTiles, t2.state = "unloaded", t2.actor && (yield t2.actor.sendAsync({ type: "RDT", data: { type: this.type, uid: t2.uid, source: this.id } }));
          });
        }
      }
      class J2 extends e.E {
        constructor(t2, i2, a2, s2) {
          super(), this.id = t2, this.type = "geojson", this.minzoom = 0, this.maxzoom = 18, this.tileSize = 512, this.isTileClipped = true, this.reparseOverscaled = true, this._removed = false, this._pendingLoads = 0, this.actor = a2.getActor(), this.setEventedParent(s2), this._data = i2.data, this._options = e.e({}, i2), this._collectResourceTiming = i2.collectResourceTiming, void 0 !== i2.maxzoom && (this.maxzoom = i2.maxzoom), i2.type && (this.type = i2.type), i2.attribution && (this.attribution = i2.attribution), this.promoteId = i2.promoteId;
          const o2 = e.X / this.tileSize;
          void 0 !== i2.clusterMaxZoom && this.maxzoom <= i2.clusterMaxZoom && e.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${i2.clusterMaxZoom}".`), this.workerOptions = e.e({ source: this.id, cluster: i2.cluster || false, geojsonVtOptions: { buffer: (void 0 !== i2.buffer ? i2.buffer : 128) * o2, tolerance: (void 0 !== i2.tolerance ? i2.tolerance : 0.375) * o2, extent: e.X, maxZoom: this.maxzoom, lineMetrics: i2.lineMetrics || false, generateId: i2.generateId || false }, superclusterOptions: { maxZoom: void 0 !== i2.clusterMaxZoom ? i2.clusterMaxZoom : this.maxzoom - 1, minPoints: Math.max(2, i2.clusterMinPoints || 2), extent: e.X, radius: (i2.clusterRadius || 50) * o2, log: false, generateId: i2.generateId || false }, clusterProperties: i2.clusterProperties, filter: i2.filter }, i2.workerOptions), "string" == typeof this.promoteId && (this.workerOptions.promoteId = this.promoteId);
        }
        load() {
          return e._(this, void 0, void 0, function* () {
            yield this._updateWorkerData();
          });
        }
        onAdd(t2) {
          this.map = t2, this.load();
        }
        setData(t2) {
          return this._data = t2, this._updateWorkerData(), this;
        }
        updateData(t2) {
          return this._updateWorkerData(t2), this;
        }
        getData() {
          return e._(this, void 0, void 0, function* () {
            const t2 = e.e({ type: this.type }, this.workerOptions);
            return this.actor.sendAsync({ type: "GD", data: t2 });
          });
        }
        setClusterOptions(t2) {
          return this.workerOptions.cluster = t2.cluster, t2 && (void 0 !== t2.clusterRadius && (this.workerOptions.superclusterOptions.radius = t2.clusterRadius), void 0 !== t2.clusterMaxZoom && (this.workerOptions.superclusterOptions.maxZoom = t2.clusterMaxZoom)), this._updateWorkerData(), this;
        }
        getClusterExpansionZoom(t2) {
          return this.actor.sendAsync({ type: "GCEZ", data: { type: this.type, clusterId: t2, source: this.id } });
        }
        getClusterChildren(t2) {
          return this.actor.sendAsync({ type: "GCC", data: { type: this.type, clusterId: t2, source: this.id } });
        }
        getClusterLeaves(t2, e2, i2) {
          return this.actor.sendAsync({ type: "GCL", data: { type: this.type, source: this.id, clusterId: t2, limit: e2, offset: i2 } });
        }
        _updateWorkerData(t2) {
          return e._(this, void 0, void 0, function* () {
            const i2 = e.e({ type: this.type }, this.workerOptions);
            t2 ? i2.dataDiff = t2 : "string" == typeof this._data ? (i2.request = this.map._requestManager.transformRequest(o.resolveURL(this._data), "Source"), i2.request.collectResourceTiming = this._collectResourceTiming) : i2.data = JSON.stringify(this._data), this._pendingLoads++, this.fire(new e.k("dataloading", { dataType: "source" }));
            try {
              const t3 = yield this.actor.sendAsync({ type: "LD", data: i2 });
              if (this._pendingLoads--, this._removed || t3.abandoned) return void this.fire(new e.k("dataabort", { dataType: "source" }));
              let a2 = null;
              t3.resourceTiming && t3.resourceTiming[this.id] && (a2 = t3.resourceTiming[this.id].slice(0));
              const s2 = { dataType: "source" };
              this._collectResourceTiming && a2 && a2.length > 0 && e.e(s2, { resourceTiming: a2 }), this.fire(new e.k("data", Object.assign(Object.assign({}, s2), { sourceDataType: "metadata" }))), this.fire(new e.k("data", Object.assign(Object.assign({}, s2), { sourceDataType: "content" })));
            } catch (t3) {
              if (this._pendingLoads--, this._removed) return void this.fire(new e.k("dataabort", { dataType: "source" }));
              this.fire(new e.j(t3));
            }
          });
        }
        loaded() {
          return 0 === this._pendingLoads;
        }
        loadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            const e2 = t2.actor ? "RT" : "LT";
            t2.actor = this.actor;
            const i2 = { type: this.type, uid: t2.uid, tileID: t2.tileID, zoom: t2.tileID.overscaledZ, maxZoom: this.maxzoom, tileSize: this.tileSize, source: this.id, pixelRatio: this.map.getPixelRatio(), showCollisionBoxes: this.map.showCollisionBoxes, promoteId: this.promoteId };
            t2.abortController = new AbortController();
            const a2 = yield this.actor.sendAsync({ type: e2, data: i2 }, t2.abortController);
            delete t2.abortController, t2.unloadVectorData(), t2.aborted || t2.loadVectorData(a2, this.map.painter, "RT" === e2);
          });
        }
        abortTile(t2) {
          return e._(this, void 0, void 0, function* () {
            t2.abortController && (t2.abortController.abort(), delete t2.abortController), t2.aborted = true;
          });
        }
        unloadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            t2.unloadVectorData(), yield this.actor.sendAsync({ type: "RMT", data: { uid: t2.uid, type: this.type, source: this.id } });
          });
        }
        onRemove() {
          this._removed = true, this.actor.sendAsync({ type: "RS", data: { type: this.type, source: this.id } });
        }
        serialize() {
          return e.e({}, this._options, { type: this.type, data: this._data });
        }
        hasTransition() {
          return false;
        }
      }
      var Y = e.Y([{ name: "a_pos", type: "Int16", components: 2 }, { name: "a_texture_pos", type: "Int16", components: 2 }]);
      class Q extends e.E {
        constructor(t2, e2, i2, a2) {
          super(), this.id = t2, this.dispatcher = i2, this.coordinates = e2.coordinates, this.type = "image", this.minzoom = 0, this.maxzoom = 22, this.tileSize = 512, this.tiles = {}, this._loaded = false, this.setEventedParent(a2), this.options = e2;
        }
        load(t2) {
          return e._(this, void 0, void 0, function* () {
            this._loaded = false, this.fire(new e.k("dataloading", { dataType: "source" })), this.url = this.options.url, this._request = new AbortController();
            try {
              const e2 = yield _.getImage(this.map._requestManager.transformRequest(this.url, "Image"), this._request);
              this._request = null, this._loaded = true, e2 && e2.data && (this.image = e2.data, t2 && (this.coordinates = t2), this._finishLoading());
            } catch (t3) {
              this._request = null, this._loaded = true, this.fire(new e.j(t3));
            }
          });
        }
        loaded() {
          return this._loaded;
        }
        updateImage(t2) {
          return t2.url ? (this._request && (this._request.abort(), this._request = null), this.options.url = t2.url, this.load(t2.coordinates).finally(() => {
            this.texture = null;
          }), this) : this;
        }
        _finishLoading() {
          this.map && (this.setCoordinates(this.coordinates), this.fire(new e.k("data", { dataType: "source", sourceDataType: "metadata" })));
        }
        onAdd(t2) {
          this.map = t2, this.load();
        }
        onRemove() {
          this._request && (this._request.abort(), this._request = null);
        }
        setCoordinates(t2) {
          this.coordinates = t2;
          const i2 = t2.map(e.Z.fromLngLat);
          this.tileID = function(t3) {
            let i3 = 1 / 0, a3 = 1 / 0, s2 = -1 / 0, o2 = -1 / 0;
            for (const e2 of t3) i3 = Math.min(i3, e2.x), a3 = Math.min(a3, e2.y), s2 = Math.max(s2, e2.x), o2 = Math.max(o2, e2.y);
            const r2 = Math.max(s2 - i3, o2 - a3), n2 = Math.max(0, Math.floor(-Math.log(r2) / Math.LN2)), l2 = Math.pow(2, n2);
            return new e.a1(n2, Math.floor((i3 + s2) / 2 * l2), Math.floor((a3 + o2) / 2 * l2));
          }(i2), this.minzoom = this.maxzoom = this.tileID.z;
          const a2 = i2.map((t3) => this.tileID.getTilePoint(t3)._round());
          return this._boundsArray = new e.$(), this._boundsArray.emplaceBack(a2[0].x, a2[0].y, 0, 0), this._boundsArray.emplaceBack(a2[1].x, a2[1].y, e.X, 0), this._boundsArray.emplaceBack(a2[3].x, a2[3].y, 0, e.X), this._boundsArray.emplaceBack(a2[2].x, a2[2].y, e.X, e.X), this.boundsBuffer && (this.boundsBuffer.destroy(), delete this.boundsBuffer), this.fire(new e.k("data", { dataType: "source", sourceDataType: "content" })), this;
        }
        prepare() {
          if (0 === Object.keys(this.tiles).length || !this.image) return;
          const t2 = this.map.painter.context, i2 = t2.gl;
          this.boundsBuffer || (this.boundsBuffer = t2.createVertexBuffer(this._boundsArray, Y.members)), this.boundsSegments || (this.boundsSegments = e.a0.simpleSegment(0, 0, 4, 2)), this.texture || (this.texture = new b(t2, this.image, i2.RGBA), this.texture.bind(i2.LINEAR, i2.CLAMP_TO_EDGE));
          let a2 = false;
          for (const t3 in this.tiles) {
            const e2 = this.tiles[t3];
            "loaded" !== e2.state && (e2.state = "loaded", e2.texture = this.texture, a2 = true);
          }
          a2 && this.fire(new e.k("data", { dataType: "source", sourceDataType: "idle", sourceId: this.id }));
        }
        loadTile(t2) {
          return e._(this, void 0, void 0, function* () {
            this.tileID && this.tileID.equals(t2.tileID.canonical) ? (this.tiles[String(t2.tileID.wrap)] = t2, t2.buckets = {}) : t2.state = "errored";
          });
        }
        serialize() {
          return { type: "image", url: this.options.url, coordinates: this.coordinates };
        }
        hasTransition() {
          return false;
        }
      }
      class tt2 extends Q {
        constructor(t2, e2, i2, a2) {
          super(t2, e2, i2, a2), this.roundZoom = true, this.type = "video", this.options = e2;
        }
        load() {
          return e._(this, void 0, void 0, function* () {
            this._loaded = false;
            const t2 = this.options;
            this.urls = [];
            for (const e2 of t2.urls) this.urls.push(this.map._requestManager.transformRequest(e2, "Source").url);
            try {
              const t3 = yield e.a3(this.urls);
              if (this._loaded = true, !t3) return;
              this.video = t3, this.video.loop = true, this.video.addEventListener("playing", () => {
                this.map.triggerRepaint();
              }), this.map && this.video.play(), this._finishLoading();
            } catch (t3) {
              this.fire(new e.j(t3));
            }
          });
        }
        pause() {
          this.video && this.video.pause();
        }
        play() {
          this.video && this.video.play();
        }
        seek(t2) {
          if (this.video) {
            const i2 = this.video.seekable;
            t2 < i2.start(0) || t2 > i2.end(0) ? this.fire(new e.j(new e.a2(`sources.${this.id}`, null, `Playback for this video can be set only between the ${i2.start(0)} and ${i2.end(0)}-second mark.`))) : this.video.currentTime = t2;
          }
        }
        getVideo() {
          return this.video;
        }
        onAdd(t2) {
          this.map || (this.map = t2, this.load(), this.video && (this.video.play(), this.setCoordinates(this.coordinates)));
        }
        prepare() {
          if (0 === Object.keys(this.tiles).length || this.video.readyState < 2) return;
          const t2 = this.map.painter.context, i2 = t2.gl;
          this.boundsBuffer || (this.boundsBuffer = t2.createVertexBuffer(this._boundsArray, Y.members)), this.boundsSegments || (this.boundsSegments = e.a0.simpleSegment(0, 0, 4, 2)), this.texture ? this.video.paused || (this.texture.bind(i2.LINEAR, i2.CLAMP_TO_EDGE), i2.texSubImage2D(i2.TEXTURE_2D, 0, 0, 0, i2.RGBA, i2.UNSIGNED_BYTE, this.video)) : (this.texture = new b(t2, this.video, i2.RGBA), this.texture.bind(i2.LINEAR, i2.CLAMP_TO_EDGE));
          let a2 = false;
          for (const t3 in this.tiles) {
            const e2 = this.tiles[t3];
            "loaded" !== e2.state && (e2.state = "loaded", e2.texture = this.texture, a2 = true);
          }
          a2 && this.fire(new e.k("data", { dataType: "source", sourceDataType: "idle", sourceId: this.id }));
        }
        serialize() {
          return { type: "video", urls: this.urls, coordinates: this.coordinates };
        }
        hasTransition() {
          return this.video && !this.video.paused;
        }
      }
      class et2 extends Q {
        constructor(t2, i2, a2, s2) {
          super(t2, i2, a2, s2), i2.coordinates ? Array.isArray(i2.coordinates) && 4 === i2.coordinates.length && !i2.coordinates.some((t3) => !Array.isArray(t3) || 2 !== t3.length || t3.some((t4) => "number" != typeof t4)) || this.fire(new e.j(new e.a2(`sources.${t2}`, null, '"coordinates" property must be an array of 4 longitude/latitude array pairs'))) : this.fire(new e.j(new e.a2(`sources.${t2}`, null, 'missing required property "coordinates"'))), i2.animate && "boolean" != typeof i2.animate && this.fire(new e.j(new e.a2(`sources.${t2}`, null, 'optional "animate" property must be a boolean value'))), i2.canvas ? "string" == typeof i2.canvas || i2.canvas instanceof HTMLCanvasElement || this.fire(new e.j(new e.a2(`sources.${t2}`, null, '"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))) : this.fire(new e.j(new e.a2(`sources.${t2}`, null, 'missing required property "canvas"'))), this.options = i2, this.animate = void 0 === i2.animate || i2.animate;
        }
        load() {
          return e._(this, void 0, void 0, function* () {
            this._loaded = true, this.canvas || (this.canvas = this.options.canvas instanceof HTMLCanvasElement ? this.options.canvas : document.getElementById(this.options.canvas)), this.width = this.canvas.width, this.height = this.canvas.height, this._hasInvalidDimensions() ? this.fire(new e.j(new Error("Canvas dimensions cannot be less than or equal to zero."))) : (this.play = function() {
              this._playing = true, this.map.triggerRepaint();
            }, this.pause = function() {
              this._playing && (this.prepare(), this._playing = false);
            }, this._finishLoading());
          });
        }
        getCanvas() {
          return this.canvas;
        }
        onAdd(t2) {
          this.map = t2, this.load(), this.canvas && this.animate && this.play();
        }
        onRemove() {
          this.pause();
        }
        prepare() {
          let t2 = false;
          if (this.canvas.width !== this.width && (this.width = this.canvas.width, t2 = true), this.canvas.height !== this.height && (this.height = this.canvas.height, t2 = true), this._hasInvalidDimensions()) return;
          if (0 === Object.keys(this.tiles).length) return;
          const i2 = this.map.painter.context, a2 = i2.gl;
          this.boundsBuffer || (this.boundsBuffer = i2.createVertexBuffer(this._boundsArray, Y.members)), this.boundsSegments || (this.boundsSegments = e.a0.simpleSegment(0, 0, 4, 2)), this.texture ? (t2 || this._playing) && this.texture.update(this.canvas, { premultiply: true }) : this.texture = new b(i2, this.canvas, a2.RGBA, { premultiply: true });
          let s2 = false;
          for (const t3 in this.tiles) {
            const e2 = this.tiles[t3];
            "loaded" !== e2.state && (e2.state = "loaded", e2.texture = this.texture, s2 = true);
          }
          s2 && this.fire(new e.k("data", { dataType: "source", sourceDataType: "idle", sourceId: this.id }));
        }
        serialize() {
          return { type: "canvas", coordinates: this.coordinates };
        }
        hasTransition() {
          return this._playing;
        }
        _hasInvalidDimensions() {
          for (const t2 of [this.canvas.width, this.canvas.height]) if (isNaN(t2) || t2 <= 0) return true;
          return false;
        }
      }
      const it2 = {}, at2 = (t2) => {
        switch (t2) {
          case "geojson":
            return J2;
          case "image":
            return Q;
          case "raster":
            return X2;
          case "raster-dem":
            return K;
          case "vector":
            return $2;
          case "video":
            return tt2;
          case "canvas":
            return et2;
        }
        return it2[t2];
      }, st2 = "RTLPluginLoaded";
      class ot2 extends e.E {
        constructor() {
          super(...arguments), this.status = "unavailable", this.url = null, this.dispatcher = j2();
        }
        _syncState(t2) {
          return this.status = t2, this.dispatcher.broadcast("SRPS", { pluginStatus: t2, pluginURL: this.url }).catch((t3) => {
            throw this.status = "error", t3;
          });
        }
        getRTLTextPluginStatus() {
          return this.status;
        }
        clearRTLTextPlugin() {
          this.status = "unavailable", this.url = null;
        }
        setRTLTextPlugin(t2) {
          return e._(this, arguments, void 0, function* (t3, e2 = false) {
            if (this.url) throw new Error("setRTLTextPlugin cannot be called multiple times.");
            if (this.url = o.resolveURL(t3), !this.url) throw new Error(`requested url ${t3} is invalid`);
            if ("unavailable" === this.status) {
              if (!e2) return this._requestImport();
              this.status = "deferred", this._syncState(this.status);
            } else if ("requested" === this.status) return this._requestImport();
          });
        }
        _requestImport() {
          return e._(this, void 0, void 0, function* () {
            yield this._syncState("loading"), this.status = "loaded", this.fire(new e.k(st2));
          });
        }
        lazyLoad() {
          "unavailable" === this.status ? this.status = "requested" : "deferred" === this.status && this._requestImport();
        }
      }
      let rt2 = null;
      function nt2() {
        return rt2 || (rt2 = new ot2()), rt2;
      }
      class lt2 {
        constructor(t2, i2) {
          this.timeAdded = 0, this.fadeEndTime = 0, this.tileID = t2, this.uid = e.a4(), this.uses = 0, this.tileSize = i2, this.buckets = {}, this.expirationTime = null, this.queryPadding = 0, this.hasSymbolBuckets = false, this.hasRTLText = false, this.dependencies = {}, this.rtt = [], this.rttCoords = {}, this.expiredRequestCount = 0, this.state = "loading";
        }
        registerFadeDuration(t2) {
          const e2 = t2 + this.timeAdded;
          e2 < this.fadeEndTime || (this.fadeEndTime = e2);
        }
        wasRequested() {
          return "errored" === this.state || "loaded" === this.state || "reloading" === this.state;
        }
        clearTextures(t2) {
          this.demTexture && t2.saveTileTexture(this.demTexture), this.demTexture = null;
        }
        loadVectorData(t2, i2, a2) {
          if (this.hasData() && this.unloadVectorData(), this.state = "loaded", t2) {
            t2.featureIndex && (this.latestFeatureIndex = t2.featureIndex, t2.rawTileData ? (this.latestRawTileData = t2.rawTileData, this.latestFeatureIndex.rawTileData = t2.rawTileData) : this.latestRawTileData && (this.latestFeatureIndex.rawTileData = this.latestRawTileData)), this.collisionBoxArray = t2.collisionBoxArray, this.buckets = function(t3, e2) {
              const i3 = {};
              if (!e2) return i3;
              for (const a3 of t3) {
                const t4 = a3.layerIds.map((t5) => e2.getLayer(t5)).filter(Boolean);
                if (0 !== t4.length) {
                  a3.layers = t4, a3.stateDependentLayerIds && (a3.stateDependentLayers = a3.stateDependentLayerIds.map((e3) => t4.filter((t5) => t5.id === e3)[0]));
                  for (const e3 of t4) i3[e3.id] = a3;
                }
              }
              return i3;
            }(t2.buckets, i2.style), this.hasSymbolBuckets = false;
            for (const t3 in this.buckets) {
              const i3 = this.buckets[t3];
              if (i3 instanceof e.a6) {
                if (this.hasSymbolBuckets = true, !a2) break;
                i3.justReloaded = true;
              }
            }
            if (this.hasRTLText = false, this.hasSymbolBuckets) for (const t3 in this.buckets) {
              const i3 = this.buckets[t3];
              if (i3 instanceof e.a6 && i3.hasRTLText) {
                this.hasRTLText = true, nt2().lazyLoad();
                break;
              }
            }
            this.queryPadding = 0;
            for (const t3 in this.buckets) {
              const e2 = this.buckets[t3];
              this.queryPadding = Math.max(this.queryPadding, i2.style.getLayer(t3).queryRadius(e2));
            }
            t2.imageAtlas && (this.imageAtlas = t2.imageAtlas), t2.glyphAtlasImage && (this.glyphAtlasImage = t2.glyphAtlasImage);
          } else this.collisionBoxArray = new e.a5();
        }
        unloadVectorData() {
          for (const t2 in this.buckets) this.buckets[t2].destroy();
          this.buckets = {}, this.imageAtlasTexture && this.imageAtlasTexture.destroy(), this.imageAtlas && (this.imageAtlas = null), this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(), this.latestFeatureIndex = null, this.state = "unloaded";
        }
        getBucket(t2) {
          return this.buckets[t2.id];
        }
        upload(t2) {
          for (const e3 in this.buckets) {
            const i2 = this.buckets[e3];
            i2.uploadPending() && i2.upload(t2);
          }
          const e2 = t2.gl;
          this.imageAtlas && !this.imageAtlas.uploaded && (this.imageAtlasTexture = new b(t2, this.imageAtlas.image, e2.RGBA), this.imageAtlas.uploaded = true), this.glyphAtlasImage && (this.glyphAtlasTexture = new b(t2, this.glyphAtlasImage, e2.ALPHA), this.glyphAtlasImage = null);
        }
        prepare(t2) {
          this.imageAtlas && this.imageAtlas.patchUpdatedImages(t2, this.imageAtlasTexture);
        }
        queryRenderedFeatures(t2, e2, i2, a2, s2, o2, r2, n2, l2, h2) {
          return this.latestFeatureIndex && this.latestFeatureIndex.rawTileData ? this.latestFeatureIndex.query({ queryGeometry: a2, cameraQueryGeometry: s2, scale: o2, tileSize: this.tileSize, pixelPosMatrix: h2, transform: n2, params: r2, queryPadding: this.queryPadding * l2 }, t2, e2, i2) : {};
        }
        querySourceFeatures(t2, i2) {
          const a2 = this.latestFeatureIndex;
          if (!a2 || !a2.rawTileData) return;
          const s2 = a2.loadVTLayers(), o2 = i2 && i2.sourceLayer ? i2.sourceLayer : "", r2 = s2._geojsonTileLayer || s2[o2];
          if (!r2) return;
          const n2 = e.a7(i2 && i2.filter), { z: l2, x: h2, y: c2 } = this.tileID.canonical, u3 = { z: l2, x: h2, y: c2 };
          for (let i3 = 0; i3 < r2.length; i3++) {
            const s3 = r2.feature(i3);
            if (n2.needGeometry) {
              const t3 = e.a8(s3, true);
              if (!n2.filter(new e.z(this.tileID.overscaledZ), t3, this.tileID.canonical)) continue;
            } else if (!n2.filter(new e.z(this.tileID.overscaledZ), s3)) continue;
            const d2 = a2.getId(s3, o2), _2 = new e.a9(s3, l2, h2, c2, d2);
            _2.tile = u3, t2.push(_2);
          }
        }
        hasData() {
          return "loaded" === this.state || "reloading" === this.state || "expired" === this.state;
        }
        patternsLoaded() {
          return this.imageAtlas && !!Object.keys(this.imageAtlas.patternPositions).length;
        }
        setExpiryData(t2) {
          const i2 = this.expirationTime;
          if (t2.cacheControl) {
            const i3 = e.aa(t2.cacheControl);
            i3["max-age"] && (this.expirationTime = Date.now() + 1e3 * i3["max-age"]);
          } else t2.expires && (this.expirationTime = new Date(t2.expires).getTime());
          if (this.expirationTime) {
            const t3 = Date.now();
            let e2 = false;
            if (this.expirationTime > t3) e2 = false;
            else if (i2) if (this.expirationTime < i2) e2 = true;
            else {
              const a2 = this.expirationTime - i2;
              a2 ? this.expirationTime = t3 + Math.max(a2, 3e4) : e2 = true;
            }
            else e2 = true;
            e2 ? (this.expiredRequestCount++, this.state = "expired") : this.expiredRequestCount = 0;
          }
        }
        getExpiryTimeout() {
          if (this.expirationTime) return this.expiredRequestCount ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31)) : Math.min(this.expirationTime - (/* @__PURE__ */ new Date()).getTime(), Math.pow(2, 31) - 1);
        }
        setFeatureState(t2, e2) {
          if (!this.latestFeatureIndex || !this.latestFeatureIndex.rawTileData || 0 === Object.keys(t2).length) return;
          const i2 = this.latestFeatureIndex.loadVTLayers();
          for (const a2 in this.buckets) {
            if (!e2.style.hasLayer(a2)) continue;
            const s2 = this.buckets[a2], o2 = s2.layers[0].sourceLayer || "_geojsonTileLayer", r2 = i2[o2], n2 = t2[o2];
            if (!r2 || !n2 || 0 === Object.keys(n2).length) continue;
            s2.update(n2, r2, this.imageAtlas && this.imageAtlas.patternPositions || {});
            const l2 = e2 && e2.style && e2.style.getLayer(a2);
            l2 && (this.queryPadding = Math.max(this.queryPadding, l2.queryRadius(s2)));
          }
        }
        holdingForFade() {
          return void 0 !== this.symbolFadeHoldUntil;
        }
        symbolFadeFinished() {
          return !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < o.now();
        }
        clearFadeHold() {
          this.symbolFadeHoldUntil = void 0;
        }
        setHoldDuration(t2) {
          this.symbolFadeHoldUntil = o.now() + t2;
        }
        setDependencies(t2, e2) {
          const i2 = {};
          for (const t3 of e2) i2[t3] = true;
          this.dependencies[t2] = i2;
        }
        hasDependency(t2, e2) {
          for (const i2 of t2) {
            const t3 = this.dependencies[i2];
            if (t3) {
              for (const i3 of e2) if (t3[i3]) return true;
            }
          }
          return false;
        }
      }
      class ht2 {
        constructor(t2, e2) {
          this.max = t2, this.onRemove = e2, this.reset();
        }
        reset() {
          for (const t2 in this.data) for (const e2 of this.data[t2]) e2.timeout && clearTimeout(e2.timeout), this.onRemove(e2.value);
          return this.data = {}, this.order = [], this;
        }
        add(t2, e2, i2) {
          const a2 = t2.wrapped().key;
          void 0 === this.data[a2] && (this.data[a2] = []);
          const s2 = { value: e2, timeout: void 0 };
          if (void 0 !== i2 && (s2.timeout = setTimeout(() => {
            this.remove(t2, s2);
          }, i2)), this.data[a2].push(s2), this.order.push(a2), this.order.length > this.max) {
            const t3 = this._getAndRemoveByKey(this.order[0]);
            t3 && this.onRemove(t3);
          }
          return this;
        }
        has(t2) {
          return t2.wrapped().key in this.data;
        }
        getAndRemove(t2) {
          return this.has(t2) ? this._getAndRemoveByKey(t2.wrapped().key) : null;
        }
        _getAndRemoveByKey(t2) {
          const e2 = this.data[t2].shift();
          return e2.timeout && clearTimeout(e2.timeout), 0 === this.data[t2].length && delete this.data[t2], this.order.splice(this.order.indexOf(t2), 1), e2.value;
        }
        getByKey(t2) {
          const e2 = this.data[t2];
          return e2 ? e2[0].value : null;
        }
        get(t2) {
          return this.has(t2) ? this.data[t2.wrapped().key][0].value : null;
        }
        remove(t2, e2) {
          if (!this.has(t2)) return this;
          const i2 = t2.wrapped().key, a2 = void 0 === e2 ? 0 : this.data[i2].indexOf(e2), s2 = this.data[i2][a2];
          return this.data[i2].splice(a2, 1), s2.timeout && clearTimeout(s2.timeout), 0 === this.data[i2].length && delete this.data[i2], this.onRemove(s2.value), this.order.splice(this.order.indexOf(i2), 1), this;
        }
        setMaxSize(t2) {
          for (this.max = t2; this.order.length > this.max; ) {
            const t3 = this._getAndRemoveByKey(this.order[0]);
            t3 && this.onRemove(t3);
          }
          return this;
        }
        filter(t2) {
          const e2 = [];
          for (const i2 in this.data) for (const a2 of this.data[i2]) t2(a2.value) || e2.push(a2);
          for (const t3 of e2) this.remove(t3.value.tileID, t3);
        }
      }
      class ct2 {
        constructor() {
          this.state = {}, this.stateChanges = {}, this.deletedStates = {};
        }
        updateState(t2, i2, a2) {
          const s2 = String(i2);
          if (this.stateChanges[t2] = this.stateChanges[t2] || {}, this.stateChanges[t2][s2] = this.stateChanges[t2][s2] || {}, e.e(this.stateChanges[t2][s2], a2), null === this.deletedStates[t2]) {
            this.deletedStates[t2] = {};
            for (const e2 in this.state[t2]) e2 !== s2 && (this.deletedStates[t2][e2] = null);
          } else if (this.deletedStates[t2] && null === this.deletedStates[t2][s2]) {
            this.deletedStates[t2][s2] = {};
            for (const e2 in this.state[t2][s2]) a2[e2] || (this.deletedStates[t2][s2][e2] = null);
          } else for (const e2 in a2) this.deletedStates[t2] && this.deletedStates[t2][s2] && null === this.deletedStates[t2][s2][e2] && delete this.deletedStates[t2][s2][e2];
        }
        removeFeatureState(t2, e2, i2) {
          if (null === this.deletedStates[t2]) return;
          const a2 = String(e2);
          if (this.deletedStates[t2] = this.deletedStates[t2] || {}, i2 && void 0 !== e2) null !== this.deletedStates[t2][a2] && (this.deletedStates[t2][a2] = this.deletedStates[t2][a2] || {}, this.deletedStates[t2][a2][i2] = null);
          else if (void 0 !== e2) if (this.stateChanges[t2] && this.stateChanges[t2][a2]) for (i2 in this.deletedStates[t2][a2] = {}, this.stateChanges[t2][a2]) this.deletedStates[t2][a2][i2] = null;
          else this.deletedStates[t2][a2] = null;
          else this.deletedStates[t2] = null;
        }
        getState(t2, i2) {
          const a2 = String(i2), s2 = e.e({}, (this.state[t2] || {})[a2], (this.stateChanges[t2] || {})[a2]);
          if (null === this.deletedStates[t2]) return {};
          if (this.deletedStates[t2]) {
            const e2 = this.deletedStates[t2][i2];
            if (null === e2) return {};
            for (const t3 in e2) delete s2[t3];
          }
          return s2;
        }
        initializeTileState(t2, e2) {
          t2.setFeatureState(this.state, e2);
        }
        coalesceChanges(t2, i2) {
          const a2 = {};
          for (const t3 in this.stateChanges) {
            this.state[t3] = this.state[t3] || {};
            const i3 = {};
            for (const a3 in this.stateChanges[t3]) this.state[t3][a3] || (this.state[t3][a3] = {}), e.e(this.state[t3][a3], this.stateChanges[t3][a3]), i3[a3] = this.state[t3][a3];
            a2[t3] = i3;
          }
          for (const t3 in this.deletedStates) {
            this.state[t3] = this.state[t3] || {};
            const i3 = {};
            if (null === this.deletedStates[t3]) for (const e2 in this.state[t3]) i3[e2] = {}, this.state[t3][e2] = {};
            else for (const e2 in this.deletedStates[t3]) {
              if (null === this.deletedStates[t3][e2]) this.state[t3][e2] = {};
              else for (const i4 of Object.keys(this.deletedStates[t3][e2])) delete this.state[t3][e2][i4];
              i3[e2] = this.state[t3][e2];
            }
            a2[t3] = a2[t3] || {}, e.e(a2[t3], i3);
          }
          if (this.stateChanges = {}, this.deletedStates = {}, 0 !== Object.keys(a2).length) for (const e2 in t2) t2[e2].setFeatureState(a2, i2);
        }
      }
      class ut extends e.E {
        constructor(t2, e2, i2) {
          super(), this.id = t2, this.dispatcher = i2, this.on("data", (t3) => this._dataHandler(t3)), this.on("dataloading", () => {
            this._sourceErrored = false;
          }), this.on("error", () => {
            this._sourceErrored = this._source.loaded();
          }), this._source = ((t3, e3, i3, a2) => {
            const s2 = new (at2(e3.type))(t3, e3, i3, a2);
            if (s2.id !== t3) throw new Error(`Expected Source id to be ${t3} instead of ${s2.id}`);
            return s2;
          })(t2, e2, i2, this), this._tiles = {}, this._cache = new ht2(0, (t3) => this._unloadTile(t3)), this._timers = {}, this._cacheTimers = {}, this._maxTileCacheSize = null, this._maxTileCacheZoomLevels = null, this._loadedParentTiles = {}, this._coveredTiles = {}, this._state = new ct2(), this._didEmitContent = false, this._updated = false;
        }
        onAdd(t2) {
          this.map = t2, this._maxTileCacheSize = t2 ? t2._maxTileCacheSize : null, this._maxTileCacheZoomLevels = t2 ? t2._maxTileCacheZoomLevels : null, this._source && this._source.onAdd && this._source.onAdd(t2);
        }
        onRemove(t2) {
          this.clearTiles(), this._source && this._source.onRemove && this._source.onRemove(t2);
        }
        loaded() {
          if (this._sourceErrored) return true;
          if (!this._sourceLoaded) return false;
          if (!this._source.loaded()) return false;
          if (!(void 0 === this.used && void 0 === this.usedForTerrain || this.used || this.usedForTerrain)) return true;
          if (!this._updated) return false;
          for (const t2 in this._tiles) {
            const e2 = this._tiles[t2];
            if ("loaded" !== e2.state && "errored" !== e2.state) return false;
          }
          return true;
        }
        getSource() {
          return this._source;
        }
        pause() {
          this._paused = true;
        }
        resume() {
          if (!this._paused) return;
          const t2 = this._shouldReloadOnResume;
          this._paused = false, this._shouldReloadOnResume = false, t2 && this.reload(), this.transform && this.update(this.transform, this.terrain);
        }
        _loadTile(t2, i2, a2) {
          return e._(this, void 0, void 0, function* () {
            try {
              yield this._source.loadTile(t2), this._tileLoaded(t2, i2, a2);
            } catch (i3) {
              t2.state = "errored", 404 !== i3.status ? this._source.fire(new e.j(i3, { tile: t2 })) : this.update(this.transform, this.terrain);
            }
          });
        }
        _unloadTile(t2) {
          this._source.unloadTile && this._source.unloadTile(t2);
        }
        _abortTile(t2) {
          this._source.abortTile && this._source.abortTile(t2), this._source.fire(new e.k("dataabort", { tile: t2, coord: t2.tileID, dataType: "source" }));
        }
        serialize() {
          return this._source.serialize();
        }
        prepare(t2) {
          this._source.prepare && this._source.prepare(), this._state.coalesceChanges(this._tiles, this.map ? this.map.painter : null);
          for (const e2 in this._tiles) {
            const i2 = this._tiles[e2];
            i2.upload(t2), i2.prepare(this.map.style.imageManager);
          }
        }
        getIds() {
          return Object.values(this._tiles).map((t2) => t2.tileID).sort(dt).map((t2) => t2.key);
        }
        getRenderableIds(t2) {
          const i2 = [];
          for (const e2 in this._tiles) this._isIdRenderable(e2, t2) && i2.push(this._tiles[e2]);
          return t2 ? i2.sort((t3, i3) => {
            const a2 = t3.tileID, s2 = i3.tileID, o2 = new e.P(a2.canonical.x, a2.canonical.y)._rotate(this.transform.angle), r2 = new e.P(s2.canonical.x, s2.canonical.y)._rotate(this.transform.angle);
            return a2.overscaledZ - s2.overscaledZ || r2.y - o2.y || r2.x - o2.x;
          }).map((t3) => t3.tileID.key) : i2.map((t3) => t3.tileID).sort(dt).map((t3) => t3.key);
        }
        hasRenderableParent(t2) {
          const e2 = this.findLoadedParent(t2, 0);
          return !!e2 && this._isIdRenderable(e2.tileID.key);
        }
        _isIdRenderable(t2, e2) {
          return this._tiles[t2] && this._tiles[t2].hasData() && !this._coveredTiles[t2] && (e2 || !this._tiles[t2].holdingForFade());
        }
        reload() {
          if (this._paused) this._shouldReloadOnResume = true;
          else {
            this._cache.reset();
            for (const t2 in this._tiles) "errored" !== this._tiles[t2].state && this._reloadTile(t2, "reloading");
          }
        }
        _reloadTile(t2, i2) {
          return e._(this, void 0, void 0, function* () {
            const e2 = this._tiles[t2];
            e2 && ("loading" !== e2.state && (e2.state = i2), yield this._loadTile(e2, t2, i2));
          });
        }
        _tileLoaded(t2, i2, a2) {
          t2.timeAdded = o.now(), "expired" === a2 && (t2.refreshedUponExpiration = true), this._setTileReloadTimer(i2, t2), "raster-dem" === this.getSource().type && t2.dem && this._backfillDEM(t2), this._state.initializeTileState(t2, this.map ? this.map.painter : null), t2.aborted || this._source.fire(new e.k("data", { dataType: "source", tile: t2, coord: t2.tileID }));
        }
        _backfillDEM(t2) {
          const e2 = this.getRenderableIds();
          for (let a2 = 0; a2 < e2.length; a2++) {
            const s2 = e2[a2];
            if (t2.neighboringTiles && t2.neighboringTiles[s2]) {
              const e3 = this.getTileByID(s2);
              i2(t2, e3), i2(e3, t2);
            }
          }
          function i2(t3, e3) {
            t3.needsHillshadePrepare = true, t3.needsTerrainPrepare = true;
            let i3 = e3.tileID.canonical.x - t3.tileID.canonical.x;
            const a2 = e3.tileID.canonical.y - t3.tileID.canonical.y, s2 = Math.pow(2, t3.tileID.canonical.z), o2 = e3.tileID.key;
            0 === i3 && 0 === a2 || Math.abs(a2) > 1 || (Math.abs(i3) > 1 && (1 === Math.abs(i3 + s2) ? i3 += s2 : 1 === Math.abs(i3 - s2) && (i3 -= s2)), e3.dem && t3.dem && (t3.dem.backfillBorder(e3.dem, i3, a2), t3.neighboringTiles && t3.neighboringTiles[o2] && (t3.neighboringTiles[o2].backfilled = true)));
          }
        }
        getTile(t2) {
          return this.getTileByID(t2.key);
        }
        getTileByID(t2) {
          return this._tiles[t2];
        }
        _retainLoadedChildren(t2, e2, i2, a2) {
          for (const s2 in this._tiles) {
            let o2 = this._tiles[s2];
            if (a2[s2] || !o2.hasData() || o2.tileID.overscaledZ <= e2 || o2.tileID.overscaledZ > i2) continue;
            let r2 = o2.tileID;
            for (; o2 && o2.tileID.overscaledZ > e2 + 1; ) {
              const t3 = o2.tileID.scaledTo(o2.tileID.overscaledZ - 1);
              o2 = this._tiles[t3.key], o2 && o2.hasData() && (r2 = t3);
            }
            let n2 = r2;
            for (; n2.overscaledZ > e2; ) if (n2 = n2.scaledTo(n2.overscaledZ - 1), t2[n2.key]) {
              a2[r2.key] = r2;
              break;
            }
          }
        }
        findLoadedParent(t2, e2) {
          if (t2.key in this._loadedParentTiles) {
            const i2 = this._loadedParentTiles[t2.key];
            return i2 && i2.tileID.overscaledZ >= e2 ? i2 : null;
          }
          for (let i2 = t2.overscaledZ - 1; i2 >= e2; i2--) {
            const e3 = t2.scaledTo(i2), a2 = this._getLoadedTile(e3);
            if (a2) return a2;
          }
        }
        findLoadedSibling(t2) {
          return this._getLoadedTile(t2);
        }
        _getLoadedTile(t2) {
          const e2 = this._tiles[t2.key];
          return e2 && e2.hasData() ? e2 : this._cache.getByKey(t2.wrapped().key);
        }
        updateCacheSize(t2) {
          const i2 = Math.ceil(t2.width / this._source.tileSize) + 1, a2 = Math.ceil(t2.height / this._source.tileSize) + 1, s2 = Math.floor(i2 * a2 * (null === this._maxTileCacheZoomLevels ? e.a.MAX_TILE_CACHE_ZOOM_LEVELS : this._maxTileCacheZoomLevels)), o2 = "number" == typeof this._maxTileCacheSize ? Math.min(this._maxTileCacheSize, s2) : s2;
          this._cache.setMaxSize(o2);
        }
        handleWrapJump(t2) {
          const e2 = Math.round((t2 - (void 0 === this._prevLng ? t2 : this._prevLng)) / 360);
          if (this._prevLng = t2, e2) {
            const t3 = {};
            for (const i2 in this._tiles) {
              const a2 = this._tiles[i2];
              a2.tileID = a2.tileID.unwrapTo(a2.tileID.wrap + e2), t3[a2.tileID.key] = a2;
            }
            this._tiles = t3;
            for (const t4 in this._timers) clearTimeout(this._timers[t4]), delete this._timers[t4];
            for (const t4 in this._tiles) this._setTileReloadTimer(t4, this._tiles[t4]);
          }
        }
        _updateCoveredAndRetainedTiles(t2, e2, i2, a2, s2, r2) {
          const n2 = {}, l2 = {}, h2 = Object.keys(t2), c2 = o.now();
          for (const i3 of h2) {
            const a3 = t2[i3], s3 = this._tiles[i3];
            if (!s3 || 0 !== s3.fadeEndTime && s3.fadeEndTime <= c2) continue;
            const o2 = this.findLoadedParent(a3, e2), r3 = this.findLoadedSibling(a3), h3 = o2 || r3 || null;
            h3 && (this._addTile(h3.tileID), n2[h3.tileID.key] = h3.tileID), l2[i3] = a3;
          }
          this._retainLoadedChildren(l2, a2, i2, t2);
          for (const e3 in n2) t2[e3] || (this._coveredTiles[e3] = true, t2[e3] = n2[e3]);
          if (r2) {
            const e3 = {}, i3 = {};
            for (const t3 of s2) this._tiles[t3.key].hasData() ? e3[t3.key] = t3 : i3[t3.key] = t3;
            for (const a3 in i3) {
              const s3 = i3[a3].children(this._source.maxzoom);
              this._tiles[s3[0].key] && this._tiles[s3[1].key] && this._tiles[s3[2].key] && this._tiles[s3[3].key] && (e3[s3[0].key] = t2[s3[0].key] = s3[0], e3[s3[1].key] = t2[s3[1].key] = s3[1], e3[s3[2].key] = t2[s3[2].key] = s3[2], e3[s3[3].key] = t2[s3[3].key] = s3[3], delete i3[a3]);
            }
            for (const a3 in i3) {
              const s3 = i3[a3], o2 = this.findLoadedParent(s3, this._source.minzoom), r3 = this.findLoadedSibling(s3), n3 = o2 || r3 || null;
              if (n3) {
                e3[n3.tileID.key] = t2[n3.tileID.key] = n3.tileID;
                for (const t3 in e3) e3[t3].isChildOf(n3.tileID) && delete e3[t3];
              }
            }
            for (const t3 in this._tiles) e3[t3] || (this._coveredTiles[t3] = true);
          }
        }
        update(t2, i2) {
          if (!this._sourceLoaded || this._paused) return;
          let a2;
          this.transform = t2, this.terrain = i2, this.updateCacheSize(t2), this.handleWrapJump(this.transform.center.lng), this._coveredTiles = {}, this.used || this.usedForTerrain ? this._source.tileID ? a2 = t2.getVisibleUnwrappedCoordinates(this._source.tileID).map((t3) => new e.S(t3.canonical.z, t3.wrap, t3.canonical.z, t3.canonical.x, t3.canonical.y)) : (a2 = t2.coveringTiles({ tileSize: this.usedForTerrain ? this.tileSize : this._source.tileSize, minzoom: this._source.minzoom, maxzoom: this._source.maxzoom, roundZoom: !this.usedForTerrain && this._source.roundZoom, reparseOverscaled: this._source.reparseOverscaled, terrain: i2 }), this._source.hasTile && (a2 = a2.filter((t3) => this._source.hasTile(t3)))) : a2 = [];
          const s2 = t2.coveringZoomLevel(this._source), o2 = Math.max(s2 - ut.maxOverzooming, this._source.minzoom), r2 = Math.max(s2 + ut.maxUnderzooming, this._source.minzoom);
          if (this.usedForTerrain) {
            const t3 = {};
            for (const e2 of a2) if (e2.canonical.z > this._source.minzoom) {
              const i3 = e2.scaledTo(e2.canonical.z - 1);
              t3[i3.key] = i3;
              const a3 = e2.scaledTo(Math.max(this._source.minzoom, Math.min(e2.canonical.z, 5)));
              t3[a3.key] = a3;
            }
            a2 = a2.concat(Object.values(t3));
          }
          const n2 = 0 === a2.length && !this._updated && this._didEmitContent;
          this._updated = true, n2 && this.fire(new e.k("data", { sourceDataType: "idle", dataType: "source", sourceId: this.id }));
          const l2 = this._updateRetainedTiles(a2, s2);
          _t2(this._source.type) && this._updateCoveredAndRetainedTiles(l2, o2, r2, s2, a2, i2);
          for (const t3 in l2) this._tiles[t3].clearFadeHold();
          const h2 = e.ab(this._tiles, l2);
          for (const t3 of h2) {
            const e2 = this._tiles[t3];
            e2.hasSymbolBuckets && !e2.holdingForFade() ? e2.setHoldDuration(this.map._fadeDuration) : e2.hasSymbolBuckets && !e2.symbolFadeFinished() || this._removeTile(t3);
          }
          this._updateLoadedParentTileCache(), this._updateLoadedSiblingTileCache();
        }
        releaseSymbolFadeTiles() {
          for (const t2 in this._tiles) this._tiles[t2].holdingForFade() && this._removeTile(t2);
        }
        _updateRetainedTiles(t2, e2) {
          var i2;
          const a2 = {}, s2 = {}, o2 = Math.max(e2 - ut.maxOverzooming, this._source.minzoom), r2 = Math.max(e2 + ut.maxUnderzooming, this._source.minzoom), n2 = {};
          for (const i3 of t2) {
            const t3 = this._addTile(i3);
            a2[i3.key] = i3, t3.hasData() || e2 < this._source.maxzoom && (n2[i3.key] = i3);
          }
          this._retainLoadedChildren(n2, e2, r2, a2);
          for (const r3 of t2) {
            let t3 = this._tiles[r3.key];
            if (t3.hasData()) continue;
            if (e2 + 1 > this._source.maxzoom) {
              const t4 = r3.children(this._source.maxzoom)[0], e3 = this.getTile(t4);
              if (e3 && e3.hasData()) {
                a2[t4.key] = t4;
                continue;
              }
            } else {
              const t4 = r3.children(this._source.maxzoom);
              if (a2[t4[0].key] && a2[t4[1].key] && a2[t4[2].key] && a2[t4[3].key]) continue;
            }
            let n3 = t3.wasRequested();
            for (let e3 = r3.overscaledZ - 1; e3 >= o2; --e3) {
              const o3 = r3.scaledTo(e3);
              if (s2[o3.key]) break;
              if (s2[o3.key] = true, t3 = this.getTile(o3), !t3 && n3 && (t3 = this._addTile(o3)), t3) {
                const e4 = t3.hasData();
                if ((e4 || !(null === (i2 = this.map) || void 0 === i2 ? void 0 : i2.cancelPendingTileRequestsWhileZooming) || n3) && (a2[o3.key] = o3), n3 = t3.wasRequested(), e4) break;
              }
            }
          }
          return a2;
        }
        _updateLoadedParentTileCache() {
          this._loadedParentTiles = {};
          for (const t2 in this._tiles) {
            const e2 = [];
            let i2, a2 = this._tiles[t2].tileID;
            for (; a2.overscaledZ > 0; ) {
              if (a2.key in this._loadedParentTiles) {
                i2 = this._loadedParentTiles[a2.key];
                break;
              }
              e2.push(a2.key);
              const t3 = a2.scaledTo(a2.overscaledZ - 1);
              if (i2 = this._getLoadedTile(t3), i2) break;
              a2 = t3;
            }
            for (const t3 of e2) this._loadedParentTiles[t3] = i2;
          }
        }
        _updateLoadedSiblingTileCache() {
          this._loadedSiblingTiles = {};
          for (const t2 in this._tiles) {
            const e2 = this._tiles[t2].tileID, i2 = this._getLoadedTile(e2);
            this._loadedSiblingTiles[e2.key] = i2;
          }
        }
        _addTile(t2) {
          let i2 = this._tiles[t2.key];
          if (i2) return i2;
          i2 = this._cache.getAndRemove(t2), i2 && (this._setTileReloadTimer(t2.key, i2), i2.tileID = t2, this._state.initializeTileState(i2, this.map ? this.map.painter : null), this._cacheTimers[t2.key] && (clearTimeout(this._cacheTimers[t2.key]), delete this._cacheTimers[t2.key], this._setTileReloadTimer(t2.key, i2)));
          const a2 = i2;
          return i2 || (i2 = new lt2(t2, this._source.tileSize * t2.overscaleFactor()), this._loadTile(i2, t2.key, i2.state)), i2.uses++, this._tiles[t2.key] = i2, a2 || this._source.fire(new e.k("dataloading", { tile: i2, coord: i2.tileID, dataType: "source" })), i2;
        }
        _setTileReloadTimer(t2, e2) {
          t2 in this._timers && (clearTimeout(this._timers[t2]), delete this._timers[t2]);
          const i2 = e2.getExpiryTimeout();
          i2 && (this._timers[t2] = setTimeout(() => {
            this._reloadTile(t2, "expired"), delete this._timers[t2];
          }, i2));
        }
        _removeTile(t2) {
          const e2 = this._tiles[t2];
          e2 && (e2.uses--, delete this._tiles[t2], this._timers[t2] && (clearTimeout(this._timers[t2]), delete this._timers[t2]), e2.uses > 0 || (e2.hasData() && "reloading" !== e2.state ? this._cache.add(e2.tileID, e2, e2.getExpiryTimeout()) : (e2.aborted = true, this._abortTile(e2), this._unloadTile(e2))));
        }
        _dataHandler(t2) {
          const e2 = t2.sourceDataType;
          "source" === t2.dataType && "metadata" === e2 && (this._sourceLoaded = true), this._sourceLoaded && !this._paused && "source" === t2.dataType && "content" === e2 && (this.reload(), this.transform && this.update(this.transform, this.terrain), this._didEmitContent = true);
        }
        clearTiles() {
          this._shouldReloadOnResume = false, this._paused = false;
          for (const t2 in this._tiles) this._removeTile(t2);
          this._cache.reset();
        }
        tilesIn(t2, i2, a2) {
          const s2 = [], o2 = this.transform;
          if (!o2) return s2;
          const r2 = a2 ? o2.getCameraQueryGeometry(t2) : t2, n2 = t2.map((t3) => o2.pointCoordinate(t3, this.terrain)), l2 = r2.map((t3) => o2.pointCoordinate(t3, this.terrain)), h2 = this.getIds();
          let c2 = 1 / 0, u3 = 1 / 0, d2 = -1 / 0, _2 = -1 / 0;
          for (const t3 of l2) c2 = Math.min(c2, t3.x), u3 = Math.min(u3, t3.y), d2 = Math.max(d2, t3.x), _2 = Math.max(_2, t3.y);
          for (let t3 = 0; t3 < h2.length; t3++) {
            const a3 = this._tiles[h2[t3]];
            if (a3.holdingForFade()) continue;
            const r3 = a3.tileID, p3 = Math.pow(2, o2.zoom - a3.tileID.overscaledZ), m2 = i2 * a3.queryPadding * e.X / a3.tileSize / p3, f2 = [r3.getTilePoint(new e.Z(c2, u3)), r3.getTilePoint(new e.Z(d2, _2))];
            if (f2[0].x - m2 < e.X && f2[0].y - m2 < e.X && f2[1].x + m2 >= 0 && f2[1].y + m2 >= 0) {
              const t4 = n2.map((t5) => r3.getTilePoint(t5)), e2 = l2.map((t5) => r3.getTilePoint(t5));
              s2.push({ tile: a3, tileID: r3, queryGeometry: t4, cameraQueryGeometry: e2, scale: p3 });
            }
          }
          return s2;
        }
        getVisibleCoordinates(t2) {
          const e2 = this.getRenderableIds(t2).map((t3) => this._tiles[t3].tileID);
          for (const t3 of e2) t3.posMatrix = this.transform.calculatePosMatrix(t3.toUnwrapped());
          return e2;
        }
        hasTransition() {
          if (this._source.hasTransition()) return true;
          if (_t2(this._source.type)) {
            const t2 = o.now();
            for (const e2 in this._tiles) if (this._tiles[e2].fadeEndTime >= t2) return true;
          }
          return false;
        }
        setFeatureState(t2, e2, i2) {
          this._state.updateState(t2 = t2 || "_geojsonTileLayer", e2, i2);
        }
        removeFeatureState(t2, e2, i2) {
          this._state.removeFeatureState(t2 = t2 || "_geojsonTileLayer", e2, i2);
        }
        getFeatureState(t2, e2) {
          return this._state.getState(t2 = t2 || "_geojsonTileLayer", e2);
        }
        setDependencies(t2, e2, i2) {
          const a2 = this._tiles[t2];
          a2 && a2.setDependencies(e2, i2);
        }
        reloadTilesForDependencies(t2, e2) {
          for (const i2 in this._tiles) this._tiles[i2].hasDependency(t2, e2) && this._reloadTile(i2, "reloading");
          this._cache.filter((i2) => !i2.hasDependency(t2, e2));
        }
      }
      function dt(t2, e2) {
        const i2 = Math.abs(2 * t2.wrap) - +(t2.wrap < 0), a2 = Math.abs(2 * e2.wrap) - +(e2.wrap < 0);
        return t2.overscaledZ - e2.overscaledZ || a2 - i2 || e2.canonical.y - t2.canonical.y || e2.canonical.x - t2.canonical.x;
      }
      function _t2(t2) {
        return "raster" === t2 || "image" === t2 || "video" === t2;
      }
      ut.maxOverzooming = 10, ut.maxUnderzooming = 3;
      class pt2 {
        constructor(t2, e2) {
          this.reset(t2, e2);
        }
        reset(t2, e2) {
          this.points = t2 || [], this._distances = [0];
          for (let t3 = 1; t3 < this.points.length; t3++) this._distances[t3] = this._distances[t3 - 1] + this.points[t3].dist(this.points[t3 - 1]);
          this.length = this._distances[this._distances.length - 1], this.padding = Math.min(e2 || 0, 0.5 * this.length), this.paddedLength = this.length - 2 * this.padding;
        }
        lerp(t2) {
          if (1 === this.points.length) return this.points[0];
          t2 = e.ac(t2, 0, 1);
          let i2 = 1, a2 = this._distances[i2];
          const s2 = t2 * this.paddedLength + this.padding;
          for (; a2 < s2 && i2 < this._distances.length; ) a2 = this._distances[++i2];
          const o2 = i2 - 1, r2 = this._distances[o2], n2 = a2 - r2, l2 = n2 > 0 ? (s2 - r2) / n2 : 0;
          return this.points[o2].mult(1 - l2).add(this.points[i2].mult(l2));
        }
      }
      function mt(t2, e2) {
        let i2 = true;
        return "always" === t2 || "never" !== t2 && "never" !== e2 || (i2 = false), i2;
      }
      class ft {
        constructor(t2, e2, i2) {
          const a2 = this.boxCells = [], s2 = this.circleCells = [];
          this.xCellCount = Math.ceil(t2 / i2), this.yCellCount = Math.ceil(e2 / i2);
          for (let t3 = 0; t3 < this.xCellCount * this.yCellCount; t3++) a2.push([]), s2.push([]);
          this.circleKeys = [], this.boxKeys = [], this.bboxes = [], this.circles = [], this.width = t2, this.height = e2, this.xScale = this.xCellCount / t2, this.yScale = this.yCellCount / e2, this.boxUid = 0, this.circleUid = 0;
        }
        keysLength() {
          return this.boxKeys.length + this.circleKeys.length;
        }
        insert(t2, e2, i2, a2, s2) {
          this._forEachCell(e2, i2, a2, s2, this._insertBoxCell, this.boxUid++), this.boxKeys.push(t2), this.bboxes.push(e2), this.bboxes.push(i2), this.bboxes.push(a2), this.bboxes.push(s2);
        }
        insertCircle(t2, e2, i2, a2) {
          this._forEachCell(e2 - a2, i2 - a2, e2 + a2, i2 + a2, this._insertCircleCell, this.circleUid++), this.circleKeys.push(t2), this.circles.push(e2), this.circles.push(i2), this.circles.push(a2);
        }
        _insertBoxCell(t2, e2, i2, a2, s2, o2) {
          this.boxCells[s2].push(o2);
        }
        _insertCircleCell(t2, e2, i2, a2, s2, o2) {
          this.circleCells[s2].push(o2);
        }
        _query(t2, e2, i2, a2, s2, o2, r2) {
          if (i2 < 0 || t2 > this.width || a2 < 0 || e2 > this.height) return [];
          const n2 = [];
          if (t2 <= 0 && e2 <= 0 && this.width <= i2 && this.height <= a2) {
            if (s2) return [{ key: null, x1: t2, y1: e2, x2: i2, y2: a2 }];
            for (let t3 = 0; t3 < this.boxKeys.length; t3++) n2.push({ key: this.boxKeys[t3], x1: this.bboxes[4 * t3], y1: this.bboxes[4 * t3 + 1], x2: this.bboxes[4 * t3 + 2], y2: this.bboxes[4 * t3 + 3] });
            for (let t3 = 0; t3 < this.circleKeys.length; t3++) {
              const e3 = this.circles[3 * t3], i3 = this.circles[3 * t3 + 1], a3 = this.circles[3 * t3 + 2];
              n2.push({ key: this.circleKeys[t3], x1: e3 - a3, y1: i3 - a3, x2: e3 + a3, y2: i3 + a3 });
            }
          } else this._forEachCell(t2, e2, i2, a2, this._queryCell, n2, { hitTest: s2, overlapMode: o2, seenUids: { box: {}, circle: {} } }, r2);
          return n2;
        }
        query(t2, e2, i2, a2) {
          return this._query(t2, e2, i2, a2, false, null);
        }
        hitTest(t2, e2, i2, a2, s2, o2) {
          return this._query(t2, e2, i2, a2, true, s2, o2).length > 0;
        }
        hitTestCircle(t2, e2, i2, a2, s2) {
          const o2 = t2 - i2, r2 = t2 + i2, n2 = e2 - i2, l2 = e2 + i2;
          if (r2 < 0 || o2 > this.width || l2 < 0 || n2 > this.height) return false;
          const h2 = [];
          return this._forEachCell(o2, n2, r2, l2, this._queryCellCircle, h2, { hitTest: true, overlapMode: a2, circle: { x: t2, y: e2, radius: i2 }, seenUids: { box: {}, circle: {} } }, s2), h2.length > 0;
        }
        _queryCell(t2, e2, i2, a2, s2, o2, r2, n2) {
          const { seenUids: l2, hitTest: h2, overlapMode: c2 } = r2, u3 = this.boxCells[s2];
          if (null !== u3) {
            const s3 = this.bboxes;
            for (const r3 of u3) if (!l2.box[r3]) {
              l2.box[r3] = true;
              const u4 = 4 * r3, d3 = this.boxKeys[r3];
              if (t2 <= s3[u4 + 2] && e2 <= s3[u4 + 3] && i2 >= s3[u4 + 0] && a2 >= s3[u4 + 1] && (!n2 || n2(d3)) && (!h2 || !mt(c2, d3.overlapMode)) && (o2.push({ key: d3, x1: s3[u4], y1: s3[u4 + 1], x2: s3[u4 + 2], y2: s3[u4 + 3] }), h2)) return true;
            }
          }
          const d2 = this.circleCells[s2];
          if (null !== d2) {
            const s3 = this.circles;
            for (const r3 of d2) if (!l2.circle[r3]) {
              l2.circle[r3] = true;
              const u4 = 3 * r3, d3 = this.circleKeys[r3];
              if (this._circleAndRectCollide(s3[u4], s3[u4 + 1], s3[u4 + 2], t2, e2, i2, a2) && (!n2 || n2(d3)) && (!h2 || !mt(c2, d3.overlapMode))) {
                const t3 = s3[u4], e3 = s3[u4 + 1], i3 = s3[u4 + 2];
                if (o2.push({ key: d3, x1: t3 - i3, y1: e3 - i3, x2: t3 + i3, y2: e3 + i3 }), h2) return true;
              }
            }
          }
          return false;
        }
        _queryCellCircle(t2, e2, i2, a2, s2, o2, r2, n2) {
          const { circle: l2, seenUids: h2, overlapMode: c2 } = r2, u3 = this.boxCells[s2];
          if (null !== u3) {
            const t3 = this.bboxes;
            for (const e3 of u3) if (!h2.box[e3]) {
              h2.box[e3] = true;
              const i3 = 4 * e3, a3 = this.boxKeys[e3];
              if (this._circleAndRectCollide(l2.x, l2.y, l2.radius, t3[i3 + 0], t3[i3 + 1], t3[i3 + 2], t3[i3 + 3]) && (!n2 || n2(a3)) && !mt(c2, a3.overlapMode)) return o2.push(true), true;
            }
          }
          const d2 = this.circleCells[s2];
          if (null !== d2) {
            const t3 = this.circles;
            for (const e3 of d2) if (!h2.circle[e3]) {
              h2.circle[e3] = true;
              const i3 = 3 * e3, a3 = this.circleKeys[e3];
              if (this._circlesCollide(t3[i3], t3[i3 + 1], t3[i3 + 2], l2.x, l2.y, l2.radius) && (!n2 || n2(a3)) && !mt(c2, a3.overlapMode)) return o2.push(true), true;
            }
          }
        }
        _forEachCell(t2, e2, i2, a2, s2, o2, r2, n2) {
          const l2 = this._convertToXCellCoord(t2), h2 = this._convertToYCellCoord(e2), c2 = this._convertToXCellCoord(i2), u3 = this._convertToYCellCoord(a2);
          for (let d2 = l2; d2 <= c2; d2++) for (let l3 = h2; l3 <= u3; l3++) if (s2.call(this, t2, e2, i2, a2, this.xCellCount * l3 + d2, o2, r2, n2)) return;
        }
        _convertToXCellCoord(t2) {
          return Math.max(0, Math.min(this.xCellCount - 1, Math.floor(t2 * this.xScale)));
        }
        _convertToYCellCoord(t2) {
          return Math.max(0, Math.min(this.yCellCount - 1, Math.floor(t2 * this.yScale)));
        }
        _circlesCollide(t2, e2, i2, a2, s2, o2) {
          const r2 = a2 - t2, n2 = s2 - e2, l2 = i2 + o2;
          return l2 * l2 > r2 * r2 + n2 * n2;
        }
        _circleAndRectCollide(t2, e2, i2, a2, s2, o2, r2) {
          const n2 = (o2 - a2) / 2, l2 = Math.abs(t2 - (a2 + n2));
          if (l2 > n2 + i2) return false;
          const h2 = (r2 - s2) / 2, c2 = Math.abs(e2 - (s2 + h2));
          if (c2 > h2 + i2) return false;
          if (l2 <= n2 || c2 <= h2) return true;
          const u3 = l2 - n2, d2 = c2 - h2;
          return u3 * u3 + d2 * d2 <= i2 * i2;
        }
      }
      function gt(t2, i2, a2, s2, o2) {
        const r2 = e.H();
        return i2 ? (e.K(r2, r2, [1 / o2, 1 / o2, 1]), a2 || e.ad(r2, r2, s2.angle)) : e.L(r2, s2.labelPlaneMatrix, t2), r2;
      }
      function vt(t2, i2, a2, s2, o2) {
        if (i2) {
          const i3 = e.ae(t2);
          return e.K(i3, i3, [o2, o2, 1]), a2 || e.ad(i3, i3, -s2.angle), i3;
        }
        return s2.glCoordMatrix;
      }
      function xt(t2, i2, a2, s2) {
        let o2;
        s2 ? (o2 = [t2, i2, s2(t2, i2), 1], e.af(o2, o2, a2)) : (o2 = [t2, i2, 0, 1], kt(o2, o2, a2));
        const r2 = o2[3];
        return { point: new e.P(o2[0] / r2, o2[1] / r2), signedDistanceFromCamera: r2, isOccluded: false };
      }
      function yt(t2, e2) {
        return 0.5 + t2 / e2 * 0.5;
      }
      function bt(t2, e2) {
        return t2.x >= -e2[0] && t2.x <= e2[0] && t2.y >= -e2[1] && t2.y <= e2[1];
      }
      function wt2(t2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3, d2, _2, p3, m2) {
        const f2 = s2 ? t2.textSizeData : t2.iconSizeData, g2 = e.ag(f2, a2.transform.zoom), v2 = [256 / a2.width * 2 + 1, 256 / a2.height * 2 + 1], x2 = s2 ? t2.text.dynamicLayoutVertexArray : t2.icon.dynamicLayoutVertexArray;
        x2.clear();
        const y2 = t2.lineVertexArray, b2 = s2 ? t2.text.placedSymbolArray : t2.icon.placedSymbolArray, w3 = a2.transform.width / a2.transform.height;
        let T2 = false;
        for (let s3 = 0; s3 < b2.length; s3++) {
          const I2 = b2.get(s3);
          if (I2.hidden || I2.writingMode === e.ah.vertical && !T2) {
            Rt(I2.numGlyphs, x2);
            continue;
          }
          T2 = false;
          const E2 = xt(I2.anchorX, I2.anchorY, i2, m2);
          if (!bt(E2.point, v2)) {
            Rt(I2.numGlyphs, x2);
            continue;
          }
          const P3 = yt(a2.transform.cameraToCenterDistance, E2.signedDistanceFromCamera), C2 = e.ai(f2, g2, I2), S2 = n2 ? C2 / P3 : C2 * P3, z3 = { getElevation: m2, labelPlaneMatrix: o2, lineVertexArray: y2, pitchWithMap: n2, projectionCache: { projections: {}, offsets: {}, cachedAnchorPoint: void 0, anyProjectionOccluded: false }, projection: c2, tileAnchorPoint: new e.P(I2.anchorX, I2.anchorY), unwrappedTileID: u3, width: d2, height: _2, translation: p3 }, D2 = Et(z3, I2, S2, false, l2, i2, r2, t2.glyphOffsetArray, x2, w3, h2);
          T2 = D2.useVertical, (D2.notEnoughRoom || T2 || D2.needsFlipping && Et(z3, I2, S2, true, l2, i2, r2, t2.glyphOffsetArray, x2, w3, h2).notEnoughRoom) && Rt(I2.numGlyphs, x2);
        }
        s2 ? t2.text.dynamicLayoutVertexBuffer.updateData(x2) : t2.icon.dynamicLayoutVertexBuffer.updateData(x2);
      }
      function Tt(t2, e2, i2, a2, s2, o2, r2, n2) {
        const l2 = o2.glyphStartIndex + o2.numGlyphs, h2 = o2.lineStartIndex, c2 = o2.lineStartIndex + o2.lineLength, u3 = e2.getoffsetX(o2.glyphStartIndex), d2 = e2.getoffsetX(l2 - 1), _2 = Mt(t2 * u3, i2, a2, s2, o2.segment, h2, c2, n2, r2);
        if (!_2) return null;
        const p3 = Mt(t2 * d2, i2, a2, s2, o2.segment, h2, c2, n2, r2);
        return p3 ? n2.projectionCache.anyProjectionOccluded ? null : { first: _2, last: p3 } : null;
      }
      function It(t2, i2, a2, s2) {
        return t2 === e.ah.horizontal && Math.abs(a2.y - i2.y) > Math.abs(a2.x - i2.x) * s2 ? { useVertical: true } : (t2 === e.ah.vertical ? i2.y < a2.y : i2.x > a2.x) ? { needsFlipping: true } : null;
      }
      function Et(t2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3) {
        const d2 = a2 / 24, _2 = i2.lineOffsetX * d2, p3 = i2.lineOffsetY * d2;
        let m2;
        if (i2.numGlyphs > 1) {
          const e2 = i2.glyphStartIndex + i2.numGlyphs, a3 = i2.lineStartIndex, r3 = i2.lineStartIndex + i2.lineLength, h3 = Tt(d2, l2, _2, p3, s2, i2, u3, t2);
          if (!h3) return { notEnoughRoom: true };
          const f2 = xt(h3.first.point.x, h3.first.point.y, n2, t2.getElevation).point, g2 = xt(h3.last.point.x, h3.last.point.y, n2, t2.getElevation).point;
          if (o2 && !s2) {
            const t3 = It(i2.writingMode, f2, g2, c2);
            if (t3) return t3;
          }
          m2 = [h3.first];
          for (let o3 = i2.glyphStartIndex + 1; o3 < e2 - 1; o3++) m2.push(Mt(d2 * l2.getoffsetX(o3), _2, p3, s2, i2.segment, a3, r3, t2, u3));
          m2.push(h3.last);
        } else {
          if (o2 && !s2) {
            const a4 = xt(t2.tileAnchorPoint.x, t2.tileAnchorPoint.y, r2, t2.getElevation).point, s3 = i2.lineStartIndex + i2.segment + 1, o3 = new e.P(t2.lineVertexArray.getx(s3), t2.lineVertexArray.gety(s3)), n3 = xt(o3.x, o3.y, r2, t2.getElevation), l3 = n3.signedDistanceFromCamera > 0 ? n3.point : function(t3, e2, i3, a5, s4, o4) {
              return Pt(t3, e2, i3, 1, s4, o4);
            }(t2.tileAnchorPoint, o3, a4, 0, r2, t2), h3 = It(i2.writingMode, a4, l3, c2);
            if (h3) return h3;
          }
          const a3 = Mt(d2 * l2.getoffsetX(i2.glyphStartIndex), _2, p3, s2, i2.segment, i2.lineStartIndex, i2.lineStartIndex + i2.lineLength, t2, u3);
          if (!a3 || t2.projectionCache.anyProjectionOccluded) return { notEnoughRoom: true };
          m2 = [a3];
        }
        for (const t3 of m2) e.aj(h2, t3.point, t3.angle);
        return {};
      }
      function Pt(t2, e2, i2, a2, s2, o2) {
        const r2 = t2.add(t2.sub(e2)._unit()), n2 = void 0 !== s2 ? xt(r2.x, r2.y, s2, o2.getElevation).point : St(r2.x, r2.y, o2).point, l2 = i2.sub(n2);
        return i2.add(l2._mult(a2 / l2.mag()));
      }
      function Ct(t2, i2, a2) {
        const s2 = i2.projectionCache;
        if (s2.projections[t2]) return s2.projections[t2];
        const o2 = new e.P(i2.lineVertexArray.getx(t2), i2.lineVertexArray.gety(t2)), r2 = St(o2.x, o2.y, i2);
        if (r2.signedDistanceFromCamera > 0) return s2.projections[t2] = r2.point, s2.anyProjectionOccluded = s2.anyProjectionOccluded || r2.isOccluded, r2.point;
        const n2 = t2 - a2.direction;
        return function(t3, e2, i3, a3, s3) {
          return Pt(t3, e2, i3, a3, void 0, s3);
        }(0 === a2.distanceFromAnchor ? i2.tileAnchorPoint : new e.P(i2.lineVertexArray.getx(n2), i2.lineVertexArray.gety(n2)), o2, a2.previousVertex, a2.absOffsetX - a2.distanceFromAnchor + 1, i2);
      }
      function St(t2, e2, i2) {
        const a2 = t2 + i2.translation[0], s2 = e2 + i2.translation[1];
        let o2;
        return !i2.pitchWithMap && i2.projection.useSpecialProjectionForSymbols ? (o2 = i2.projection.projectTileCoordinates(a2, s2, i2.unwrappedTileID, i2.getElevation), o2.point.x = (0.5 * o2.point.x + 0.5) * i2.width, o2.point.y = (0.5 * -o2.point.y + 0.5) * i2.height) : (o2 = xt(a2, s2, i2.labelPlaneMatrix, i2.getElevation), o2.isOccluded = false), o2;
      }
      function zt(t2, e2, i2) {
        return t2._unit()._perp()._mult(e2 * i2);
      }
      function Dt(t2, i2, a2, s2, o2, r2, n2, l2, h2) {
        if (l2.projectionCache.offsets[t2]) return l2.projectionCache.offsets[t2];
        const c2 = a2.add(i2);
        if (t2 + h2.direction < s2 || t2 + h2.direction >= o2) return l2.projectionCache.offsets[t2] = c2, c2;
        const u3 = Ct(t2 + h2.direction, l2, h2), d2 = zt(u3.sub(a2), n2, h2.direction), _2 = a2.add(d2), p3 = u3.add(d2);
        return l2.projectionCache.offsets[t2] = e.ak(r2, c2, _2, p3) || c2, l2.projectionCache.offsets[t2];
      }
      function Mt(t2, e2, i2, a2, s2, o2, r2, n2, l2) {
        const h2 = a2 ? t2 - e2 : t2 + e2;
        let c2 = h2 > 0 ? 1 : -1, u3 = 0;
        a2 && (c2 *= -1, u3 = Math.PI), c2 < 0 && (u3 += Math.PI);
        let d2, _2 = c2 > 0 ? o2 + s2 : o2 + s2 + 1;
        n2.projectionCache.cachedAnchorPoint ? d2 = n2.projectionCache.cachedAnchorPoint : (d2 = St(n2.tileAnchorPoint.x, n2.tileAnchorPoint.y, n2).point, n2.projectionCache.cachedAnchorPoint = d2);
        let p3, m2, f2 = d2, g2 = d2, v2 = 0, x2 = 0;
        const y2 = Math.abs(h2), b2 = [];
        let w3;
        for (; v2 + x2 <= y2; ) {
          if (_2 += c2, _2 < o2 || _2 >= r2) return null;
          v2 += x2, g2 = f2, m2 = p3;
          const t3 = { absOffsetX: y2, direction: c2, distanceFromAnchor: v2, previousVertex: g2 };
          if (f2 = Ct(_2, n2, t3), 0 === i2) b2.push(g2), w3 = f2.sub(g2);
          else {
            let e3;
            const a3 = f2.sub(g2);
            e3 = 0 === a3.mag() ? zt(Ct(_2 + c2, n2, t3).sub(f2), i2, c2) : zt(a3, i2, c2), m2 || (m2 = g2.add(e3)), p3 = Dt(_2, e3, f2, o2, r2, m2, i2, n2, t3), b2.push(m2), w3 = p3.sub(m2);
          }
          x2 = w3.mag();
        }
        const T2 = w3._mult((y2 - v2) / x2)._add(m2 || g2), I2 = u3 + Math.atan2(f2.y - g2.y, f2.x - g2.x);
        return b2.push(T2), { point: T2, angle: l2 ? I2 : 0, path: b2 };
      }
      const At = new Float32Array([-1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0]);
      function Rt(t2, e2) {
        for (let i2 = 0; i2 < t2; i2++) {
          const t3 = e2.length;
          e2.resize(t3 + 4), e2.float32.set(At, 3 * t3);
        }
      }
      function kt(t2, e2, i2) {
        const a2 = e2[0], s2 = e2[1];
        return t2[0] = i2[0] * a2 + i2[4] * s2 + i2[12], t2[1] = i2[1] * a2 + i2[5] * s2 + i2[13], t2[3] = i2[3] * a2 + i2[7] * s2 + i2[15], t2;
      }
      const Lt = 100;
      class Ft {
        constructor(t2, e2, i2 = new ft(t2.width + 200, t2.height + 200, 25), a2 = new ft(t2.width + 200, t2.height + 200, 25)) {
          this.transform = t2, this.mapProjection = e2, this.grid = i2, this.ignoredGrid = a2, this.pitchFactor = Math.cos(t2._pitch) * t2.cameraToCenterDistance, this.screenRightBoundary = t2.width + Lt, this.screenBottomBoundary = t2.height + Lt, this.gridRightBoundary = t2.width + 200, this.gridBottomBoundary = t2.height + 200, this.perspectiveRatioCutoff = 0.6;
        }
        placeCollisionBox(t2, e2, i2, a2, s2, o2, r2, n2, l2, h2, c2) {
          const u3 = t2.anchorPointX + n2[0], d2 = t2.anchorPointY + n2[1], _2 = this.projectAndGetPerspectiveRatio(a2, u3, d2, s2, h2), p3 = i2 * _2.perspectiveRatio;
          let m2;
          if (o2 || r2) m2 = this._projectCollisionBox(t2, p3, a2, s2, o2, r2, n2, _2, h2, c2);
          else {
            const e3 = _2.point.x + (c2 ? c2.x * p3 : 0), i3 = _2.point.y + (c2 ? c2.y * p3 : 0);
            m2 = { allPointsOccluded: false, box: [e3 + t2.x1 * p3, i3 + t2.y1 * p3, e3 + t2.x2 * p3, i3 + t2.y2 * p3] };
          }
          const [f2, g2, v2, x2] = m2.box;
          return this.mapProjection.useSpecialProjectionForSymbols && (o2 ? m2.allPointsOccluded : this.mapProjection.isOccluded(u3, d2, s2)) || _2.perspectiveRatio < this.perspectiveRatioCutoff || !this.isInsideGrid(f2, g2, v2, x2) || "always" !== e2 && this.grid.hitTest(f2, g2, v2, x2, e2, l2) ? { box: [f2, g2, v2, x2], placeable: false, offscreen: false } : { box: [f2, g2, v2, x2], placeable: true, offscreen: this.isOffscreen(f2, g2, v2, x2) };
        }
        placeCollisionCircles(t2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3, d2, _2, p3, m2, f2) {
          const g2 = [], v2 = new e.P(i2.anchorX, i2.anchorY), x2 = this.getPerspectiveRatio(r2, v2.x, v2.y, n2, f2), y2 = (u3 ? o2 / x2 : o2 * x2) / e.ap, b2 = { getElevation: f2, labelPlaneMatrix: l2, lineVertexArray: a2, pitchWithMap: u3, projectionCache: { projections: {}, offsets: {}, cachedAnchorPoint: void 0, anyProjectionOccluded: false }, projection: this.mapProjection, tileAnchorPoint: v2, unwrappedTileID: n2, width: this.transform.width, height: this.transform.height, translation: m2 }, w3 = Tt(y2, s2, i2.lineOffsetX * y2, i2.lineOffsetY * y2, false, i2, false, b2);
          let T2 = false, I2 = false, E2 = true;
          if (w3) {
            const i3 = 0.5 * _2 * x2 + p3, a3 = new e.P(-100, -100), s3 = new e.P(this.screenRightBoundary, this.screenBottomBoundary), o3 = new pt2(), r3 = w3.first, n3 = w3.last;
            let l3 = [];
            for (let t3 = r3.path.length - 1; t3 >= 1; t3--) l3.push(r3.path[t3]);
            for (let t3 = 1; t3 < n3.path.length; t3++) l3.push(n3.path[t3]);
            const u4 = 2.5 * i3;
            if (h2) {
              const t3 = this.projectPathToScreenSpace(l3, b2, h2);
              l3 = t3.some((t4) => t4.signedDistanceFromCamera <= 0) ? [] : t3.map((t4) => t4.point);
            }
            let m3 = [];
            if (l3.length > 0) {
              const t3 = l3[0].clone(), i4 = l3[0].clone();
              for (let e2 = 1; e2 < l3.length; e2++) t3.x = Math.min(t3.x, l3[e2].x), t3.y = Math.min(t3.y, l3[e2].y), i4.x = Math.max(i4.x, l3[e2].x), i4.y = Math.max(i4.y, l3[e2].y);
              m3 = t3.x >= a3.x && i4.x <= s3.x && t3.y >= a3.y && i4.y <= s3.y ? [l3] : i4.x < a3.x || t3.x > s3.x || i4.y < a3.y || t3.y > s3.y ? [] : e.al([l3], a3.x, a3.y, s3.x, s3.y);
            }
            for (const e2 of m3) {
              o3.reset(e2, 0.25 * i3);
              let a4 = 0;
              a4 = o3.length <= 0.5 * i3 ? 1 : Math.ceil(o3.paddedLength / u4) + 1;
              for (let e3 = 0; e3 < a4; e3++) {
                const s4 = e3 / Math.max(a4 - 1, 1), r4 = o3.lerp(s4), n4 = r4.x + Lt, l4 = r4.y + Lt;
                g2.push(n4, l4, i3, 0);
                const h3 = n4 - i3, u5 = l4 - i3, _3 = n4 + i3, p4 = l4 + i3;
                if (E2 = E2 && this.isOffscreen(h3, u5, _3, p4), I2 = I2 || this.isInsideGrid(h3, u5, _3, p4), "always" !== t2 && this.grid.hitTestCircle(n4, l4, i3, t2, d2) && (T2 = true, !c2)) return { circles: [], offscreen: false, collisionDetected: T2 };
              }
            }
          }
          return { circles: !c2 && T2 || !I2 || x2 < this.perspectiveRatioCutoff ? [] : g2, offscreen: E2, collisionDetected: T2 };
        }
        projectPathToScreenSpace(t2, e2, i2) {
          return t2.map((t3) => xt(t3.x, t3.y, i2, e2.getElevation));
        }
        queryRenderedSymbols(t2) {
          if (0 === t2.length || 0 === this.grid.keysLength() && 0 === this.ignoredGrid.keysLength()) return {};
          const i2 = [];
          let a2 = 1 / 0, s2 = 1 / 0, o2 = -1 / 0, r2 = -1 / 0;
          for (const n3 of t2) {
            const t3 = new e.P(n3.x + Lt, n3.y + Lt);
            a2 = Math.min(a2, t3.x), s2 = Math.min(s2, t3.y), o2 = Math.max(o2, t3.x), r2 = Math.max(r2, t3.y), i2.push(t3);
          }
          const n2 = this.grid.query(a2, s2, o2, r2).concat(this.ignoredGrid.query(a2, s2, o2, r2)), l2 = {}, h2 = {};
          for (const t3 of n2) {
            const a3 = t3.key;
            if (void 0 === l2[a3.bucketInstanceId] && (l2[a3.bucketInstanceId] = {}), l2[a3.bucketInstanceId][a3.featureIndex]) continue;
            const s3 = [new e.P(t3.x1, t3.y1), new e.P(t3.x2, t3.y1), new e.P(t3.x2, t3.y2), new e.P(t3.x1, t3.y2)];
            e.am(i2, s3) && (l2[a3.bucketInstanceId][a3.featureIndex] = true, void 0 === h2[a3.bucketInstanceId] && (h2[a3.bucketInstanceId] = []), h2[a3.bucketInstanceId].push(a3.featureIndex));
          }
          return h2;
        }
        insertCollisionBox(t2, e2, i2, a2, s2, o2) {
          (i2 ? this.ignoredGrid : this.grid).insert({ bucketInstanceId: a2, featureIndex: s2, collisionGroupID: o2, overlapMode: e2 }, t2[0], t2[1], t2[2], t2[3]);
        }
        insertCollisionCircles(t2, e2, i2, a2, s2, o2) {
          const r2 = i2 ? this.ignoredGrid : this.grid, n2 = { bucketInstanceId: a2, featureIndex: s2, collisionGroupID: o2, overlapMode: e2 };
          for (let e3 = 0; e3 < t2.length; e3 += 4) r2.insertCircle(n2, t2[e3], t2[e3 + 1], t2[e3 + 2]);
        }
        projectAndGetPerspectiveRatio(t2, i2, a2, s2, o2) {
          let r2;
          o2 ? (r2 = [i2, a2, o2(i2, a2), 1], e.af(r2, r2, t2)) : (r2 = [i2, a2, 0, 1], kt(r2, r2, t2));
          const n2 = r2[3];
          return { point: new e.P((r2[0] / n2 + 1) / 2 * this.transform.width + Lt, (-r2[1] / n2 + 1) / 2 * this.transform.height + Lt), perspectiveRatio: 0.5 + this.transform.cameraToCenterDistance / n2 * 0.5, isOccluded: false, signedDistanceFromCamera: n2 };
        }
        getPerspectiveRatio(t2, e2, i2, a2, s2) {
          const o2 = this.mapProjection.useSpecialProjectionForSymbols ? this.mapProjection.projectTileCoordinates(e2, i2, a2, s2) : xt(e2, i2, t2, s2);
          return 0.5 + this.transform.cameraToCenterDistance / o2.signedDistanceFromCamera * 0.5;
        }
        isOffscreen(t2, e2, i2, a2) {
          return i2 < Lt || t2 >= this.screenRightBoundary || a2 < Lt || e2 > this.screenBottomBoundary;
        }
        isInsideGrid(t2, e2, i2, a2) {
          return i2 >= 0 && t2 < this.gridRightBoundary && a2 >= 0 && e2 < this.gridBottomBoundary;
        }
        getViewportMatrix() {
          const t2 = e.an([]);
          return e.J(t2, t2, [-100, -100, 0]), t2;
        }
        _projectCollisionBox(t2, i2, a2, s2, o2, r2, n2, l2, h2, c2) {
          let u3 = new e.P(1, 0), d2 = new e.P(0, 1);
          const _2 = new e.P(t2.anchorPointX + n2[0], t2.anchorPointY + n2[1]);
          if (r2 && !o2) {
            const t3 = this.projectAndGetPerspectiveRatio(a2, _2.x + 1, _2.y, s2, h2).point.sub(l2.point).unit(), i3 = Math.atan(t3.y / t3.x) + (t3.x < 0 ? Math.PI : 0), o3 = Math.sin(i3), r3 = Math.cos(i3);
            u3 = new e.P(r3, o3), d2 = new e.P(-o3, r3);
          } else if (!r2 && o2) {
            const t3 = -this.transform.angle, i3 = Math.sin(t3), a3 = Math.cos(t3);
            u3 = new e.P(a3, i3), d2 = new e.P(-i3, a3);
          }
          let p3 = l2.point, m2 = i2;
          if (o2) {
            p3 = _2;
            const t3 = this.transform.zoom - Math.floor(this.transform.zoom);
            m2 = Math.pow(2, -t3), m2 *= this.mapProjection.getPitchedTextCorrection(this.transform, _2, s2), c2 || (m2 *= e.ac(0.5 + l2.signedDistanceFromCamera / this.transform.cameraToCenterDistance * 0.5, 0, 4));
          }
          c2 && (p3 = p3.add(u3.mult(c2.x * m2)).add(d2.mult(c2.y * m2)));
          const f2 = t2.x1 * m2, g2 = t2.x2 * m2, v2 = (f2 + g2) / 2, x2 = t2.y1 * m2, y2 = t2.y2 * m2, b2 = (x2 + y2) / 2, w3 = [{ offsetX: f2, offsetY: x2 }, { offsetX: v2, offsetY: x2 }, { offsetX: g2, offsetY: x2 }, { offsetX: g2, offsetY: b2 }, { offsetX: g2, offsetY: y2 }, { offsetX: v2, offsetY: y2 }, { offsetX: f2, offsetY: y2 }, { offsetX: f2, offsetY: b2 }];
          let T2 = [];
          for (const { offsetX: t3, offsetY: i3 } of w3) T2.push(new e.P(p3.x + u3.x * t3 + d2.x * i3, p3.y + u3.y * t3 + d2.y * i3));
          let I2 = false;
          if (o2) {
            const t3 = T2.map((t4) => this.projectAndGetPerspectiveRatio(a2, t4.x, t4.y, s2, h2));
            I2 = t3.some((t4) => !t4.isOccluded), T2 = t3.map((t4) => t4.point);
          } else I2 = true;
          return { box: e.ao(T2), allPointsOccluded: !I2 };
        }
      }
      function Bt(t2, i2, a2) {
        return i2 * (e.X / (t2.tileSize * Math.pow(2, a2 - t2.tileID.overscaledZ)));
      }
      class Ot {
        constructor(t2, e2, i2, a2) {
          this.opacity = t2 ? Math.max(0, Math.min(1, t2.opacity + (t2.placed ? e2 : -e2))) : a2 && i2 ? 1 : 0, this.placed = i2;
        }
        isHidden() {
          return 0 === this.opacity && !this.placed;
        }
      }
      class Nt {
        constructor(t2, e2, i2, a2, s2) {
          this.text = new Ot(t2 ? t2.text : null, e2, i2, s2), this.icon = new Ot(t2 ? t2.icon : null, e2, a2, s2);
        }
        isHidden() {
          return this.text.isHidden() && this.icon.isHidden();
        }
      }
      class Ut {
        constructor(t2, e2, i2) {
          this.text = t2, this.icon = e2, this.skipFade = i2;
        }
      }
      class jt {
        constructor() {
          this.invProjMatrix = e.H(), this.viewportMatrix = e.H(), this.circles = [];
        }
      }
      class Zt {
        constructor(t2, e2, i2, a2, s2) {
          this.bucketInstanceId = t2, this.featureIndex = e2, this.sourceLayerIndex = i2, this.bucketIndex = a2, this.tileID = s2;
        }
      }
      class qt {
        constructor(t2) {
          this.crossSourceCollisions = t2, this.maxGroupID = 0, this.collisionGroups = {};
        }
        get(t2) {
          if (this.crossSourceCollisions) return { ID: 0, predicate: null };
          if (!this.collisionGroups[t2]) {
            const e2 = ++this.maxGroupID;
            this.collisionGroups[t2] = { ID: e2, predicate: (t3) => t3.collisionGroupID === e2 };
          }
          return this.collisionGroups[t2];
        }
      }
      function Vt(t2, i2, a2, s2, o2) {
        const { horizontalAlign: r2, verticalAlign: n2 } = e.au(t2);
        return new e.P(-(r2 - 0.5) * i2 + s2[0] * o2, -(n2 - 0.5) * a2 + s2[1] * o2);
      }
      class Gt {
        constructor(t2, e2, i2, a2, s2, o2) {
          this.transform = t2.clone(), this.terrain = i2, this.collisionIndex = new Ft(this.transform, e2), this.placements = {}, this.opacities = {}, this.variableOffsets = {}, this.stale = false, this.commitTime = 0, this.fadeDuration = a2, this.retainedQueryData = {}, this.collisionGroups = new qt(s2), this.collisionCircleArrays = {}, this.collisionBoxArrays = /* @__PURE__ */ new Map(), this.prevPlacement = o2, o2 && (o2.prevPlacement = void 0), this.placedOrientations = {};
        }
        _getTerrainElevationFunc(t2) {
          const e2 = this.terrain;
          return e2 ? (i2, a2) => e2.getElevation(t2, i2, a2) : null;
        }
        getBucketParts(t2, i2, a2, s2) {
          const o2 = a2.getBucket(i2), r2 = a2.latestFeatureIndex;
          if (!o2 || !r2 || i2.id !== o2.layerIds[0]) return;
          const n2 = a2.collisionBoxArray, l2 = o2.layers[0].layout, h2 = o2.layers[0].paint, c2 = Math.pow(2, this.transform.zoom - a2.tileID.overscaledZ), u3 = a2.tileSize / e.X, d2 = a2.tileID.toUnwrapped(), _2 = this.transform.calculatePosMatrix(d2), p3 = "map" === l2.get("text-pitch-alignment"), m2 = "map" === l2.get("text-rotation-alignment"), f2 = Bt(a2, 1, this.transform.zoom), g2 = this.collisionIndex.mapProjection.translatePosition(this.transform, a2, h2.get("text-translate"), h2.get("text-translate-anchor")), v2 = this.collisionIndex.mapProjection.translatePosition(this.transform, a2, h2.get("icon-translate"), h2.get("icon-translate-anchor")), x2 = gt(_2, p3, m2, this.transform, f2);
          let y2 = null;
          if (p3) {
            const t3 = vt(_2, p3, m2, this.transform, f2);
            y2 = e.L([], this.transform.labelPlaneMatrix, t3);
          }
          this.retainedQueryData[o2.bucketInstanceId] = new Zt(o2.bucketInstanceId, r2, o2.sourceLayerIndex, o2.index, a2.tileID);
          const b2 = { bucket: o2, layout: l2, translationText: g2, translationIcon: v2, posMatrix: _2, unwrappedTileID: d2, textLabelPlaneMatrix: x2, labelToScreenMatrix: y2, scale: c2, textPixelRatio: u3, holdingForFade: a2.holdingForFade(), collisionBoxArray: n2, partiallyEvaluatedTextSize: e.ag(o2.textSizeData, this.transform.zoom), collisionGroup: this.collisionGroups.get(o2.sourceID) };
          if (s2) for (const e2 of o2.sortKeyRanges) {
            const { sortKey: i3, symbolInstanceStart: a3, symbolInstanceEnd: s3 } = e2;
            t2.push({ sortKey: i3, symbolInstanceStart: a3, symbolInstanceEnd: s3, parameters: b2 });
          }
          else t2.push({ symbolInstanceStart: 0, symbolInstanceEnd: o2.symbolInstances.length, parameters: b2 });
        }
        attemptAnchorPlacement(t2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3, d2, _2, p3, m2, f2, g2, v2, x2) {
          const y2 = e.aq[t2.textAnchor], b2 = [t2.textOffset0, t2.textOffset1], w3 = Vt(y2, a2, s2, b2, o2), T2 = this.collisionIndex.placeCollisionBox(i2, d2, l2, h2, c2, n2, r2, f2, u3.predicate, x2, w3);
          if ((!v2 || this.collisionIndex.placeCollisionBox(v2, d2, l2, h2, c2, n2, r2, g2, u3.predicate, x2, w3).placeable) && T2.placeable) {
            let t3;
            if (this.prevPlacement && this.prevPlacement.variableOffsets[_2.crossTileID] && this.prevPlacement.placements[_2.crossTileID] && this.prevPlacement.placements[_2.crossTileID].text && (t3 = this.prevPlacement.variableOffsets[_2.crossTileID].anchor), 0 === _2.crossTileID) throw new Error("symbolInstance.crossTileID can't be 0");
            return this.variableOffsets[_2.crossTileID] = { textOffset: b2, width: a2, height: s2, anchor: y2, textBoxScale: o2, prevAnchor: t3 }, this.markUsedJustification(p3, y2, _2, m2), p3.allowVerticalPlacement && (this.markUsedOrientation(p3, m2, _2), this.placedOrientations[_2.crossTileID] = m2), { shift: w3, placedGlyphBoxes: T2 };
          }
        }
        placeLayerBucketPart(t2, i2, a2) {
          const { bucket: s2, layout: o2, translationText: r2, translationIcon: n2, posMatrix: l2, unwrappedTileID: h2, textLabelPlaneMatrix: c2, labelToScreenMatrix: u3, textPixelRatio: d2, holdingForFade: _2, collisionBoxArray: p3, partiallyEvaluatedTextSize: m2, collisionGroup: f2 } = t2.parameters, g2 = o2.get("text-optional"), v2 = o2.get("icon-optional"), x2 = e.ar(o2, "text-overlap", "text-allow-overlap"), y2 = "always" === x2, b2 = e.ar(o2, "icon-overlap", "icon-allow-overlap"), w3 = "always" === b2, T2 = "map" === o2.get("text-rotation-alignment"), I2 = "map" === o2.get("text-pitch-alignment"), E2 = "none" !== o2.get("icon-text-fit"), P3 = "viewport-y" === o2.get("symbol-z-order"), C2 = y2 && (w3 || !s2.hasIconData() || v2), S2 = w3 && (y2 || !s2.hasTextData() || g2);
          !s2.collisionArrays && p3 && s2.deserializeCollisionBoxes(p3);
          const z3 = this._getTerrainElevationFunc(this.retainedQueryData[s2.bucketInstanceId].tileID), D2 = (t3, p4, w4) => {
            var P4, D3;
            if (i2[t3.crossTileID]) return;
            if (_2) return void (this.placements[t3.crossTileID] = new Ut(false, false, false));
            let M2 = false, A2 = false, R2 = true, k2 = null, L3 = { box: null, placeable: false, offscreen: null }, F2 = { box: null, placeable: false, offscreen: null }, B3 = null, O3 = null, N3 = null, U2 = 0, j3 = 0, Z3 = 0;
            p4.textFeatureIndex ? U2 = p4.textFeatureIndex : t3.useRuntimeCollisionCircles && (U2 = t3.featureIndex), p4.verticalTextFeatureIndex && (j3 = p4.verticalTextFeatureIndex);
            const q3 = p4.textBox;
            if (q3) {
              const i3 = (i4) => {
                let a3 = e.ah.horizontal;
                if (s2.allowVerticalPlacement && !i4 && this.prevPlacement) {
                  const e2 = this.prevPlacement.placedOrientations[t3.crossTileID];
                  e2 && (this.placedOrientations[t3.crossTileID] = e2, a3 = e2, this.markUsedOrientation(s2, a3, t3));
                }
                return a3;
              }, o3 = (i4, a3) => {
                if (s2.allowVerticalPlacement && t3.numVerticalGlyphVertices > 0 && p4.verticalTextBox) {
                  for (const t4 of s2.writingModes) if (t4 === e.ah.vertical ? (L3 = a3(), F2 = L3) : L3 = i4(), L3 && L3.placeable) break;
                } else L3 = i4();
              }, c3 = t3.textAnchorOffsetStartIndex, u4 = t3.textAnchorOffsetEndIndex;
              if (u4 === c3) {
                const a3 = (e2, i4) => {
                  const a4 = this.collisionIndex.placeCollisionBox(e2, x2, d2, l2, h2, I2, T2, r2, f2.predicate, z3);
                  return a4 && a4.placeable && (this.markUsedOrientation(s2, i4, t3), this.placedOrientations[t3.crossTileID] = i4), a4;
                };
                o3(() => a3(q3, e.ah.horizontal), () => {
                  const i4 = p4.verticalTextBox;
                  return s2.allowVerticalPlacement && t3.numVerticalGlyphVertices > 0 && i4 ? a3(i4, e.ah.vertical) : { box: null, offscreen: null };
                }), i3(L3 && L3.placeable);
              } else {
                let _3 = e.aq[null === (D3 = null === (P4 = this.prevPlacement) || void 0 === P4 ? void 0 : P4.variableOffsets[t3.crossTileID]) || void 0 === D3 ? void 0 : D3.anchor];
                const m3 = (i4, o4, p5) => {
                  const m4 = i4.x2 - i4.x1, g4 = i4.y2 - i4.y1, v3 = t3.textBoxScale, y3 = E2 && "never" === b2 ? o4 : null;
                  let w5 = null, P5 = "never" === x2 ? 1 : 2, C3 = "never";
                  _3 && P5++;
                  for (let e2 = 0; e2 < P5; e2++) {
                    for (let e3 = c3; e3 < u4; e3++) {
                      const a3 = s2.textAnchorOffsets.get(e3);
                      if (_3 && a3.textAnchor !== _3) continue;
                      const o5 = this.attemptAnchorPlacement(a3, i4, m4, g4, v3, T2, I2, d2, l2, h2, f2, C3, t3, s2, p5, r2, n2, y3, z3);
                      if (o5 && (w5 = o5.placedGlyphBoxes, w5 && w5.placeable)) return M2 = true, k2 = o5.shift, w5;
                    }
                    _3 ? _3 = null : C3 = x2;
                  }
                  return a2 && !w5 && (w5 = { box: this.collisionIndex.placeCollisionBox(q3, "always", d2, l2, h2, I2, T2, r2, f2.predicate, z3, new e.P(0, 0)).box, offscreen: false, placeable: false }), w5;
                };
                o3(() => m3(q3, p4.iconBox, e.ah.horizontal), () => {
                  const i4 = p4.verticalTextBox;
                  return s2.allowVerticalPlacement && (!L3 || !L3.placeable) && t3.numVerticalGlyphVertices > 0 && i4 ? m3(i4, p4.verticalIconBox, e.ah.vertical) : { box: null, occluded: true, offscreen: null };
                }), L3 && (M2 = L3.placeable, R2 = L3.offscreen);
                const g3 = i3(L3 && L3.placeable);
                if (!M2 && this.prevPlacement) {
                  const e2 = this.prevPlacement.variableOffsets[t3.crossTileID];
                  e2 && (this.variableOffsets[t3.crossTileID] = e2, this.markUsedJustification(s2, e2.anchor, t3, g3));
                }
              }
            }
            if (B3 = L3, M2 = B3 && B3.placeable, R2 = B3 && B3.offscreen, t3.useRuntimeCollisionCircles) {
              const i3 = s2.text.placedSymbolArray.get(t3.centerJustifiedTextSymbolIndex), n3 = e.ai(s2.textSizeData, m2, i3), d3 = o2.get("text-padding");
              O3 = this.collisionIndex.placeCollisionCircles(x2, i3, s2.lineVertexArray, s2.glyphOffsetArray, n3, l2, h2, c2, u3, a2, I2, f2.predicate, t3.collisionCircleDiameter, d3, r2, z3), O3.circles.length && O3.collisionDetected && !a2 && e.w("Collisions detected, but collision boxes are not shown"), M2 = y2 || O3.circles.length > 0 && !O3.collisionDetected, R2 = R2 && O3.offscreen;
            }
            if (p4.iconFeatureIndex && (Z3 = p4.iconFeatureIndex), p4.iconBox) {
              const t4 = (t5) => this.collisionIndex.placeCollisionBox(t5, b2, d2, l2, h2, I2, T2, n2, f2.predicate, z3, E2 && k2 ? k2 : void 0);
              F2 && F2.placeable && p4.verticalIconBox ? (N3 = t4(p4.verticalIconBox), A2 = N3.placeable) : (N3 = t4(p4.iconBox), A2 = N3.placeable), R2 = R2 && N3.offscreen;
            }
            const V3 = g2 || 0 === t3.numHorizontalGlyphVertices && 0 === t3.numVerticalGlyphVertices, G3 = v2 || 0 === t3.numIconVertices;
            V3 || G3 ? G3 ? V3 || (A2 = A2 && M2) : M2 = A2 && M2 : A2 = M2 = A2 && M2;
            const H2 = A2 && N3.placeable;
            if (M2 && B3.placeable && this.collisionIndex.insertCollisionBox(B3.box, x2, o2.get("text-ignore-placement"), s2.bucketInstanceId, F2 && F2.placeable && j3 ? j3 : U2, f2.ID), H2 && this.collisionIndex.insertCollisionBox(N3.box, b2, o2.get("icon-ignore-placement"), s2.bucketInstanceId, Z3, f2.ID), O3 && M2 && this.collisionIndex.insertCollisionCircles(O3.circles, x2, o2.get("text-ignore-placement"), s2.bucketInstanceId, U2, f2.ID), a2 && this.storeCollisionData(s2.bucketInstanceId, w4, p4, B3, N3, O3), 0 === t3.crossTileID) throw new Error("symbolInstance.crossTileID can't be 0");
            if (0 === s2.bucketInstanceId) throw new Error("bucket.bucketInstanceId can't be 0");
            this.placements[t3.crossTileID] = new Ut(M2 || C2, A2 || S2, R2 || s2.justReloaded), i2[t3.crossTileID] = true;
          };
          if (P3) {
            if (0 !== t2.symbolInstanceStart) throw new Error("bucket.bucketInstanceId should be 0");
            const e2 = s2.getSortedSymbolIndexes(this.transform.angle);
            for (let t3 = e2.length - 1; t3 >= 0; --t3) {
              const i3 = e2[t3];
              D2(s2.symbolInstances.get(i3), s2.collisionArrays[i3], i3);
            }
          } else for (let e2 = t2.symbolInstanceStart; e2 < t2.symbolInstanceEnd; e2++) D2(s2.symbolInstances.get(e2), s2.collisionArrays[e2], e2);
          if (a2 && s2.bucketInstanceId in this.collisionCircleArrays) {
            const t3 = this.collisionCircleArrays[s2.bucketInstanceId];
            e.as(t3.invProjMatrix, l2), t3.viewportMatrix = this.collisionIndex.getViewportMatrix();
          }
          s2.justReloaded = false;
        }
        storeCollisionData(t2, e2, i2, a2, s2, o2) {
          if (i2.textBox || i2.iconBox) {
            let o3, r2;
            this.collisionBoxArrays.has(t2) ? o3 = this.collisionBoxArrays.get(t2) : (o3 = /* @__PURE__ */ new Map(), this.collisionBoxArrays.set(t2, o3)), o3.has(e2) ? r2 = o3.get(e2) : (r2 = { text: null, icon: null }, o3.set(e2, r2)), i2.textBox && (r2.text = a2.box), i2.iconBox && (r2.icon = s2.box);
          }
          if (o2) {
            let e3 = this.collisionCircleArrays[t2];
            void 0 === e3 && (e3 = this.collisionCircleArrays[t2] = new jt());
            for (let t3 = 0; t3 < o2.circles.length; t3 += 4) e3.circles.push(o2.circles[t3 + 0]), e3.circles.push(o2.circles[t3 + 1]), e3.circles.push(o2.circles[t3 + 2]), e3.circles.push(o2.collisionDetected ? 1 : 0);
          }
        }
        markUsedJustification(t2, i2, a2, s2) {
          let o2;
          o2 = s2 === e.ah.vertical ? a2.verticalPlacedTextSymbolIndex : { left: a2.leftJustifiedTextSymbolIndex, center: a2.centerJustifiedTextSymbolIndex, right: a2.rightJustifiedTextSymbolIndex }[e.at(i2)];
          const r2 = [a2.leftJustifiedTextSymbolIndex, a2.centerJustifiedTextSymbolIndex, a2.rightJustifiedTextSymbolIndex, a2.verticalPlacedTextSymbolIndex];
          for (const e2 of r2) e2 >= 0 && (t2.text.placedSymbolArray.get(e2).crossTileID = o2 >= 0 && e2 !== o2 ? 0 : a2.crossTileID);
        }
        markUsedOrientation(t2, i2, a2) {
          const s2 = i2 === e.ah.horizontal || i2 === e.ah.horizontalOnly ? i2 : 0, o2 = i2 === e.ah.vertical ? i2 : 0, r2 = [a2.leftJustifiedTextSymbolIndex, a2.centerJustifiedTextSymbolIndex, a2.rightJustifiedTextSymbolIndex];
          for (const e2 of r2) t2.text.placedSymbolArray.get(e2).placedOrientation = s2;
          a2.verticalPlacedTextSymbolIndex && (t2.text.placedSymbolArray.get(a2.verticalPlacedTextSymbolIndex).placedOrientation = o2);
        }
        commit(t2) {
          this.commitTime = t2, this.zoomAtLastRecencyCheck = this.transform.zoom;
          const e2 = this.prevPlacement;
          let i2 = false;
          this.prevZoomAdjustment = e2 ? e2.zoomAdjustment(this.transform.zoom) : 0;
          const a2 = e2 ? e2.symbolFadeChange(t2) : 1, s2 = e2 ? e2.opacities : {}, o2 = e2 ? e2.variableOffsets : {}, r2 = e2 ? e2.placedOrientations : {};
          for (const t3 in this.placements) {
            const e3 = this.placements[t3], o3 = s2[t3];
            o3 ? (this.opacities[t3] = new Nt(o3, a2, e3.text, e3.icon), i2 = i2 || e3.text !== o3.text.placed || e3.icon !== o3.icon.placed) : (this.opacities[t3] = new Nt(null, a2, e3.text, e3.icon, e3.skipFade), i2 = i2 || e3.text || e3.icon);
          }
          for (const t3 in s2) {
            const e3 = s2[t3];
            if (!this.opacities[t3]) {
              const s3 = new Nt(e3, a2, false, false);
              s3.isHidden() || (this.opacities[t3] = s3, i2 = i2 || e3.text.placed || e3.icon.placed);
            }
          }
          for (const t3 in o2) this.variableOffsets[t3] || !this.opacities[t3] || this.opacities[t3].isHidden() || (this.variableOffsets[t3] = o2[t3]);
          for (const t3 in r2) this.placedOrientations[t3] || !this.opacities[t3] || this.opacities[t3].isHidden() || (this.placedOrientations[t3] = r2[t3]);
          if (e2 && void 0 === e2.lastPlacementChangeTime) throw new Error("Last placement time for previous placement is not defined");
          i2 ? this.lastPlacementChangeTime = t2 : "number" != typeof this.lastPlacementChangeTime && (this.lastPlacementChangeTime = e2 ? e2.lastPlacementChangeTime : t2);
        }
        updateLayerOpacities(t2, e2) {
          const i2 = {};
          for (const a2 of e2) {
            const e3 = a2.getBucket(t2);
            e3 && a2.latestFeatureIndex && t2.id === e3.layerIds[0] && this.updateBucketOpacities(e3, a2.tileID, i2, a2.collisionBoxArray);
          }
        }
        updateBucketOpacities(t2, i2, a2, s2) {
          t2.hasTextData() && (t2.text.opacityVertexArray.clear(), t2.text.hasVisibleVertices = false), t2.hasIconData() && (t2.icon.opacityVertexArray.clear(), t2.icon.hasVisibleVertices = false), t2.hasIconCollisionBoxData() && t2.iconCollisionBox.collisionVertexArray.clear(), t2.hasTextCollisionBoxData() && t2.textCollisionBox.collisionVertexArray.clear();
          const o2 = t2.layers[0], r2 = o2.layout, n2 = new Nt(null, 0, false, false, true), l2 = r2.get("text-allow-overlap"), h2 = r2.get("icon-allow-overlap"), c2 = o2._unevaluatedLayout.hasValue("text-variable-anchor") || o2._unevaluatedLayout.hasValue("text-variable-anchor-offset"), u3 = "map" === r2.get("text-rotation-alignment"), d2 = "map" === r2.get("text-pitch-alignment"), _2 = "none" !== r2.get("icon-text-fit"), p3 = new Nt(null, 0, l2 && (h2 || !t2.hasIconData() || r2.get("icon-optional")), h2 && (l2 || !t2.hasTextData() || r2.get("text-optional")), true);
          !t2.collisionArrays && s2 && (t2.hasIconCollisionBoxData() || t2.hasTextCollisionBoxData()) && t2.deserializeCollisionBoxes(s2);
          const m2 = (t3, e2, i3) => {
            for (let a3 = 0; a3 < e2 / 4; a3++) t3.opacityVertexArray.emplaceBack(i3);
            t3.hasVisibleVertices = t3.hasVisibleVertices || i3 !== ee2;
          }, f2 = this.collisionBoxArrays.get(t2.bucketInstanceId);
          for (let i3 = 0; i3 < t2.symbolInstances.length; i3++) {
            const s3 = t2.symbolInstances.get(i3), { numHorizontalGlyphVertices: o3, numVerticalGlyphVertices: r3, crossTileID: l3 } = s3;
            let h3 = this.opacities[l3];
            a2[l3] ? h3 = n2 : h3 || (h3 = p3, this.opacities[l3] = h3), a2[l3] = true;
            const g2 = s3.numIconVertices > 0, v2 = this.placedOrientations[s3.crossTileID], x2 = v2 === e.ah.vertical, y2 = v2 === e.ah.horizontal || v2 === e.ah.horizontalOnly;
            if (o3 > 0 || r3 > 0) {
              const e2 = te2(h3.text);
              m2(t2.text, o3, x2 ? ee2 : e2), m2(t2.text, r3, y2 ? ee2 : e2);
              const i4 = h3.text.isHidden();
              [s3.rightJustifiedTextSymbolIndex, s3.centerJustifiedTextSymbolIndex, s3.leftJustifiedTextSymbolIndex].forEach((e3) => {
                e3 >= 0 && (t2.text.placedSymbolArray.get(e3).hidden = i4 || x2 ? 1 : 0);
              }), s3.verticalPlacedTextSymbolIndex >= 0 && (t2.text.placedSymbolArray.get(s3.verticalPlacedTextSymbolIndex).hidden = i4 || y2 ? 1 : 0);
              const a3 = this.variableOffsets[s3.crossTileID];
              a3 && this.markUsedJustification(t2, a3.anchor, s3, v2);
              const n3 = this.placedOrientations[s3.crossTileID];
              n3 && (this.markUsedJustification(t2, "left", s3, n3), this.markUsedOrientation(t2, n3, s3));
            }
            if (g2) {
              const e2 = te2(h3.icon), i4 = !(_2 && s3.verticalPlacedIconSymbolIndex && x2);
              s3.placedIconSymbolIndex >= 0 && (m2(t2.icon, s3.numIconVertices, i4 ? e2 : ee2), t2.icon.placedSymbolArray.get(s3.placedIconSymbolIndex).hidden = h3.icon.isHidden()), s3.verticalPlacedIconSymbolIndex >= 0 && (m2(t2.icon, s3.numVerticalIconVertices, i4 ? ee2 : e2), t2.icon.placedSymbolArray.get(s3.verticalPlacedIconSymbolIndex).hidden = h3.icon.isHidden());
            }
            const b2 = f2 && f2.has(i3) ? f2.get(i3) : { text: null, icon: null };
            if (t2.hasIconCollisionBoxData() || t2.hasTextCollisionBoxData()) {
              const a3 = t2.collisionArrays[i3];
              if (a3) {
                let i4 = new e.P(0, 0);
                if (a3.textBox || a3.verticalTextBox) {
                  let e2 = true;
                  if (c2) {
                    const t3 = this.variableOffsets[l3];
                    t3 ? (i4 = Vt(t3.anchor, t3.width, t3.height, t3.textOffset, t3.textBoxScale), u3 && i4._rotate(d2 ? this.transform.angle : -this.transform.angle)) : e2 = false;
                  }
                  if (a3.textBox || a3.verticalTextBox) {
                    let s4;
                    a3.textBox && (s4 = x2), a3.verticalTextBox && (s4 = y2), Ht(t2.textCollisionBox.collisionVertexArray, h3.text.placed, !e2 || s4, b2.text, i4.x, i4.y);
                  }
                }
                if (a3.iconBox || a3.verticalIconBox) {
                  const e2 = Boolean(!y2 && a3.verticalIconBox);
                  let s4;
                  a3.iconBox && (s4 = e2), a3.verticalIconBox && (s4 = !e2), Ht(t2.iconCollisionBox.collisionVertexArray, h3.icon.placed, s4, b2.icon, _2 ? i4.x : 0, _2 ? i4.y : 0);
                }
              }
            }
          }
          if (t2.sortFeatures(this.transform.angle), this.retainedQueryData[t2.bucketInstanceId] && (this.retainedQueryData[t2.bucketInstanceId].featureSortOrder = t2.featureSortOrder), t2.hasTextData() && t2.text.opacityVertexBuffer && t2.text.opacityVertexBuffer.updateData(t2.text.opacityVertexArray), t2.hasIconData() && t2.icon.opacityVertexBuffer && t2.icon.opacityVertexBuffer.updateData(t2.icon.opacityVertexArray), t2.hasIconCollisionBoxData() && t2.iconCollisionBox.collisionVertexBuffer && t2.iconCollisionBox.collisionVertexBuffer.updateData(t2.iconCollisionBox.collisionVertexArray), t2.hasTextCollisionBoxData() && t2.textCollisionBox.collisionVertexBuffer && t2.textCollisionBox.collisionVertexBuffer.updateData(t2.textCollisionBox.collisionVertexArray), t2.text.opacityVertexArray.length !== t2.text.layoutVertexArray.length / 4) throw new Error(`bucket.text.opacityVertexArray.length (= ${t2.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t2.text.layoutVertexArray.length}) / 4`);
          if (t2.icon.opacityVertexArray.length !== t2.icon.layoutVertexArray.length / 4) throw new Error(`bucket.icon.opacityVertexArray.length (= ${t2.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t2.icon.layoutVertexArray.length}) / 4`);
          if (t2.bucketInstanceId in this.collisionCircleArrays) {
            const e2 = this.collisionCircleArrays[t2.bucketInstanceId];
            t2.placementInvProjMatrix = e2.invProjMatrix, t2.placementViewportMatrix = e2.viewportMatrix, t2.collisionCircleArray = e2.circles, delete this.collisionCircleArrays[t2.bucketInstanceId];
          }
        }
        symbolFadeChange(t2) {
          return 0 === this.fadeDuration ? 1 : (t2 - this.commitTime) / this.fadeDuration + this.prevZoomAdjustment;
        }
        zoomAdjustment(t2) {
          return Math.max(0, (this.transform.zoom - t2) / 1.5);
        }
        hasTransitions(t2) {
          return this.stale || t2 - this.lastPlacementChangeTime < this.fadeDuration;
        }
        stillRecent(t2, e2) {
          const i2 = this.zoomAtLastRecencyCheck === e2 ? 1 - this.zoomAdjustment(e2) : 1;
          return this.zoomAtLastRecencyCheck = e2, this.commitTime + this.fadeDuration * i2 > t2;
        }
        setStale() {
          this.stale = true;
        }
      }
      function Ht(t2, e2, i2, a2, s2, o2) {
        a2 && 0 !== a2.length || (a2 = [0, 0, 0, 0]);
        const r2 = a2[0] - Lt, n2 = a2[1] - Lt, l2 = a2[2] - Lt, h2 = a2[3] - Lt;
        t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0, s2 || 0, o2 || 0, r2, n2), t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0, s2 || 0, o2 || 0, l2, n2), t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0, s2 || 0, o2 || 0, l2, h2), t2.emplaceBack(e2 ? 1 : 0, i2 ? 1 : 0, s2 || 0, o2 || 0, r2, h2);
      }
      const Wt = Math.pow(2, 25), $t = Math.pow(2, 24), Xt = Math.pow(2, 17), Kt = Math.pow(2, 16), Jt = Math.pow(2, 9), Yt = Math.pow(2, 8), Qt = Math.pow(2, 1);
      function te2(t2) {
        if (0 === t2.opacity && !t2.placed) return 0;
        if (1 === t2.opacity && t2.placed) return 4294967295;
        const e2 = t2.placed ? 1 : 0, i2 = Math.floor(127 * t2.opacity);
        return i2 * Wt + e2 * $t + i2 * Xt + e2 * Kt + i2 * Jt + e2 * Yt + i2 * Qt + e2;
      }
      const ee2 = 0;
      function ie2() {
        return { isOccluded: (t2, e2, i2) => false, getPitchedTextCorrection: (t2, e2, i2) => 1, get useSpecialProjectionForSymbols() {
          return false;
        }, projectTileCoordinates(t2, e2, i2, a2) {
          throw new Error("Not implemented.");
        }, translatePosition: (t2, e2, i2, a2) => function(t3, e3, i3, a3, s2 = false) {
          if (!i3[0] && !i3[1]) return [0, 0];
          const o2 = s2 ? "map" === a3 ? t3.angle : 0 : "viewport" === a3 ? -t3.angle : 0;
          if (o2) {
            const t4 = Math.sin(o2), e4 = Math.cos(o2);
            i3 = [i3[0] * e4 - i3[1] * t4, i3[0] * t4 + i3[1] * e4];
          }
          return [s2 ? i3[0] : Bt(e3, i3[0], t3.zoom), s2 ? i3[1] : Bt(e3, i3[1], t3.zoom)];
        }(t2, e2, i2, a2), getCircleRadiusCorrection: (t2) => 1 };
      }
      class ae2 {
        constructor(t2) {
          this._sortAcrossTiles = "viewport-y" !== t2.layout.get("symbol-z-order") && !t2.layout.get("symbol-sort-key").isConstant(), this._currentTileIndex = 0, this._currentPartIndex = 0, this._seenCrossTileIDs = {}, this._bucketParts = [];
        }
        continuePlacement(t2, e2, i2, a2, s2) {
          const o2 = this._bucketParts;
          for (; this._currentTileIndex < t2.length; ) if (e2.getBucketParts(o2, a2, t2[this._currentTileIndex], this._sortAcrossTiles), this._currentTileIndex++, s2()) return true;
          for (this._sortAcrossTiles && (this._sortAcrossTiles = false, o2.sort((t3, e3) => t3.sortKey - e3.sortKey)); this._currentPartIndex < o2.length; ) if (e2.placeLayerBucketPart(o2[this._currentPartIndex], this._seenCrossTileIDs, i2), this._currentPartIndex++, s2()) return true;
          return false;
        }
      }
      class se {
        constructor(t2, e2, i2, a2, s2, o2, r2, n2) {
          this.placement = new Gt(t2, ie2(), e2, o2, r2, n2), this._currentPlacementIndex = i2.length - 1, this._forceFullPlacement = a2, this._showCollisionBoxes = s2, this._done = false;
        }
        isDone() {
          return this._done;
        }
        continuePlacement(t2, e2, i2) {
          const a2 = o.now(), s2 = () => !this._forceFullPlacement && o.now() - a2 > 2;
          for (; this._currentPlacementIndex >= 0; ) {
            const a3 = e2[t2[this._currentPlacementIndex]], o2 = this.placement.collisionIndex.transform.zoom;
            if ("symbol" === a3.type && (!a3.minzoom || a3.minzoom <= o2) && (!a3.maxzoom || a3.maxzoom > o2)) {
              if (this._inProgressLayer || (this._inProgressLayer = new ae2(a3)), this._inProgressLayer.continuePlacement(i2[a3.source], this.placement, this._showCollisionBoxes, a3, s2)) return;
              delete this._inProgressLayer;
            }
            this._currentPlacementIndex--;
          }
          this._done = true;
        }
        commit(t2) {
          return this.placement.commit(t2), this.placement;
        }
      }
      const oe = 512 / e.X / 2;
      class re {
        constructor(t2, i2, a2) {
          this.tileID = t2, this.bucketInstanceId = a2, this._symbolsByKey = {};
          const s2 = /* @__PURE__ */ new Map();
          for (let t3 = 0; t3 < i2.length; t3++) {
            const e2 = i2.get(t3), a3 = e2.key, o2 = s2.get(a3);
            o2 ? o2.push(e2) : s2.set(a3, [e2]);
          }
          for (const [t3, i3] of s2) {
            const a3 = { positions: i3.map((t4) => ({ x: Math.floor(t4.anchorX * oe), y: Math.floor(t4.anchorY * oe) })), crossTileIDs: i3.map((t4) => t4.crossTileID) };
            if (a3.positions.length > 128) {
              const t4 = new e.av(a3.positions.length, 16, Uint16Array);
              for (const { x: e2, y: i4 } of a3.positions) t4.add(e2, i4);
              t4.finish(), delete a3.positions, a3.index = t4;
            }
            this._symbolsByKey[t3] = a3;
          }
        }
        getScaledCoordinates(t2, i2) {
          const { x: a2, y: s2, z: o2 } = this.tileID.canonical, { x: r2, y: n2, z: l2 } = i2.canonical, h2 = oe / Math.pow(2, l2 - o2), c2 = (n2 * e.X + t2.anchorY) * h2, u3 = s2 * e.X * oe;
          return { x: Math.floor((r2 * e.X + t2.anchorX) * h2 - a2 * e.X * oe), y: Math.floor(c2 - u3) };
        }
        findMatches(t2, e2, i2) {
          const a2 = this.tileID.canonical.z < e2.canonical.z ? 1 : Math.pow(2, this.tileID.canonical.z - e2.canonical.z);
          for (let s2 = 0; s2 < t2.length; s2++) {
            const o2 = t2.get(s2);
            if (o2.crossTileID) continue;
            const r2 = this._symbolsByKey[o2.key];
            if (!r2) continue;
            const n2 = this.getScaledCoordinates(o2, e2);
            if (r2.index) {
              const t3 = r2.index.range(n2.x - a2, n2.y - a2, n2.x + a2, n2.y + a2).sort();
              for (const e3 of t3) {
                const t4 = r2.crossTileIDs[e3];
                if (!i2[t4]) {
                  i2[t4] = true, o2.crossTileID = t4;
                  break;
                }
              }
            } else if (r2.positions) for (let t3 = 0; t3 < r2.positions.length; t3++) {
              const e3 = r2.positions[t3], s3 = r2.crossTileIDs[t3];
              if (Math.abs(e3.x - n2.x) <= a2 && Math.abs(e3.y - n2.y) <= a2 && !i2[s3]) {
                i2[s3] = true, o2.crossTileID = s3;
                break;
              }
            }
          }
        }
        getCrossTileIDsLists() {
          return Object.values(this._symbolsByKey).map(({ crossTileIDs: t2 }) => t2);
        }
      }
      class ne {
        constructor() {
          this.maxCrossTileID = 0;
        }
        generate() {
          return ++this.maxCrossTileID;
        }
      }
      class le2 {
        constructor() {
          this.indexes = {}, this.usedCrossTileIDs = {}, this.lng = 0;
        }
        handleWrapJump(t2) {
          const e2 = Math.round((t2 - this.lng) / 360);
          if (0 !== e2) for (const t3 in this.indexes) {
            const i2 = this.indexes[t3], a2 = {};
            for (const t4 in i2) {
              const s2 = i2[t4];
              s2.tileID = s2.tileID.unwrapTo(s2.tileID.wrap + e2), a2[s2.tileID.key] = s2;
            }
            this.indexes[t3] = a2;
          }
          this.lng = t2;
        }
        addBucket(t2, e2, i2) {
          if (this.indexes[t2.overscaledZ] && this.indexes[t2.overscaledZ][t2.key]) {
            if (this.indexes[t2.overscaledZ][t2.key].bucketInstanceId === e2.bucketInstanceId) return false;
            this.removeBucketCrossTileIDs(t2.overscaledZ, this.indexes[t2.overscaledZ][t2.key]);
          }
          for (let t3 = 0; t3 < e2.symbolInstances.length; t3++) e2.symbolInstances.get(t3).crossTileID = 0;
          this.usedCrossTileIDs[t2.overscaledZ] || (this.usedCrossTileIDs[t2.overscaledZ] = {});
          const a2 = this.usedCrossTileIDs[t2.overscaledZ];
          for (const i3 in this.indexes) {
            const s2 = this.indexes[i3];
            if (Number(i3) > t2.overscaledZ) for (const i4 in s2) {
              const o2 = s2[i4];
              o2.tileID.isChildOf(t2) && o2.findMatches(e2.symbolInstances, t2, a2);
            }
            else {
              const o2 = s2[t2.scaledTo(Number(i3)).key];
              o2 && o2.findMatches(e2.symbolInstances, t2, a2);
            }
          }
          for (let t3 = 0; t3 < e2.symbolInstances.length; t3++) {
            const s2 = e2.symbolInstances.get(t3);
            s2.crossTileID || (s2.crossTileID = i2.generate(), a2[s2.crossTileID] = true);
          }
          return void 0 === this.indexes[t2.overscaledZ] && (this.indexes[t2.overscaledZ] = {}), this.indexes[t2.overscaledZ][t2.key] = new re(t2, e2.symbolInstances, e2.bucketInstanceId), true;
        }
        removeBucketCrossTileIDs(t2, e2) {
          for (const i2 of e2.getCrossTileIDsLists()) for (const e3 of i2) delete this.usedCrossTileIDs[t2][e3];
        }
        removeStaleBuckets(t2) {
          let e2 = false;
          for (const i2 in this.indexes) {
            const a2 = this.indexes[i2];
            for (const s2 in a2) t2[a2[s2].bucketInstanceId] || (this.removeBucketCrossTileIDs(i2, a2[s2]), delete a2[s2], e2 = true);
          }
          return e2;
        }
      }
      class he2 {
        constructor() {
          this.layerIndexes = {}, this.crossTileIDs = new ne(), this.maxBucketInstanceId = 0, this.bucketsInCurrentPlacement = {};
        }
        addLayer(t2, e2, i2) {
          let a2 = this.layerIndexes[t2.id];
          void 0 === a2 && (a2 = this.layerIndexes[t2.id] = new le2());
          let s2 = false;
          const o2 = {};
          a2.handleWrapJump(i2);
          for (const i3 of e2) {
            const e3 = i3.getBucket(t2);
            e3 && t2.id === e3.layerIds[0] && (e3.bucketInstanceId || (e3.bucketInstanceId = ++this.maxBucketInstanceId), a2.addBucket(i3.tileID, e3, this.crossTileIDs) && (s2 = true), o2[e3.bucketInstanceId] = true);
          }
          return a2.removeStaleBuckets(o2) && (s2 = true), s2;
        }
        pruneUnusedLayers(t2) {
          const e2 = {};
          t2.forEach((t3) => {
            e2[t3] = true;
          });
          for (const t3 in this.layerIndexes) e2[t3] || delete this.layerIndexes[t3];
        }
      }
      const ce2 = (t2, i2) => e.t(t2, i2 && i2.filter((t3) => "source.canvas" !== t3.identifier)), ue2 = e.aw();
      class de2 extends e.E {
        constructor(t2, i2 = {}) {
          super(), this._rtlPluginLoaded = () => {
            for (const t3 in this.sourceCaches) {
              const e2 = this.sourceCaches[t3].getSource().type;
              "vector" !== e2 && "geojson" !== e2 || this.sourceCaches[t3].reload();
            }
          }, this.map = t2, this.dispatcher = new U(N2(), t2._getMapId()), this.dispatcher.registerMessageHandler("GG", (t3, e2) => this.getGlyphs(t3, e2)), this.dispatcher.registerMessageHandler("GI", (t3, e2) => this.getImages(t3, e2)), this.imageManager = new T(), this.imageManager.setEventedParent(this), this.glyphManager = new C(t2._requestManager, i2.localIdeographFontFamily), this.lineAtlas = new R(256, 512), this.crossTileSymbolIndex = new he2(), this._spritesImagesIds = {}, this._layers = {}, this._order = [], this.sourceCaches = {}, this.zoomHistory = new e.ax(), this._loaded = false, this._availableImages = [], this._resetUpdates(), this.dispatcher.broadcast("SR", e.ay()), nt2().on(st2, this._rtlPluginLoaded), this.on("data", (t3) => {
            if ("source" !== t3.dataType || "metadata" !== t3.sourceDataType) return;
            const e2 = this.sourceCaches[t3.sourceId];
            if (!e2) return;
            const i3 = e2.getSource();
            if (i3 && i3.vectorLayerIds) for (const t4 in this._layers) {
              const e3 = this._layers[t4];
              e3.source === i3.id && this._validateLayer(e3);
            }
          });
        }
        loadURL(t2, i2 = {}, a2) {
          this.fire(new e.k("dataloading", { dataType: "style" })), i2.validate = "boolean" != typeof i2.validate || i2.validate;
          const s2 = this.map._requestManager.transformRequest(t2, "Style");
          this._loadStyleRequest = new AbortController();
          const o2 = this._loadStyleRequest;
          e.h(s2, this._loadStyleRequest).then((t3) => {
            this._loadStyleRequest = null, this._load(t3.data, i2, a2);
          }).catch((t3) => {
            this._loadStyleRequest = null, t3 && !o2.signal.aborted && this.fire(new e.j(t3));
          });
        }
        loadJSON(t2, i2 = {}, a2) {
          this.fire(new e.k("dataloading", { dataType: "style" })), this._frameRequest = new AbortController(), o.frameAsync(this._frameRequest).then(() => {
            this._frameRequest = null, i2.validate = false !== i2.validate, this._load(t2, i2, a2);
          }).catch(() => {
          });
        }
        loadEmpty() {
          this.fire(new e.k("dataloading", { dataType: "style" })), this._load(ue2, { validate: false });
        }
        _load(t2, i2, a2) {
          var s2;
          const o2 = i2.transformStyle ? i2.transformStyle(a2, t2) : t2;
          if (!i2.validate || !ce2(this, e.u(o2))) {
            this._loaded = true, this.stylesheet = o2;
            for (const t3 in o2.sources) this.addSource(t3, o2.sources[t3], { validate: false });
            o2.sprite ? this._loadSprite(o2.sprite) : this.imageManager.setLoaded(true), this.glyphManager.setURL(o2.glyphs), this._createLayers(), this.light = new D(this.stylesheet.light), this.sky = new A(this.stylesheet.sky), this.map.setTerrain(null !== (s2 = this.stylesheet.terrain) && void 0 !== s2 ? s2 : null), this.fire(new e.k("data", { dataType: "style" })), this.fire(new e.k("style.load"));
          }
        }
        _createLayers() {
          const t2 = e.az(this.stylesheet.layers);
          this.dispatcher.broadcast("SL", t2), this._order = t2.map((t3) => t3.id), this._layers = {}, this._serializedLayers = null;
          for (const i2 of t2) {
            const t3 = e.aA(i2);
            t3.setEventedParent(this, { layer: { id: i2.id } }), this._layers[i2.id] = t3;
          }
        }
        _loadSprite(t2, i2 = false, a2 = void 0) {
          let s2;
          this.imageManager.setLoaded(false), this._spriteRequest = new AbortController(), function(t3, i3, a3, s3) {
            return e._(this, void 0, void 0, function* () {
              const r2 = x(t3), n2 = a3 > 1 ? "@2x" : "", l2 = {}, h2 = {};
              for (const { id: t4, url: a4 } of r2) {
                const o2 = i3.transformRequest(y(a4, n2, ".json"), "SpriteJSON");
                l2[t4] = e.h(o2, s3);
                const r3 = i3.transformRequest(y(a4, n2, ".png"), "SpriteImage");
                h2[t4] = _.getImage(r3, s3);
              }
              return yield Promise.all([...Object.values(l2), ...Object.values(h2)]), function(t4, i4) {
                return e._(this, void 0, void 0, function* () {
                  const e2 = {};
                  for (const a4 in t4) {
                    e2[a4] = {};
                    const s4 = o.getImageCanvasContext((yield i4[a4]).data), r3 = (yield t4[a4]).data;
                    for (const t5 in r3) {
                      const { width: i5, height: o2, x: n3, y: l3, sdf: h3, pixelRatio: c2, stretchX: u3, stretchY: d2, content: _2, textFitWidth: p3, textFitHeight: m2 } = r3[t5];
                      e2[a4][t5] = { data: null, pixelRatio: c2, sdf: h3, stretchX: u3, stretchY: d2, content: _2, textFitWidth: p3, textFitHeight: m2, spriteData: { width: i5, height: o2, x: n3, y: l3, context: s4 } };
                    }
                  }
                  return e2;
                });
              }(l2, h2);
            });
          }(t2, this.map._requestManager, this.map.getPixelRatio(), this._spriteRequest).then((t3) => {
            if (this._spriteRequest = null, t3) for (const e2 in t3) {
              this._spritesImagesIds[e2] = [];
              const a3 = this._spritesImagesIds[e2] ? this._spritesImagesIds[e2].filter((e3) => !(e3 in t3)) : [];
              for (const t4 of a3) this.imageManager.removeImage(t4), this._changedImages[t4] = true;
              for (const a4 in t3[e2]) {
                const s3 = "default" === e2 ? a4 : `${e2}:${a4}`;
                this._spritesImagesIds[e2].push(s3), s3 in this.imageManager.images ? this.imageManager.updateImage(s3, t3[e2][a4], false) : this.imageManager.addImage(s3, t3[e2][a4]), i2 && (this._changedImages[s3] = true);
              }
            }
          }).catch((t3) => {
            this._spriteRequest = null, s2 = t3, this.fire(new e.j(s2));
          }).finally(() => {
            this.imageManager.setLoaded(true), this._availableImages = this.imageManager.listImages(), i2 && (this._changed = true), this.dispatcher.broadcast("SI", this._availableImages), this.fire(new e.k("data", { dataType: "style" })), a2 && a2(s2);
          });
        }
        _unloadSprite() {
          for (const t2 of Object.values(this._spritesImagesIds).flat()) this.imageManager.removeImage(t2), this._changedImages[t2] = true;
          this._spritesImagesIds = {}, this._availableImages = this.imageManager.listImages(), this._changed = true, this.dispatcher.broadcast("SI", this._availableImages), this.fire(new e.k("data", { dataType: "style" }));
        }
        _validateLayer(t2) {
          const i2 = this.sourceCaches[t2.source];
          if (!i2) return;
          const a2 = t2.sourceLayer;
          if (!a2) return;
          const s2 = i2.getSource();
          ("geojson" === s2.type || s2.vectorLayerIds && -1 === s2.vectorLayerIds.indexOf(a2)) && this.fire(new e.j(new Error(`Source layer "${a2}" does not exist on source "${s2.id}" as specified by style layer "${t2.id}".`)));
        }
        loaded() {
          if (!this._loaded) return false;
          if (Object.keys(this._updatedSources).length) return false;
          for (const t2 in this.sourceCaches) if (!this.sourceCaches[t2].loaded()) return false;
          return !!this.imageManager.isLoaded();
        }
        _serializeByIds(t2, i2 = false) {
          const a2 = this._serializedAllLayers();
          if (!t2 || 0 === t2.length) return Object.values(i2 ? e.aB(a2) : a2);
          const s2 = [];
          for (const o2 of t2) if (a2[o2]) {
            const t3 = i2 ? e.aB(a2[o2]) : a2[o2];
            s2.push(t3);
          }
          return s2;
        }
        _serializedAllLayers() {
          let t2 = this._serializedLayers;
          if (t2) return t2;
          t2 = this._serializedLayers = {};
          const e2 = Object.keys(this._layers);
          for (const i2 of e2) {
            const e3 = this._layers[i2];
            "custom" !== e3.type && (t2[i2] = e3.serialize());
          }
          return t2;
        }
        hasTransitions() {
          if (this.light && this.light.hasTransition()) return true;
          if (this.sky && this.sky.hasTransition()) return true;
          for (const t2 in this.sourceCaches) if (this.sourceCaches[t2].hasTransition()) return true;
          for (const t2 in this._layers) if (this._layers[t2].hasTransition()) return true;
          return false;
        }
        _checkLoaded() {
          if (!this._loaded) throw new Error("Style is not done loading.");
        }
        update(t2) {
          if (!this._loaded) return;
          const i2 = this._changed;
          if (i2) {
            const e2 = Object.keys(this._updatedLayers), i3 = Object.keys(this._removedLayers);
            (e2.length || i3.length) && this._updateWorkerLayers(e2, i3);
            for (const t3 in this._updatedSources) {
              const e3 = this._updatedSources[t3];
              if ("reload" === e3) this._reloadSource(t3);
              else {
                if ("clear" !== e3) throw new Error(`Invalid action ${e3}`);
                this._clearSource(t3);
              }
            }
            this._updateTilesForChangedImages(), this._updateTilesForChangedGlyphs();
            for (const e3 in this._updatedPaintProps) this._layers[e3].updateTransitions(t2);
            this.light.updateTransitions(t2), this.sky.updateTransitions(t2), this._resetUpdates();
          }
          const a2 = {};
          for (const t3 in this.sourceCaches) {
            const e2 = this.sourceCaches[t3];
            a2[t3] = e2.used, e2.used = false;
          }
          for (const e2 of this._order) {
            const i3 = this._layers[e2];
            i3.recalculate(t2, this._availableImages), !i3.isHidden(t2.zoom) && i3.source && (this.sourceCaches[i3.source].used = true);
          }
          for (const t3 in a2) {
            const i3 = this.sourceCaches[t3];
            !!a2[t3] != !!i3.used && i3.fire(new e.k("data", { sourceDataType: "visibility", dataType: "source", sourceId: t3 }));
          }
          this.light.recalculate(t2), this.sky.recalculate(t2), this.z = t2.zoom, i2 && this.fire(new e.k("data", { dataType: "style" }));
        }
        _updateTilesForChangedImages() {
          const t2 = Object.keys(this._changedImages);
          if (t2.length) {
            for (const e2 in this.sourceCaches) this.sourceCaches[e2].reloadTilesForDependencies(["icons", "patterns"], t2);
            this._changedImages = {};
          }
        }
        _updateTilesForChangedGlyphs() {
          if (this._glyphsDidChange) {
            for (const t2 in this.sourceCaches) this.sourceCaches[t2].reloadTilesForDependencies(["glyphs"], [""]);
            this._glyphsDidChange = false;
          }
        }
        _updateWorkerLayers(t2, e2) {
          this.dispatcher.broadcast("UL", { layers: this._serializeByIds(t2, false), removedIds: e2 });
        }
        _resetUpdates() {
          this._changed = false, this._updatedLayers = {}, this._removedLayers = {}, this._updatedSources = {}, this._updatedPaintProps = {}, this._changedImages = {}, this._glyphsDidChange = false;
        }
        setState(t2, i2 = {}) {
          var a2;
          this._checkLoaded();
          const s2 = this.serialize();
          if (t2 = i2.transformStyle ? i2.transformStyle(s2, t2) : t2, (null === (a2 = i2.validate) || void 0 === a2 || a2) && ce2(this, e.u(t2))) return false;
          (t2 = e.aB(t2)).layers = e.az(t2.layers);
          const o2 = e.aC(s2, t2), r2 = this._getOperationsToPerform(o2);
          if (r2.unimplemented.length > 0) throw new Error(`Unimplemented: ${r2.unimplemented.join(", ")}.`);
          if (0 === r2.operations.length) return false;
          for (const t3 of r2.operations) t3();
          return this.stylesheet = t2, this._serializedLayers = null, true;
        }
        _getOperationsToPerform(t2) {
          const e2 = [], i2 = [];
          for (const a2 of t2) switch (a2.command) {
            case "setCenter":
            case "setZoom":
            case "setBearing":
            case "setPitch":
              continue;
            case "addLayer":
              e2.push(() => this.addLayer.apply(this, a2.args));
              break;
            case "removeLayer":
              e2.push(() => this.removeLayer.apply(this, a2.args));
              break;
            case "setPaintProperty":
              e2.push(() => this.setPaintProperty.apply(this, a2.args));
              break;
            case "setLayoutProperty":
              e2.push(() => this.setLayoutProperty.apply(this, a2.args));
              break;
            case "setFilter":
              e2.push(() => this.setFilter.apply(this, a2.args));
              break;
            case "addSource":
              e2.push(() => this.addSource.apply(this, a2.args));
              break;
            case "removeSource":
              e2.push(() => this.removeSource.apply(this, a2.args));
              break;
            case "setLayerZoomRange":
              e2.push(() => this.setLayerZoomRange.apply(this, a2.args));
              break;
            case "setLight":
              e2.push(() => this.setLight.apply(this, a2.args));
              break;
            case "setGeoJSONSourceData":
              e2.push(() => this.setGeoJSONSourceData.apply(this, a2.args));
              break;
            case "setGlyphs":
              e2.push(() => this.setGlyphs.apply(this, a2.args));
              break;
            case "setSprite":
              e2.push(() => this.setSprite.apply(this, a2.args));
              break;
            case "setSky":
              e2.push(() => this.setSky.apply(this, a2.args));
              break;
            case "setTerrain":
              e2.push(() => this.map.setTerrain.apply(this, a2.args));
              break;
            case "setTransition":
              e2.push(() => {
              });
              break;
            default:
              i2.push(a2.command);
          }
          return { operations: e2, unimplemented: i2 };
        }
        addImage(t2, i2) {
          if (this.getImage(t2)) return this.fire(new e.j(new Error(`An image named "${t2}" already exists.`)));
          this.imageManager.addImage(t2, i2), this._afterImageUpdated(t2);
        }
        updateImage(t2, e2) {
          this.imageManager.updateImage(t2, e2);
        }
        getImage(t2) {
          return this.imageManager.getImage(t2);
        }
        removeImage(t2) {
          if (!this.getImage(t2)) return this.fire(new e.j(new Error(`An image named "${t2}" does not exist.`)));
          this.imageManager.removeImage(t2), this._afterImageUpdated(t2);
        }
        _afterImageUpdated(t2) {
          this._availableImages = this.imageManager.listImages(), this._changedImages[t2] = true, this._changed = true, this.dispatcher.broadcast("SI", this._availableImages), this.fire(new e.k("data", { dataType: "style" }));
        }
        listImages() {
          return this._checkLoaded(), this.imageManager.listImages();
        }
        addSource(t2, i2, a2 = {}) {
          if (this._checkLoaded(), void 0 !== this.sourceCaches[t2]) throw new Error(`Source "${t2}" already exists.`);
          if (!i2.type) throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i2).join(", ")}.`);
          if (["vector", "raster", "geojson", "video", "image"].indexOf(i2.type) >= 0 && this._validate(e.u.source, `sources.${t2}`, i2, null, a2)) return;
          this.map && this.map._collectResourceTiming && (i2.collectResourceTiming = true);
          const s2 = this.sourceCaches[t2] = new ut(t2, i2, this.dispatcher);
          s2.style = this, s2.setEventedParent(this, () => ({ isSourceLoaded: s2.loaded(), source: s2.serialize(), sourceId: t2 })), s2.onAdd(this.map), this._changed = true;
        }
        removeSource(t2) {
          if (this._checkLoaded(), void 0 === this.sourceCaches[t2]) throw new Error("There is no source with this ID");
          for (const i3 in this._layers) if (this._layers[i3].source === t2) return this.fire(new e.j(new Error(`Source "${t2}" cannot be removed while layer "${i3}" is using it.`)));
          const i2 = this.sourceCaches[t2];
          delete this.sourceCaches[t2], delete this._updatedSources[t2], i2.fire(new e.k("data", { sourceDataType: "metadata", dataType: "source", sourceId: t2 })), i2.setEventedParent(null), i2.onRemove(this.map), this._changed = true;
        }
        setGeoJSONSourceData(t2, e2) {
          if (this._checkLoaded(), void 0 === this.sourceCaches[t2]) throw new Error(`There is no source with this ID=${t2}`);
          const i2 = this.sourceCaches[t2].getSource();
          if ("geojson" !== i2.type) throw new Error(`geojsonSource.type is ${i2.type}, which is !== 'geojson`);
          i2.setData(e2), this._changed = true;
        }
        getSource(t2) {
          return this.sourceCaches[t2] && this.sourceCaches[t2].getSource();
        }
        addLayer(t2, i2, a2 = {}) {
          this._checkLoaded();
          const s2 = t2.id;
          if (this.getLayer(s2)) return void this.fire(new e.j(new Error(`Layer "${s2}" already exists on this map.`)));
          let o2;
          if ("custom" === t2.type) {
            if (ce2(this, e.aD(t2))) return;
            o2 = e.aA(t2);
          } else {
            if ("source" in t2 && "object" == typeof t2.source && (this.addSource(s2, t2.source), t2 = e.aB(t2), t2 = e.e(t2, { source: s2 })), this._validate(e.u.layer, `layers.${s2}`, t2, { arrayIndex: -1 }, a2)) return;
            o2 = e.aA(t2), this._validateLayer(o2), o2.setEventedParent(this, { layer: { id: s2 } });
          }
          const r2 = i2 ? this._order.indexOf(i2) : this._order.length;
          if (i2 && -1 === r2) this.fire(new e.j(new Error(`Cannot add layer "${s2}" before non-existing layer "${i2}".`)));
          else {
            if (this._order.splice(r2, 0, s2), this._layerOrderChanged = true, this._layers[s2] = o2, this._removedLayers[s2] && o2.source && "custom" !== o2.type) {
              const t3 = this._removedLayers[s2];
              delete this._removedLayers[s2], t3.type !== o2.type ? this._updatedSources[o2.source] = "clear" : (this._updatedSources[o2.source] = "reload", this.sourceCaches[o2.source].pause());
            }
            this._updateLayer(o2), o2.onAdd && o2.onAdd(this.map);
          }
        }
        moveLayer(t2, i2) {
          if (this._checkLoaded(), this._changed = true, !this._layers[t2]) return void this.fire(new e.j(new Error(`The layer '${t2}' does not exist in the map's style and cannot be moved.`)));
          if (t2 === i2) return;
          const a2 = this._order.indexOf(t2);
          this._order.splice(a2, 1);
          const s2 = i2 ? this._order.indexOf(i2) : this._order.length;
          i2 && -1 === s2 ? this.fire(new e.j(new Error(`Cannot move layer "${t2}" before non-existing layer "${i2}".`))) : (this._order.splice(s2, 0, t2), this._layerOrderChanged = true);
        }
        removeLayer(t2) {
          this._checkLoaded();
          const i2 = this._layers[t2];
          if (!i2) return void this.fire(new e.j(new Error(`Cannot remove non-existing layer "${t2}".`)));
          i2.setEventedParent(null);
          const a2 = this._order.indexOf(t2);
          this._order.splice(a2, 1), this._layerOrderChanged = true, this._changed = true, this._removedLayers[t2] = i2, delete this._layers[t2], this._serializedLayers && delete this._serializedLayers[t2], delete this._updatedLayers[t2], delete this._updatedPaintProps[t2], i2.onRemove && i2.onRemove(this.map);
        }
        getLayer(t2) {
          return this._layers[t2];
        }
        getLayersOrder() {
          return [...this._order];
        }
        hasLayer(t2) {
          return t2 in this._layers;
        }
        setLayerZoomRange(t2, i2, a2) {
          this._checkLoaded();
          const s2 = this.getLayer(t2);
          s2 ? s2.minzoom === i2 && s2.maxzoom === a2 || (null != i2 && (s2.minzoom = i2), null != a2 && (s2.maxzoom = a2), this._updateLayer(s2)) : this.fire(new e.j(new Error(`Cannot set the zoom range of non-existing layer "${t2}".`)));
        }
        setFilter(t2, i2, a2 = {}) {
          this._checkLoaded();
          const s2 = this.getLayer(t2);
          if (s2) {
            if (!e.aE(s2.filter, i2)) return null == i2 ? (s2.filter = void 0, void this._updateLayer(s2)) : void (this._validate(e.u.filter, `layers.${s2.id}.filter`, i2, null, a2) || (s2.filter = e.aB(i2), this._updateLayer(s2)));
          } else this.fire(new e.j(new Error(`Cannot filter non-existing layer "${t2}".`)));
        }
        getFilter(t2) {
          return e.aB(this.getLayer(t2).filter);
        }
        setLayoutProperty(t2, i2, a2, s2 = {}) {
          this._checkLoaded();
          const o2 = this.getLayer(t2);
          o2 ? e.aE(o2.getLayoutProperty(i2), a2) || (o2.setLayoutProperty(i2, a2, s2), this._updateLayer(o2)) : this.fire(new e.j(new Error(`Cannot style non-existing layer "${t2}".`)));
        }
        getLayoutProperty(t2, i2) {
          const a2 = this.getLayer(t2);
          if (a2) return a2.getLayoutProperty(i2);
          this.fire(new e.j(new Error(`Cannot get style of non-existing layer "${t2}".`)));
        }
        setPaintProperty(t2, i2, a2, s2 = {}) {
          this._checkLoaded();
          const o2 = this.getLayer(t2);
          o2 ? e.aE(o2.getPaintProperty(i2), a2) || (o2.setPaintProperty(i2, a2, s2) && this._updateLayer(o2), this._changed = true, this._updatedPaintProps[t2] = true, this._serializedLayers = null) : this.fire(new e.j(new Error(`Cannot style non-existing layer "${t2}".`)));
        }
        getPaintProperty(t2, e2) {
          return this.getLayer(t2).getPaintProperty(e2);
        }
        setFeatureState(t2, i2) {
          this._checkLoaded();
          const a2 = t2.source, s2 = t2.sourceLayer, o2 = this.sourceCaches[a2];
          if (void 0 === o2) return void this.fire(new e.j(new Error(`The source '${a2}' does not exist in the map's style.`)));
          const r2 = o2.getSource().type;
          "geojson" === r2 && s2 ? this.fire(new e.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))) : "vector" !== r2 || s2 ? (void 0 === t2.id && this.fire(new e.j(new Error("The feature id parameter must be provided."))), o2.setFeatureState(s2, t2.id, i2)) : this.fire(new e.j(new Error("The sourceLayer parameter must be provided for vector source types.")));
        }
        removeFeatureState(t2, i2) {
          this._checkLoaded();
          const a2 = t2.source, s2 = this.sourceCaches[a2];
          if (void 0 === s2) return void this.fire(new e.j(new Error(`The source '${a2}' does not exist in the map's style.`)));
          const o2 = s2.getSource().type, r2 = "vector" === o2 ? t2.sourceLayer : void 0;
          "vector" !== o2 || r2 ? i2 && "string" != typeof t2.id && "number" != typeof t2.id ? this.fire(new e.j(new Error("A feature id is required to remove its specific state property."))) : s2.removeFeatureState(r2, t2.id, i2) : this.fire(new e.j(new Error("The sourceLayer parameter must be provided for vector source types.")));
        }
        getFeatureState(t2) {
          this._checkLoaded();
          const i2 = t2.source, a2 = t2.sourceLayer, s2 = this.sourceCaches[i2];
          if (void 0 !== s2) return "vector" !== s2.getSource().type || a2 ? (void 0 === t2.id && this.fire(new e.j(new Error("The feature id parameter must be provided."))), s2.getFeatureState(a2, t2.id)) : void this.fire(new e.j(new Error("The sourceLayer parameter must be provided for vector source types.")));
          this.fire(new e.j(new Error(`The source '${i2}' does not exist in the map's style.`)));
        }
        getTransition() {
          return e.e({ duration: 300, delay: 0 }, this.stylesheet && this.stylesheet.transition);
        }
        serialize() {
          if (!this._loaded) return;
          const t2 = e.aF(this.sourceCaches, (t3) => t3.serialize()), i2 = this._serializeByIds(this._order, true), a2 = this.map.getTerrain() || void 0, s2 = this.stylesheet;
          return e.aG({ version: s2.version, name: s2.name, metadata: s2.metadata, light: s2.light, sky: s2.sky, center: s2.center, zoom: s2.zoom, bearing: s2.bearing, pitch: s2.pitch, sprite: s2.sprite, glyphs: s2.glyphs, transition: s2.transition, sources: t2, layers: i2, terrain: a2 }, (t3) => void 0 !== t3);
        }
        _updateLayer(t2) {
          this._updatedLayers[t2.id] = true, t2.source && !this._updatedSources[t2.source] && "raster" !== this.sourceCaches[t2.source].getSource().type && (this._updatedSources[t2.source] = "reload", this.sourceCaches[t2.source].pause()), this._serializedLayers = null, this._changed = true;
        }
        _flattenAndSortRenderedFeatures(t2) {
          const e2 = (t3) => "fill-extrusion" === this._layers[t3].type, i2 = {}, a2 = [];
          for (let s3 = this._order.length - 1; s3 >= 0; s3--) {
            const o2 = this._order[s3];
            if (e2(o2)) {
              i2[o2] = s3;
              for (const e3 of t2) {
                const t3 = e3[o2];
                if (t3) for (const e4 of t3) a2.push(e4);
              }
            }
          }
          a2.sort((t3, e3) => e3.intersectionZ - t3.intersectionZ);
          const s2 = [];
          for (let o2 = this._order.length - 1; o2 >= 0; o2--) {
            const r2 = this._order[o2];
            if (e2(r2)) for (let t3 = a2.length - 1; t3 >= 0; t3--) {
              const e3 = a2[t3].feature;
              if (i2[e3.layer.id] < o2) break;
              s2.push(e3), a2.pop();
            }
            else for (const e3 of t2) {
              const t3 = e3[r2];
              if (t3) for (const e4 of t3) s2.push(e4.feature);
            }
          }
          return s2;
        }
        queryRenderedFeatures(t2, i2, a2) {
          i2 && i2.filter && this._validate(e.u.filter, "queryRenderedFeatures.filter", i2.filter, null, i2);
          const s2 = {};
          if (i2 && i2.layers) {
            if (!Array.isArray(i2.layers)) return this.fire(new e.j(new Error("parameters.layers must be an Array."))), [];
            for (const t3 of i2.layers) {
              const i3 = this._layers[t3];
              if (!i3) return this.fire(new e.j(new Error(`The layer '${t3}' does not exist in the map's style and cannot be queried for features.`))), [];
              s2[i3.source] = true;
            }
          }
          const o2 = [];
          i2.availableImages = this._availableImages;
          const r2 = this._serializedAllLayers();
          for (const e2 in this.sourceCaches) i2.layers && !s2[e2] || o2.push(q2(this.sourceCaches[e2], this._layers, r2, t2, i2, a2));
          return this.placement && o2.push(function(t3, e2, i3, a3, s3, o3, r3) {
            const n2 = {}, l2 = o3.queryRenderedSymbols(a3), h2 = [];
            for (const t4 of Object.keys(l2).map(Number)) h2.push(r3[t4]);
            h2.sort(V2);
            for (const i4 of h2) {
              const a4 = i4.featureIndex.lookupSymbolFeatures(l2[i4.bucketInstanceId], e2, i4.bucketIndex, i4.sourceLayerIndex, s3.filter, s3.layers, s3.availableImages, t3);
              for (const t4 in a4) {
                const e3 = n2[t4] = n2[t4] || [], s4 = a4[t4];
                s4.sort((t5, e4) => {
                  const a5 = i4.featureSortOrder;
                  if (a5) {
                    const i5 = a5.indexOf(t5.featureIndex);
                    return a5.indexOf(e4.featureIndex) - i5;
                  }
                  return e4.featureIndex - t5.featureIndex;
                });
                for (const t5 of s4) e3.push(t5);
              }
            }
            for (const e3 in n2) n2[e3].forEach((a4) => {
              const s4 = a4.feature, o4 = i3[t3[e3].source].getFeatureState(s4.layer["source-layer"], s4.id);
              s4.source = s4.layer.source, s4.layer["source-layer"] && (s4.sourceLayer = s4.layer["source-layer"]), s4.state = o4;
            });
            return n2;
          }(this._layers, r2, this.sourceCaches, t2, i2, this.placement.collisionIndex, this.placement.retainedQueryData)), this._flattenAndSortRenderedFeatures(o2);
        }
        querySourceFeatures(t2, i2) {
          i2 && i2.filter && this._validate(e.u.filter, "querySourceFeatures.filter", i2.filter, null, i2);
          const a2 = this.sourceCaches[t2];
          return a2 ? function(t3, e2) {
            const i3 = t3.getRenderableIds().map((e3) => t3.getTileByID(e3)), a3 = [], s2 = {};
            for (let t4 = 0; t4 < i3.length; t4++) {
              const o2 = i3[t4], r2 = o2.tileID.canonical.key;
              s2[r2] || (s2[r2] = true, o2.querySourceFeatures(a3, e2));
            }
            return a3;
          }(a2, i2) : [];
        }
        getLight() {
          return this.light.getLight();
        }
        setLight(t2, i2 = {}) {
          this._checkLoaded();
          const a2 = this.light.getLight();
          let s2 = false;
          for (const i3 in t2) if (!e.aE(t2[i3], a2[i3])) {
            s2 = true;
            break;
          }
          if (!s2) return;
          const r2 = { now: o.now(), transition: e.e({ duration: 300, delay: 0 }, this.stylesheet.transition) };
          this.light.setLight(t2, i2), this.light.updateTransitions(r2);
        }
        getSky() {
          var t2;
          return null === (t2 = this.stylesheet) || void 0 === t2 ? void 0 : t2.sky;
        }
        setSky(t2, i2 = {}) {
          const a2 = this.getSky();
          let s2 = false;
          if (!t2 && !a2) return;
          if (t2 && !a2) s2 = true;
          else if (!t2 && a2) s2 = true;
          else for (const i3 in t2) if (!e.aE(t2[i3], a2[i3])) {
            s2 = true;
            break;
          }
          if (!s2) return;
          const r2 = { now: o.now(), transition: e.e({ duration: 300, delay: 0 }, this.stylesheet.transition) };
          this.stylesheet.sky = t2, this.sky.setSky(t2, i2), this.sky.updateTransitions(r2);
        }
        _validate(t2, i2, a2, s2, o2 = {}) {
          return (!o2 || false !== o2.validate) && ce2(this, t2.call(e.u, e.e({ key: i2, style: this.serialize(), value: a2, styleSpec: e.v }, s2)));
        }
        _remove(t2 = true) {
          this._frameRequest && (this._frameRequest.abort(), this._frameRequest = null), this._loadStyleRequest && (this._loadStyleRequest.abort(), this._loadStyleRequest = null), this._spriteRequest && (this._spriteRequest.abort(), this._spriteRequest = null), nt2().off(st2, this._rtlPluginLoaded);
          for (const t3 in this._layers) this._layers[t3].setEventedParent(null);
          for (const t3 in this.sourceCaches) {
            const e2 = this.sourceCaches[t3];
            e2.setEventedParent(null), e2.onRemove(this.map);
          }
          this.imageManager.setEventedParent(null), this.setEventedParent(null), t2 && this.dispatcher.broadcast("RM", void 0), this.dispatcher.remove(t2);
        }
        _clearSource(t2) {
          this.sourceCaches[t2].clearTiles();
        }
        _reloadSource(t2) {
          this.sourceCaches[t2].resume(), this.sourceCaches[t2].reload();
        }
        _updateSources(t2) {
          for (const e2 in this.sourceCaches) this.sourceCaches[e2].update(t2, this.map.terrain);
        }
        _generateCollisionBoxes() {
          for (const t2 in this.sourceCaches) this._reloadSource(t2);
        }
        _updatePlacement(t2, e2, i2, a2, s2 = false) {
          let r2 = false, n2 = false;
          const l2 = {};
          for (const e3 of this._order) {
            const i3 = this._layers[e3];
            if ("symbol" !== i3.type) continue;
            if (!l2[i3.source]) {
              const t3 = this.sourceCaches[i3.source];
              l2[i3.source] = t3.getRenderableIds(true).map((e4) => t3.getTileByID(e4)).sort((t4, e4) => e4.tileID.overscaledZ - t4.tileID.overscaledZ || (t4.tileID.isLessThan(e4.tileID) ? -1 : 1));
            }
            const a3 = this.crossTileSymbolIndex.addLayer(i3, l2[i3.source], t2.center.lng);
            r2 = r2 || a3;
          }
          if (this.crossTileSymbolIndex.pruneUnusedLayers(this._order), ((s2 = s2 || this._layerOrderChanged || 0 === i2) || !this.pauseablePlacement || this.pauseablePlacement.isDone() && !this.placement.stillRecent(o.now(), t2.zoom)) && (this.pauseablePlacement = new se(t2, this.map.terrain, this._order, s2, e2, i2, a2, this.placement), this._layerOrderChanged = false), this.pauseablePlacement.isDone() ? this.placement.setStale() : (this.pauseablePlacement.continuePlacement(this._order, this._layers, l2), this.pauseablePlacement.isDone() && (this.placement = this.pauseablePlacement.commit(o.now()), n2 = true), r2 && this.pauseablePlacement.placement.setStale()), n2 || r2) for (const t3 of this._order) {
            const e3 = this._layers[t3];
            "symbol" === e3.type && this.placement.updateLayerOpacities(e3, l2[e3.source]);
          }
          return !this.pauseablePlacement.isDone() || this.placement.hasTransitions(o.now());
        }
        _releaseSymbolFadeTiles() {
          for (const t2 in this.sourceCaches) this.sourceCaches[t2].releaseSymbolFadeTiles();
        }
        getImages(t2, i2) {
          return e._(this, void 0, void 0, function* () {
            const t3 = yield this.imageManager.getImages(i2.icons);
            this._updateTilesForChangedImages();
            const e2 = this.sourceCaches[i2.source];
            return e2 && e2.setDependencies(i2.tileID.key, i2.type, i2.icons), t3;
          });
        }
        getGlyphs(t2, i2) {
          return e._(this, void 0, void 0, function* () {
            const t3 = yield this.glyphManager.getGlyphs(i2.stacks), e2 = this.sourceCaches[i2.source];
            return e2 && e2.setDependencies(i2.tileID.key, i2.type, [""]), t3;
          });
        }
        getGlyphsUrl() {
          return this.stylesheet.glyphs || null;
        }
        setGlyphs(t2, i2 = {}) {
          this._checkLoaded(), t2 && this._validate(e.u.glyphs, "glyphs", t2, null, i2) || (this._glyphsDidChange = true, this.stylesheet.glyphs = t2, this.glyphManager.entries = {}, this.glyphManager.setURL(t2));
        }
        addSprite(t2, i2, a2 = {}, s2) {
          this._checkLoaded();
          const o2 = [{ id: t2, url: i2 }], r2 = [...x(this.stylesheet.sprite), ...o2];
          this._validate(e.u.sprite, "sprite", r2, null, a2) || (this.stylesheet.sprite = r2, this._loadSprite(o2, true, s2));
        }
        removeSprite(t2) {
          this._checkLoaded();
          const i2 = x(this.stylesheet.sprite);
          if (i2.find((e2) => e2.id === t2)) {
            if (this._spritesImagesIds[t2]) for (const e2 of this._spritesImagesIds[t2]) this.imageManager.removeImage(e2), this._changedImages[e2] = true;
            i2.splice(i2.findIndex((e2) => e2.id === t2), 1), this.stylesheet.sprite = i2.length > 0 ? i2 : void 0, delete this._spritesImagesIds[t2], this._availableImages = this.imageManager.listImages(), this._changed = true, this.dispatcher.broadcast("SI", this._availableImages), this.fire(new e.k("data", { dataType: "style" }));
          } else this.fire(new e.j(new Error(`Sprite "${t2}" doesn't exists on this map.`)));
        }
        getSprite() {
          return x(this.stylesheet.sprite);
        }
        setSprite(t2, i2 = {}, a2) {
          this._checkLoaded(), t2 && this._validate(e.u.sprite, "sprite", t2, null, i2) || (this.stylesheet.sprite = t2, t2 ? this._loadSprite(t2, true, a2) : (this._unloadSprite(), a2 && a2(null)));
        }
      }
      var _e = e.Y([{ name: "a_pos", type: "Int16", components: 2 }]);
      const pe2 = { prelude: me2("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n", "#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"), background: me2("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"), backgroundPattern: me2("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"), circle: me2("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"), clippingMask: me2("void main() {gl_FragColor=vec4(1.0);}", "attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"), heatmap: me2("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"), heatmapTexture: me2("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"), collisionBox: me2("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}", "attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"), collisionCircle: me2("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}", "attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"), debug: me2("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}", "attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"), fill: me2("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"), fillOutline: me2("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"), fillOutlinePattern: me2("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"), fillPattern: me2("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"), fillExtrusion: me2("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"), fillExtrusionPattern: me2("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"), hillshadePrepare: me2("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"), hillshade: me2("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"), line: me2("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"), lineGradient: me2("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"), linePattern: me2("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"), lineSDF: me2("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"), raster: me2("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"), symbolIcon: me2("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"), symbolSDF: me2("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"), symbolTextAndIcon: me2("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}", "attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"), terrain: me2("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}", "attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"), terrainDepth: me2("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}", "attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"), terrainCoords: me2("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}", "attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"), sky: me2("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}", "attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}") };
      function me2(t2, e2) {
        const i2 = /#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g, a2 = e2.match(/attribute ([\w]+) ([\w]+)/g), s2 = t2.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g), o2 = e2.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g), r2 = o2 ? o2.concat(s2) : s2, n2 = {};
        return { fragmentSource: t2 = t2.replace(i2, (t3, e3, i3, a3, s3) => (n2[s3] = true, "define" === e3 ? `
#ifndef HAS_UNIFORM_u_${s3}
varying ${i3} ${a3} ${s3};
#else
uniform ${i3} ${a3} u_${s3};
#endif
` : `
#ifdef HAS_UNIFORM_u_${s3}
    ${i3} ${a3} ${s3} = u_${s3};
#endif
`)), vertexSource: e2 = e2.replace(i2, (t3, e3, i3, a3, s3) => {
          const o3 = "float" === a3 ? "vec2" : "vec4", r3 = s3.match(/color/) ? "color" : o3;
          return n2[s3] ? "define" === e3 ? `
#ifndef HAS_UNIFORM_u_${s3}
uniform lowp float u_${s3}_t;
attribute ${i3} ${o3} a_${s3};
varying ${i3} ${a3} ${s3};
#else
uniform ${i3} ${a3} u_${s3};
#endif
` : "vec4" === r3 ? `
#ifndef HAS_UNIFORM_u_${s3}
    ${s3} = a_${s3};
#else
    ${i3} ${a3} ${s3} = u_${s3};
#endif
` : `
#ifndef HAS_UNIFORM_u_${s3}
    ${s3} = unpack_mix_${r3}(a_${s3}, u_${s3}_t);
#else
    ${i3} ${a3} ${s3} = u_${s3};
#endif
` : "define" === e3 ? `
#ifndef HAS_UNIFORM_u_${s3}
uniform lowp float u_${s3}_t;
attribute ${i3} ${o3} a_${s3};
#else
uniform ${i3} ${a3} u_${s3};
#endif
` : "vec4" === r3 ? `
#ifndef HAS_UNIFORM_u_${s3}
    ${i3} ${a3} ${s3} = a_${s3};
#else
    ${i3} ${a3} ${s3} = u_${s3};
#endif
` : `
#ifndef HAS_UNIFORM_u_${s3}
    ${i3} ${a3} ${s3} = unpack_mix_${r3}(a_${s3}, u_${s3}_t);
#else
    ${i3} ${a3} ${s3} = u_${s3};
#endif
`;
        }), staticAttributes: a2, staticUniforms: r2 };
      }
      class fe2 {
        constructor() {
          this.boundProgram = null, this.boundLayoutVertexBuffer = null, this.boundPaintVertexBuffers = [], this.boundIndexBuffer = null, this.boundVertexOffset = null, this.boundDynamicVertexBuffer = null, this.vao = null;
        }
        bind(t2, e2, i2, a2, s2, o2, r2, n2, l2) {
          this.context = t2;
          let h2 = this.boundPaintVertexBuffers.length !== a2.length;
          for (let t3 = 0; !h2 && t3 < a2.length; t3++) this.boundPaintVertexBuffers[t3] !== a2[t3] && (h2 = true);
          !this.vao || this.boundProgram !== e2 || this.boundLayoutVertexBuffer !== i2 || h2 || this.boundIndexBuffer !== s2 || this.boundVertexOffset !== o2 || this.boundDynamicVertexBuffer !== r2 || this.boundDynamicVertexBuffer2 !== n2 || this.boundDynamicVertexBuffer3 !== l2 ? this.freshBind(e2, i2, a2, s2, o2, r2, n2, l2) : (t2.bindVertexArray.set(this.vao), r2 && r2.bind(), s2 && s2.dynamicDraw && s2.bind(), n2 && n2.bind(), l2 && l2.bind());
        }
        freshBind(t2, e2, i2, a2, s2, o2, r2, n2) {
          const l2 = t2.numAttributes, h2 = this.context, c2 = h2.gl;
          this.vao && this.destroy(), this.vao = h2.createVertexArray(), h2.bindVertexArray.set(this.vao), this.boundProgram = t2, this.boundLayoutVertexBuffer = e2, this.boundPaintVertexBuffers = i2, this.boundIndexBuffer = a2, this.boundVertexOffset = s2, this.boundDynamicVertexBuffer = o2, this.boundDynamicVertexBuffer2 = r2, this.boundDynamicVertexBuffer3 = n2, e2.enableAttributes(c2, t2);
          for (const e3 of i2) e3.enableAttributes(c2, t2);
          o2 && o2.enableAttributes(c2, t2), r2 && r2.enableAttributes(c2, t2), n2 && n2.enableAttributes(c2, t2), e2.bind(), e2.setVertexAttribPointers(c2, t2, s2);
          for (const e3 of i2) e3.bind(), e3.setVertexAttribPointers(c2, t2, s2);
          o2 && (o2.bind(), o2.setVertexAttribPointers(c2, t2, s2)), a2 && a2.bind(), r2 && (r2.bind(), r2.setVertexAttribPointers(c2, t2, s2)), n2 && (n2.bind(), n2.setVertexAttribPointers(c2, t2, s2)), h2.currentNumAttributes = l2;
        }
        destroy() {
          this.vao && (this.context.deleteVertexArray(this.vao), this.vao = null);
        }
      }
      const ge2 = (t2, i2, a2, s2, o2) => ({ u_matrix: t2, u_texture: 0, u_ele_delta: i2, u_fog_matrix: a2, u_fog_color: s2 ? s2.properties.get("fog-color") : e.aM.white, u_fog_ground_blend: s2 ? s2.properties.get("fog-ground-blend") : 1, u_fog_ground_blend_opacity: s2 ? s2.calculateFogBlendOpacity(o2) : 0, u_horizon_color: s2 ? s2.properties.get("horizon-color") : e.aM.white, u_horizon_fog_blend: s2 ? s2.properties.get("horizon-fog-blend") : 1 });
      function ve2(t2) {
        const e2 = [];
        for (let i2 = 0; i2 < t2.length; i2++) {
          if (null === t2[i2]) continue;
          const a2 = t2[i2].split(" ");
          e2.push(a2.pop());
        }
        return e2;
      }
      class xe2 {
        constructor(t2, i2, a2, s2, o2, r2) {
          const n2 = t2.gl;
          this.program = n2.createProgram();
          const l2 = ve2(i2.staticAttributes), h2 = a2 ? a2.getBinderAttributes() : [], c2 = l2.concat(h2), u3 = pe2.prelude.staticUniforms ? ve2(pe2.prelude.staticUniforms) : [], d2 = i2.staticUniforms ? ve2(i2.staticUniforms) : [], _2 = a2 ? a2.getBinderUniforms() : [], p3 = u3.concat(d2).concat(_2), m2 = [];
          for (const t3 of p3) m2.indexOf(t3) < 0 && m2.push(t3);
          const f2 = a2 ? a2.defines() : [];
          o2 && f2.push("#define OVERDRAW_INSPECTOR;"), r2 && f2.push("#define TERRAIN3D;");
          const g2 = f2.concat(pe2.prelude.fragmentSource, i2.fragmentSource).join("\n"), v2 = f2.concat(pe2.prelude.vertexSource, i2.vertexSource).join("\n"), x2 = n2.createShader(n2.FRAGMENT_SHADER);
          if (n2.isContextLost()) return void (this.failedToCreate = true);
          if (n2.shaderSource(x2, g2), n2.compileShader(x2), !n2.getShaderParameter(x2, n2.COMPILE_STATUS)) throw new Error(`Could not compile fragment shader: ${n2.getShaderInfoLog(x2)}`);
          n2.attachShader(this.program, x2);
          const y2 = n2.createShader(n2.VERTEX_SHADER);
          if (n2.isContextLost()) return void (this.failedToCreate = true);
          if (n2.shaderSource(y2, v2), n2.compileShader(y2), !n2.getShaderParameter(y2, n2.COMPILE_STATUS)) throw new Error(`Could not compile vertex shader: ${n2.getShaderInfoLog(y2)}`);
          n2.attachShader(this.program, y2), this.attributes = {};
          const b2 = {};
          this.numAttributes = c2.length;
          for (let t3 = 0; t3 < this.numAttributes; t3++) c2[t3] && (n2.bindAttribLocation(this.program, t3, c2[t3]), this.attributes[c2[t3]] = t3);
          if (n2.linkProgram(this.program), !n2.getProgramParameter(this.program, n2.LINK_STATUS)) throw new Error(`Program failed to link: ${n2.getProgramInfoLog(this.program)}`);
          n2.deleteShader(y2), n2.deleteShader(x2);
          for (let t3 = 0; t3 < m2.length; t3++) {
            const e2 = m2[t3];
            if (e2 && !b2[e2]) {
              const t4 = n2.getUniformLocation(this.program, e2);
              t4 && (b2[e2] = t4);
            }
          }
          this.fixedUniforms = s2(t2, b2), this.terrainUniforms = ((t3, i3) => ({ u_depth: new e.aH(t3, i3.u_depth), u_terrain: new e.aH(t3, i3.u_terrain), u_terrain_dim: new e.aI(t3, i3.u_terrain_dim), u_terrain_matrix: new e.aJ(t3, i3.u_terrain_matrix), u_terrain_unpack: new e.aK(t3, i3.u_terrain_unpack), u_terrain_exaggeration: new e.aI(t3, i3.u_terrain_exaggeration) }))(t2, b2), this.binderUniforms = a2 ? a2.getUniforms(t2, b2) : [];
        }
        draw(t2, e2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3, d2, _2, p3, m2, f2, g2) {
          const v2 = t2.gl;
          if (this.failedToCreate) return;
          if (t2.program.set(this.program), t2.setDepthMode(i2), t2.setStencilMode(a2), t2.setColorMode(s2), t2.setCullFace(o2), n2) {
            t2.activeTexture.set(v2.TEXTURE2), v2.bindTexture(v2.TEXTURE_2D, n2.depthTexture), t2.activeTexture.set(v2.TEXTURE3), v2.bindTexture(v2.TEXTURE_2D, n2.texture);
            for (const t3 in this.terrainUniforms) this.terrainUniforms[t3].set(n2[t3]);
          }
          for (const t3 in this.fixedUniforms) this.fixedUniforms[t3].set(r2[t3]);
          p3 && p3.setUniforms(t2, this.binderUniforms, d2, { zoom: _2 });
          let x2 = 0;
          switch (e2) {
            case v2.LINES:
              x2 = 2;
              break;
            case v2.TRIANGLES:
              x2 = 3;
              break;
            case v2.LINE_STRIP:
              x2 = 1;
          }
          for (const i3 of u3.get()) {
            const a3 = i3.vaos || (i3.vaos = {});
            (a3[l2] || (a3[l2] = new fe2())).bind(t2, this, h2, p3 ? p3.getPaintVertexBuffers() : [], c2, i3.vertexOffset, m2, f2, g2), v2.drawElements(e2, i3.primitiveLength * x2, v2.UNSIGNED_SHORT, i3.primitiveOffset * x2 * 2);
          }
        }
      }
      function ye(t2, e2, i2) {
        const a2 = 1 / Bt(i2, 1, e2.transform.tileZoom), s2 = Math.pow(2, i2.tileID.overscaledZ), o2 = i2.tileSize * Math.pow(2, e2.transform.tileZoom) / s2, r2 = o2 * (i2.tileID.canonical.x + i2.tileID.wrap * s2), n2 = o2 * i2.tileID.canonical.y;
        return { u_image: 0, u_texsize: i2.imageAtlasTexture.size, u_scale: [a2, t2.fromScale, t2.toScale], u_fade: t2.t, u_pixel_coord_upper: [r2 >> 16, n2 >> 16], u_pixel_coord_lower: [65535 & r2, 65535 & n2] };
      }
      const be = (t2, i2, a2, s2) => {
        const o2 = i2.style.light, r2 = o2.properties.get("position"), n2 = [r2.x, r2.y, r2.z], l2 = function() {
          var t3 = new e.A(9);
          return e.A != Float32Array && (t3[1] = 0, t3[2] = 0, t3[3] = 0, t3[5] = 0, t3[6] = 0, t3[7] = 0), t3[0] = 1, t3[4] = 1, t3[8] = 1, t3;
        }();
        "viewport" === o2.properties.get("anchor") && function(t3, e2) {
          var i3 = Math.sin(e2), a3 = Math.cos(e2);
          t3[0] = a3, t3[1] = i3, t3[2] = 0, t3[3] = -i3, t3[4] = a3, t3[5] = 0, t3[6] = 0, t3[7] = 0, t3[8] = 1;
        }(l2, -i2.transform.angle), function(t3, e2, i3) {
          var a3 = e2[0], s3 = e2[1], o3 = e2[2];
          t3[0] = a3 * i3[0] + s3 * i3[3] + o3 * i3[6], t3[1] = a3 * i3[1] + s3 * i3[4] + o3 * i3[7], t3[2] = a3 * i3[2] + s3 * i3[5] + o3 * i3[8];
        }(n2, n2, l2);
        const h2 = o2.properties.get("color");
        return { u_matrix: t2, u_lightpos: n2, u_lightintensity: o2.properties.get("intensity"), u_lightcolor: [h2.r, h2.g, h2.b], u_vertical_gradient: +a2, u_opacity: s2 };
      }, we2 = (t2, i2, a2, s2, o2, r2, n2) => e.e(be(t2, i2, a2, s2), ye(r2, i2, n2), { u_height_factor: -Math.pow(2, o2.overscaledZ) / n2.tileSize / 8 }), Te2 = (t2) => ({ u_matrix: t2 }), Ie2 = (t2, i2, a2, s2) => e.e(Te2(t2), ye(a2, i2, s2)), Ee2 = (t2, e2) => ({ u_matrix: t2, u_world: e2 }), Pe2 = (t2, i2, a2, s2, o2) => e.e(Ie2(t2, i2, a2, s2), { u_world: o2 }), Ce2 = (t2, e2, i2, a2) => {
        const s2 = t2.transform;
        let o2, r2;
        if ("map" === a2.paint.get("circle-pitch-alignment")) {
          const t3 = Bt(i2, 1, s2.zoom);
          o2 = true, r2 = [t3, t3];
        } else o2 = false, r2 = s2.pixelsToGLUnits;
        return { u_camera_to_center_distance: s2.cameraToCenterDistance, u_scale_with_map: +("map" === a2.paint.get("circle-pitch-scale")), u_matrix: t2.translatePosMatrix(e2.posMatrix, i2, a2.paint.get("circle-translate"), a2.paint.get("circle-translate-anchor")), u_pitch_with_map: +o2, u_device_pixel_ratio: t2.pixelRatio, u_extrude_scale: r2 };
      }, Se2 = (t2, e2, i2) => ({ u_matrix: t2, u_inv_matrix: e2, u_camera_to_center_distance: i2.cameraToCenterDistance, u_viewport_size: [i2.width, i2.height] }), ze2 = (t2, e2, i2 = 1) => ({ u_matrix: t2, u_color: e2, u_overlay: 0, u_overlay_scale: i2 }), De2 = (t2) => ({ u_matrix: t2 }), Me2 = (t2, e2, i2, a2) => ({ u_matrix: t2, u_extrude_scale: Bt(e2, 1, i2), u_intensity: a2 }), Ae2 = (t2, i2, a2, s2) => {
        const o2 = e.H();
        e.aP(o2, 0, t2.width, t2.height, 0, 0, 1);
        const r2 = t2.context.gl;
        return { u_matrix: o2, u_world: [r2.drawingBufferWidth, r2.drawingBufferHeight], u_image: a2, u_color_ramp: s2, u_opacity: i2.paint.get("heatmap-opacity") };
      };
      function Re2(t2, i2) {
        const a2 = Math.pow(2, i2.canonical.z), s2 = i2.canonical.y;
        return [new e.Z(0, s2 / a2).toLngLat().lat, new e.Z(0, (s2 + 1) / a2).toLngLat().lat];
      }
      const ke = (t2, e2, i2, a2) => {
        const s2 = t2.transform;
        return { u_matrix: Ne2(t2, e2, i2, a2), u_ratio: 1 / Bt(e2, 1, s2.zoom), u_device_pixel_ratio: t2.pixelRatio, u_units_to_pixels: [1 / s2.pixelsToGLUnits[0], 1 / s2.pixelsToGLUnits[1]] };
      }, Le2 = (t2, i2, a2, s2, o2) => e.e(ke(t2, i2, a2, o2), { u_image: 0, u_image_height: s2 }), Fe = (t2, e2, i2, a2, s2) => {
        const o2 = t2.transform, r2 = Oe(e2, o2);
        return { u_matrix: Ne2(t2, e2, i2, s2), u_texsize: e2.imageAtlasTexture.size, u_ratio: 1 / Bt(e2, 1, o2.zoom), u_device_pixel_ratio: t2.pixelRatio, u_image: 0, u_scale: [r2, a2.fromScale, a2.toScale], u_fade: a2.t, u_units_to_pixels: [1 / o2.pixelsToGLUnits[0], 1 / o2.pixelsToGLUnits[1]] };
      }, Be = (t2, i2, a2, s2, o2, r2) => {
        const n2 = t2.lineAtlas, l2 = Oe(i2, t2.transform), h2 = "round" === a2.layout.get("line-cap"), c2 = n2.getDash(s2.from, h2), u3 = n2.getDash(s2.to, h2), d2 = c2.width * o2.fromScale, _2 = u3.width * o2.toScale;
        return e.e(ke(t2, i2, a2, r2), { u_patternscale_a: [l2 / d2, -c2.height / 2], u_patternscale_b: [l2 / _2, -u3.height / 2], u_sdfgamma: n2.width / (256 * Math.min(d2, _2) * t2.pixelRatio) / 2, u_image: 0, u_tex_y_a: c2.y, u_tex_y_b: u3.y, u_mix: o2.t });
      };
      function Oe(t2, e2) {
        return 1 / Bt(t2, 1, e2.tileZoom);
      }
      function Ne2(t2, e2, i2, a2) {
        return t2.translatePosMatrix(a2 ? a2.posMatrix : e2.tileID.posMatrix, e2, i2.paint.get("line-translate"), i2.paint.get("line-translate-anchor"));
      }
      const Ue2 = (t2, e2, i2, a2, s2) => {
        return { u_matrix: t2, u_tl_parent: e2, u_scale_parent: i2, u_buffer_scale: 1, u_fade_t: a2.mix, u_opacity: a2.opacity * s2.paint.get("raster-opacity"), u_image0: 0, u_image1: 1, u_brightness_low: s2.paint.get("raster-brightness-min"), u_brightness_high: s2.paint.get("raster-brightness-max"), u_saturation_factor: (r2 = s2.paint.get("raster-saturation"), r2 > 0 ? 1 - 1 / (1.001 - r2) : -r2), u_contrast_factor: (o2 = s2.paint.get("raster-contrast"), o2 > 0 ? 1 / (1 - o2) : 1 + o2), u_spin_weights: je2(s2.paint.get("raster-hue-rotate")) };
        var o2, r2;
      };
      function je2(t2) {
        t2 *= Math.PI / 180;
        const e2 = Math.sin(t2), i2 = Math.cos(t2);
        return [(2 * i2 + 1) / 3, (-Math.sqrt(3) * e2 - i2 + 1) / 3, (Math.sqrt(3) * e2 - i2 + 1) / 3];
      }
      const Ze2 = (t2, e2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3, d2, _2) => {
        const p3 = r2.transform;
        return { u_is_size_zoom_constant: +("constant" === t2 || "source" === t2), u_is_size_feature_constant: +("constant" === t2 || "camera" === t2), u_size_t: e2 ? e2.uSizeT : 0, u_size: e2 ? e2.uSize : 0, u_camera_to_center_distance: p3.cameraToCenterDistance, u_pitch: p3.pitch / 360 * 2 * Math.PI, u_rotate_symbol: +i2, u_aspect_ratio: p3.width / p3.height, u_fade_change: r2.options.fadeDuration ? r2.symbolFadeChange : 1, u_matrix: n2, u_label_plane_matrix: l2, u_coord_matrix: h2, u_is_text: +u3, u_pitch_with_map: +a2, u_is_along_line: s2, u_is_variable_anchor: o2, u_texsize: d2, u_texture: 0, u_translation: c2, u_pitched_scale: _2 };
      }, qe2 = (t2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3, d2, _2, p3, m2) => {
        const f2 = n2.transform;
        return e.e(Ze2(t2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3, d2, _2, m2), { u_gamma_scale: s2 ? Math.cos(f2._pitch) * f2.cameraToCenterDistance : 1, u_device_pixel_ratio: n2.pixelRatio, u_is_halo: +p3 });
      }, Ve2 = (t2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3, d2, _2, p3) => e.e(qe2(t2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3, true, d2, true, p3), { u_texsize_icon: _2, u_texture_icon: 1 }), Ge = (t2, e2, i2) => ({ u_matrix: t2, u_opacity: e2, u_color: i2 }), He2 = (t2, i2, a2, s2, o2, r2) => e.e(function(t3, e2, i3, a3) {
        const s3 = i3.imageManager.getPattern(t3.from.toString()), o3 = i3.imageManager.getPattern(t3.to.toString()), { width: r3, height: n2 } = i3.imageManager.getPixelSize(), l2 = Math.pow(2, a3.tileID.overscaledZ), h2 = a3.tileSize * Math.pow(2, i3.transform.tileZoom) / l2, c2 = h2 * (a3.tileID.canonical.x + a3.tileID.wrap * l2), u3 = h2 * a3.tileID.canonical.y;
        return { u_image: 0, u_pattern_tl_a: s3.tl, u_pattern_br_a: s3.br, u_pattern_tl_b: o3.tl, u_pattern_br_b: o3.br, u_texsize: [r3, n2], u_mix: e2.t, u_pattern_size_a: s3.displaySize, u_pattern_size_b: o3.displaySize, u_scale_a: e2.fromScale, u_scale_b: e2.toScale, u_tile_units_to_pixels: 1 / Bt(a3, 1, i3.transform.tileZoom), u_pixel_coord_upper: [c2 >> 16, u3 >> 16], u_pixel_coord_lower: [65535 & c2, 65535 & u3] };
      }(s2, r2, a2, o2), { u_matrix: t2, u_opacity: i2 }), We2 = { fillExtrusion: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_lightpos: new e.aN(t2, i2.u_lightpos), u_lightintensity: new e.aI(t2, i2.u_lightintensity), u_lightcolor: new e.aN(t2, i2.u_lightcolor), u_vertical_gradient: new e.aI(t2, i2.u_vertical_gradient), u_opacity: new e.aI(t2, i2.u_opacity) }), fillExtrusionPattern: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_lightpos: new e.aN(t2, i2.u_lightpos), u_lightintensity: new e.aI(t2, i2.u_lightintensity), u_lightcolor: new e.aN(t2, i2.u_lightcolor), u_vertical_gradient: new e.aI(t2, i2.u_vertical_gradient), u_height_factor: new e.aI(t2, i2.u_height_factor), u_image: new e.aH(t2, i2.u_image), u_texsize: new e.aO(t2, i2.u_texsize), u_pixel_coord_upper: new e.aO(t2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new e.aO(t2, i2.u_pixel_coord_lower), u_scale: new e.aN(t2, i2.u_scale), u_fade: new e.aI(t2, i2.u_fade), u_opacity: new e.aI(t2, i2.u_opacity) }), fill: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix) }), fillPattern: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_image: new e.aH(t2, i2.u_image), u_texsize: new e.aO(t2, i2.u_texsize), u_pixel_coord_upper: new e.aO(t2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new e.aO(t2, i2.u_pixel_coord_lower), u_scale: new e.aN(t2, i2.u_scale), u_fade: new e.aI(t2, i2.u_fade) }), fillOutline: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_world: new e.aO(t2, i2.u_world) }), fillOutlinePattern: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_world: new e.aO(t2, i2.u_world), u_image: new e.aH(t2, i2.u_image), u_texsize: new e.aO(t2, i2.u_texsize), u_pixel_coord_upper: new e.aO(t2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new e.aO(t2, i2.u_pixel_coord_lower), u_scale: new e.aN(t2, i2.u_scale), u_fade: new e.aI(t2, i2.u_fade) }), circle: (t2, i2) => ({ u_camera_to_center_distance: new e.aI(t2, i2.u_camera_to_center_distance), u_scale_with_map: new e.aH(t2, i2.u_scale_with_map), u_pitch_with_map: new e.aH(t2, i2.u_pitch_with_map), u_extrude_scale: new e.aO(t2, i2.u_extrude_scale), u_device_pixel_ratio: new e.aI(t2, i2.u_device_pixel_ratio), u_matrix: new e.aJ(t2, i2.u_matrix) }), collisionBox: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_pixel_extrude_scale: new e.aO(t2, i2.u_pixel_extrude_scale) }), collisionCircle: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_inv_matrix: new e.aJ(t2, i2.u_inv_matrix), u_camera_to_center_distance: new e.aI(t2, i2.u_camera_to_center_distance), u_viewport_size: new e.aO(t2, i2.u_viewport_size) }), debug: (t2, i2) => ({ u_color: new e.aL(t2, i2.u_color), u_matrix: new e.aJ(t2, i2.u_matrix), u_overlay: new e.aH(t2, i2.u_overlay), u_overlay_scale: new e.aI(t2, i2.u_overlay_scale) }), clippingMask: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix) }), heatmap: (t2, i2) => ({ u_extrude_scale: new e.aI(t2, i2.u_extrude_scale), u_intensity: new e.aI(t2, i2.u_intensity), u_matrix: new e.aJ(t2, i2.u_matrix) }), heatmapTexture: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_world: new e.aO(t2, i2.u_world), u_image: new e.aH(t2, i2.u_image), u_color_ramp: new e.aH(t2, i2.u_color_ramp), u_opacity: new e.aI(t2, i2.u_opacity) }), hillshade: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_image: new e.aH(t2, i2.u_image), u_latrange: new e.aO(t2, i2.u_latrange), u_light: new e.aO(t2, i2.u_light), u_shadow: new e.aL(t2, i2.u_shadow), u_highlight: new e.aL(t2, i2.u_highlight), u_accent: new e.aL(t2, i2.u_accent) }), hillshadePrepare: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_image: new e.aH(t2, i2.u_image), u_dimension: new e.aO(t2, i2.u_dimension), u_zoom: new e.aI(t2, i2.u_zoom), u_unpack: new e.aK(t2, i2.u_unpack) }), line: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_ratio: new e.aI(t2, i2.u_ratio), u_device_pixel_ratio: new e.aI(t2, i2.u_device_pixel_ratio), u_units_to_pixels: new e.aO(t2, i2.u_units_to_pixels) }), lineGradient: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_ratio: new e.aI(t2, i2.u_ratio), u_device_pixel_ratio: new e.aI(t2, i2.u_device_pixel_ratio), u_units_to_pixels: new e.aO(t2, i2.u_units_to_pixels), u_image: new e.aH(t2, i2.u_image), u_image_height: new e.aI(t2, i2.u_image_height) }), linePattern: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_texsize: new e.aO(t2, i2.u_texsize), u_ratio: new e.aI(t2, i2.u_ratio), u_device_pixel_ratio: new e.aI(t2, i2.u_device_pixel_ratio), u_image: new e.aH(t2, i2.u_image), u_units_to_pixels: new e.aO(t2, i2.u_units_to_pixels), u_scale: new e.aN(t2, i2.u_scale), u_fade: new e.aI(t2, i2.u_fade) }), lineSDF: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_ratio: new e.aI(t2, i2.u_ratio), u_device_pixel_ratio: new e.aI(t2, i2.u_device_pixel_ratio), u_units_to_pixels: new e.aO(t2, i2.u_units_to_pixels), u_patternscale_a: new e.aO(t2, i2.u_patternscale_a), u_patternscale_b: new e.aO(t2, i2.u_patternscale_b), u_sdfgamma: new e.aI(t2, i2.u_sdfgamma), u_image: new e.aH(t2, i2.u_image), u_tex_y_a: new e.aI(t2, i2.u_tex_y_a), u_tex_y_b: new e.aI(t2, i2.u_tex_y_b), u_mix: new e.aI(t2, i2.u_mix) }), raster: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_tl_parent: new e.aO(t2, i2.u_tl_parent), u_scale_parent: new e.aI(t2, i2.u_scale_parent), u_buffer_scale: new e.aI(t2, i2.u_buffer_scale), u_fade_t: new e.aI(t2, i2.u_fade_t), u_opacity: new e.aI(t2, i2.u_opacity), u_image0: new e.aH(t2, i2.u_image0), u_image1: new e.aH(t2, i2.u_image1), u_brightness_low: new e.aI(t2, i2.u_brightness_low), u_brightness_high: new e.aI(t2, i2.u_brightness_high), u_saturation_factor: new e.aI(t2, i2.u_saturation_factor), u_contrast_factor: new e.aI(t2, i2.u_contrast_factor), u_spin_weights: new e.aN(t2, i2.u_spin_weights) }), symbolIcon: (t2, i2) => ({ u_is_size_zoom_constant: new e.aH(t2, i2.u_is_size_zoom_constant), u_is_size_feature_constant: new e.aH(t2, i2.u_is_size_feature_constant), u_size_t: new e.aI(t2, i2.u_size_t), u_size: new e.aI(t2, i2.u_size), u_camera_to_center_distance: new e.aI(t2, i2.u_camera_to_center_distance), u_pitch: new e.aI(t2, i2.u_pitch), u_rotate_symbol: new e.aH(t2, i2.u_rotate_symbol), u_aspect_ratio: new e.aI(t2, i2.u_aspect_ratio), u_fade_change: new e.aI(t2, i2.u_fade_change), u_matrix: new e.aJ(t2, i2.u_matrix), u_label_plane_matrix: new e.aJ(t2, i2.u_label_plane_matrix), u_coord_matrix: new e.aJ(t2, i2.u_coord_matrix), u_is_text: new e.aH(t2, i2.u_is_text), u_pitch_with_map: new e.aH(t2, i2.u_pitch_with_map), u_is_along_line: new e.aH(t2, i2.u_is_along_line), u_is_variable_anchor: new e.aH(t2, i2.u_is_variable_anchor), u_texsize: new e.aO(t2, i2.u_texsize), u_texture: new e.aH(t2, i2.u_texture), u_translation: new e.aO(t2, i2.u_translation), u_pitched_scale: new e.aI(t2, i2.u_pitched_scale) }), symbolSDF: (t2, i2) => ({ u_is_size_zoom_constant: new e.aH(t2, i2.u_is_size_zoom_constant), u_is_size_feature_constant: new e.aH(t2, i2.u_is_size_feature_constant), u_size_t: new e.aI(t2, i2.u_size_t), u_size: new e.aI(t2, i2.u_size), u_camera_to_center_distance: new e.aI(t2, i2.u_camera_to_center_distance), u_pitch: new e.aI(t2, i2.u_pitch), u_rotate_symbol: new e.aH(t2, i2.u_rotate_symbol), u_aspect_ratio: new e.aI(t2, i2.u_aspect_ratio), u_fade_change: new e.aI(t2, i2.u_fade_change), u_matrix: new e.aJ(t2, i2.u_matrix), u_label_plane_matrix: new e.aJ(t2, i2.u_label_plane_matrix), u_coord_matrix: new e.aJ(t2, i2.u_coord_matrix), u_is_text: new e.aH(t2, i2.u_is_text), u_pitch_with_map: new e.aH(t2, i2.u_pitch_with_map), u_is_along_line: new e.aH(t2, i2.u_is_along_line), u_is_variable_anchor: new e.aH(t2, i2.u_is_variable_anchor), u_texsize: new e.aO(t2, i2.u_texsize), u_texture: new e.aH(t2, i2.u_texture), u_gamma_scale: new e.aI(t2, i2.u_gamma_scale), u_device_pixel_ratio: new e.aI(t2, i2.u_device_pixel_ratio), u_is_halo: new e.aH(t2, i2.u_is_halo), u_translation: new e.aO(t2, i2.u_translation), u_pitched_scale: new e.aI(t2, i2.u_pitched_scale) }), symbolTextAndIcon: (t2, i2) => ({ u_is_size_zoom_constant: new e.aH(t2, i2.u_is_size_zoom_constant), u_is_size_feature_constant: new e.aH(t2, i2.u_is_size_feature_constant), u_size_t: new e.aI(t2, i2.u_size_t), u_size: new e.aI(t2, i2.u_size), u_camera_to_center_distance: new e.aI(t2, i2.u_camera_to_center_distance), u_pitch: new e.aI(t2, i2.u_pitch), u_rotate_symbol: new e.aH(t2, i2.u_rotate_symbol), u_aspect_ratio: new e.aI(t2, i2.u_aspect_ratio), u_fade_change: new e.aI(t2, i2.u_fade_change), u_matrix: new e.aJ(t2, i2.u_matrix), u_label_plane_matrix: new e.aJ(t2, i2.u_label_plane_matrix), u_coord_matrix: new e.aJ(t2, i2.u_coord_matrix), u_is_text: new e.aH(t2, i2.u_is_text), u_pitch_with_map: new e.aH(t2, i2.u_pitch_with_map), u_is_along_line: new e.aH(t2, i2.u_is_along_line), u_is_variable_anchor: new e.aH(t2, i2.u_is_variable_anchor), u_texsize: new e.aO(t2, i2.u_texsize), u_texsize_icon: new e.aO(t2, i2.u_texsize_icon), u_texture: new e.aH(t2, i2.u_texture), u_texture_icon: new e.aH(t2, i2.u_texture_icon), u_gamma_scale: new e.aI(t2, i2.u_gamma_scale), u_device_pixel_ratio: new e.aI(t2, i2.u_device_pixel_ratio), u_is_halo: new e.aH(t2, i2.u_is_halo), u_translation: new e.aO(t2, i2.u_translation), u_pitched_scale: new e.aI(t2, i2.u_pitched_scale) }), background: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_opacity: new e.aI(t2, i2.u_opacity), u_color: new e.aL(t2, i2.u_color) }), backgroundPattern: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_opacity: new e.aI(t2, i2.u_opacity), u_image: new e.aH(t2, i2.u_image), u_pattern_tl_a: new e.aO(t2, i2.u_pattern_tl_a), u_pattern_br_a: new e.aO(t2, i2.u_pattern_br_a), u_pattern_tl_b: new e.aO(t2, i2.u_pattern_tl_b), u_pattern_br_b: new e.aO(t2, i2.u_pattern_br_b), u_texsize: new e.aO(t2, i2.u_texsize), u_mix: new e.aI(t2, i2.u_mix), u_pattern_size_a: new e.aO(t2, i2.u_pattern_size_a), u_pattern_size_b: new e.aO(t2, i2.u_pattern_size_b), u_scale_a: new e.aI(t2, i2.u_scale_a), u_scale_b: new e.aI(t2, i2.u_scale_b), u_pixel_coord_upper: new e.aO(t2, i2.u_pixel_coord_upper), u_pixel_coord_lower: new e.aO(t2, i2.u_pixel_coord_lower), u_tile_units_to_pixels: new e.aI(t2, i2.u_tile_units_to_pixels) }), terrain: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_texture: new e.aH(t2, i2.u_texture), u_ele_delta: new e.aI(t2, i2.u_ele_delta), u_fog_matrix: new e.aJ(t2, i2.u_fog_matrix), u_fog_color: new e.aL(t2, i2.u_fog_color), u_fog_ground_blend: new e.aI(t2, i2.u_fog_ground_blend), u_fog_ground_blend_opacity: new e.aI(t2, i2.u_fog_ground_blend_opacity), u_horizon_color: new e.aL(t2, i2.u_horizon_color), u_horizon_fog_blend: new e.aI(t2, i2.u_horizon_fog_blend) }), terrainDepth: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_ele_delta: new e.aI(t2, i2.u_ele_delta) }), terrainCoords: (t2, i2) => ({ u_matrix: new e.aJ(t2, i2.u_matrix), u_texture: new e.aH(t2, i2.u_texture), u_terrain_coords_id: new e.aI(t2, i2.u_terrain_coords_id), u_ele_delta: new e.aI(t2, i2.u_ele_delta) }), sky: (t2, i2) => ({ u_sky_color: new e.aL(t2, i2.u_sky_color), u_horizon_color: new e.aL(t2, i2.u_horizon_color), u_horizon: new e.aI(t2, i2.u_horizon), u_sky_horizon_blend: new e.aI(t2, i2.u_sky_horizon_blend) }) };
      class $e2 {
        constructor(t2, e2, i2) {
          this.context = t2;
          const a2 = t2.gl;
          this.buffer = a2.createBuffer(), this.dynamicDraw = Boolean(i2), this.context.unbindVAO(), t2.bindElementBuffer.set(this.buffer), a2.bufferData(a2.ELEMENT_ARRAY_BUFFER, e2.arrayBuffer, this.dynamicDraw ? a2.DYNAMIC_DRAW : a2.STATIC_DRAW), this.dynamicDraw || delete e2.arrayBuffer;
        }
        bind() {
          this.context.bindElementBuffer.set(this.buffer);
        }
        updateData(t2) {
          const e2 = this.context.gl;
          if (!this.dynamicDraw) throw new Error("Attempted to update data while not in dynamic mode.");
          this.context.unbindVAO(), this.bind(), e2.bufferSubData(e2.ELEMENT_ARRAY_BUFFER, 0, t2.arrayBuffer);
        }
        destroy() {
          this.buffer && (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);
        }
      }
      const Xe = { Int8: "BYTE", Uint8: "UNSIGNED_BYTE", Int16: "SHORT", Uint16: "UNSIGNED_SHORT", Int32: "INT", Uint32: "UNSIGNED_INT", Float32: "FLOAT" };
      class Ke {
        constructor(t2, e2, i2, a2) {
          this.length = e2.length, this.attributes = i2, this.itemSize = e2.bytesPerElement, this.dynamicDraw = a2, this.context = t2;
          const s2 = t2.gl;
          this.buffer = s2.createBuffer(), t2.bindVertexBuffer.set(this.buffer), s2.bufferData(s2.ARRAY_BUFFER, e2.arrayBuffer, this.dynamicDraw ? s2.DYNAMIC_DRAW : s2.STATIC_DRAW), this.dynamicDraw || delete e2.arrayBuffer;
        }
        bind() {
          this.context.bindVertexBuffer.set(this.buffer);
        }
        updateData(t2) {
          if (t2.length !== this.length) throw new Error(`Length of new data is ${t2.length}, which doesn't match current length of ${this.length}`);
          const e2 = this.context.gl;
          this.bind(), e2.bufferSubData(e2.ARRAY_BUFFER, 0, t2.arrayBuffer);
        }
        enableAttributes(t2, e2) {
          for (let i2 = 0; i2 < this.attributes.length; i2++) {
            const a2 = e2.attributes[this.attributes[i2].name];
            void 0 !== a2 && t2.enableVertexAttribArray(a2);
          }
        }
        setVertexAttribPointers(t2, e2, i2) {
          for (let a2 = 0; a2 < this.attributes.length; a2++) {
            const s2 = this.attributes[a2], o2 = e2.attributes[s2.name];
            void 0 !== o2 && t2.vertexAttribPointer(o2, s2.components, t2[Xe[s2.type]], false, this.itemSize, s2.offset + this.itemSize * (i2 || 0));
          }
        }
        destroy() {
          this.buffer && (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);
        }
      }
      const Je2 = /* @__PURE__ */ new WeakMap();
      function Ye2(t2) {
        var e2;
        if (Je2.has(t2)) return Je2.get(t2);
        {
          const i2 = null === (e2 = t2.getParameter(t2.VERSION)) || void 0 === e2 ? void 0 : e2.startsWith("WebGL 2.0");
          return Je2.set(t2, i2), i2;
        }
      }
      class Qe2 {
        constructor(t2) {
          this.gl = t2.gl, this.default = this.getDefault(), this.current = this.default, this.dirty = false;
        }
        get() {
          return this.current;
        }
        set(t2) {
        }
        getDefault() {
          return this.default;
        }
        setDefault() {
          this.set(this.default);
        }
      }
      class ti extends Qe2 {
        getDefault() {
          return e.aM.transparent;
        }
        set(t2) {
          const e2 = this.current;
          (t2.r !== e2.r || t2.g !== e2.g || t2.b !== e2.b || t2.a !== e2.a || this.dirty) && (this.gl.clearColor(t2.r, t2.g, t2.b, t2.a), this.current = t2, this.dirty = false);
        }
      }
      class ei extends Qe2 {
        getDefault() {
          return 1;
        }
        set(t2) {
          (t2 !== this.current || this.dirty) && (this.gl.clearDepth(t2), this.current = t2, this.dirty = false);
        }
      }
      class ii extends Qe2 {
        getDefault() {
          return 0;
        }
        set(t2) {
          (t2 !== this.current || this.dirty) && (this.gl.clearStencil(t2), this.current = t2, this.dirty = false);
        }
      }
      class ai extends Qe2 {
        getDefault() {
          return [true, true, true, true];
        }
        set(t2) {
          const e2 = this.current;
          (t2[0] !== e2[0] || t2[1] !== e2[1] || t2[2] !== e2[2] || t2[3] !== e2[3] || this.dirty) && (this.gl.colorMask(t2[0], t2[1], t2[2], t2[3]), this.current = t2, this.dirty = false);
        }
      }
      class si extends Qe2 {
        getDefault() {
          return true;
        }
        set(t2) {
          (t2 !== this.current || this.dirty) && (this.gl.depthMask(t2), this.current = t2, this.dirty = false);
        }
      }
      class oi extends Qe2 {
        getDefault() {
          return 255;
        }
        set(t2) {
          (t2 !== this.current || this.dirty) && (this.gl.stencilMask(t2), this.current = t2, this.dirty = false);
        }
      }
      class ri extends Qe2 {
        getDefault() {
          return { func: this.gl.ALWAYS, ref: 0, mask: 255 };
        }
        set(t2) {
          const e2 = this.current;
          (t2.func !== e2.func || t2.ref !== e2.ref || t2.mask !== e2.mask || this.dirty) && (this.gl.stencilFunc(t2.func, t2.ref, t2.mask), this.current = t2, this.dirty = false);
        }
      }
      class ni extends Qe2 {
        getDefault() {
          const t2 = this.gl;
          return [t2.KEEP, t2.KEEP, t2.KEEP];
        }
        set(t2) {
          const e2 = this.current;
          (t2[0] !== e2[0] || t2[1] !== e2[1] || t2[2] !== e2[2] || this.dirty) && (this.gl.stencilOp(t2[0], t2[1], t2[2]), this.current = t2, this.dirty = false);
        }
      }
      class li extends Qe2 {
        getDefault() {
          return false;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          const e2 = this.gl;
          t2 ? e2.enable(e2.STENCIL_TEST) : e2.disable(e2.STENCIL_TEST), this.current = t2, this.dirty = false;
        }
      }
      class hi extends Qe2 {
        getDefault() {
          return [0, 1];
        }
        set(t2) {
          const e2 = this.current;
          (t2[0] !== e2[0] || t2[1] !== e2[1] || this.dirty) && (this.gl.depthRange(t2[0], t2[1]), this.current = t2, this.dirty = false);
        }
      }
      class ci extends Qe2 {
        getDefault() {
          return false;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          const e2 = this.gl;
          t2 ? e2.enable(e2.DEPTH_TEST) : e2.disable(e2.DEPTH_TEST), this.current = t2, this.dirty = false;
        }
      }
      class ui extends Qe2 {
        getDefault() {
          return this.gl.LESS;
        }
        set(t2) {
          (t2 !== this.current || this.dirty) && (this.gl.depthFunc(t2), this.current = t2, this.dirty = false);
        }
      }
      class di extends Qe2 {
        getDefault() {
          return false;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          const e2 = this.gl;
          t2 ? e2.enable(e2.BLEND) : e2.disable(e2.BLEND), this.current = t2, this.dirty = false;
        }
      }
      class _i extends Qe2 {
        getDefault() {
          const t2 = this.gl;
          return [t2.ONE, t2.ZERO];
        }
        set(t2) {
          const e2 = this.current;
          (t2[0] !== e2[0] || t2[1] !== e2[1] || this.dirty) && (this.gl.blendFunc(t2[0], t2[1]), this.current = t2, this.dirty = false);
        }
      }
      class pi extends Qe2 {
        getDefault() {
          return e.aM.transparent;
        }
        set(t2) {
          const e2 = this.current;
          (t2.r !== e2.r || t2.g !== e2.g || t2.b !== e2.b || t2.a !== e2.a || this.dirty) && (this.gl.blendColor(t2.r, t2.g, t2.b, t2.a), this.current = t2, this.dirty = false);
        }
      }
      class mi extends Qe2 {
        getDefault() {
          return this.gl.FUNC_ADD;
        }
        set(t2) {
          (t2 !== this.current || this.dirty) && (this.gl.blendEquation(t2), this.current = t2, this.dirty = false);
        }
      }
      class fi extends Qe2 {
        getDefault() {
          return false;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          const e2 = this.gl;
          t2 ? e2.enable(e2.CULL_FACE) : e2.disable(e2.CULL_FACE), this.current = t2, this.dirty = false;
        }
      }
      class gi extends Qe2 {
        getDefault() {
          return this.gl.BACK;
        }
        set(t2) {
          (t2 !== this.current || this.dirty) && (this.gl.cullFace(t2), this.current = t2, this.dirty = false);
        }
      }
      class vi extends Qe2 {
        getDefault() {
          return this.gl.CCW;
        }
        set(t2) {
          (t2 !== this.current || this.dirty) && (this.gl.frontFace(t2), this.current = t2, this.dirty = false);
        }
      }
      class xi extends Qe2 {
        getDefault() {
          return null;
        }
        set(t2) {
          (t2 !== this.current || this.dirty) && (this.gl.useProgram(t2), this.current = t2, this.dirty = false);
        }
      }
      class yi extends Qe2 {
        getDefault() {
          return this.gl.TEXTURE0;
        }
        set(t2) {
          (t2 !== this.current || this.dirty) && (this.gl.activeTexture(t2), this.current = t2, this.dirty = false);
        }
      }
      class bi extends Qe2 {
        getDefault() {
          const t2 = this.gl;
          return [0, 0, t2.drawingBufferWidth, t2.drawingBufferHeight];
        }
        set(t2) {
          const e2 = this.current;
          (t2[0] !== e2[0] || t2[1] !== e2[1] || t2[2] !== e2[2] || t2[3] !== e2[3] || this.dirty) && (this.gl.viewport(t2[0], t2[1], t2[2], t2[3]), this.current = t2, this.dirty = false);
        }
      }
      class wi extends Qe2 {
        getDefault() {
          return null;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          const e2 = this.gl;
          e2.bindFramebuffer(e2.FRAMEBUFFER, t2), this.current = t2, this.dirty = false;
        }
      }
      class Ti extends Qe2 {
        getDefault() {
          return null;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          const e2 = this.gl;
          e2.bindRenderbuffer(e2.RENDERBUFFER, t2), this.current = t2, this.dirty = false;
        }
      }
      class Ii extends Qe2 {
        getDefault() {
          return null;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          const e2 = this.gl;
          e2.bindTexture(e2.TEXTURE_2D, t2), this.current = t2, this.dirty = false;
        }
      }
      class Ei extends Qe2 {
        getDefault() {
          return null;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          const e2 = this.gl;
          e2.bindBuffer(e2.ARRAY_BUFFER, t2), this.current = t2, this.dirty = false;
        }
      }
      class Pi extends Qe2 {
        getDefault() {
          return null;
        }
        set(t2) {
          const e2 = this.gl;
          e2.bindBuffer(e2.ELEMENT_ARRAY_BUFFER, t2), this.current = t2, this.dirty = false;
        }
      }
      class Ci extends Qe2 {
        getDefault() {
          return null;
        }
        set(t2) {
          var e2;
          if (t2 === this.current && !this.dirty) return;
          const i2 = this.gl;
          Ye2(i2) ? i2.bindVertexArray(t2) : null === (e2 = i2.getExtension("OES_vertex_array_object")) || void 0 === e2 || e2.bindVertexArrayOES(t2), this.current = t2, this.dirty = false;
        }
      }
      class Si extends Qe2 {
        getDefault() {
          return 4;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          const e2 = this.gl;
          e2.pixelStorei(e2.UNPACK_ALIGNMENT, t2), this.current = t2, this.dirty = false;
        }
      }
      class zi extends Qe2 {
        getDefault() {
          return false;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          const e2 = this.gl;
          e2.pixelStorei(e2.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t2), this.current = t2, this.dirty = false;
        }
      }
      class Di extends Qe2 {
        getDefault() {
          return false;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          const e2 = this.gl;
          e2.pixelStorei(e2.UNPACK_FLIP_Y_WEBGL, t2), this.current = t2, this.dirty = false;
        }
      }
      class Mi extends Qe2 {
        constructor(t2, e2) {
          super(t2), this.context = t2, this.parent = e2;
        }
        getDefault() {
          return null;
        }
      }
      class Ai extends Mi {
        setDirty() {
          this.dirty = true;
        }
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          this.context.bindFramebuffer.set(this.parent);
          const e2 = this.gl;
          e2.framebufferTexture2D(e2.FRAMEBUFFER, e2.COLOR_ATTACHMENT0, e2.TEXTURE_2D, t2, 0), this.current = t2, this.dirty = false;
        }
      }
      class Ri extends Mi {
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          this.context.bindFramebuffer.set(this.parent);
          const e2 = this.gl;
          e2.framebufferRenderbuffer(e2.FRAMEBUFFER, e2.DEPTH_ATTACHMENT, e2.RENDERBUFFER, t2), this.current = t2, this.dirty = false;
        }
      }
      class ki extends Mi {
        set(t2) {
          if (t2 === this.current && !this.dirty) return;
          this.context.bindFramebuffer.set(this.parent);
          const e2 = this.gl;
          e2.framebufferRenderbuffer(e2.FRAMEBUFFER, e2.DEPTH_STENCIL_ATTACHMENT, e2.RENDERBUFFER, t2), this.current = t2, this.dirty = false;
        }
      }
      class Li {
        constructor(t2, e2, i2, a2, s2) {
          this.context = t2, this.width = e2, this.height = i2;
          const o2 = t2.gl, r2 = this.framebuffer = o2.createFramebuffer();
          if (this.colorAttachment = new Ai(t2, r2), a2) this.depthAttachment = s2 ? new ki(t2, r2) : new Ri(t2, r2);
          else if (s2) throw new Error("Stencil cannot be set without depth");
          if (o2.checkFramebufferStatus(o2.FRAMEBUFFER) !== o2.FRAMEBUFFER_COMPLETE) throw new Error("Framebuffer is not complete");
        }
        destroy() {
          const t2 = this.context.gl, e2 = this.colorAttachment.get();
          if (e2 && t2.deleteTexture(e2), this.depthAttachment) {
            const e3 = this.depthAttachment.get();
            e3 && t2.deleteRenderbuffer(e3);
          }
          t2.deleteFramebuffer(this.framebuffer);
        }
      }
      class Fi {
        constructor(t2, e2, i2) {
          this.blendFunction = t2, this.blendColor = e2, this.mask = i2;
        }
      }
      Fi.Replace = [1, 0], Fi.disabled = new Fi(Fi.Replace, e.aM.transparent, [false, false, false, false]), Fi.unblended = new Fi(Fi.Replace, e.aM.transparent, [true, true, true, true]), Fi.alphaBlended = new Fi([1, 771], e.aM.transparent, [true, true, true, true]);
      class Bi {
        constructor(t2) {
          var e2, i2;
          if (this.gl = t2, this.clearColor = new ti(this), this.clearDepth = new ei(this), this.clearStencil = new ii(this), this.colorMask = new ai(this), this.depthMask = new si(this), this.stencilMask = new oi(this), this.stencilFunc = new ri(this), this.stencilOp = new ni(this), this.stencilTest = new li(this), this.depthRange = new hi(this), this.depthTest = new ci(this), this.depthFunc = new ui(this), this.blend = new di(this), this.blendFunc = new _i(this), this.blendColor = new pi(this), this.blendEquation = new mi(this), this.cullFace = new fi(this), this.cullFaceSide = new gi(this), this.frontFace = new vi(this), this.program = new xi(this), this.activeTexture = new yi(this), this.viewport = new bi(this), this.bindFramebuffer = new wi(this), this.bindRenderbuffer = new Ti(this), this.bindTexture = new Ii(this), this.bindVertexBuffer = new Ei(this), this.bindElementBuffer = new Pi(this), this.bindVertexArray = new Ci(this), this.pixelStoreUnpack = new Si(this), this.pixelStoreUnpackPremultiplyAlpha = new zi(this), this.pixelStoreUnpackFlipY = new Di(this), this.extTextureFilterAnisotropic = t2.getExtension("EXT_texture_filter_anisotropic") || t2.getExtension("MOZ_EXT_texture_filter_anisotropic") || t2.getExtension("WEBKIT_EXT_texture_filter_anisotropic"), this.extTextureFilterAnisotropic && (this.extTextureFilterAnisotropicMax = t2.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)), this.maxTextureSize = t2.getParameter(t2.MAX_TEXTURE_SIZE), Ye2(t2)) {
            this.HALF_FLOAT = t2.HALF_FLOAT;
            const a2 = t2.getExtension("EXT_color_buffer_half_float");
            this.RGBA16F = null !== (e2 = t2.RGBA16F) && void 0 !== e2 ? e2 : null == a2 ? void 0 : a2.RGBA16F_EXT, this.RGB16F = null !== (i2 = t2.RGB16F) && void 0 !== i2 ? i2 : null == a2 ? void 0 : a2.RGB16F_EXT, t2.getExtension("EXT_color_buffer_float");
          } else {
            t2.getExtension("EXT_color_buffer_half_float"), t2.getExtension("OES_texture_half_float_linear");
            const e3 = t2.getExtension("OES_texture_half_float");
            this.HALF_FLOAT = null == e3 ? void 0 : e3.HALF_FLOAT_OES;
          }
        }
        setDefault() {
          this.unbindVAO(), this.clearColor.setDefault(), this.clearDepth.setDefault(), this.clearStencil.setDefault(), this.colorMask.setDefault(), this.depthMask.setDefault(), this.stencilMask.setDefault(), this.stencilFunc.setDefault(), this.stencilOp.setDefault(), this.stencilTest.setDefault(), this.depthRange.setDefault(), this.depthTest.setDefault(), this.depthFunc.setDefault(), this.blend.setDefault(), this.blendFunc.setDefault(), this.blendColor.setDefault(), this.blendEquation.setDefault(), this.cullFace.setDefault(), this.cullFaceSide.setDefault(), this.frontFace.setDefault(), this.program.setDefault(), this.activeTexture.setDefault(), this.bindFramebuffer.setDefault(), this.pixelStoreUnpack.setDefault(), this.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.pixelStoreUnpackFlipY.setDefault();
        }
        setDirty() {
          this.clearColor.dirty = true, this.clearDepth.dirty = true, this.clearStencil.dirty = true, this.colorMask.dirty = true, this.depthMask.dirty = true, this.stencilMask.dirty = true, this.stencilFunc.dirty = true, this.stencilOp.dirty = true, this.stencilTest.dirty = true, this.depthRange.dirty = true, this.depthTest.dirty = true, this.depthFunc.dirty = true, this.blend.dirty = true, this.blendFunc.dirty = true, this.blendColor.dirty = true, this.blendEquation.dirty = true, this.cullFace.dirty = true, this.cullFaceSide.dirty = true, this.frontFace.dirty = true, this.program.dirty = true, this.activeTexture.dirty = true, this.viewport.dirty = true, this.bindFramebuffer.dirty = true, this.bindRenderbuffer.dirty = true, this.bindTexture.dirty = true, this.bindVertexBuffer.dirty = true, this.bindElementBuffer.dirty = true, this.bindVertexArray.dirty = true, this.pixelStoreUnpack.dirty = true, this.pixelStoreUnpackPremultiplyAlpha.dirty = true, this.pixelStoreUnpackFlipY.dirty = true;
        }
        createIndexBuffer(t2, e2) {
          return new $e2(this, t2, e2);
        }
        createVertexBuffer(t2, e2, i2) {
          return new Ke(this, t2, e2, i2);
        }
        createRenderbuffer(t2, e2, i2) {
          const a2 = this.gl, s2 = a2.createRenderbuffer();
          return this.bindRenderbuffer.set(s2), a2.renderbufferStorage(a2.RENDERBUFFER, t2, e2, i2), this.bindRenderbuffer.set(null), s2;
        }
        createFramebuffer(t2, e2, i2, a2) {
          return new Li(this, t2, e2, i2, a2);
        }
        clear({ color: t2, depth: e2, stencil: i2 }) {
          const a2 = this.gl;
          let s2 = 0;
          t2 && (s2 |= a2.COLOR_BUFFER_BIT, this.clearColor.set(t2), this.colorMask.set([true, true, true, true])), void 0 !== e2 && (s2 |= a2.DEPTH_BUFFER_BIT, this.depthRange.set([0, 1]), this.clearDepth.set(e2), this.depthMask.set(true)), void 0 !== i2 && (s2 |= a2.STENCIL_BUFFER_BIT, this.clearStencil.set(i2), this.stencilMask.set(255)), a2.clear(s2);
        }
        setCullFace(t2) {
          false === t2.enable ? this.cullFace.set(false) : (this.cullFace.set(true), this.cullFaceSide.set(t2.mode), this.frontFace.set(t2.frontFace));
        }
        setDepthMode(t2) {
          t2.func !== this.gl.ALWAYS || t2.mask ? (this.depthTest.set(true), this.depthFunc.set(t2.func), this.depthMask.set(t2.mask), this.depthRange.set(t2.range)) : this.depthTest.set(false);
        }
        setStencilMode(t2) {
          t2.test.func !== this.gl.ALWAYS || t2.mask ? (this.stencilTest.set(true), this.stencilMask.set(t2.mask), this.stencilOp.set([t2.fail, t2.depthFail, t2.pass]), this.stencilFunc.set({ func: t2.test.func, ref: t2.ref, mask: t2.test.mask })) : this.stencilTest.set(false);
        }
        setColorMode(t2) {
          e.aE(t2.blendFunction, Fi.Replace) ? this.blend.set(false) : (this.blend.set(true), this.blendFunc.set(t2.blendFunction), this.blendColor.set(t2.blendColor)), this.colorMask.set(t2.mask);
        }
        createVertexArray() {
          var t2;
          return Ye2(this.gl) ? this.gl.createVertexArray() : null === (t2 = this.gl.getExtension("OES_vertex_array_object")) || void 0 === t2 ? void 0 : t2.createVertexArrayOES();
        }
        deleteVertexArray(t2) {
          var e2;
          return Ye2(this.gl) ? this.gl.deleteVertexArray(t2) : null === (e2 = this.gl.getExtension("OES_vertex_array_object")) || void 0 === e2 ? void 0 : e2.deleteVertexArrayOES(t2);
        }
        unbindVAO() {
          this.bindVertexArray.set(null);
        }
      }
      class Oi {
        constructor(t2, e2, i2) {
          this.func = t2, this.mask = e2, this.range = i2;
        }
      }
      Oi.ReadOnly = false, Oi.ReadWrite = true, Oi.disabled = new Oi(519, Oi.ReadOnly, [0, 1]);
      const Ni = 7680;
      class Ui {
        constructor(t2, e2, i2, a2, s2, o2) {
          this.test = t2, this.ref = e2, this.mask = i2, this.fail = a2, this.depthFail = s2, this.pass = o2;
        }
      }
      Ui.disabled = new Ui({ func: 519, mask: 0 }, 0, 0, Ni, Ni, Ni);
      class ji {
        constructor(t2, e2, i2) {
          this.enable = t2, this.mode = e2, this.frontFace = i2;
        }
      }
      let Zi;
      function qi(t2, i2, a2, s2, o2) {
        const r2 = t2.context, n2 = r2.gl, l2 = t2.useProgram("collisionBox"), h2 = [];
        let c2 = 0, u3 = 0;
        for (let _3 = 0; _3 < s2.length; _3++) {
          const p4 = s2[_3], m3 = i2.getTile(p4).getBucket(a2);
          if (!m3) continue;
          const f3 = o2 ? m3.textCollisionBox : m3.iconCollisionBox, g3 = m3.collisionCircleArray;
          if (g3.length > 0) {
            const i3 = e.H();
            e.aQ(i3, m3.placementInvProjMatrix, t2.transform.glCoordMatrix), e.aQ(i3, i3, m3.placementViewportMatrix), h2.push({ circleArray: g3, circleOffset: u3, transform: p4.posMatrix, invTransform: i3, coord: p4 }), c2 += g3.length / 4, u3 = c2;
          }
          f3 && l2.draw(r2, n2.LINES, Oi.disabled, Ui.disabled, t2.colorModeForRenderPass(), ji.disabled, { u_matrix: p4.posMatrix, u_pixel_extrude_scale: [1 / (d2 = t2.transform).width, 1 / d2.height] }, t2.style.map.terrain && t2.style.map.terrain.getTerrainData(p4), a2.id, f3.layoutVertexBuffer, f3.indexBuffer, f3.segments, null, t2.transform.zoom, null, null, f3.collisionVertexBuffer);
        }
        var d2;
        if (!o2 || !h2.length) return;
        const _2 = t2.useProgram("collisionCircle"), p3 = new e.aR();
        p3.resize(4 * c2), p3._trim();
        let m2 = 0;
        for (const t3 of h2) for (let e2 = 0; e2 < t3.circleArray.length / 4; e2++) {
          const i3 = 4 * e2, a3 = t3.circleArray[i3 + 0], s3 = t3.circleArray[i3 + 1], o3 = t3.circleArray[i3 + 2], r3 = t3.circleArray[i3 + 3];
          p3.emplace(m2++, a3, s3, o3, r3, 0), p3.emplace(m2++, a3, s3, o3, r3, 1), p3.emplace(m2++, a3, s3, o3, r3, 2), p3.emplace(m2++, a3, s3, o3, r3, 3);
        }
        (!Zi || Zi.length < 2 * c2) && (Zi = function(t3) {
          const i3 = 2 * t3, a3 = new e.aT();
          a3.resize(i3), a3._trim();
          for (let t4 = 0; t4 < i3; t4++) {
            const e2 = 6 * t4;
            a3.uint16[e2 + 0] = 4 * t4 + 0, a3.uint16[e2 + 1] = 4 * t4 + 1, a3.uint16[e2 + 2] = 4 * t4 + 2, a3.uint16[e2 + 3] = 4 * t4 + 2, a3.uint16[e2 + 4] = 4 * t4 + 3, a3.uint16[e2 + 5] = 4 * t4 + 0;
          }
          return a3;
        }(c2));
        const f2 = r2.createIndexBuffer(Zi, true), g2 = r2.createVertexBuffer(p3, e.aS.members, true);
        for (const i3 of h2) {
          const s3 = Se2(i3.transform, i3.invTransform, t2.transform);
          _2.draw(r2, n2.TRIANGLES, Oi.disabled, Ui.disabled, t2.colorModeForRenderPass(), ji.disabled, s3, t2.style.map.terrain && t2.style.map.terrain.getTerrainData(i3.coord), a2.id, g2, f2, e.a0.simpleSegment(0, 2 * i3.circleOffset, i3.circleArray.length, i3.circleArray.length / 2), null, t2.transform.zoom, null, null, null);
        }
        g2.destroy(), f2.destroy();
      }
      ji.disabled = new ji(false, 1029, 2305), ji.backCCW = new ji(true, 1029, 2305);
      const Vi = e.an(new Float32Array(16));
      function Gi(t2, i2, a2, s2, o2, r2) {
        const { horizontalAlign: n2, verticalAlign: l2 } = e.au(t2);
        return new e.P((-(n2 - 0.5) * i2 / o2 + s2[0]) * r2, (-(l2 - 0.5) * a2 / o2 + s2[1]) * r2);
      }
      function Hi(t2, i2, a2, s2, o2, r2) {
        const n2 = i2.tileAnchorPoint.add(new e.P(i2.translation[0], i2.translation[1]));
        if (i2.pitchWithMap) {
          let t3 = s2.mult(r2);
          a2 || (t3 = t3.rotate(-o2));
          const e2 = n2.add(t3);
          return xt(e2.x, e2.y, i2.labelPlaneMatrix, i2.getElevation).point;
        }
        if (a2) {
          const e2 = St(i2.tileAnchorPoint.x + 1, i2.tileAnchorPoint.y, i2).point.sub(t2), a3 = Math.atan(e2.y / e2.x) + (e2.x < 0 ? Math.PI : 0);
          return t2.add(s2.rotate(a3));
        }
        return t2.add(s2);
      }
      function Wi(t2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3, d2, _2, p3) {
        const m2 = t2.text.placedSymbolArray, f2 = t2.text.dynamicLayoutVertexArray, g2 = t2.icon.dynamicLayoutVertexArray, v2 = {};
        f2.clear();
        for (let g3 = 0; g3 < m2.length; g3++) {
          const x2 = m2.get(g3), y2 = x2.hidden || !x2.crossTileID || t2.allowVerticalPlacement && !x2.placedOrientation ? null : s2[x2.crossTileID];
          if (y2) {
            const s3 = new e.P(x2.anchorX, x2.anchorY), m3 = { getElevation: p3, width: o2.width, height: o2.height, labelPlaneMatrix: r2, pitchWithMap: a2, projection: u3, tileAnchorPoint: s3, translation: d2, unwrappedTileID: _2 }, g4 = a2 ? xt(s3.x, s3.y, n2, p3) : St(s3.x, s3.y, m3), b2 = yt(o2.cameraToCenterDistance, g4.signedDistanceFromCamera);
            let w3 = e.ai(t2.textSizeData, h2, x2) * b2 / e.ap;
            a2 && (w3 *= t2.tilePixelRatio / l2);
            const { width: T2, height: I2, anchor: E2, textOffset: P3, textBoxScale: C2 } = y2, S2 = Gi(E2, T2, I2, P3, C2, w3), z3 = u3.getPitchedTextCorrection(o2, s3.add(new e.P(d2[0], d2[1])), _2), D2 = Hi(g4.point, m3, i2, S2, o2.angle, z3), M2 = t2.allowVerticalPlacement && x2.placedOrientation === e.ah.vertical ? Math.PI / 2 : 0;
            for (let t3 = 0; t3 < x2.numGlyphs; t3++) e.aj(f2, D2, M2);
            c2 && x2.associatedIconIndex >= 0 && (v2[x2.associatedIconIndex] = { shiftedAnchor: D2, angle: M2 });
          } else Rt(x2.numGlyphs, f2);
        }
        if (c2) {
          g2.clear();
          const i3 = t2.icon.placedSymbolArray;
          for (let t3 = 0; t3 < i3.length; t3++) {
            const a3 = i3.get(t3);
            if (a3.hidden) Rt(a3.numGlyphs, g2);
            else {
              const i4 = v2[t3];
              if (i4) for (let t4 = 0; t4 < a3.numGlyphs; t4++) e.aj(g2, i4.shiftedAnchor, i4.angle);
              else Rt(a3.numGlyphs, g2);
            }
          }
          t2.icon.dynamicLayoutVertexBuffer.updateData(g2);
        }
        t2.text.dynamicLayoutVertexBuffer.updateData(f2);
      }
      function $i(t2, e2, i2) {
        return i2.iconsInText && e2 ? "symbolTextAndIcon" : t2 ? "symbolSDF" : "symbolIcon";
      }
      function Xi(t2, i2, a2, s2, o2, r2, n2, l2, h2, c2, u3, d2) {
        const _2 = t2.context, p3 = _2.gl, m2 = t2.transform, f2 = ie2(), g2 = "map" === l2, v2 = "map" === h2, x2 = "viewport" !== l2 && "point" !== a2.layout.get("symbol-placement"), y2 = g2 && !v2 && !x2, b2 = !v2 && x2, w3 = !a2.layout.get("symbol-sort-key").isConstant();
        let T2 = false;
        const I2 = t2.depthModeForSublayer(0, Oi.ReadOnly), E2 = a2._unevaluatedLayout.hasValue("text-variable-anchor") || a2._unevaluatedLayout.hasValue("text-variable-anchor-offset"), P3 = [], C2 = f2.getCircleRadiusCorrection(m2);
        for (const l3 of s2) {
          const s3 = i2.getTile(l3), h3 = s3.getBucket(a2);
          if (!h3) continue;
          const u4 = o2 ? h3.text : h3.icon;
          if (!u4 || !u4.segments.get().length || !u4.hasVisibleVertices) continue;
          const d3 = u4.programConfigurations.get(a2.id), _3 = o2 || h3.sdfIcons, I3 = o2 ? h3.textSizeData : h3.iconSizeData, S2 = v2 || 0 !== m2.pitch, z3 = t2.useProgram($i(_3, o2, h3), d3), D2 = e.ag(I3, m2.zoom), M2 = t2.style.map.terrain && t2.style.map.terrain.getTerrainData(l3);
          let A2, R2, k2, L3, F2 = [0, 0], B3 = null;
          if (o2) R2 = s3.glyphAtlasTexture, k2 = p3.LINEAR, A2 = s3.glyphAtlasTexture.size, h3.iconsInText && (F2 = s3.imageAtlasTexture.size, B3 = s3.imageAtlasTexture, L3 = S2 || t2.options.rotating || t2.options.zooming || "composite" === I3.kind || "camera" === I3.kind ? p3.LINEAR : p3.NEAREST);
          else {
            const e2 = 1 !== a2.layout.get("icon-size").constantOr(0) || h3.iconsNeedLinear;
            R2 = s3.imageAtlasTexture, k2 = _3 || t2.options.rotating || t2.options.zooming || e2 || S2 ? p3.LINEAR : p3.NEAREST, A2 = s3.imageAtlasTexture.size;
          }
          const O3 = Bt(s3, 1, t2.transform.zoom), N3 = b2 ? l3.posMatrix : Vi, U2 = gt(N3, v2, g2, t2.transform, O3), j3 = vt(N3, v2, g2, t2.transform, O3), Z3 = vt(l3.posMatrix, v2, g2, t2.transform, O3), q3 = f2.translatePosition(t2.transform, s3, r2, n2), V3 = E2 && h3.hasTextData(), G3 = "none" !== a2.layout.get("icon-text-fit") && V3 && h3.hasIconData();
          if (x2) {
            const e2 = t2.style.map.terrain ? (e3, i4) => t2.style.map.terrain.getElevation(l3, e3, i4) : null, i3 = "map" === a2.layout.get("text-rotation-alignment");
            wt2(h3, l3.posMatrix, t2, o2, U2, Z3, v2, c2, i3, f2, l3.toUnwrapped(), m2.width, m2.height, q3, e2);
          }
          const H2 = l3.posMatrix, W2 = o2 && E2 || G3, $3 = x2 || W2 ? Vi : U2, X3 = j3, K2 = _3 && 0 !== a2.paint.get(o2 ? "text-halo-width" : "icon-halo-width").constantOr(1);
          let J3;
          J3 = _3 ? h3.iconsInText ? Ve2(I3.kind, D2, y2, v2, x2, W2, t2, H2, $3, X3, q3, A2, F2, C2) : qe2(I3.kind, D2, y2, v2, x2, W2, t2, H2, $3, X3, q3, o2, A2, true, C2) : Ze2(I3.kind, D2, y2, v2, x2, W2, t2, H2, $3, X3, q3, o2, A2, C2);
          const Y2 = { program: z3, buffers: u4, uniformValues: J3, atlasTexture: R2, atlasTextureIcon: B3, atlasInterpolation: k2, atlasInterpolationIcon: L3, isSDF: _3, hasHalo: K2 };
          if (w3 && h3.canOverlap) {
            T2 = true;
            const t3 = u4.segments.get();
            for (const i3 of t3) P3.push({ segments: new e.a0([i3]), sortKey: i3.sortKey, state: Y2, terrainData: M2 });
          } else P3.push({ segments: u4.segments, sortKey: 0, state: Y2, terrainData: M2 });
        }
        T2 && P3.sort((t3, e2) => t3.sortKey - e2.sortKey);
        for (const e2 of P3) {
          const i3 = e2.state;
          if (_2.activeTexture.set(p3.TEXTURE0), i3.atlasTexture.bind(i3.atlasInterpolation, p3.CLAMP_TO_EDGE), i3.atlasTextureIcon && (_2.activeTexture.set(p3.TEXTURE1), i3.atlasTextureIcon && i3.atlasTextureIcon.bind(i3.atlasInterpolationIcon, p3.CLAMP_TO_EDGE)), i3.isSDF) {
            const s3 = i3.uniformValues;
            i3.hasHalo && (s3.u_is_halo = 1, Ki(i3.buffers, e2.segments, a2, t2, i3.program, I2, u3, d2, s3, e2.terrainData)), s3.u_is_halo = 0;
          }
          Ki(i3.buffers, e2.segments, a2, t2, i3.program, I2, u3, d2, i3.uniformValues, e2.terrainData);
        }
      }
      function Ki(t2, e2, i2, a2, s2, o2, r2, n2, l2, h2) {
        const c2 = a2.context;
        s2.draw(c2, c2.gl.TRIANGLES, o2, r2, n2, ji.disabled, l2, h2, i2.id, t2.layoutVertexBuffer, t2.indexBuffer, e2, i2.paint, a2.transform.zoom, t2.programConfigurations.get(i2.id), t2.dynamicLayoutVertexBuffer, t2.opacityVertexBuffer);
      }
      function Ji(t2, i2, a2, s2) {
        const o2 = t2.context, r2 = o2.gl, n2 = Ui.disabled, l2 = new Fi([r2.ONE, r2.ONE], e.aM.transparent, [true, true, true, true]), h2 = i2.getBucket(a2);
        if (!h2) return;
        const c2 = s2.key;
        let u3 = a2.heatmapFbos.get(c2);
        u3 || (u3 = Qi(o2, i2.tileSize, i2.tileSize), a2.heatmapFbos.set(c2, u3)), o2.bindFramebuffer.set(u3.framebuffer), o2.viewport.set([0, 0, i2.tileSize, i2.tileSize]), o2.clear({ color: e.aM.transparent });
        const d2 = h2.programConfigurations.get(a2.id), _2 = t2.useProgram("heatmap", d2), p3 = t2.style.map.terrain.getTerrainData(s2);
        _2.draw(o2, r2.TRIANGLES, Oi.disabled, n2, l2, ji.disabled, Me2(s2.posMatrix, i2, t2.transform.zoom, a2.paint.get("heatmap-intensity")), p3, a2.id, h2.layoutVertexBuffer, h2.indexBuffer, h2.segments, a2.paint, t2.transform.zoom, d2);
      }
      function Yi(t2, e2, i2) {
        const a2 = t2.context, s2 = a2.gl;
        a2.setColorMode(t2.colorModeForRenderPass());
        const o2 = ta(a2, e2), r2 = i2.key, n2 = e2.heatmapFbos.get(r2);
        n2 && (a2.activeTexture.set(s2.TEXTURE0), s2.bindTexture(s2.TEXTURE_2D, n2.colorAttachment.get()), a2.activeTexture.set(s2.TEXTURE1), o2.bind(s2.LINEAR, s2.CLAMP_TO_EDGE), t2.useProgram("heatmapTexture").draw(a2, s2.TRIANGLES, Oi.disabled, Ui.disabled, t2.colorModeForRenderPass(), ji.disabled, Ae2(t2, e2, 0, 1), null, e2.id, t2.rasterBoundsBuffer, t2.quadTriangleIndexBuffer, t2.rasterBoundsSegments, e2.paint, t2.transform.zoom), n2.destroy(), e2.heatmapFbos.delete(r2));
      }
      function Qi(t2, e2, i2) {
        var a2, s2;
        const o2 = t2.gl, r2 = o2.createTexture();
        o2.bindTexture(o2.TEXTURE_2D, r2), o2.texParameteri(o2.TEXTURE_2D, o2.TEXTURE_WRAP_S, o2.CLAMP_TO_EDGE), o2.texParameteri(o2.TEXTURE_2D, o2.TEXTURE_WRAP_T, o2.CLAMP_TO_EDGE), o2.texParameteri(o2.TEXTURE_2D, o2.TEXTURE_MIN_FILTER, o2.LINEAR), o2.texParameteri(o2.TEXTURE_2D, o2.TEXTURE_MAG_FILTER, o2.LINEAR);
        const n2 = null !== (a2 = t2.HALF_FLOAT) && void 0 !== a2 ? a2 : o2.UNSIGNED_BYTE, l2 = null !== (s2 = t2.RGBA16F) && void 0 !== s2 ? s2 : o2.RGBA;
        o2.texImage2D(o2.TEXTURE_2D, 0, l2, e2, i2, 0, o2.RGBA, n2, null);
        const h2 = t2.createFramebuffer(e2, i2, false, false);
        return h2.colorAttachment.set(r2), h2;
      }
      function ta(t2, e2) {
        return e2.colorRampTexture || (e2.colorRampTexture = new b(t2, e2.colorRamp, t2.gl.RGBA)), e2.colorRampTexture;
      }
      function ea(t2, e2, i2, a2, s2) {
        if (!i2 || !a2 || !a2.imageAtlas) return;
        const o2 = a2.imageAtlas.patternPositions;
        let r2 = o2[i2.to.toString()], n2 = o2[i2.from.toString()];
        if (!r2 && n2 && (r2 = n2), !n2 && r2 && (n2 = r2), !r2 || !n2) {
          const t3 = s2.getPaintProperty(e2);
          r2 = o2[t3], n2 = o2[t3];
        }
        r2 && n2 && t2.setConstantPatternPositions(r2, n2);
      }
      function ia(t2, e2, i2, a2, s2, o2, r2) {
        const n2 = t2.context.gl, l2 = "fill-pattern", h2 = i2.paint.get(l2), c2 = h2 && h2.constantOr(1), u3 = i2.getCrossfadeParameters();
        let d2, _2, p3, m2, f2;
        r2 ? (_2 = c2 && !i2.getPaintProperty("fill-outline-color") ? "fillOutlinePattern" : "fillOutline", d2 = n2.LINES) : (_2 = c2 ? "fillPattern" : "fill", d2 = n2.TRIANGLES);
        const g2 = h2.constantOr(null);
        for (const h3 of a2) {
          const a3 = e2.getTile(h3);
          if (c2 && !a3.patternsLoaded()) continue;
          const v2 = a3.getBucket(i2);
          if (!v2) continue;
          const x2 = v2.programConfigurations.get(i2.id), y2 = t2.useProgram(_2, x2), b2 = t2.style.map.terrain && t2.style.map.terrain.getTerrainData(h3);
          c2 && (t2.context.activeTexture.set(n2.TEXTURE0), a3.imageAtlasTexture.bind(n2.LINEAR, n2.CLAMP_TO_EDGE), x2.updatePaintBuffers(u3)), ea(x2, l2, g2, a3, i2);
          const w3 = b2 ? h3 : null, T2 = t2.translatePosMatrix(w3 ? w3.posMatrix : h3.posMatrix, a3, i2.paint.get("fill-translate"), i2.paint.get("fill-translate-anchor"));
          if (r2) {
            m2 = v2.indexBuffer2, f2 = v2.segments2;
            const e3 = [n2.drawingBufferWidth, n2.drawingBufferHeight];
            p3 = "fillOutlinePattern" === _2 && c2 ? Pe2(T2, t2, u3, a3, e3) : Ee2(T2, e3);
          } else m2 = v2.indexBuffer, f2 = v2.segments, p3 = c2 ? Ie2(T2, t2, u3, a3) : Te2(T2);
          y2.draw(t2.context, d2, s2, t2.stencilModeForClipping(h3), o2, ji.disabled, p3, b2, i2.id, v2.layoutVertexBuffer, m2, f2, i2.paint, t2.transform.zoom, x2);
        }
      }
      function aa(t2, e2, i2, a2, s2, o2, r2) {
        const n2 = t2.context, l2 = n2.gl, h2 = "fill-extrusion-pattern", c2 = i2.paint.get(h2), u3 = c2.constantOr(1), d2 = i2.getCrossfadeParameters(), _2 = i2.paint.get("fill-extrusion-opacity"), p3 = c2.constantOr(null);
        for (const c3 of a2) {
          const a3 = e2.getTile(c3), m2 = a3.getBucket(i2);
          if (!m2) continue;
          const f2 = t2.style.map.terrain && t2.style.map.terrain.getTerrainData(c3), g2 = m2.programConfigurations.get(i2.id), v2 = t2.useProgram(u3 ? "fillExtrusionPattern" : "fillExtrusion", g2);
          u3 && (t2.context.activeTexture.set(l2.TEXTURE0), a3.imageAtlasTexture.bind(l2.LINEAR, l2.CLAMP_TO_EDGE), g2.updatePaintBuffers(d2)), ea(g2, h2, p3, a3, i2);
          const x2 = t2.translatePosMatrix(c3.posMatrix, a3, i2.paint.get("fill-extrusion-translate"), i2.paint.get("fill-extrusion-translate-anchor")), y2 = i2.paint.get("fill-extrusion-vertical-gradient"), b2 = u3 ? we2(x2, t2, y2, _2, c3, d2, a3) : be(x2, t2, y2, _2);
          v2.draw(n2, n2.gl.TRIANGLES, s2, o2, r2, ji.backCCW, b2, f2, i2.id, m2.layoutVertexBuffer, m2.indexBuffer, m2.segments, i2.paint, t2.transform.zoom, g2, t2.style.map.terrain && m2.centroidVertexBuffer);
        }
      }
      function sa(t2, e2, i2, a2, s2, o2, r2) {
        const n2 = t2.context, l2 = n2.gl, h2 = i2.fbo;
        if (!h2) return;
        const c2 = t2.useProgram("hillshade"), u3 = t2.style.map.terrain && t2.style.map.terrain.getTerrainData(e2);
        n2.activeTexture.set(l2.TEXTURE0), l2.bindTexture(l2.TEXTURE_2D, h2.colorAttachment.get()), c2.draw(n2, l2.TRIANGLES, s2, o2, r2, ji.disabled, ((t3, e3, i3, a3) => {
          const s3 = i3.paint.get("hillshade-shadow-color"), o3 = i3.paint.get("hillshade-highlight-color"), r3 = i3.paint.get("hillshade-accent-color");
          let n3 = i3.paint.get("hillshade-illumination-direction") * (Math.PI / 180);
          "viewport" === i3.paint.get("hillshade-illumination-anchor") && (n3 -= t3.transform.angle);
          const l3 = !t3.options.moving;
          return { u_matrix: a3 ? a3.posMatrix : t3.transform.calculatePosMatrix(e3.tileID.toUnwrapped(), l3), u_image: 0, u_latrange: Re2(0, e3.tileID), u_light: [i3.paint.get("hillshade-exaggeration"), n3], u_shadow: s3, u_highlight: o3, u_accent: r3 };
        })(t2, i2, a2, u3 ? e2 : null), u3, a2.id, t2.rasterBoundsBuffer, t2.quadTriangleIndexBuffer, t2.rasterBoundsSegments);
      }
      function oa(t2, i2, a2, s2, o2, r2) {
        const n2 = t2.context, l2 = n2.gl, h2 = i2.dem;
        if (h2 && h2.data) {
          const c2 = h2.dim, u3 = h2.stride, d2 = h2.getPixels();
          if (n2.activeTexture.set(l2.TEXTURE1), n2.pixelStoreUnpackPremultiplyAlpha.set(false), i2.demTexture = i2.demTexture || t2.getTileTexture(u3), i2.demTexture) {
            const t3 = i2.demTexture;
            t3.update(d2, { premultiply: false }), t3.bind(l2.NEAREST, l2.CLAMP_TO_EDGE);
          } else i2.demTexture = new b(n2, d2, l2.RGBA, { premultiply: false }), i2.demTexture.bind(l2.NEAREST, l2.CLAMP_TO_EDGE);
          n2.activeTexture.set(l2.TEXTURE0);
          let _2 = i2.fbo;
          if (!_2) {
            const t3 = new b(n2, { width: c2, height: c2, data: null }, l2.RGBA);
            t3.bind(l2.LINEAR, l2.CLAMP_TO_EDGE), _2 = i2.fbo = n2.createFramebuffer(c2, c2, true, false), _2.colorAttachment.set(t3.texture);
          }
          n2.bindFramebuffer.set(_2.framebuffer), n2.viewport.set([0, 0, c2, c2]), t2.useProgram("hillshadePrepare").draw(n2, l2.TRIANGLES, s2, o2, r2, ji.disabled, ((t3, i3) => {
            const a3 = i3.stride, s3 = e.H();
            return e.aP(s3, 0, e.X, -e.X, 0, 0, 1), e.J(s3, s3, [0, -e.X, 0]), { u_matrix: s3, u_image: 1, u_dimension: [a3, a3], u_zoom: t3.overscaledZ, u_unpack: i3.getUnpackVector() };
          })(i2.tileID, h2), null, a2.id, t2.rasterBoundsBuffer, t2.quadTriangleIndexBuffer, t2.rasterBoundsSegments), i2.needsHillshadePrepare = false;
        }
      }
      function ra(t2, i2, a2, s2, r2, n2) {
        const l2 = s2.paint.get("raster-fade-duration");
        if (!n2 && l2 > 0) {
          const s3 = o.now(), n3 = (s3 - t2.timeAdded) / l2, h2 = i2 ? (s3 - i2.timeAdded) / l2 : -1, c2 = a2.getSource(), u3 = r2.coveringZoomLevel({ tileSize: c2.tileSize, roundZoom: c2.roundZoom }), d2 = !i2 || Math.abs(i2.tileID.overscaledZ - u3) > Math.abs(t2.tileID.overscaledZ - u3), _2 = d2 && t2.refreshedUponExpiration ? 1 : e.ac(d2 ? n3 : 1 - h2, 0, 1);
          return t2.refreshedUponExpiration && n3 >= 1 && (t2.refreshedUponExpiration = false), i2 ? { opacity: 1, mix: 1 - _2 } : { opacity: _2, mix: 0 };
        }
        return { opacity: 1, mix: 0 };
      }
      const na = new e.aM(1, 0, 0, 1), la = new e.aM(0, 1, 0, 1), ha = new e.aM(0, 0, 1, 1), ca = new e.aM(1, 0, 1, 1), ua = new e.aM(0, 1, 1, 1);
      function da(t2, e2, i2, a2) {
        pa(t2, 0, e2 + i2 / 2, t2.transform.width, i2, a2);
      }
      function _a(t2, e2, i2, a2) {
        pa(t2, e2 - i2 / 2, 0, i2, t2.transform.height, a2);
      }
      function pa(t2, e2, i2, a2, s2, o2) {
        const r2 = t2.context, n2 = r2.gl;
        n2.enable(n2.SCISSOR_TEST), n2.scissor(e2 * t2.pixelRatio, i2 * t2.pixelRatio, a2 * t2.pixelRatio, s2 * t2.pixelRatio), r2.clear({ color: o2 }), n2.disable(n2.SCISSOR_TEST);
      }
      function ma(t2, i2, a2) {
        const s2 = t2.context, o2 = s2.gl, r2 = a2.posMatrix, n2 = t2.useProgram("debug"), l2 = Oi.disabled, h2 = Ui.disabled, c2 = t2.colorModeForRenderPass(), u3 = "$debug", d2 = t2.style.map.terrain && t2.style.map.terrain.getTerrainData(a2);
        s2.activeTexture.set(o2.TEXTURE0);
        const _2 = i2.getTileByID(a2.key).latestRawTileData, p3 = Math.floor((_2 && _2.byteLength || 0) / 1024), m2 = i2.getTile(a2).tileSize, f2 = 512 / Math.min(m2, 512) * (a2.overscaledZ / t2.transform.zoom) * 0.5;
        let g2 = a2.canonical.toString();
        a2.overscaledZ !== a2.canonical.z && (g2 += ` => ${a2.overscaledZ}`), function(t3, e2) {
          t3.initDebugOverlayCanvas();
          const i3 = t3.debugOverlayCanvas, a3 = t3.context.gl, s3 = t3.debugOverlayCanvas.getContext("2d");
          s3.clearRect(0, 0, i3.width, i3.height), s3.shadowColor = "white", s3.shadowBlur = 2, s3.lineWidth = 1.5, s3.strokeStyle = "white", s3.textBaseline = "top", s3.font = "bold 36px Open Sans, sans-serif", s3.fillText(e2, 5, 5), s3.strokeText(e2, 5, 5), t3.debugOverlayTexture.update(i3), t3.debugOverlayTexture.bind(a3.LINEAR, a3.CLAMP_TO_EDGE);
        }(t2, `${g2} ${p3}kB`), n2.draw(s2, o2.TRIANGLES, l2, h2, Fi.alphaBlended, ji.disabled, ze2(r2, e.aM.transparent, f2), null, u3, t2.debugBuffer, t2.quadTriangleIndexBuffer, t2.debugSegments), n2.draw(s2, o2.LINE_STRIP, l2, h2, c2, ji.disabled, ze2(r2, e.aM.red), d2, u3, t2.debugBuffer, t2.tileBorderIndexBuffer, t2.debugSegments);
      }
      function fa(t2, e2, i2) {
        const a2 = t2.context, s2 = a2.gl, o2 = t2.colorModeForRenderPass(), r2 = new Oi(s2.LEQUAL, Oi.ReadWrite, t2.depthRangeFor3D), n2 = t2.useProgram("terrain"), l2 = e2.getTerrainMesh();
        a2.bindFramebuffer.set(null), a2.viewport.set([0, 0, t2.width, t2.height]);
        for (const h2 of i2) {
          const i3 = t2.renderToTexture.getTexture(h2), c2 = e2.getTerrainData(h2.tileID);
          a2.activeTexture.set(s2.TEXTURE0), s2.bindTexture(s2.TEXTURE_2D, i3.texture);
          const u3 = t2.transform.calculatePosMatrix(h2.tileID.toUnwrapped()), d2 = e2.getMeshFrameDelta(t2.transform.zoom), _2 = t2.transform.calculateFogMatrix(h2.tileID.toUnwrapped()), p3 = ge2(u3, d2, _2, t2.style.sky, t2.transform.pitch);
          n2.draw(a2, s2.TRIANGLES, r2, Ui.disabled, o2, ji.backCCW, p3, c2, "terrain", l2.vertexBuffer, l2.indexBuffer, l2.segments);
        }
      }
      class ga {
        constructor(t2, e2, i2) {
          this.vertexBuffer = t2, this.indexBuffer = e2, this.segments = i2;
        }
        destroy() {
          this.vertexBuffer.destroy(), this.indexBuffer.destroy(), this.segments.destroy(), this.vertexBuffer = null, this.indexBuffer = null, this.segments = null;
        }
      }
      class va {
        constructor(t2, i2) {
          this.context = new Bi(t2), this.transform = i2, this._tileTextures = {}, this.terrainFacilitator = { dirty: true, matrix: e.an(new Float64Array(16)), renderTime: 0 }, this.setup(), this.numSublayers = ut.maxUnderzooming + ut.maxOverzooming + 1, this.depthEpsilon = 1 / Math.pow(2, 16), this.crossTileSymbolIndex = new he2();
        }
        resize(t2, e2, i2) {
          if (this.width = Math.floor(t2 * i2), this.height = Math.floor(e2 * i2), this.pixelRatio = i2, this.context.viewport.set([0, 0, this.width, this.height]), this.style) for (const t3 of this.style._order) this.style._layers[t3].resize();
        }
        setup() {
          const t2 = this.context, i2 = new e.aX();
          i2.emplaceBack(0, 0), i2.emplaceBack(e.X, 0), i2.emplaceBack(0, e.X), i2.emplaceBack(e.X, e.X), this.tileExtentBuffer = t2.createVertexBuffer(i2, _e.members), this.tileExtentSegments = e.a0.simpleSegment(0, 0, 4, 2);
          const a2 = new e.aX();
          a2.emplaceBack(0, 0), a2.emplaceBack(e.X, 0), a2.emplaceBack(0, e.X), a2.emplaceBack(e.X, e.X), this.debugBuffer = t2.createVertexBuffer(a2, _e.members), this.debugSegments = e.a0.simpleSegment(0, 0, 4, 5);
          const s2 = new e.$();
          s2.emplaceBack(0, 0, 0, 0), s2.emplaceBack(e.X, 0, e.X, 0), s2.emplaceBack(0, e.X, 0, e.X), s2.emplaceBack(e.X, e.X, e.X, e.X), this.rasterBoundsBuffer = t2.createVertexBuffer(s2, Y.members), this.rasterBoundsSegments = e.a0.simpleSegment(0, 0, 4, 2);
          const o2 = new e.aX();
          o2.emplaceBack(0, 0), o2.emplaceBack(1, 0), o2.emplaceBack(0, 1), o2.emplaceBack(1, 1), this.viewportBuffer = t2.createVertexBuffer(o2, _e.members), this.viewportSegments = e.a0.simpleSegment(0, 0, 4, 2);
          const r2 = new e.aZ();
          r2.emplaceBack(0), r2.emplaceBack(1), r2.emplaceBack(3), r2.emplaceBack(2), r2.emplaceBack(0), this.tileBorderIndexBuffer = t2.createIndexBuffer(r2);
          const n2 = new e.aY();
          n2.emplaceBack(0, 1, 2), n2.emplaceBack(2, 1, 3), this.quadTriangleIndexBuffer = t2.createIndexBuffer(n2);
          const l2 = this.context.gl;
          this.stencilClearMode = new Ui({ func: l2.ALWAYS, mask: 0 }, 0, 255, l2.ZERO, l2.ZERO, l2.ZERO);
        }
        clearStencil() {
          const t2 = this.context, i2 = t2.gl;
          this.nextStencilID = 1, this.currentStencilSource = void 0;
          const a2 = e.H();
          e.aP(a2, 0, this.width, this.height, 0, 0, 1), e.K(a2, a2, [i2.drawingBufferWidth, i2.drawingBufferHeight, 0]), this.useProgram("clippingMask").draw(t2, i2.TRIANGLES, Oi.disabled, this.stencilClearMode, Fi.disabled, ji.disabled, De2(a2), null, "$clipping", this.viewportBuffer, this.quadTriangleIndexBuffer, this.viewportSegments);
        }
        _renderTileClippingMasks(t2, e2) {
          if (this.currentStencilSource === t2.source || !t2.isTileClipped() || !e2 || !e2.length) return;
          this.currentStencilSource = t2.source;
          const i2 = this.context, a2 = i2.gl;
          this.nextStencilID + e2.length > 256 && this.clearStencil(), i2.setColorMode(Fi.disabled), i2.setDepthMode(Oi.disabled);
          const s2 = this.useProgram("clippingMask");
          this._tileClippingMaskIDs = {};
          for (const t3 of e2) {
            const e3 = this._tileClippingMaskIDs[t3.key] = this.nextStencilID++, o2 = this.style.map.terrain && this.style.map.terrain.getTerrainData(t3);
            s2.draw(i2, a2.TRIANGLES, Oi.disabled, new Ui({ func: a2.ALWAYS, mask: 0 }, e3, 255, a2.KEEP, a2.KEEP, a2.REPLACE), Fi.disabled, ji.disabled, De2(t3.posMatrix), o2, "$clipping", this.tileExtentBuffer, this.quadTriangleIndexBuffer, this.tileExtentSegments);
          }
        }
        stencilModeFor3D() {
          this.currentStencilSource = void 0, this.nextStencilID + 1 > 256 && this.clearStencil();
          const t2 = this.nextStencilID++, e2 = this.context.gl;
          return new Ui({ func: e2.NOTEQUAL, mask: 255 }, t2, 255, e2.KEEP, e2.KEEP, e2.REPLACE);
        }
        stencilModeForClipping(t2) {
          const e2 = this.context.gl;
          return new Ui({ func: e2.EQUAL, mask: 255 }, this._tileClippingMaskIDs[t2.key], 0, e2.KEEP, e2.KEEP, e2.REPLACE);
        }
        stencilConfigForOverlap(t2) {
          const e2 = this.context.gl, i2 = t2.sort((t3, e3) => e3.overscaledZ - t3.overscaledZ), a2 = i2[i2.length - 1].overscaledZ, s2 = i2[0].overscaledZ - a2 + 1;
          if (s2 > 1) {
            this.currentStencilSource = void 0, this.nextStencilID + s2 > 256 && this.clearStencil();
            const t3 = {};
            for (let i3 = 0; i3 < s2; i3++) t3[i3 + a2] = new Ui({ func: e2.GEQUAL, mask: 255 }, i3 + this.nextStencilID, 255, e2.KEEP, e2.KEEP, e2.REPLACE);
            return this.nextStencilID += s2, [t3, i2];
          }
          return [{ [a2]: Ui.disabled }, i2];
        }
        colorModeForRenderPass() {
          const t2 = this.context.gl;
          if (this._showOverdrawInspector) {
            const i2 = 1 / 8;
            return new Fi([t2.CONSTANT_COLOR, t2.ONE], new e.aM(i2, i2, i2, 0), [true, true, true, true]);
          }
          return "opaque" === this.renderPass ? Fi.unblended : Fi.alphaBlended;
        }
        depthModeForSublayer(t2, e2, i2) {
          if (!this.opaquePassEnabledForLayer()) return Oi.disabled;
          const a2 = 1 - ((1 + this.currentLayer) * this.numSublayers + t2) * this.depthEpsilon;
          return new Oi(i2 || this.context.gl.LEQUAL, e2, [a2, a2]);
        }
        opaquePassEnabledForLayer() {
          return this.currentLayer < this.opaquePassCutoff;
        }
        render(t2, i2) {
          this.style = t2, this.options = i2, this.lineAtlas = t2.lineAtlas, this.imageManager = t2.imageManager, this.glyphManager = t2.glyphManager, this.symbolFadeChange = t2.placement.symbolFadeChange(o.now()), this.imageManager.beginFrame();
          const a2 = this.style._order, s2 = this.style.sourceCaches, r2 = {}, n2 = {}, l2 = {};
          for (const t3 in s2) {
            const e2 = s2[t3];
            e2.used && e2.prepare(this.context), r2[t3] = e2.getVisibleCoordinates(), n2[t3] = r2[t3].slice().reverse(), l2[t3] = e2.getVisibleCoordinates(true).reverse();
          }
          this.opaquePassCutoff = 1 / 0;
          for (let t3 = 0; t3 < a2.length; t3++) if (this.style._layers[a2[t3]].is3D()) {
            this.opaquePassCutoff = t3;
            break;
          }
          this.maybeDrawDepthAndCoords(false), this.renderToTexture && (this.renderToTexture.prepareForRender(this.style, this.transform.zoom), this.opaquePassCutoff = 0), this.renderPass = "offscreen";
          for (const t3 of a2) {
            const e2 = this.style._layers[t3];
            if (!e2.hasOffscreenPass() || e2.isHidden(this.transform.zoom)) continue;
            const i3 = n2[e2.source];
            ("custom" === e2.type || i3.length) && this.renderLayer(this, s2[e2.source], e2, i3);
          }
          if (this.context.bindFramebuffer.set(null), this.context.clear({ color: i2.showOverdrawInspector ? e.aM.black : e.aM.transparent, depth: 1 }), this.clearStencil(), this.style.sky && function(t3, i3) {
            const a3 = t3.context, s3 = a3.gl, o2 = ((t4, e2, i4) => ({ u_sky_color: t4.properties.get("sky-color"), u_horizon_color: t4.properties.get("horizon-color"), u_horizon: (e2.height / 2 + e2.getHorizon()) * i4, u_sky_horizon_blend: t4.properties.get("sky-horizon-blend") * e2.height / 2 * i4 }))(i3, t3.style.map.transform, t3.pixelRatio), r3 = new Oi(s3.LEQUAL, Oi.ReadWrite, [0, 1]), n3 = Ui.disabled, l3 = t3.colorModeForRenderPass(), h2 = t3.useProgram("sky");
            if (!i3.mesh) {
              const t4 = new e.aX();
              t4.emplaceBack(-1, -1), t4.emplaceBack(1, -1), t4.emplaceBack(1, 1), t4.emplaceBack(-1, 1);
              const s4 = new e.aY();
              s4.emplaceBack(0, 1, 2), s4.emplaceBack(0, 2, 3), i3.mesh = new ga(a3.createVertexBuffer(t4, _e.members), a3.createIndexBuffer(s4), e.a0.simpleSegment(0, 0, t4.length, s4.length));
            }
            h2.draw(a3, s3.TRIANGLES, r3, n3, l3, ji.disabled, o2, void 0, "sky", i3.mesh.vertexBuffer, i3.mesh.indexBuffer, i3.mesh.segments);
          }(this, this.style.sky), this._showOverdrawInspector = i2.showOverdrawInspector, this.depthRangeFor3D = [0, 1 - (t2._order.length + 2) * this.numSublayers * this.depthEpsilon], !this.renderToTexture) for (this.renderPass = "opaque", this.currentLayer = a2.length - 1; this.currentLayer >= 0; this.currentLayer--) {
            const t3 = this.style._layers[a2[this.currentLayer]], e2 = s2[t3.source], i3 = r2[t3.source];
            this._renderTileClippingMasks(t3, i3), this.renderLayer(this, e2, t3, i3);
          }
          for (this.renderPass = "translucent", this.currentLayer = 0; this.currentLayer < a2.length; this.currentLayer++) {
            const t3 = this.style._layers[a2[this.currentLayer]], e2 = s2[t3.source];
            if (this.renderToTexture && this.renderToTexture.renderLayer(t3)) continue;
            const i3 = ("symbol" === t3.type ? l2 : n2)[t3.source];
            this._renderTileClippingMasks(t3, r2[t3.source]), this.renderLayer(this, e2, t3, i3);
          }
          if (this.options.showTileBoundaries) {
            const t3 = function(t4, e2) {
              let i3 = null;
              const a3 = Object.values(t4._layers).flatMap((i4) => i4.source && !i4.isHidden(e2) ? [t4.sourceCaches[i4.source]] : []), s3 = a3.filter((t5) => "vector" === t5.getSource().type), o2 = a3.filter((t5) => "vector" !== t5.getSource().type), r3 = (t5) => {
                (!i3 || i3.getSource().maxzoom < t5.getSource().maxzoom) && (i3 = t5);
              };
              return s3.forEach((t5) => r3(t5)), i3 || o2.forEach((t5) => r3(t5)), i3;
            }(this.style, this.transform.zoom);
            t3 && function(t4, e2, i3) {
              for (let a3 = 0; a3 < i3.length; a3++) ma(t4, e2, i3[a3]);
            }(this, t3, t3.getVisibleCoordinates());
          }
          this.options.showPadding && function(t3) {
            const e2 = t3.transform.padding;
            da(t3, t3.transform.height - (e2.top || 0), 3, na), da(t3, e2.bottom || 0, 3, la), _a(t3, e2.left || 0, 3, ha), _a(t3, t3.transform.width - (e2.right || 0), 3, ca);
            const i3 = t3.transform.centerPoint;
            !function(t4, e3, i4, a3) {
              pa(t4, e3 - 1, i4 - 10, 2, 20, a3), pa(t4, e3 - 10, i4 - 1, 20, 2, a3);
            }(t3, i3.x, t3.transform.height - i3.y, ua);
          }(this), this.context.setDefault();
        }
        maybeDrawDepthAndCoords(t2) {
          if (!this.style || !this.style.map || !this.style.map.terrain) return;
          const i2 = this.terrainFacilitator.matrix, a2 = this.transform.modelViewProjectionMatrix;
          let s2 = this.terrainFacilitator.dirty;
          s2 || (s2 = t2 ? !e.a_(i2, a2) : !e.a$(i2, a2)), s2 || (s2 = this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length > 0), s2 && (e.b0(i2, a2), this.terrainFacilitator.renderTime = Date.now(), this.terrainFacilitator.dirty = false, function(t3, i3) {
            const a3 = t3.context, s3 = a3.gl, o2 = Fi.unblended, r2 = new Oi(s3.LEQUAL, Oi.ReadWrite, [0, 1]), n2 = i3.getTerrainMesh(), l2 = i3.sourceCache.getRenderableTiles(), h2 = t3.useProgram("terrainDepth");
            a3.bindFramebuffer.set(i3.getFramebuffer("depth").framebuffer), a3.viewport.set([0, 0, t3.width / devicePixelRatio, t3.height / devicePixelRatio]), a3.clear({ color: e.aM.transparent, depth: 1 });
            for (const e2 of l2) {
              const l3 = i3.getTerrainData(e2.tileID), c2 = { u_matrix: t3.transform.calculatePosMatrix(e2.tileID.toUnwrapped()), u_ele_delta: i3.getMeshFrameDelta(t3.transform.zoom) };
              h2.draw(a3, s3.TRIANGLES, r2, Ui.disabled, o2, ji.backCCW, c2, l3, "terrain", n2.vertexBuffer, n2.indexBuffer, n2.segments);
            }
            a3.bindFramebuffer.set(null), a3.viewport.set([0, 0, t3.width, t3.height]);
          }(this, this.style.map.terrain), function(t3, i3) {
            const a3 = t3.context, s3 = a3.gl, o2 = Fi.unblended, r2 = new Oi(s3.LEQUAL, Oi.ReadWrite, [0, 1]), n2 = i3.getTerrainMesh(), l2 = i3.getCoordsTexture(), h2 = i3.sourceCache.getRenderableTiles(), c2 = t3.useProgram("terrainCoords");
            a3.bindFramebuffer.set(i3.getFramebuffer("coords").framebuffer), a3.viewport.set([0, 0, t3.width / devicePixelRatio, t3.height / devicePixelRatio]), a3.clear({ color: e.aM.transparent, depth: 1 }), i3.coordsIndex = [];
            for (const e2 of h2) {
              const h3 = i3.getTerrainData(e2.tileID);
              a3.activeTexture.set(s3.TEXTURE0), s3.bindTexture(s3.TEXTURE_2D, l2.texture);
              const u3 = { u_matrix: t3.transform.calculatePosMatrix(e2.tileID.toUnwrapped()), u_terrain_coords_id: (255 - i3.coordsIndex.length) / 255, u_texture: 0, u_ele_delta: i3.getMeshFrameDelta(t3.transform.zoom) };
              c2.draw(a3, s3.TRIANGLES, r2, Ui.disabled, o2, ji.backCCW, u3, h3, "terrain", n2.vertexBuffer, n2.indexBuffer, n2.segments), i3.coordsIndex.push(e2.tileID.key);
            }
            a3.bindFramebuffer.set(null), a3.viewport.set([0, 0, t3.width, t3.height]);
          }(this, this.style.map.terrain));
        }
        renderLayer(t2, i2, a2, s2) {
          if (!a2.isHidden(this.transform.zoom) && ("background" === a2.type || "custom" === a2.type || (s2 || []).length)) switch (this.id = a2.id, a2.type) {
            case "symbol":
              !function(t3, i3, a3, s3, o2) {
                if ("translucent" !== t3.renderPass) return;
                const r2 = Ui.disabled, n2 = t3.colorModeForRenderPass();
                (a3._unevaluatedLayout.hasValue("text-variable-anchor") || a3._unevaluatedLayout.hasValue("text-variable-anchor-offset")) && function(t4, i4, a4, s4, o3, r3, n3, l2, h2) {
                  const c2 = i4.transform, u3 = ie2(), d2 = "map" === o3, _2 = "map" === r3;
                  for (const o4 of t4) {
                    const t5 = s4.getTile(o4), r4 = t5.getBucket(a4);
                    if (!r4 || !r4.text || !r4.text.segments.get().length) continue;
                    const p3 = e.ag(r4.textSizeData, c2.zoom), m2 = Bt(t5, 1, i4.transform.zoom), f2 = gt(o4.posMatrix, _2, d2, i4.transform, m2), g2 = "none" !== a4.layout.get("icon-text-fit") && r4.hasIconData();
                    if (p3) {
                      const e2 = Math.pow(2, c2.zoom - t5.tileID.overscaledZ), a5 = i4.style.map.terrain ? (t6, e3) => i4.style.map.terrain.getElevation(o4, t6, e3) : null, s5 = u3.translatePosition(c2, t5, n3, l2);
                      Wi(r4, d2, _2, h2, c2, f2, o4.posMatrix, e2, p3, g2, u3, s5, o4.toUnwrapped(), a5);
                    }
                  }
                }(s3, t3, a3, i3, a3.layout.get("text-rotation-alignment"), a3.layout.get("text-pitch-alignment"), a3.paint.get("text-translate"), a3.paint.get("text-translate-anchor"), o2), 0 !== a3.paint.get("icon-opacity").constantOr(1) && Xi(t3, i3, a3, s3, false, a3.paint.get("icon-translate"), a3.paint.get("icon-translate-anchor"), a3.layout.get("icon-rotation-alignment"), a3.layout.get("icon-pitch-alignment"), a3.layout.get("icon-keep-upright"), r2, n2), 0 !== a3.paint.get("text-opacity").constantOr(1) && Xi(t3, i3, a3, s3, true, a3.paint.get("text-translate"), a3.paint.get("text-translate-anchor"), a3.layout.get("text-rotation-alignment"), a3.layout.get("text-pitch-alignment"), a3.layout.get("text-keep-upright"), r2, n2), i3.map.showCollisionBoxes && (qi(t3, i3, a3, s3, true), qi(t3, i3, a3, s3, false));
              }(t2, i2, a2, s2, this.style.placement.variableOffsets);
              break;
            case "circle":
              !function(t3, i3, a3, s3) {
                if ("translucent" !== t3.renderPass) return;
                const o2 = a3.paint.get("circle-opacity"), r2 = a3.paint.get("circle-stroke-width"), n2 = a3.paint.get("circle-stroke-opacity"), l2 = !a3.layout.get("circle-sort-key").isConstant();
                if (0 === o2.constantOr(1) && (0 === r2.constantOr(1) || 0 === n2.constantOr(1))) return;
                const h2 = t3.context, c2 = h2.gl, u3 = t3.depthModeForSublayer(0, Oi.ReadOnly), d2 = Ui.disabled, _2 = t3.colorModeForRenderPass(), p3 = [];
                for (let o3 = 0; o3 < s3.length; o3++) {
                  const r3 = s3[o3], n3 = i3.getTile(r3), h3 = n3.getBucket(a3);
                  if (!h3) continue;
                  const c3 = h3.programConfigurations.get(a3.id), u4 = t3.useProgram("circle", c3), d3 = h3.layoutVertexBuffer, _3 = h3.indexBuffer, m2 = t3.style.map.terrain && t3.style.map.terrain.getTerrainData(r3), f2 = { programConfiguration: c3, program: u4, layoutVertexBuffer: d3, indexBuffer: _3, uniformValues: Ce2(t3, r3, n3, a3), terrainData: m2 };
                  if (l2) {
                    const t4 = h3.segments.get();
                    for (const i4 of t4) p3.push({ segments: new e.a0([i4]), sortKey: i4.sortKey, state: f2 });
                  } else p3.push({ segments: h3.segments, sortKey: 0, state: f2 });
                }
                l2 && p3.sort((t4, e2) => t4.sortKey - e2.sortKey);
                for (const e2 of p3) {
                  const { programConfiguration: i4, program: s4, layoutVertexBuffer: o3, indexBuffer: r3, uniformValues: n3, terrainData: l3 } = e2.state;
                  s4.draw(h2, c2.TRIANGLES, u3, d2, _2, ji.disabled, n3, l3, a3.id, o3, r3, e2.segments, a3.paint, t3.transform.zoom, i4);
                }
              }(t2, i2, a2, s2);
              break;
            case "heatmap":
              !function(t3, i3, a3, s3) {
                if (0 === a3.paint.get("heatmap-opacity")) return;
                const o2 = t3.context;
                if (t3.style.map.terrain) {
                  for (const e2 of s3) {
                    const s4 = i3.getTile(e2);
                    i3.hasRenderableParent(e2) || ("offscreen" === t3.renderPass ? Ji(t3, s4, a3, e2) : "translucent" === t3.renderPass && Yi(t3, a3, e2));
                  }
                  o2.viewport.set([0, 0, t3.width, t3.height]);
                } else "offscreen" === t3.renderPass ? function(t4, i4, a4, s4) {
                  const o3 = t4.context, r2 = o3.gl, n2 = Ui.disabled, l2 = new Fi([r2.ONE, r2.ONE], e.aM.transparent, [true, true, true, true]);
                  (function(t5, i5, a5) {
                    const s5 = t5.gl;
                    t5.activeTexture.set(s5.TEXTURE1), t5.viewport.set([0, 0, i5.width / 4, i5.height / 4]);
                    let o4 = a5.heatmapFbos.get(e.aU);
                    o4 ? (s5.bindTexture(s5.TEXTURE_2D, o4.colorAttachment.get()), t5.bindFramebuffer.set(o4.framebuffer)) : (o4 = Qi(t5, i5.width / 4, i5.height / 4), a5.heatmapFbos.set(e.aU, o4));
                  })(o3, t4, a4), o3.clear({ color: e.aM.transparent });
                  for (let e2 = 0; e2 < s4.length; e2++) {
                    const h2 = s4[e2];
                    if (i4.hasRenderableParent(h2)) continue;
                    const c2 = i4.getTile(h2), u3 = c2.getBucket(a4);
                    if (!u3) continue;
                    const d2 = u3.programConfigurations.get(a4.id), _2 = t4.useProgram("heatmap", d2), { zoom: p3 } = t4.transform;
                    _2.draw(o3, r2.TRIANGLES, Oi.disabled, n2, l2, ji.disabled, Me2(h2.posMatrix, c2, p3, a4.paint.get("heatmap-intensity")), null, a4.id, u3.layoutVertexBuffer, u3.indexBuffer, u3.segments, a4.paint, t4.transform.zoom, d2);
                  }
                  o3.viewport.set([0, 0, t4.width, t4.height]);
                }(t3, i3, a3, s3) : "translucent" === t3.renderPass && function(t4, i4) {
                  const a4 = t4.context, s4 = a4.gl;
                  a4.setColorMode(t4.colorModeForRenderPass());
                  const o3 = i4.heatmapFbos.get(e.aU);
                  o3 && (a4.activeTexture.set(s4.TEXTURE0), s4.bindTexture(s4.TEXTURE_2D, o3.colorAttachment.get()), a4.activeTexture.set(s4.TEXTURE1), ta(a4, i4).bind(s4.LINEAR, s4.CLAMP_TO_EDGE), t4.useProgram("heatmapTexture").draw(a4, s4.TRIANGLES, Oi.disabled, Ui.disabled, t4.colorModeForRenderPass(), ji.disabled, Ae2(t4, i4, 0, 1), null, i4.id, t4.viewportBuffer, t4.quadTriangleIndexBuffer, t4.viewportSegments, i4.paint, t4.transform.zoom));
                }(t3, a3);
              }(t2, i2, a2, s2);
              break;
            case "line":
              !function(t3, i3, a3, s3) {
                if ("translucent" !== t3.renderPass) return;
                const o2 = a3.paint.get("line-opacity"), r2 = a3.paint.get("line-width");
                if (0 === o2.constantOr(1) || 0 === r2.constantOr(1)) return;
                const n2 = t3.depthModeForSublayer(0, Oi.ReadOnly), l2 = t3.colorModeForRenderPass(), h2 = a3.paint.get("line-dasharray"), c2 = a3.paint.get("line-pattern"), u3 = c2.constantOr(1), d2 = a3.paint.get("line-gradient"), _2 = a3.getCrossfadeParameters(), p3 = u3 ? "linePattern" : h2 ? "lineSDF" : d2 ? "lineGradient" : "line", m2 = t3.context, f2 = m2.gl;
                let g2 = true;
                for (const o3 of s3) {
                  const s4 = i3.getTile(o3);
                  if (u3 && !s4.patternsLoaded()) continue;
                  const r3 = s4.getBucket(a3);
                  if (!r3) continue;
                  const v2 = r3.programConfigurations.get(a3.id), x2 = t3.context.program.get(), y2 = t3.useProgram(p3, v2), w3 = g2 || y2.program !== x2, T2 = t3.style.map.terrain && t3.style.map.terrain.getTerrainData(o3), I2 = c2.constantOr(null);
                  if (I2 && s4.imageAtlas) {
                    const t4 = s4.imageAtlas, e2 = t4.patternPositions[I2.to.toString()], i4 = t4.patternPositions[I2.from.toString()];
                    e2 && i4 && v2.setConstantPatternPositions(e2, i4);
                  }
                  const E2 = T2 ? o3 : null, P3 = u3 ? Fe(t3, s4, a3, _2, E2) : h2 ? Be(t3, s4, a3, h2, _2, E2) : d2 ? Le2(t3, s4, a3, r3.lineClipsArray.length, E2) : ke(t3, s4, a3, E2);
                  if (u3) m2.activeTexture.set(f2.TEXTURE0), s4.imageAtlasTexture.bind(f2.LINEAR, f2.CLAMP_TO_EDGE), v2.updatePaintBuffers(_2);
                  else if (h2 && (w3 || t3.lineAtlas.dirty)) m2.activeTexture.set(f2.TEXTURE0), t3.lineAtlas.bind(m2);
                  else if (d2) {
                    const s5 = r3.gradients[a3.id];
                    let n3 = s5.texture;
                    if (a3.gradientVersion !== s5.version) {
                      let l3 = 256;
                      if (a3.stepInterpolant) {
                        const a4 = i3.getSource().maxzoom, s6 = o3.canonical.z === a4 ? Math.ceil(1 << t3.transform.maxZoom - o3.canonical.z) : 1;
                        l3 = e.ac(e.aV(r3.maxLineLength / e.X * 1024 * s6), 256, m2.maxTextureSize);
                      }
                      s5.gradient = e.aW({ expression: a3.gradientExpression(), evaluationKey: "lineProgress", resolution: l3, image: s5.gradient || void 0, clips: r3.lineClipsArray }), s5.texture ? s5.texture.update(s5.gradient) : s5.texture = new b(m2, s5.gradient, f2.RGBA), s5.version = a3.gradientVersion, n3 = s5.texture;
                    }
                    m2.activeTexture.set(f2.TEXTURE0), n3.bind(a3.stepInterpolant ? f2.NEAREST : f2.LINEAR, f2.CLAMP_TO_EDGE);
                  }
                  y2.draw(m2, f2.TRIANGLES, n2, t3.stencilModeForClipping(o3), l2, ji.disabled, P3, T2, a3.id, r3.layoutVertexBuffer, r3.indexBuffer, r3.segments, a3.paint, t3.transform.zoom, v2, r3.layoutVertexBuffer2), g2 = false;
                }
              }(t2, i2, a2, s2);
              break;
            case "fill":
              !function(t3, i3, a3, s3) {
                const o2 = a3.paint.get("fill-color"), r2 = a3.paint.get("fill-opacity");
                if (0 === r2.constantOr(1)) return;
                const n2 = t3.colorModeForRenderPass(), l2 = a3.paint.get("fill-pattern"), h2 = t3.opaquePassEnabledForLayer() && !l2.constantOr(1) && 1 === o2.constantOr(e.aM.transparent).a && 1 === r2.constantOr(0) ? "opaque" : "translucent";
                if (t3.renderPass === h2) {
                  const e2 = t3.depthModeForSublayer(1, "opaque" === t3.renderPass ? Oi.ReadWrite : Oi.ReadOnly);
                  ia(t3, i3, a3, s3, e2, n2, false);
                }
                if ("translucent" === t3.renderPass && a3.paint.get("fill-antialias")) {
                  const e2 = t3.depthModeForSublayer(a3.getPaintProperty("fill-outline-color") ? 2 : 0, Oi.ReadOnly);
                  ia(t3, i3, a3, s3, e2, n2, true);
                }
              }(t2, i2, a2, s2);
              break;
            case "fill-extrusion":
              !function(t3, e2, i3, a3) {
                const s3 = i3.paint.get("fill-extrusion-opacity");
                if (0 !== s3 && "translucent" === t3.renderPass) {
                  const o2 = new Oi(t3.context.gl.LEQUAL, Oi.ReadWrite, t3.depthRangeFor3D);
                  if (1 !== s3 || i3.paint.get("fill-extrusion-pattern").constantOr(1)) aa(t3, e2, i3, a3, o2, Ui.disabled, Fi.disabled), aa(t3, e2, i3, a3, o2, t3.stencilModeFor3D(), t3.colorModeForRenderPass());
                  else {
                    const s4 = t3.colorModeForRenderPass();
                    aa(t3, e2, i3, a3, o2, Ui.disabled, s4);
                  }
                }
              }(t2, i2, a2, s2);
              break;
            case "hillshade":
              !function(t3, e2, i3, a3) {
                if ("offscreen" !== t3.renderPass && "translucent" !== t3.renderPass) return;
                const s3 = t3.context, o2 = t3.depthModeForSublayer(0, Oi.ReadOnly), r2 = t3.colorModeForRenderPass(), [n2, l2] = "translucent" === t3.renderPass ? t3.stencilConfigForOverlap(a3) : [{}, a3];
                for (const a4 of l2) {
                  const s4 = e2.getTile(a4);
                  void 0 !== s4.needsHillshadePrepare && s4.needsHillshadePrepare && "offscreen" === t3.renderPass ? oa(t3, s4, i3, o2, Ui.disabled, r2) : "translucent" === t3.renderPass && sa(t3, a4, s4, i3, o2, n2[a4.overscaledZ], r2);
                }
                s3.viewport.set([0, 0, t3.width, t3.height]);
              }(t2, i2, a2, s2);
              break;
            case "raster":
              !function(t3, e2, i3, a3) {
                if ("translucent" !== t3.renderPass) return;
                if (0 === i3.paint.get("raster-opacity")) return;
                if (!a3.length) return;
                const s3 = t3.context, o2 = s3.gl, r2 = e2.getSource(), n2 = t3.useProgram("raster"), l2 = t3.colorModeForRenderPass(), [h2, c2] = r2 instanceof Q ? [{}, a3] : t3.stencilConfigForOverlap(a3), u3 = c2[c2.length - 1].overscaledZ, d2 = !t3.options.moving;
                for (const a4 of c2) {
                  const c3 = t3.depthModeForSublayer(a4.overscaledZ - u3, 1 === i3.paint.get("raster-opacity") ? Oi.ReadWrite : Oi.ReadOnly, o2.LESS), _2 = e2.getTile(a4);
                  _2.registerFadeDuration(i3.paint.get("raster-fade-duration"));
                  const p3 = e2.findLoadedParent(a4, 0), m2 = e2.findLoadedSibling(a4), f2 = ra(_2, p3 || m2 || null, e2, i3, t3.transform, t3.style.map.terrain);
                  let g2, v2;
                  const x2 = "nearest" === i3.paint.get("raster-resampling") ? o2.NEAREST : o2.LINEAR;
                  s3.activeTexture.set(o2.TEXTURE0), _2.texture.bind(x2, o2.CLAMP_TO_EDGE, o2.LINEAR_MIPMAP_NEAREST), s3.activeTexture.set(o2.TEXTURE1), p3 ? (p3.texture.bind(x2, o2.CLAMP_TO_EDGE, o2.LINEAR_MIPMAP_NEAREST), g2 = Math.pow(2, p3.tileID.overscaledZ - _2.tileID.overscaledZ), v2 = [_2.tileID.canonical.x * g2 % 1, _2.tileID.canonical.y * g2 % 1]) : _2.texture.bind(x2, o2.CLAMP_TO_EDGE, o2.LINEAR_MIPMAP_NEAREST), _2.texture.useMipmap && s3.extTextureFilterAnisotropic && t3.transform.pitch > 20 && o2.texParameterf(o2.TEXTURE_2D, s3.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, s3.extTextureFilterAnisotropicMax);
                  const y2 = t3.style.map.terrain && t3.style.map.terrain.getTerrainData(a4), b2 = y2 ? a4 : null, w3 = b2 ? b2.posMatrix : t3.transform.calculatePosMatrix(a4.toUnwrapped(), d2), T2 = Ue2(w3, v2 || [0, 0], g2 || 1, f2, i3);
                  r2 instanceof Q ? n2.draw(s3, o2.TRIANGLES, c3, Ui.disabled, l2, ji.disabled, T2, y2, i3.id, r2.boundsBuffer, t3.quadTriangleIndexBuffer, r2.boundsSegments) : n2.draw(s3, o2.TRIANGLES, c3, h2[a4.overscaledZ], l2, ji.disabled, T2, y2, i3.id, t3.rasterBoundsBuffer, t3.quadTriangleIndexBuffer, t3.rasterBoundsSegments);
                }
              }(t2, i2, a2, s2);
              break;
            case "background":
              !function(t3, e2, i3, a3) {
                const s3 = i3.paint.get("background-color"), o2 = i3.paint.get("background-opacity");
                if (0 === o2) return;
                const r2 = t3.context, n2 = r2.gl, l2 = t3.transform, h2 = l2.tileSize, c2 = i3.paint.get("background-pattern");
                if (t3.isPatternMissing(c2)) return;
                const u3 = !c2 && 1 === s3.a && 1 === o2 && t3.opaquePassEnabledForLayer() ? "opaque" : "translucent";
                if (t3.renderPass !== u3) return;
                const d2 = Ui.disabled, _2 = t3.depthModeForSublayer(0, "opaque" === u3 ? Oi.ReadWrite : Oi.ReadOnly), p3 = t3.colorModeForRenderPass(), m2 = t3.useProgram(c2 ? "backgroundPattern" : "background"), f2 = a3 || l2.coveringTiles({ tileSize: h2, terrain: t3.style.map.terrain });
                c2 && (r2.activeTexture.set(n2.TEXTURE0), t3.imageManager.bind(t3.context));
                const g2 = i3.getCrossfadeParameters();
                for (const e3 of f2) {
                  const l3 = a3 ? e3.posMatrix : t3.transform.calculatePosMatrix(e3.toUnwrapped()), u4 = c2 ? He2(l3, o2, t3, c2, { tileID: e3, tileSize: h2 }, g2) : Ge(l3, o2, s3), f3 = t3.style.map.terrain && t3.style.map.terrain.getTerrainData(e3);
                  m2.draw(r2, n2.TRIANGLES, _2, d2, p3, ji.disabled, u4, f3, i3.id, t3.tileExtentBuffer, t3.quadTriangleIndexBuffer, t3.tileExtentSegments);
                }
              }(t2, 0, a2, s2);
              break;
            case "custom":
              !function(t3, e2, i3) {
                const a3 = t3.context, s3 = i3.implementation;
                if ("offscreen" === t3.renderPass) {
                  const e3 = s3.prerender;
                  e3 && (t3.setCustomLayerDefaults(), a3.setColorMode(t3.colorModeForRenderPass()), e3.call(s3, a3.gl, t3.transform.customLayerMatrix()), a3.setDirty(), t3.setBaseState());
                } else if ("translucent" === t3.renderPass) {
                  t3.setCustomLayerDefaults(), a3.setColorMode(t3.colorModeForRenderPass()), a3.setStencilMode(Ui.disabled);
                  const e3 = "3d" === s3.renderingMode ? new Oi(t3.context.gl.LEQUAL, Oi.ReadWrite, t3.depthRangeFor3D) : t3.depthModeForSublayer(0, Oi.ReadOnly);
                  a3.setDepthMode(e3), s3.render(a3.gl, t3.transform.customLayerMatrix(), { farZ: t3.transform.farZ, nearZ: t3.transform.nearZ, fov: t3.transform._fov, modelViewProjectionMatrix: t3.transform.modelViewProjectionMatrix, projectionMatrix: t3.transform.projectionMatrix }), a3.setDirty(), t3.setBaseState(), a3.bindFramebuffer.set(null);
                }
              }(t2, 0, a2);
          }
        }
        translatePosMatrix(t2, i2, a2, s2, o2) {
          if (!a2[0] && !a2[1]) return t2;
          const r2 = o2 ? "map" === s2 ? this.transform.angle : 0 : "viewport" === s2 ? -this.transform.angle : 0;
          if (r2) {
            const t3 = Math.sin(r2), e2 = Math.cos(r2);
            a2 = [a2[0] * e2 - a2[1] * t3, a2[0] * t3 + a2[1] * e2];
          }
          const n2 = [o2 ? a2[0] : Bt(i2, a2[0], this.transform.zoom), o2 ? a2[1] : Bt(i2, a2[1], this.transform.zoom), 0], l2 = new Float32Array(16);
          return e.J(l2, t2, n2), l2;
        }
        saveTileTexture(t2) {
          const e2 = this._tileTextures[t2.size[0]];
          e2 ? e2.push(t2) : this._tileTextures[t2.size[0]] = [t2];
        }
        getTileTexture(t2) {
          const e2 = this._tileTextures[t2];
          return e2 && e2.length > 0 ? e2.pop() : null;
        }
        isPatternMissing(t2) {
          if (!t2) return false;
          if (!t2.from || !t2.to) return true;
          const e2 = this.imageManager.getPattern(t2.from.toString()), i2 = this.imageManager.getPattern(t2.to.toString());
          return !e2 || !i2;
        }
        useProgram(t2, e2) {
          this.cache = this.cache || {};
          const i2 = t2 + (e2 ? e2.cacheKey : "") + (this._showOverdrawInspector ? "/overdraw" : "") + (this.style.map.terrain ? "/terrain" : "");
          return this.cache[i2] || (this.cache[i2] = new xe2(this.context, pe2[t2], e2, We2[t2], this._showOverdrawInspector, this.style.map.terrain)), this.cache[i2];
        }
        setCustomLayerDefaults() {
          this.context.unbindVAO(), this.context.cullFace.setDefault(), this.context.activeTexture.setDefault(), this.context.pixelStoreUnpack.setDefault(), this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.context.pixelStoreUnpackFlipY.setDefault();
        }
        setBaseState() {
          const t2 = this.context.gl;
          this.context.cullFace.set(false), this.context.viewport.set([0, 0, this.width, this.height]), this.context.blendEquation.set(t2.FUNC_ADD);
        }
        initDebugOverlayCanvas() {
          null == this.debugOverlayCanvas && (this.debugOverlayCanvas = document.createElement("canvas"), this.debugOverlayCanvas.width = 512, this.debugOverlayCanvas.height = 512, this.debugOverlayTexture = new b(this.context, this.debugOverlayCanvas, this.context.gl.RGBA));
        }
        destroy() {
          this.debugOverlayTexture && this.debugOverlayTexture.destroy();
        }
        overLimit() {
          const { drawingBufferWidth: t2, drawingBufferHeight: e2 } = this.context.gl;
          return this.width !== t2 || this.height !== e2;
        }
      }
      class xa {
        constructor(t2, e2) {
          this.points = t2, this.planes = e2;
        }
        static fromInvProjectionMatrix(t2, i2, a2) {
          const s2 = Math.pow(2, a2), o2 = [[-1, 1, -1, 1], [1, 1, -1, 1], [1, -1, -1, 1], [-1, -1, -1, 1], [-1, 1, 1, 1], [1, 1, 1, 1], [1, -1, 1, 1], [-1, -1, 1, 1]].map((a3) => {
            const o3 = 1 / (a3 = e.af([], a3, t2))[3] / i2 * s2;
            return e.b1(a3, a3, [o3, o3, 1 / a3[3], o3]);
          }), r2 = [[0, 1, 2], [6, 5, 4], [0, 3, 7], [2, 1, 5], [3, 2, 6], [0, 4, 5]].map((t3) => {
            const e2 = function(t4, e3) {
              var i4 = e3[0], a4 = e3[1], s4 = e3[2], o3 = i4 * i4 + a4 * a4 + s4 * s4;
              return o3 > 0 && (o3 = 1 / Math.sqrt(o3)), t4[0] = e3[0] * o3, t4[1] = e3[1] * o3, t4[2] = e3[2] * o3, t4;
            }([], function(t4, e3, i4) {
              var a4 = e3[0], s4 = e3[1], o3 = e3[2], r3 = i4[0], n2 = i4[1], l2 = i4[2];
              return t4[0] = s4 * l2 - o3 * n2, t4[1] = o3 * r3 - a4 * l2, t4[2] = a4 * n2 - s4 * r3, t4;
            }([], g([], o2[t3[0]], o2[t3[1]]), g([], o2[t3[2]], o2[t3[1]]))), i3 = -((a3 = e2)[0] * (s3 = o2[t3[1]])[0] + a3[1] * s3[1] + a3[2] * s3[2]);
            var a3, s3;
            return e2.concat(i3);
          });
          return new xa(o2, r2);
        }
      }
      class ya {
        constructor(t2, e2) {
          this.min = t2, this.max = e2, this.center = function(t3, e3, i2) {
            return t3[0] = 0.5 * e3[0], t3[1] = 0.5 * e3[1], t3[2] = 0.5 * e3[2], t3;
          }([], function(t3, e3, i2) {
            return t3[0] = e3[0] + i2[0], t3[1] = e3[1] + i2[1], t3[2] = e3[2] + i2[2], t3;
          }([], this.min, this.max));
        }
        quadrant(t2) {
          const e2 = [t2 % 2 == 0, t2 < 2], i2 = m(this.min), a2 = m(this.max);
          for (let t3 = 0; t3 < e2.length; t3++) i2[t3] = e2[t3] ? this.min[t3] : this.center[t3], a2[t3] = e2[t3] ? this.center[t3] : this.max[t3];
          return a2[2] = this.max[2], new ya(i2, a2);
        }
        distanceX(t2) {
          return Math.max(Math.min(this.max[0], t2[0]), this.min[0]) - t2[0];
        }
        distanceY(t2) {
          return Math.max(Math.min(this.max[1], t2[1]), this.min[1]) - t2[1];
        }
        intersects(t2) {
          const i2 = [[this.min[0], this.min[1], this.min[2], 1], [this.max[0], this.min[1], this.min[2], 1], [this.max[0], this.max[1], this.min[2], 1], [this.min[0], this.max[1], this.min[2], 1], [this.min[0], this.min[1], this.max[2], 1], [this.max[0], this.min[1], this.max[2], 1], [this.max[0], this.max[1], this.max[2], 1], [this.min[0], this.max[1], this.max[2], 1]];
          let a2 = true;
          for (let s2 = 0; s2 < t2.planes.length; s2++) {
            const o2 = t2.planes[s2];
            let r2 = 0;
            for (let t3 = 0; t3 < i2.length; t3++) e.b2(o2, i2[t3]) >= 0 && r2++;
            if (0 === r2) return 0;
            r2 !== i2.length && (a2 = false);
          }
          if (a2) return 2;
          for (let e2 = 0; e2 < 3; e2++) {
            let i3 = Number.MAX_VALUE, a3 = -Number.MAX_VALUE;
            for (let s2 = 0; s2 < t2.points.length; s2++) {
              const o2 = t2.points[s2][e2] - this.min[e2];
              i3 = Math.min(i3, o2), a3 = Math.max(a3, o2);
            }
            if (a3 < 0 || i3 > this.max[e2] - this.min[e2]) return 0;
          }
          return 1;
        }
      }
      class ba {
        constructor(t2 = 0, e2 = 0, i2 = 0, a2 = 0) {
          if (isNaN(t2) || t2 < 0 || isNaN(e2) || e2 < 0 || isNaN(i2) || i2 < 0 || isNaN(a2) || a2 < 0) throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");
          this.top = t2, this.bottom = e2, this.left = i2, this.right = a2;
        }
        interpolate(t2, i2, a2) {
          return null != i2.top && null != t2.top && (this.top = e.y.number(t2.top, i2.top, a2)), null != i2.bottom && null != t2.bottom && (this.bottom = e.y.number(t2.bottom, i2.bottom, a2)), null != i2.left && null != t2.left && (this.left = e.y.number(t2.left, i2.left, a2)), null != i2.right && null != t2.right && (this.right = e.y.number(t2.right, i2.right, a2)), this;
        }
        getCenter(t2, i2) {
          const a2 = e.ac((this.left + t2 - this.right) / 2, 0, t2), s2 = e.ac((this.top + i2 - this.bottom) / 2, 0, i2);
          return new e.P(a2, s2);
        }
        equals(t2) {
          return this.top === t2.top && this.bottom === t2.bottom && this.left === t2.left && this.right === t2.right;
        }
        clone() {
          return new ba(this.top, this.bottom, this.left, this.right);
        }
        toJSON() {
          return { top: this.top, bottom: this.bottom, left: this.left, right: this.right };
        }
      }
      const wa = 85.051129;
      class Ta {
        constructor(t2, i2, a2, s2, o2) {
          this.tileSize = 512, this._renderWorldCopies = void 0 === o2 || !!o2, this._minZoom = t2 || 0, this._maxZoom = i2 || 22, this._minPitch = null == a2 ? 0 : a2, this._maxPitch = null == s2 ? 60 : s2, this.setMaxBounds(), this.width = 0, this.height = 0, this._center = new e.N(0, 0), this._elevation = 0, this.zoom = 0, this.angle = 0, this._fov = 0.6435011087932844, this._pitch = 0, this._unmodified = true, this._edgeInsets = new ba(), this._posMatrixCache = {}, this._alignedPosMatrixCache = {}, this._fogMatrixCache = {}, this.minElevationForCurrentTile = 0;
        }
        clone() {
          const t2 = new Ta(this._minZoom, this._maxZoom, this._minPitch, this.maxPitch, this._renderWorldCopies);
          return t2.apply(this), t2;
        }
        apply(t2) {
          this.tileSize = t2.tileSize, this.latRange = t2.latRange, this.lngRange = t2.lngRange, this.width = t2.width, this.height = t2.height, this._center = t2._center, this._elevation = t2._elevation, this.minElevationForCurrentTile = t2.minElevationForCurrentTile, this.zoom = t2.zoom, this.angle = t2.angle, this._fov = t2._fov, this._pitch = t2._pitch, this._unmodified = t2._unmodified, this._edgeInsets = t2._edgeInsets.clone(), this._calcMatrices();
        }
        get minZoom() {
          return this._minZoom;
        }
        set minZoom(t2) {
          this._minZoom !== t2 && (this._minZoom = t2, this.zoom = Math.max(this.zoom, t2));
        }
        get maxZoom() {
          return this._maxZoom;
        }
        set maxZoom(t2) {
          this._maxZoom !== t2 && (this._maxZoom = t2, this.zoom = Math.min(this.zoom, t2));
        }
        get minPitch() {
          return this._minPitch;
        }
        set minPitch(t2) {
          this._minPitch !== t2 && (this._minPitch = t2, this.pitch = Math.max(this.pitch, t2));
        }
        get maxPitch() {
          return this._maxPitch;
        }
        set maxPitch(t2) {
          this._maxPitch !== t2 && (this._maxPitch = t2, this.pitch = Math.min(this.pitch, t2));
        }
        get renderWorldCopies() {
          return this._renderWorldCopies;
        }
        set renderWorldCopies(t2) {
          void 0 === t2 ? t2 = true : null === t2 && (t2 = false), this._renderWorldCopies = t2;
        }
        get worldSize() {
          return this.tileSize * this.scale;
        }
        get centerOffset() {
          return this.centerPoint._sub(this.size._div(2));
        }
        get size() {
          return new e.P(this.width, this.height);
        }
        get bearing() {
          return -this.angle / Math.PI * 180;
        }
        set bearing(t2) {
          const i2 = -e.b3(t2, -180, 180) * Math.PI / 180;
          this.angle !== i2 && (this._unmodified = false, this.angle = i2, this._calcMatrices(), this.rotationMatrix = function() {
            var t3 = new e.A(4);
            return e.A != Float32Array && (t3[1] = 0, t3[2] = 0), t3[0] = 1, t3[3] = 1, t3;
          }(), function(t3, e2, i3) {
            var a2 = e2[0], s2 = e2[1], o2 = e2[2], r2 = e2[3], n2 = Math.sin(i3), l2 = Math.cos(i3);
            t3[0] = a2 * l2 + o2 * n2, t3[1] = s2 * l2 + r2 * n2, t3[2] = a2 * -n2 + o2 * l2, t3[3] = s2 * -n2 + r2 * l2;
          }(this.rotationMatrix, this.rotationMatrix, this.angle));
        }
        get pitch() {
          return this._pitch / Math.PI * 180;
        }
        set pitch(t2) {
          const i2 = e.ac(t2, this.minPitch, this.maxPitch) / 180 * Math.PI;
          this._pitch !== i2 && (this._unmodified = false, this._pitch = i2, this._calcMatrices());
        }
        get fov() {
          return this._fov / Math.PI * 180;
        }
        set fov(t2) {
          t2 = Math.max(0.01, Math.min(60, t2)), this._fov !== t2 && (this._unmodified = false, this._fov = t2 / 180 * Math.PI, this._calcMatrices());
        }
        get zoom() {
          return this._zoom;
        }
        set zoom(t2) {
          const e2 = Math.min(Math.max(t2, this.minZoom), this.maxZoom);
          this._zoom !== e2 && (this._unmodified = false, this._zoom = e2, this.tileZoom = Math.max(0, Math.floor(e2)), this.scale = this.zoomScale(e2), this._constrain(), this._calcMatrices());
        }
        get center() {
          return this._center;
        }
        set center(t2) {
          t2.lat === this._center.lat && t2.lng === this._center.lng || (this._unmodified = false, this._center = t2, this._constrain(), this._calcMatrices());
        }
        get elevation() {
          return this._elevation;
        }
        set elevation(t2) {
          t2 !== this._elevation && (this._elevation = t2, this._constrain(), this._calcMatrices());
        }
        get padding() {
          return this._edgeInsets.toJSON();
        }
        set padding(t2) {
          this._edgeInsets.equals(t2) || (this._unmodified = false, this._edgeInsets.interpolate(this._edgeInsets, t2, 1), this._calcMatrices());
        }
        get centerPoint() {
          return this._edgeInsets.getCenter(this.width, this.height);
        }
        isPaddingEqual(t2) {
          return this._edgeInsets.equals(t2);
        }
        interpolatePadding(t2, e2, i2) {
          this._unmodified = false, this._edgeInsets.interpolate(t2, e2, i2), this._constrain(), this._calcMatrices();
        }
        coveringZoomLevel(t2) {
          const e2 = (t2.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / t2.tileSize));
          return Math.max(0, e2);
        }
        getVisibleUnwrappedCoordinates(t2) {
          const i2 = [new e.b4(0, t2)];
          if (this._renderWorldCopies) {
            const a2 = this.pointCoordinate(new e.P(0, 0)), s2 = this.pointCoordinate(new e.P(this.width, 0)), o2 = this.pointCoordinate(new e.P(this.width, this.height)), r2 = this.pointCoordinate(new e.P(0, this.height)), n2 = Math.floor(Math.min(a2.x, s2.x, o2.x, r2.x)), l2 = Math.floor(Math.max(a2.x, s2.x, o2.x, r2.x)), h2 = 1;
            for (let a3 = n2 - h2; a3 <= l2 + h2; a3++) 0 !== a3 && i2.push(new e.b4(a3, t2));
          }
          return i2;
        }
        coveringTiles(t2) {
          var i2, a2;
          let s2 = this.coveringZoomLevel(t2);
          const o2 = s2;
          if (void 0 !== t2.minzoom && s2 < t2.minzoom) return [];
          void 0 !== t2.maxzoom && s2 > t2.maxzoom && (s2 = t2.maxzoom);
          const r2 = this.pointCoordinate(this.getCameraPoint()), n2 = e.Z.fromLngLat(this.center), l2 = Math.pow(2, s2), h2 = [l2 * r2.x, l2 * r2.y, 0], c2 = [l2 * n2.x, l2 * n2.y, 0], u3 = xa.fromInvProjectionMatrix(this.invModelViewProjectionMatrix, this.worldSize, s2);
          let d2 = t2.minzoom || 0;
          !t2.terrain && this.pitch <= 60 && this._edgeInsets.top < 0.1 && (d2 = s2);
          const _2 = t2.terrain ? 2 / Math.min(this.tileSize, t2.tileSize) * this.tileSize : 3, p3 = (t3) => ({ aabb: new ya([t3 * l2, 0, 0], [(t3 + 1) * l2, l2, 0]), zoom: 0, x: 0, y: 0, wrap: t3, fullyVisible: false }), m2 = [], f2 = [], g2 = s2, x2 = t2.reparseOverscaled ? o2 : s2;
          if (this._renderWorldCopies) for (let t3 = 1; t3 <= 3; t3++) m2.push(p3(-t3)), m2.push(p3(t3));
          for (m2.push(p3(0)); m2.length > 0; ) {
            const s3 = m2.pop(), o3 = s3.x, r3 = s3.y;
            let n3 = s3.fullyVisible;
            if (!n3) {
              const t3 = s3.aabb.intersects(u3);
              if (0 === t3) continue;
              n3 = 2 === t3;
            }
            const l3 = t2.terrain ? h2 : c2, p4 = s3.aabb.distanceX(l3), y2 = s3.aabb.distanceY(l3), b2 = Math.max(Math.abs(p4), Math.abs(y2));
            if (s3.zoom === g2 || b2 > _2 + (1 << g2 - s3.zoom) - 2 && s3.zoom >= d2) {
              const t3 = g2 - s3.zoom, i3 = h2[0] - 0.5 - (o3 << t3), a3 = h2[1] - 0.5 - (r3 << t3);
              f2.push({ tileID: new e.S(s3.zoom === g2 ? x2 : s3.zoom, s3.wrap, s3.zoom, o3, r3), distanceSq: v([c2[0] - 0.5 - o3, c2[1] - 0.5 - r3]), tileDistanceToCamera: Math.sqrt(i3 * i3 + a3 * a3) });
            } else for (let l4 = 0; l4 < 4; l4++) {
              const h3 = (o3 << 1) + l4 % 2, c3 = (r3 << 1) + (l4 >> 1), u4 = s3.zoom + 1;
              let d3 = s3.aabb.quadrant(l4);
              if (t2.terrain) {
                const o4 = new e.S(u4, s3.wrap, u4, h3, c3), r4 = t2.terrain.getMinMaxElevation(o4), n4 = null !== (i2 = r4.minElevation) && void 0 !== i2 ? i2 : this.elevation, l5 = null !== (a2 = r4.maxElevation) && void 0 !== a2 ? a2 : this.elevation;
                d3 = new ya([d3.min[0], d3.min[1], n4], [d3.max[0], d3.max[1], l5]);
              }
              m2.push({ aabb: d3, zoom: u4, x: h3, y: c3, wrap: s3.wrap, fullyVisible: n3 });
            }
          }
          return f2.sort((t3, e2) => t3.distanceSq - e2.distanceSq).map((t3) => t3.tileID);
        }
        resize(t2, e2) {
          this.width = t2, this.height = e2, this.pixelsToGLUnits = [2 / t2, -2 / e2], this._constrain(), this._calcMatrices();
        }
        get unmodified() {
          return this._unmodified;
        }
        zoomScale(t2) {
          return Math.pow(2, t2);
        }
        scaleZoom(t2) {
          return Math.log(t2) / Math.LN2;
        }
        project(t2) {
          const i2 = e.ac(t2.lat, -85.051129, wa);
          return new e.P(e.O(t2.lng) * this.worldSize, e.Q(i2) * this.worldSize);
        }
        unproject(t2) {
          return new e.Z(t2.x / this.worldSize, t2.y / this.worldSize).toLngLat();
        }
        get point() {
          return this.project(this.center);
        }
        getCameraPosition() {
          return { lngLat: this.pointLocation(this.getCameraPoint()), altitude: Math.cos(this._pitch) * this.cameraToCenterDistance / this._pixelPerMeter + this.elevation };
        }
        recalculateZoom(t2) {
          const i2 = this.elevation, a2 = Math.cos(this._pitch) * this.cameraToCenterDistance / this._pixelPerMeter, s2 = this.pointLocation(this.centerPoint, t2), o2 = t2.getElevationForLngLatZoom(s2, this.tileZoom);
          if (!(this.elevation - o2)) return;
          const r2 = a2 + i2 - o2, n2 = Math.cos(this._pitch) * this.cameraToCenterDistance / r2 / e.b5(1, s2.lat), l2 = this.scaleZoom(n2 / this.tileSize);
          this._elevation = o2, this._center = s2, this.zoom = l2;
        }
        setLocationAtPoint(t2, i2) {
          const a2 = this.pointCoordinate(i2), s2 = this.pointCoordinate(this.centerPoint), o2 = this.locationCoordinate(t2), r2 = new e.Z(o2.x - (a2.x - s2.x), o2.y - (a2.y - s2.y));
          this.center = this.coordinateLocation(r2), this._renderWorldCopies && (this.center = this.center.wrap());
        }
        locationPoint(t2, e2) {
          return e2 ? this.coordinatePoint(this.locationCoordinate(t2), e2.getElevationForLngLatZoom(t2, this.tileZoom), this.pixelMatrix3D) : this.coordinatePoint(this.locationCoordinate(t2));
        }
        pointLocation(t2, e2) {
          return this.coordinateLocation(this.pointCoordinate(t2, e2));
        }
        locationCoordinate(t2) {
          return e.Z.fromLngLat(t2);
        }
        coordinateLocation(t2) {
          return t2 && t2.toLngLat();
        }
        pointCoordinate(t2, i2) {
          if (i2) {
            const e2 = i2.pointCoordinate(t2);
            if (null != e2) return e2;
          }
          const a2 = [t2.x, t2.y, 0, 1], s2 = [t2.x, t2.y, 1, 1];
          e.af(a2, a2, this.pixelMatrixInverse), e.af(s2, s2, this.pixelMatrixInverse);
          const o2 = a2[3], r2 = s2[3], n2 = a2[1] / o2, l2 = s2[1] / r2, h2 = a2[2] / o2, c2 = s2[2] / r2, u3 = h2 === c2 ? 0 : (0 - h2) / (c2 - h2);
          return new e.Z(e.y.number(a2[0] / o2, s2[0] / r2, u3) / this.worldSize, e.y.number(n2, l2, u3) / this.worldSize);
        }
        coordinatePoint(t2, i2 = 0, a2 = this.pixelMatrix) {
          const s2 = [t2.x * this.worldSize, t2.y * this.worldSize, i2, 1];
          return e.af(s2, s2, a2), new e.P(s2[0] / s2[3], s2[1] / s2[3]);
        }
        getBounds() {
          const t2 = Math.max(0, this.height / 2 - this.getHorizon());
          return new H().extend(this.pointLocation(new e.P(0, t2))).extend(this.pointLocation(new e.P(this.width, t2))).extend(this.pointLocation(new e.P(this.width, this.height))).extend(this.pointLocation(new e.P(0, this.height)));
        }
        getMaxBounds() {
          return this.latRange && 2 === this.latRange.length && this.lngRange && 2 === this.lngRange.length ? new H([this.lngRange[0], this.latRange[0]], [this.lngRange[1], this.latRange[1]]) : null;
        }
        getHorizon() {
          return Math.tan(Math.PI / 2 - this._pitch) * this.cameraToCenterDistance * 0.85;
        }
        setMaxBounds(t2) {
          t2 ? (this.lngRange = [t2.getWest(), t2.getEast()], this.latRange = [t2.getSouth(), t2.getNorth()], this._constrain()) : (this.lngRange = null, this.latRange = [-85.051129, wa]);
        }
        calculateTileMatrix(t2) {
          const i2 = t2.canonical, a2 = this.worldSize / this.zoomScale(i2.z), s2 = i2.x + Math.pow(2, i2.z) * t2.wrap, o2 = e.an(new Float64Array(16));
          return e.J(o2, o2, [s2 * a2, i2.y * a2, 0]), e.K(o2, o2, [a2 / e.X, a2 / e.X, 1]), o2;
        }
        calculatePosMatrix(t2, i2 = false) {
          const a2 = t2.key, s2 = i2 ? this._alignedPosMatrixCache : this._posMatrixCache;
          if (s2[a2]) return s2[a2];
          const o2 = this.calculateTileMatrix(t2);
          return e.L(o2, i2 ? this.alignedModelViewProjectionMatrix : this.modelViewProjectionMatrix, o2), s2[a2] = new Float32Array(o2), s2[a2];
        }
        calculateFogMatrix(t2) {
          const i2 = t2.key, a2 = this._fogMatrixCache;
          if (a2[i2]) return a2[i2];
          const s2 = this.calculateTileMatrix(t2);
          return e.L(s2, this.fogMatrix, s2), a2[i2] = new Float32Array(s2), a2[i2];
        }
        customLayerMatrix() {
          return this.mercatorMatrix.slice();
        }
        getConstrained(t2, i2) {
          i2 = e.ac(+i2, this.minZoom, this.maxZoom);
          const a2 = { center: new e.N(t2.lng, t2.lat), zoom: i2 };
          let s2 = this.lngRange;
          if (!this._renderWorldCopies && null === s2) {
            const t3 = 180 - 1e-10;
            s2 = [-t3, t3];
          }
          const o2 = this.tileSize * this.zoomScale(a2.zoom);
          let r2 = 0, n2 = o2, l2 = 0, h2 = o2, c2 = 0, u3 = 0;
          const { x: d2, y: _2 } = this.size;
          if (this.latRange) {
            const t3 = this.latRange;
            r2 = e.Q(t3[1]) * o2, n2 = e.Q(t3[0]) * o2, n2 - r2 < _2 && (c2 = _2 / (n2 - r2));
          }
          s2 && (l2 = e.b3(e.O(s2[0]) * o2, 0, o2), h2 = e.b3(e.O(s2[1]) * o2, 0, o2), h2 < l2 && (h2 += o2), h2 - l2 < d2 && (u3 = d2 / (h2 - l2)));
          const { x: p3, y: m2 } = this.project.call({ worldSize: o2 }, t2);
          let f2, g2;
          const v2 = Math.max(u3 || 0, c2 || 0);
          if (v2) {
            const t3 = new e.P(u3 ? (h2 + l2) / 2 : p3, c2 ? (n2 + r2) / 2 : m2);
            return a2.center = this.unproject.call({ worldSize: o2 }, t3).wrap(), a2.zoom += this.scaleZoom(v2), a2;
          }
          if (this.latRange) {
            const t3 = _2 / 2;
            m2 - t3 < r2 && (g2 = r2 + t3), m2 + t3 > n2 && (g2 = n2 - t3);
          }
          if (s2) {
            const t3 = (l2 + h2) / 2;
            let i3 = p3;
            this._renderWorldCopies && (i3 = e.b3(p3, t3 - o2 / 2, t3 + o2 / 2));
            const a3 = d2 / 2;
            i3 - a3 < l2 && (f2 = l2 + a3), i3 + a3 > h2 && (f2 = h2 - a3);
          }
          if (void 0 !== f2 || void 0 !== g2) {
            const t3 = new e.P(null != f2 ? f2 : p3, null != g2 ? g2 : m2);
            a2.center = this.unproject.call({ worldSize: o2 }, t3).wrap();
          }
          return a2;
        }
        _constrain() {
          if (!this.center || !this.width || !this.height || this._constraining) return;
          this._constraining = true;
          const t2 = this._unmodified, { center: e2, zoom: i2 } = this.getConstrained(this.center, this.zoom);
          this.center = e2, this.zoom = i2, this._unmodified = t2, this._constraining = false;
        }
        _calcMatrices() {
          if (!this.height) return;
          const t2 = this.centerOffset, i2 = this.point.x, a2 = this.point.y;
          this.cameraToCenterDistance = 0.5 / Math.tan(this._fov / 2) * this.height, this._pixelPerMeter = e.b5(1, this.center.lat) * this.worldSize;
          let s2 = e.an(new Float64Array(16));
          e.K(s2, s2, [this.width / 2, -this.height / 2, 1]), e.J(s2, s2, [1, -1, 0]), this.labelPlaneMatrix = s2, s2 = e.an(new Float64Array(16)), e.K(s2, s2, [1, -1, 1]), e.J(s2, s2, [-1, -1, 0]), e.K(s2, s2, [2 / this.width, 2 / this.height, 1]), this.glCoordMatrix = s2;
          const o2 = this.cameraToCenterDistance + this._elevation * this._pixelPerMeter / Math.cos(this._pitch), r2 = Math.min(this.elevation, this.minElevationForCurrentTile), n2 = o2 - r2 * this._pixelPerMeter / Math.cos(this._pitch), l2 = r2 < 0 ? n2 : o2, h2 = Math.PI / 2 + this._pitch, c2 = this._fov * (0.5 + t2.y / this.height), u3 = Math.sin(c2) * l2 / Math.sin(e.ac(Math.PI - h2 - c2, 0.01, Math.PI - 0.01)), d2 = this.getHorizon(), _2 = 2 * Math.atan(d2 / this.cameraToCenterDistance) * (0.5 + t2.y / (2 * d2)), p3 = Math.sin(_2) * l2 / Math.sin(e.ac(Math.PI - h2 - _2, 0.01, Math.PI - 0.01)), m2 = Math.min(u3, p3);
          this.farZ = 1.01 * (Math.cos(Math.PI / 2 - this._pitch) * m2 + l2), this.nearZ = this.height / 50, s2 = new Float64Array(16), e.b6(s2, this._fov, this.width / this.height, this.nearZ, this.farZ), s2[8] = 2 * -t2.x / this.width, s2[9] = 2 * t2.y / this.height, this.projectionMatrix = e.ae(s2), e.K(s2, s2, [1, -1, 1]), e.J(s2, s2, [0, 0, -this.cameraToCenterDistance]), e.b7(s2, s2, this._pitch), e.ad(s2, s2, this.angle), e.J(s2, s2, [-i2, -a2, 0]), this.mercatorMatrix = e.K([], s2, [this.worldSize, this.worldSize, this.worldSize]), e.K(s2, s2, [1, 1, this._pixelPerMeter]), this.pixelMatrix = e.L(new Float64Array(16), this.labelPlaneMatrix, s2), e.J(s2, s2, [0, 0, -this.elevation]), this.modelViewProjectionMatrix = s2, this.invModelViewProjectionMatrix = e.as([], s2), this.fogMatrix = new Float64Array(16), e.b6(this.fogMatrix, this._fov, this.width / this.height, o2, this.farZ), this.fogMatrix[8] = 2 * -t2.x / this.width, this.fogMatrix[9] = 2 * t2.y / this.height, e.K(this.fogMatrix, this.fogMatrix, [1, -1, 1]), e.J(this.fogMatrix, this.fogMatrix, [0, 0, -this.cameraToCenterDistance]), e.b7(this.fogMatrix, this.fogMatrix, this._pitch), e.ad(this.fogMatrix, this.fogMatrix, this.angle), e.J(this.fogMatrix, this.fogMatrix, [-i2, -a2, 0]), e.K(this.fogMatrix, this.fogMatrix, [1, 1, this._pixelPerMeter]), e.J(this.fogMatrix, this.fogMatrix, [0, 0, -this.elevation]), this.pixelMatrix3D = e.L(new Float64Array(16), this.labelPlaneMatrix, s2);
          const f2 = this.width % 2 / 2, g2 = this.height % 2 / 2, v2 = Math.cos(this.angle), x2 = Math.sin(this.angle), y2 = i2 - Math.round(i2) + v2 * f2 + x2 * g2, b2 = a2 - Math.round(a2) + v2 * g2 + x2 * f2, w3 = new Float64Array(s2);
          if (e.J(w3, w3, [y2 > 0.5 ? y2 - 1 : y2, b2 > 0.5 ? b2 - 1 : b2, 0]), this.alignedModelViewProjectionMatrix = w3, s2 = e.as(new Float64Array(16), this.pixelMatrix), !s2) throw new Error("failed to invert matrix");
          this.pixelMatrixInverse = s2, this._posMatrixCache = {}, this._alignedPosMatrixCache = {}, this._fogMatrixCache = {};
        }
        maxPitchScaleFactor() {
          if (!this.pixelMatrixInverse) return 1;
          const t2 = this.pointCoordinate(new e.P(0, 0)), i2 = [t2.x * this.worldSize, t2.y * this.worldSize, 0, 1];
          return e.af(i2, i2, this.pixelMatrix)[3] / this.cameraToCenterDistance;
        }
        getCameraPoint() {
          const t2 = Math.tan(this._pitch) * (this.cameraToCenterDistance || 1);
          return this.centerPoint.add(new e.P(0, t2));
        }
        getCameraQueryGeometry(t2) {
          const i2 = this.getCameraPoint();
          if (1 === t2.length) return [t2[0], i2];
          {
            let a2 = i2.x, s2 = i2.y, o2 = i2.x, r2 = i2.y;
            for (const e2 of t2) a2 = Math.min(a2, e2.x), s2 = Math.min(s2, e2.y), o2 = Math.max(o2, e2.x), r2 = Math.max(r2, e2.y);
            return [new e.P(a2, s2), new e.P(o2, s2), new e.P(o2, r2), new e.P(a2, r2), new e.P(a2, s2)];
          }
        }
        lngLatToCameraDepth(t2, i2) {
          const a2 = this.locationCoordinate(t2), s2 = [a2.x * this.worldSize, a2.y * this.worldSize, i2, 1];
          return e.af(s2, s2, this.modelViewProjectionMatrix), s2[2] / s2[3];
        }
      }
      function Ia(t2, e2) {
        let i2, a2 = false, s2 = null, o2 = null;
        const r2 = () => {
          s2 = null, a2 && (t2.apply(o2, i2), s2 = setTimeout(r2, e2), a2 = false);
        };
        return (...t3) => (a2 = true, o2 = this, i2 = t3, s2 || r2(), s2);
      }
      class Ea {
        constructor(t2) {
          this._getCurrentHash = () => {
            const t3 = window.location.hash.replace("#", "");
            if (this._hashName) {
              let e2;
              return t3.split("&").map((t4) => t4.split("=")).forEach((t4) => {
                t4[0] === this._hashName && (e2 = t4);
              }), (e2 && e2[1] || "").split("/");
            }
            return t3.split("/");
          }, this._onHashChange = () => {
            const t3 = this._getCurrentHash();
            if (t3.length >= 3 && !t3.some((t4) => isNaN(t4))) {
              const e2 = this._map.dragRotate.isEnabled() && this._map.touchZoomRotate.isEnabled() ? +(t3[3] || 0) : this._map.getBearing();
              return this._map.jumpTo({ center: [+t3[2], +t3[1]], zoom: +t3[0], bearing: e2, pitch: +(t3[4] || 0) }), true;
            }
            return false;
          }, this._updateHashUnthrottled = () => {
            const t3 = window.location.href.replace(/(#.*)?$/, this.getHashString());
            window.history.replaceState(window.history.state, null, t3);
          }, this._removeHash = () => {
            const t3 = this._getCurrentHash();
            if (0 === t3.length) return;
            const e2 = t3.join("/");
            let i2 = e2;
            i2.split("&").length > 0 && (i2 = i2.split("&")[0]), this._hashName && (i2 = `${this._hashName}=${e2}`);
            let a2 = window.location.hash.replace(i2, "");
            a2.startsWith("#&") ? a2 = a2.slice(0, 1) + a2.slice(2) : "#" === a2 && (a2 = "");
            let s2 = window.location.href.replace(/(#.+)?$/, a2);
            s2 = s2.replace("&&", "&"), window.history.replaceState(window.history.state, null, s2);
          }, this._updateHash = Ia(this._updateHashUnthrottled, 300), this._hashName = t2 && encodeURIComponent(t2);
        }
        addTo(t2) {
          return this._map = t2, addEventListener("hashchange", this._onHashChange, false), this._map.on("moveend", this._updateHash), this;
        }
        remove() {
          return removeEventListener("hashchange", this._onHashChange, false), this._map.off("moveend", this._updateHash), clearTimeout(this._updateHash()), this._removeHash(), delete this._map, this;
        }
        getHashString(t2) {
          const e2 = this._map.getCenter(), i2 = Math.round(100 * this._map.getZoom()) / 100, a2 = Math.ceil((i2 * Math.LN2 + Math.log(512 / 360 / 0.5)) / Math.LN10), s2 = Math.pow(10, a2), o2 = Math.round(e2.lng * s2) / s2, r2 = Math.round(e2.lat * s2) / s2, n2 = this._map.getBearing(), l2 = this._map.getPitch();
          let h2 = "";
          if (h2 += t2 ? `/${o2}/${r2}/${i2}` : `${i2}/${r2}/${o2}`, (n2 || l2) && (h2 += "/" + Math.round(10 * n2) / 10), l2 && (h2 += `/${Math.round(l2)}`), this._hashName) {
            const t3 = this._hashName;
            let e3 = false;
            const i3 = window.location.hash.slice(1).split("&").map((i4) => {
              const a3 = i4.split("=")[0];
              return a3 === t3 ? (e3 = true, `${a3}=${h2}`) : i4;
            }).filter((t4) => t4);
            return e3 || i3.push(`${t3}=${h2}`), `#${i3.join("&")}`;
          }
          return `#${h2}`;
        }
      }
      const Pa = { linearity: 0.3, easing: e.b8(0, 0, 0.3, 1) }, Ca = e.e({ deceleration: 2500, maxSpeed: 1400 }, Pa), Sa = e.e({ deceleration: 20, maxSpeed: 1400 }, Pa), za = e.e({ deceleration: 1e3, maxSpeed: 360 }, Pa), Da = e.e({ deceleration: 1e3, maxSpeed: 90 }, Pa);
      class Ma {
        constructor(t2) {
          this._map = t2, this.clear();
        }
        clear() {
          this._inertiaBuffer = [];
        }
        record(t2) {
          this._drainInertiaBuffer(), this._inertiaBuffer.push({ time: o.now(), settings: t2 });
        }
        _drainInertiaBuffer() {
          const t2 = this._inertiaBuffer, e2 = o.now();
          for (; t2.length > 0 && e2 - t2[0].time > 160; ) t2.shift();
        }
        _onMoveEnd(t2) {
          if (this._drainInertiaBuffer(), this._inertiaBuffer.length < 2) return;
          const i2 = { zoom: 0, bearing: 0, pitch: 0, pan: new e.P(0, 0), pinchAround: void 0, around: void 0 };
          for (const { settings: t3 } of this._inertiaBuffer) i2.zoom += t3.zoomDelta || 0, i2.bearing += t3.bearingDelta || 0, i2.pitch += t3.pitchDelta || 0, t3.panDelta && i2.pan._add(t3.panDelta), t3.around && (i2.around = t3.around), t3.pinchAround && (i2.pinchAround = t3.pinchAround);
          const a2 = this._inertiaBuffer[this._inertiaBuffer.length - 1].time - this._inertiaBuffer[0].time, s2 = {};
          if (i2.pan.mag()) {
            const o2 = Ra(i2.pan.mag(), a2, e.e({}, Ca, t2 || {}));
            s2.offset = i2.pan.mult(o2.amount / i2.pan.mag()), s2.center = this._map.transform.center, Aa(s2, o2);
          }
          if (i2.zoom) {
            const t3 = Ra(i2.zoom, a2, Sa);
            s2.zoom = this._map.transform.zoom + t3.amount, Aa(s2, t3);
          }
          if (i2.bearing) {
            const t3 = Ra(i2.bearing, a2, za);
            s2.bearing = this._map.transform.bearing + e.ac(t3.amount, -179, 179), Aa(s2, t3);
          }
          if (i2.pitch) {
            const t3 = Ra(i2.pitch, a2, Da);
            s2.pitch = this._map.transform.pitch + t3.amount, Aa(s2, t3);
          }
          if (s2.zoom || s2.bearing) {
            const t3 = void 0 === i2.pinchAround ? i2.around : i2.pinchAround;
            s2.around = t3 ? this._map.unproject(t3) : this._map.getCenter();
          }
          return this.clear(), e.e(s2, { noMoveStart: true });
        }
      }
      function Aa(t2, e2) {
        (!t2.duration || t2.duration < e2.duration) && (t2.duration = e2.duration, t2.easing = e2.easing);
      }
      function Ra(t2, i2, a2) {
        const { maxSpeed: s2, linearity: o2, deceleration: r2 } = a2, n2 = e.ac(t2 * o2 / (i2 / 1e3), -s2, s2), l2 = Math.abs(n2) / (r2 * o2);
        return { easing: a2.easing, duration: 1e3 * l2, amount: n2 * (l2 / 2) };
      }
      class ka extends e.k {
        preventDefault() {
          this._defaultPrevented = true;
        }
        get defaultPrevented() {
          return this._defaultPrevented;
        }
        constructor(t2, i2, a2, s2 = {}) {
          const o2 = r.mousePos(i2.getCanvas(), a2), n2 = i2.unproject(o2);
          super(t2, e.e({ point: o2, lngLat: n2, originalEvent: a2 }, s2)), this._defaultPrevented = false, this.target = i2;
        }
      }
      class La extends e.k {
        preventDefault() {
          this._defaultPrevented = true;
        }
        get defaultPrevented() {
          return this._defaultPrevented;
        }
        constructor(t2, i2, a2) {
          const s2 = "touchend" === t2 ? a2.changedTouches : a2.touches, o2 = r.touchPos(i2.getCanvasContainer(), s2), n2 = o2.map((t3) => i2.unproject(t3)), l2 = o2.reduce((t3, e2, i3, a3) => t3.add(e2.div(a3.length)), new e.P(0, 0));
          super(t2, { points: o2, point: l2, lngLats: n2, lngLat: i2.unproject(l2), originalEvent: a2 }), this._defaultPrevented = false;
        }
      }
      class Fa extends e.k {
        preventDefault() {
          this._defaultPrevented = true;
        }
        get defaultPrevented() {
          return this._defaultPrevented;
        }
        constructor(t2, e2, i2) {
          super(t2, { originalEvent: i2 }), this._defaultPrevented = false;
        }
      }
      class Ba {
        constructor(t2, e2) {
          this._map = t2, this._clickTolerance = e2.clickTolerance;
        }
        reset() {
          delete this._mousedownPos;
        }
        wheel(t2) {
          return this._firePreventable(new Fa(t2.type, this._map, t2));
        }
        mousedown(t2, e2) {
          return this._mousedownPos = e2, this._firePreventable(new ka(t2.type, this._map, t2));
        }
        mouseup(t2) {
          this._map.fire(new ka(t2.type, this._map, t2));
        }
        click(t2, e2) {
          this._mousedownPos && this._mousedownPos.dist(e2) >= this._clickTolerance || this._map.fire(new ka(t2.type, this._map, t2));
        }
        dblclick(t2) {
          return this._firePreventable(new ka(t2.type, this._map, t2));
        }
        mouseover(t2) {
          this._map.fire(new ka(t2.type, this._map, t2));
        }
        mouseout(t2) {
          this._map.fire(new ka(t2.type, this._map, t2));
        }
        touchstart(t2) {
          return this._firePreventable(new La(t2.type, this._map, t2));
        }
        touchmove(t2) {
          this._map.fire(new La(t2.type, this._map, t2));
        }
        touchend(t2) {
          this._map.fire(new La(t2.type, this._map, t2));
        }
        touchcancel(t2) {
          this._map.fire(new La(t2.type, this._map, t2));
        }
        _firePreventable(t2) {
          if (this._map.fire(t2), t2.defaultPrevented) return {};
        }
        isEnabled() {
          return true;
        }
        isActive() {
          return false;
        }
        enable() {
        }
        disable() {
        }
      }
      class Oa {
        constructor(t2) {
          this._map = t2;
        }
        reset() {
          this._delayContextMenu = false, this._ignoreContextMenu = true, delete this._contextMenuEvent;
        }
        mousemove(t2) {
          this._map.fire(new ka(t2.type, this._map, t2));
        }
        mousedown() {
          this._delayContextMenu = true, this._ignoreContextMenu = false;
        }
        mouseup() {
          this._delayContextMenu = false, this._contextMenuEvent && (this._map.fire(new ka("contextmenu", this._map, this._contextMenuEvent)), delete this._contextMenuEvent);
        }
        contextmenu(t2) {
          this._delayContextMenu ? this._contextMenuEvent = t2 : this._ignoreContextMenu || this._map.fire(new ka(t2.type, this._map, t2)), this._map.listens("contextmenu") && t2.preventDefault();
        }
        isEnabled() {
          return true;
        }
        isActive() {
          return false;
        }
        enable() {
        }
        disable() {
        }
      }
      class Na {
        constructor(t2) {
          this._map = t2;
        }
        get transform() {
          return this._map._requestedCameraState || this._map.transform;
        }
        get center() {
          return { lng: this.transform.center.lng, lat: this.transform.center.lat };
        }
        get zoom() {
          return this.transform.zoom;
        }
        get pitch() {
          return this.transform.pitch;
        }
        get bearing() {
          return this.transform.bearing;
        }
        unproject(t2) {
          return this.transform.pointLocation(e.P.convert(t2), this._map.terrain);
        }
      }
      class Ua {
        constructor(t2, e2) {
          this._map = t2, this._tr = new Na(t2), this._el = t2.getCanvasContainer(), this._container = t2.getContainer(), this._clickTolerance = e2.clickTolerance || 1;
        }
        isEnabled() {
          return !!this._enabled;
        }
        isActive() {
          return !!this._active;
        }
        enable() {
          this.isEnabled() || (this._enabled = true);
        }
        disable() {
          this.isEnabled() && (this._enabled = false);
        }
        mousedown(t2, e2) {
          this.isEnabled() && t2.shiftKey && 0 === t2.button && (r.disableDrag(), this._startPos = this._lastPos = e2, this._active = true);
        }
        mousemoveWindow(t2, e2) {
          if (!this._active) return;
          const i2 = e2;
          if (this._lastPos.equals(i2) || !this._box && i2.dist(this._startPos) < this._clickTolerance) return;
          const a2 = this._startPos;
          this._lastPos = i2, this._box || (this._box = r.create("div", "maplibregl-boxzoom", this._container), this._container.classList.add("maplibregl-crosshair"), this._fireEvent("boxzoomstart", t2));
          const s2 = Math.min(a2.x, i2.x), o2 = Math.max(a2.x, i2.x), n2 = Math.min(a2.y, i2.y), l2 = Math.max(a2.y, i2.y);
          r.setTransform(this._box, `translate(${s2}px,${n2}px)`), this._box.style.width = o2 - s2 + "px", this._box.style.height = l2 - n2 + "px";
        }
        mouseupWindow(t2, i2) {
          if (!this._active) return;
          if (0 !== t2.button) return;
          const a2 = this._startPos, s2 = i2;
          if (this.reset(), r.suppressClick(), a2.x !== s2.x || a2.y !== s2.y) return this._map.fire(new e.k("boxzoomend", { originalEvent: t2 })), { cameraAnimation: (t3) => t3.fitScreenCoordinates(a2, s2, this._tr.bearing, { linear: true }) };
          this._fireEvent("boxzoomcancel", t2);
        }
        keydown(t2) {
          this._active && 27 === t2.keyCode && (this.reset(), this._fireEvent("boxzoomcancel", t2));
        }
        reset() {
          this._active = false, this._container.classList.remove("maplibregl-crosshair"), this._box && (r.remove(this._box), this._box = null), r.enableDrag(), delete this._startPos, delete this._lastPos;
        }
        _fireEvent(t2, i2) {
          return this._map.fire(new e.k(t2, { originalEvent: i2 }));
        }
      }
      function ja(t2, e2) {
        if (t2.length !== e2.length) throw new Error(`The number of touches and points are not equal - touches ${t2.length}, points ${e2.length}`);
        const i2 = {};
        for (let a2 = 0; a2 < t2.length; a2++) i2[t2[a2].identifier] = e2[a2];
        return i2;
      }
      class Za {
        constructor(t2) {
          this.reset(), this.numTouches = t2.numTouches;
        }
        reset() {
          delete this.centroid, delete this.startTime, delete this.touches, this.aborted = false;
        }
        touchstart(t2, i2, a2) {
          (this.centroid || a2.length > this.numTouches) && (this.aborted = true), this.aborted || (void 0 === this.startTime && (this.startTime = t2.timeStamp), a2.length === this.numTouches && (this.centroid = function(t3) {
            const i3 = new e.P(0, 0);
            for (const e2 of t3) i3._add(e2);
            return i3.div(t3.length);
          }(i2), this.touches = ja(a2, i2)));
        }
        touchmove(t2, e2, i2) {
          if (this.aborted || !this.centroid) return;
          const a2 = ja(i2, e2);
          for (const t3 in this.touches) {
            const e3 = a2[t3];
            (!e3 || e3.dist(this.touches[t3]) > 30) && (this.aborted = true);
          }
        }
        touchend(t2, e2, i2) {
          if ((!this.centroid || t2.timeStamp - this.startTime > 500) && (this.aborted = true), 0 === i2.length) {
            const t3 = !this.aborted && this.centroid;
            if (this.reset(), t3) return t3;
          }
        }
      }
      class qa {
        constructor(t2) {
          this.singleTap = new Za(t2), this.numTaps = t2.numTaps, this.reset();
        }
        reset() {
          this.lastTime = 1 / 0, delete this.lastTap, this.count = 0, this.singleTap.reset();
        }
        touchstart(t2, e2, i2) {
          this.singleTap.touchstart(t2, e2, i2);
        }
        touchmove(t2, e2, i2) {
          this.singleTap.touchmove(t2, e2, i2);
        }
        touchend(t2, e2, i2) {
          const a2 = this.singleTap.touchend(t2, e2, i2);
          if (a2) {
            const e3 = t2.timeStamp - this.lastTime < 500, i3 = !this.lastTap || this.lastTap.dist(a2) < 30;
            if (e3 && i3 || this.reset(), this.count++, this.lastTime = t2.timeStamp, this.lastTap = a2, this.count === this.numTaps) return this.reset(), a2;
          }
        }
      }
      class Va {
        constructor(t2) {
          this._tr = new Na(t2), this._zoomIn = new qa({ numTouches: 1, numTaps: 2 }), this._zoomOut = new qa({ numTouches: 2, numTaps: 1 }), this.reset();
        }
        reset() {
          this._active = false, this._zoomIn.reset(), this._zoomOut.reset();
        }
        touchstart(t2, e2, i2) {
          this._zoomIn.touchstart(t2, e2, i2), this._zoomOut.touchstart(t2, e2, i2);
        }
        touchmove(t2, e2, i2) {
          this._zoomIn.touchmove(t2, e2, i2), this._zoomOut.touchmove(t2, e2, i2);
        }
        touchend(t2, e2, i2) {
          const a2 = this._zoomIn.touchend(t2, e2, i2), s2 = this._zoomOut.touchend(t2, e2, i2), o2 = this._tr;
          return a2 ? (this._active = true, t2.preventDefault(), setTimeout(() => this.reset(), 0), { cameraAnimation: (e3) => e3.easeTo({ duration: 300, zoom: o2.zoom + 1, around: o2.unproject(a2) }, { originalEvent: t2 }) }) : s2 ? (this._active = true, t2.preventDefault(), setTimeout(() => this.reset(), 0), { cameraAnimation: (e3) => e3.easeTo({ duration: 300, zoom: o2.zoom - 1, around: o2.unproject(s2) }, { originalEvent: t2 }) }) : void 0;
        }
        touchcancel() {
          this.reset();
        }
        enable() {
          this._enabled = true;
        }
        disable() {
          this._enabled = false, this.reset();
        }
        isEnabled() {
          return this._enabled;
        }
        isActive() {
          return this._active;
        }
      }
      class Ga {
        constructor(t2) {
          this._enabled = !!t2.enable, this._moveStateManager = t2.moveStateManager, this._clickTolerance = t2.clickTolerance || 1, this._moveFunction = t2.move, this._activateOnStart = !!t2.activateOnStart, t2.assignEvents(this), this.reset();
        }
        reset(t2) {
          this._active = false, this._moved = false, delete this._lastPoint, this._moveStateManager.endMove(t2);
        }
        _move(...t2) {
          const e2 = this._moveFunction(...t2);
          if (e2.bearingDelta || e2.pitchDelta || e2.around || e2.panDelta) return this._active = true, e2;
        }
        dragStart(t2, e2) {
          this.isEnabled() && !this._lastPoint && this._moveStateManager.isValidStartEvent(t2) && (this._moveStateManager.startMove(t2), this._lastPoint = e2.length ? e2[0] : e2, this._activateOnStart && this._lastPoint && (this._active = true));
        }
        dragMove(t2, e2) {
          if (!this.isEnabled()) return;
          const i2 = this._lastPoint;
          if (!i2) return;
          if (t2.preventDefault(), !this._moveStateManager.isValidMoveEvent(t2)) return void this.reset(t2);
          const a2 = e2.length ? e2[0] : e2;
          return !this._moved && a2.dist(i2) < this._clickTolerance ? void 0 : (this._moved = true, this._lastPoint = a2, this._move(i2, a2));
        }
        dragEnd(t2) {
          this.isEnabled() && this._lastPoint && this._moveStateManager.isValidEndEvent(t2) && (this._moved && r.suppressClick(), this.reset(t2));
        }
        enable() {
          this._enabled = true;
        }
        disable() {
          this._enabled = false, this.reset();
        }
        isEnabled() {
          return this._enabled;
        }
        isActive() {
          return this._active;
        }
        getClickTolerance() {
          return this._clickTolerance;
        }
      }
      const Ha = { 0: 1, 2: 2 };
      class Wa {
        constructor(t2) {
          this._correctEvent = t2.checkCorrectEvent;
        }
        startMove(t2) {
          const e2 = r.mouseButton(t2);
          this._eventButton = e2;
        }
        endMove(t2) {
          delete this._eventButton;
        }
        isValidStartEvent(t2) {
          return this._correctEvent(t2);
        }
        isValidMoveEvent(t2) {
          return !function(t3, e2) {
            const i2 = Ha[e2];
            return void 0 === t3.buttons || (t3.buttons & i2) !== i2;
          }(t2, this._eventButton);
        }
        isValidEndEvent(t2) {
          return r.mouseButton(t2) === this._eventButton;
        }
      }
      class $a {
        constructor() {
          this._firstTouch = void 0;
        }
        _isOneFingerTouch(t2) {
          return 1 === t2.targetTouches.length;
        }
        _isSameTouchEvent(t2) {
          return t2.targetTouches[0].identifier === this._firstTouch;
        }
        startMove(t2) {
          this._firstTouch = t2.targetTouches[0].identifier;
        }
        endMove(t2) {
          delete this._firstTouch;
        }
        isValidStartEvent(t2) {
          return this._isOneFingerTouch(t2);
        }
        isValidMoveEvent(t2) {
          return this._isOneFingerTouch(t2) && this._isSameTouchEvent(t2);
        }
        isValidEndEvent(t2) {
          return this._isOneFingerTouch(t2) && this._isSameTouchEvent(t2);
        }
      }
      const Xa = (t2) => {
        t2.mousedown = t2.dragStart, t2.mousemoveWindow = t2.dragMove, t2.mouseup = t2.dragEnd, t2.contextmenu = (t3) => {
          t3.preventDefault();
        };
      }, Ka = ({ enable: t2, clickTolerance: e2, bearingDegreesPerPixelMoved: i2 = 0.8 }) => {
        const a2 = new Wa({ checkCorrectEvent: (t3) => 0 === r.mouseButton(t3) && t3.ctrlKey || 2 === r.mouseButton(t3) });
        return new Ga({ clickTolerance: e2, move: (t3, e3) => ({ bearingDelta: (e3.x - t3.x) * i2 }), moveStateManager: a2, enable: t2, assignEvents: Xa });
      }, Ja = ({ enable: t2, clickTolerance: e2, pitchDegreesPerPixelMoved: i2 = -0.5 }) => {
        const a2 = new Wa({ checkCorrectEvent: (t3) => 0 === r.mouseButton(t3) && t3.ctrlKey || 2 === r.mouseButton(t3) });
        return new Ga({ clickTolerance: e2, move: (t3, e3) => ({ pitchDelta: (e3.y - t3.y) * i2 }), moveStateManager: a2, enable: t2, assignEvents: Xa });
      };
      class Ya {
        constructor(t2, e2) {
          this._clickTolerance = t2.clickTolerance || 1, this._map = e2, this.reset();
        }
        reset() {
          this._active = false, this._touches = {}, this._sum = new e.P(0, 0);
        }
        _shouldBePrevented(t2) {
          return t2 < (this._map.cooperativeGestures.isEnabled() ? 2 : 1);
        }
        touchstart(t2, e2, i2) {
          return this._calculateTransform(t2, e2, i2);
        }
        touchmove(t2, e2, i2) {
          if (this._active) {
            if (!this._shouldBePrevented(i2.length)) return t2.preventDefault(), this._calculateTransform(t2, e2, i2);
            this._map.cooperativeGestures.notifyGestureBlocked("touch_pan", t2);
          }
        }
        touchend(t2, e2, i2) {
          this._calculateTransform(t2, e2, i2), this._active && this._shouldBePrevented(i2.length) && this.reset();
        }
        touchcancel() {
          this.reset();
        }
        _calculateTransform(t2, i2, a2) {
          a2.length > 0 && (this._active = true);
          const s2 = ja(a2, i2), o2 = new e.P(0, 0), r2 = new e.P(0, 0);
          let n2 = 0;
          for (const t3 in s2) {
            const e2 = s2[t3], i3 = this._touches[t3];
            i3 && (o2._add(e2), r2._add(e2.sub(i3)), n2++, s2[t3] = e2);
          }
          if (this._touches = s2, this._shouldBePrevented(n2) || !r2.mag()) return;
          const l2 = r2.div(n2);
          return this._sum._add(l2), this._sum.mag() < this._clickTolerance ? void 0 : { around: o2.div(n2), panDelta: l2 };
        }
        enable() {
          this._enabled = true;
        }
        disable() {
          this._enabled = false, this.reset();
        }
        isEnabled() {
          return this._enabled;
        }
        isActive() {
          return this._active;
        }
      }
      class Qa {
        constructor() {
          this.reset();
        }
        reset() {
          this._active = false, delete this._firstTwoTouches;
        }
        touchstart(t2, e2, i2) {
          this._firstTwoTouches || i2.length < 2 || (this._firstTwoTouches = [i2[0].identifier, i2[1].identifier], this._start([e2[0], e2[1]]));
        }
        touchmove(t2, e2, i2) {
          if (!this._firstTwoTouches) return;
          t2.preventDefault();
          const [a2, s2] = this._firstTwoTouches, o2 = ts(i2, e2, a2), r2 = ts(i2, e2, s2);
          if (!o2 || !r2) return;
          const n2 = this._aroundCenter ? null : o2.add(r2).div(2);
          return this._move([o2, r2], n2, t2);
        }
        touchend(t2, e2, i2) {
          if (!this._firstTwoTouches) return;
          const [a2, s2] = this._firstTwoTouches, o2 = ts(i2, e2, a2), n2 = ts(i2, e2, s2);
          o2 && n2 || (this._active && r.suppressClick(), this.reset());
        }
        touchcancel() {
          this.reset();
        }
        enable(t2) {
          this._enabled = true, this._aroundCenter = !!t2 && "center" === t2.around;
        }
        disable() {
          this._enabled = false, this.reset();
        }
        isEnabled() {
          return !!this._enabled;
        }
        isActive() {
          return !!this._active;
        }
      }
      function ts(t2, e2, i2) {
        for (let a2 = 0; a2 < t2.length; a2++) if (t2[a2].identifier === i2) return e2[a2];
      }
      function es(t2, e2) {
        return Math.log(t2 / e2) / Math.LN2;
      }
      class is extends Qa {
        reset() {
          super.reset(), delete this._distance, delete this._startDistance;
        }
        _start(t2) {
          this._startDistance = this._distance = t2[0].dist(t2[1]);
        }
        _move(t2, e2) {
          const i2 = this._distance;
          if (this._distance = t2[0].dist(t2[1]), this._active || !(Math.abs(es(this._distance, this._startDistance)) < 0.1)) return this._active = true, { zoomDelta: es(this._distance, i2), pinchAround: e2 };
        }
      }
      function as(t2, e2) {
        return 180 * t2.angleWith(e2) / Math.PI;
      }
      class ss extends Qa {
        reset() {
          super.reset(), delete this._minDiameter, delete this._startVector, delete this._vector;
        }
        _start(t2) {
          this._startVector = this._vector = t2[0].sub(t2[1]), this._minDiameter = t2[0].dist(t2[1]);
        }
        _move(t2, e2, i2) {
          const a2 = this._vector;
          if (this._vector = t2[0].sub(t2[1]), this._active || !this._isBelowThreshold(this._vector)) return this._active = true, { bearingDelta: as(this._vector, a2), pinchAround: e2 };
        }
        _isBelowThreshold(t2) {
          this._minDiameter = Math.min(this._minDiameter, t2.mag());
          const e2 = 25 / (Math.PI * this._minDiameter) * 360, i2 = as(t2, this._startVector);
          return Math.abs(i2) < e2;
        }
      }
      function os(t2) {
        return Math.abs(t2.y) > Math.abs(t2.x);
      }
      class rs extends Qa {
        constructor(t2) {
          super(), this._currentTouchCount = 0, this._map = t2;
        }
        reset() {
          super.reset(), this._valid = void 0, delete this._firstMove, delete this._lastPoints;
        }
        touchstart(t2, e2, i2) {
          super.touchstart(t2, e2, i2), this._currentTouchCount = i2.length;
        }
        _start(t2) {
          this._lastPoints = t2, os(t2[0].sub(t2[1])) && (this._valid = false);
        }
        _move(t2, e2, i2) {
          if (this._map.cooperativeGestures.isEnabled() && this._currentTouchCount < 3) return;
          const a2 = t2[0].sub(this._lastPoints[0]), s2 = t2[1].sub(this._lastPoints[1]);
          return this._valid = this.gestureBeginsVertically(a2, s2, i2.timeStamp), this._valid ? (this._lastPoints = t2, this._active = true, { pitchDelta: (a2.y + s2.y) / 2 * -0.5 }) : void 0;
        }
        gestureBeginsVertically(t2, e2, i2) {
          if (void 0 !== this._valid) return this._valid;
          const a2 = t2.mag() >= 2, s2 = e2.mag() >= 2;
          if (!a2 && !s2) return;
          if (!a2 || !s2) return void 0 === this._firstMove && (this._firstMove = i2), i2 - this._firstMove < 100 && void 0;
          const o2 = t2.y > 0 == e2.y > 0;
          return os(t2) && os(e2) && o2;
        }
      }
      const ns = { panStep: 100, bearingStep: 15, pitchStep: 10 };
      class ls {
        constructor(t2) {
          this._tr = new Na(t2);
          const e2 = ns;
          this._panStep = e2.panStep, this._bearingStep = e2.bearingStep, this._pitchStep = e2.pitchStep, this._rotationDisabled = false;
        }
        reset() {
          this._active = false;
        }
        keydown(t2) {
          if (t2.altKey || t2.ctrlKey || t2.metaKey) return;
          let e2 = 0, i2 = 0, a2 = 0, s2 = 0, o2 = 0;
          switch (t2.keyCode) {
            case 61:
            case 107:
            case 171:
            case 187:
              e2 = 1;
              break;
            case 189:
            case 109:
            case 173:
              e2 = -1;
              break;
            case 37:
              t2.shiftKey ? i2 = -1 : (t2.preventDefault(), s2 = -1);
              break;
            case 39:
              t2.shiftKey ? i2 = 1 : (t2.preventDefault(), s2 = 1);
              break;
            case 38:
              t2.shiftKey ? a2 = 1 : (t2.preventDefault(), o2 = -1);
              break;
            case 40:
              t2.shiftKey ? a2 = -1 : (t2.preventDefault(), o2 = 1);
              break;
            default:
              return;
          }
          return this._rotationDisabled && (i2 = 0, a2 = 0), { cameraAnimation: (r2) => {
            const n2 = this._tr;
            r2.easeTo({ duration: 300, easeId: "keyboardHandler", easing: hs, zoom: e2 ? Math.round(n2.zoom) + e2 * (t2.shiftKey ? 2 : 1) : n2.zoom, bearing: n2.bearing + i2 * this._bearingStep, pitch: n2.pitch + a2 * this._pitchStep, offset: [-s2 * this._panStep, -o2 * this._panStep], center: n2.center }, { originalEvent: t2 });
          } };
        }
        enable() {
          this._enabled = true;
        }
        disable() {
          this._enabled = false, this.reset();
        }
        isEnabled() {
          return this._enabled;
        }
        isActive() {
          return this._active;
        }
        disableRotation() {
          this._rotationDisabled = true;
        }
        enableRotation() {
          this._rotationDisabled = false;
        }
      }
      function hs(t2) {
        return t2 * (2 - t2);
      }
      const cs = 4.000244140625;
      class us {
        constructor(t2, e2) {
          this._onTimeout = (t3) => {
            this._type = "wheel", this._delta -= this._lastValue, this._active || this._start(t3);
          }, this._map = t2, this._tr = new Na(t2), this._triggerRenderFrame = e2, this._delta = 0, this._defaultZoomRate = 0.01, this._wheelZoomRate = 0.0022222222222222222;
        }
        setZoomRate(t2) {
          this._defaultZoomRate = t2;
        }
        setWheelZoomRate(t2) {
          this._wheelZoomRate = t2;
        }
        isEnabled() {
          return !!this._enabled;
        }
        isActive() {
          return !!this._active || void 0 !== this._finishTimeout;
        }
        isZooming() {
          return !!this._zooming;
        }
        enable(t2) {
          this.isEnabled() || (this._enabled = true, this._aroundCenter = !!t2 && "center" === t2.around);
        }
        disable() {
          this.isEnabled() && (this._enabled = false);
        }
        _shouldBePrevented(t2) {
          return !!this._map.cooperativeGestures.isEnabled() && !(t2.ctrlKey || this._map.cooperativeGestures.isBypassed(t2));
        }
        wheel(t2) {
          if (!this.isEnabled()) return;
          if (this._shouldBePrevented(t2)) return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom", t2);
          let e2 = t2.deltaMode === WheelEvent.DOM_DELTA_LINE ? 40 * t2.deltaY : t2.deltaY;
          const i2 = o.now(), a2 = i2 - (this._lastWheelEventTime || 0);
          this._lastWheelEventTime = i2, 0 !== e2 && e2 % cs == 0 ? this._type = "wheel" : 0 !== e2 && Math.abs(e2) < 4 ? this._type = "trackpad" : a2 > 400 ? (this._type = null, this._lastValue = e2, this._timeout = setTimeout(this._onTimeout, 40, t2)) : this._type || (this._type = Math.abs(a2 * e2) < 200 ? "trackpad" : "wheel", this._timeout && (clearTimeout(this._timeout), this._timeout = null, e2 += this._lastValue)), t2.shiftKey && e2 && (e2 /= 4), this._type && (this._lastWheelEvent = t2, this._delta -= e2, this._active || this._start(t2)), t2.preventDefault();
        }
        _start(t2) {
          if (!this._delta) return;
          this._frameId && (this._frameId = null), this._active = true, this.isZooming() || (this._zooming = true), this._finishTimeout && (clearTimeout(this._finishTimeout), delete this._finishTimeout);
          const i2 = r.mousePos(this._map.getCanvas(), t2), a2 = this._tr;
          this._around = i2.y > a2.transform.height / 2 - a2.transform.getHorizon() ? e.N.convert(this._aroundCenter ? a2.center : a2.unproject(i2)) : e.N.convert(a2.center), this._aroundPoint = a2.transform.locationPoint(this._around), this._frameId || (this._frameId = true, this._triggerRenderFrame());
        }
        renderFrame() {
          if (!this._frameId) return;
          if (this._frameId = null, !this.isActive()) return;
          const t2 = this._tr.transform;
          if (0 !== this._delta) {
            const e2 = "wheel" === this._type && Math.abs(this._delta) > cs ? this._wheelZoomRate : this._defaultZoomRate;
            let i3 = 2 / (1 + Math.exp(-Math.abs(this._delta * e2)));
            this._delta < 0 && 0 !== i3 && (i3 = 1 / i3);
            const a3 = "number" == typeof this._targetZoom ? t2.zoomScale(this._targetZoom) : t2.scale;
            this._targetZoom = Math.min(t2.maxZoom, Math.max(t2.minZoom, t2.scaleZoom(a3 * i3))), "wheel" === this._type && (this._startZoom = t2.zoom, this._easing = this._smoothOutEasing(200)), this._delta = 0;
          }
          const i2 = "number" == typeof this._targetZoom ? this._targetZoom : t2.zoom, a2 = this._startZoom, s2 = this._easing;
          let r2, n2 = false;
          const l2 = o.now() - this._lastWheelEventTime;
          if ("wheel" === this._type && a2 && s2 && l2) {
            const t3 = Math.min(l2 / 200, 1), o2 = s2(t3);
            r2 = e.y.number(a2, i2, o2), t3 < 1 ? this._frameId || (this._frameId = true) : n2 = true;
          } else r2 = i2, n2 = true;
          return this._active = true, n2 && (this._active = false, this._finishTimeout = setTimeout(() => {
            this._zooming = false, this._triggerRenderFrame(), delete this._targetZoom, delete this._finishTimeout;
          }, 200)), { noInertia: true, needsRenderFrame: !n2, zoomDelta: r2 - t2.zoom, around: this._aroundPoint, originalEvent: this._lastWheelEvent };
        }
        _smoothOutEasing(t2) {
          let i2 = e.b9;
          if (this._prevEase) {
            const t3 = this._prevEase, a2 = (o.now() - t3.start) / t3.duration, s2 = t3.easing(a2 + 0.01) - t3.easing(a2), r2 = 0.27 / Math.sqrt(s2 * s2 + 1e-4) * 0.01, n2 = Math.sqrt(0.0729 - r2 * r2);
            i2 = e.b8(r2, n2, 0.25, 1);
          }
          return this._prevEase = { start: o.now(), duration: t2, easing: i2 }, i2;
        }
        reset() {
          this._active = false, this._zooming = false, delete this._targetZoom, this._finishTimeout && (clearTimeout(this._finishTimeout), delete this._finishTimeout);
        }
      }
      class ds {
        constructor(t2, e2) {
          this._clickZoom = t2, this._tapZoom = e2;
        }
        enable() {
          this._clickZoom.enable(), this._tapZoom.enable();
        }
        disable() {
          this._clickZoom.disable(), this._tapZoom.disable();
        }
        isEnabled() {
          return this._clickZoom.isEnabled() && this._tapZoom.isEnabled();
        }
        isActive() {
          return this._clickZoom.isActive() || this._tapZoom.isActive();
        }
      }
      class _s {
        constructor(t2) {
          this._tr = new Na(t2), this.reset();
        }
        reset() {
          this._active = false;
        }
        dblclick(t2, e2) {
          return t2.preventDefault(), { cameraAnimation: (i2) => {
            i2.easeTo({ duration: 300, zoom: this._tr.zoom + (t2.shiftKey ? -1 : 1), around: this._tr.unproject(e2) }, { originalEvent: t2 });
          } };
        }
        enable() {
          this._enabled = true;
        }
        disable() {
          this._enabled = false, this.reset();
        }
        isEnabled() {
          return this._enabled;
        }
        isActive() {
          return this._active;
        }
      }
      class ps {
        constructor() {
          this._tap = new qa({ numTouches: 1, numTaps: 1 }), this.reset();
        }
        reset() {
          this._active = false, delete this._swipePoint, delete this._swipeTouch, delete this._tapTime, delete this._tapPoint, this._tap.reset();
        }
        touchstart(t2, e2, i2) {
          if (!this._swipePoint) if (this._tapTime) {
            const a2 = e2[0], s2 = t2.timeStamp - this._tapTime < 500, o2 = this._tapPoint.dist(a2) < 30;
            s2 && o2 ? i2.length > 0 && (this._swipePoint = a2, this._swipeTouch = i2[0].identifier) : this.reset();
          } else this._tap.touchstart(t2, e2, i2);
        }
        touchmove(t2, e2, i2) {
          if (this._tapTime) {
            if (this._swipePoint) {
              if (i2[0].identifier !== this._swipeTouch) return;
              const a2 = e2[0], s2 = a2.y - this._swipePoint.y;
              return this._swipePoint = a2, t2.preventDefault(), this._active = true, { zoomDelta: s2 / 128 };
            }
          } else this._tap.touchmove(t2, e2, i2);
        }
        touchend(t2, e2, i2) {
          if (this._tapTime) this._swipePoint && 0 === i2.length && this.reset();
          else {
            const a2 = this._tap.touchend(t2, e2, i2);
            a2 && (this._tapTime = t2.timeStamp, this._tapPoint = a2);
          }
        }
        touchcancel() {
          this.reset();
        }
        enable() {
          this._enabled = true;
        }
        disable() {
          this._enabled = false, this.reset();
        }
        isEnabled() {
          return this._enabled;
        }
        isActive() {
          return this._active;
        }
      }
      class ms {
        constructor(t2, e2, i2) {
          this._el = t2, this._mousePan = e2, this._touchPan = i2;
        }
        enable(t2) {
          this._inertiaOptions = t2 || {}, this._mousePan.enable(), this._touchPan.enable(), this._el.classList.add("maplibregl-touch-drag-pan");
        }
        disable() {
          this._mousePan.disable(), this._touchPan.disable(), this._el.classList.remove("maplibregl-touch-drag-pan");
        }
        isEnabled() {
          return this._mousePan.isEnabled() && this._touchPan.isEnabled();
        }
        isActive() {
          return this._mousePan.isActive() || this._touchPan.isActive();
        }
      }
      class fs {
        constructor(t2, e2, i2) {
          this._pitchWithRotate = t2.pitchWithRotate, this._mouseRotate = e2, this._mousePitch = i2;
        }
        enable() {
          this._mouseRotate.enable(), this._pitchWithRotate && this._mousePitch.enable();
        }
        disable() {
          this._mouseRotate.disable(), this._mousePitch.disable();
        }
        isEnabled() {
          return this._mouseRotate.isEnabled() && (!this._pitchWithRotate || this._mousePitch.isEnabled());
        }
        isActive() {
          return this._mouseRotate.isActive() || this._mousePitch.isActive();
        }
      }
      class gs {
        constructor(t2, e2, i2, a2) {
          this._el = t2, this._touchZoom = e2, this._touchRotate = i2, this._tapDragZoom = a2, this._rotationDisabled = false, this._enabled = true;
        }
        enable(t2) {
          this._touchZoom.enable(t2), this._rotationDisabled || this._touchRotate.enable(t2), this._tapDragZoom.enable(), this._el.classList.add("maplibregl-touch-zoom-rotate");
        }
        disable() {
          this._touchZoom.disable(), this._touchRotate.disable(), this._tapDragZoom.disable(), this._el.classList.remove("maplibregl-touch-zoom-rotate");
        }
        isEnabled() {
          return this._touchZoom.isEnabled() && (this._rotationDisabled || this._touchRotate.isEnabled()) && this._tapDragZoom.isEnabled();
        }
        isActive() {
          return this._touchZoom.isActive() || this._touchRotate.isActive() || this._tapDragZoom.isActive();
        }
        disableRotation() {
          this._rotationDisabled = true, this._touchRotate.disable();
        }
        enableRotation() {
          this._rotationDisabled = false, this._touchZoom.isEnabled() && this._touchRotate.enable();
        }
      }
      class vs {
        constructor(t2, e2) {
          this._bypassKey = -1 !== navigator.userAgent.indexOf("Mac") ? "metaKey" : "ctrlKey", this._map = t2, this._options = e2, this._enabled = false;
        }
        isActive() {
          return false;
        }
        reset() {
        }
        _setupUI() {
          if (this._container) return;
          const t2 = this._map.getCanvasContainer();
          t2.classList.add("maplibregl-cooperative-gestures"), this._container = r.create("div", "maplibregl-cooperative-gesture-screen", t2);
          let e2 = this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");
          "metaKey" === this._bypassKey && (e2 = this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));
          const i2 = this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"), a2 = document.createElement("div");
          a2.className = "maplibregl-desktop-message", a2.textContent = e2, this._container.appendChild(a2);
          const s2 = document.createElement("div");
          s2.className = "maplibregl-mobile-message", s2.textContent = i2, this._container.appendChild(s2), this._container.setAttribute("aria-hidden", "true");
        }
        _destroyUI() {
          this._container && (r.remove(this._container), this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")), delete this._container;
        }
        enable() {
          this._setupUI(), this._enabled = true;
        }
        disable() {
          this._enabled = false, this._destroyUI();
        }
        isEnabled() {
          return this._enabled;
        }
        isBypassed(t2) {
          return t2[this._bypassKey];
        }
        notifyGestureBlocked(t2, i2) {
          this._enabled && (this._map.fire(new e.k("cooperativegestureprevented", { gestureType: t2, originalEvent: i2 })), this._container.classList.add("maplibregl-show"), setTimeout(() => {
            this._container.classList.remove("maplibregl-show");
          }, 100));
        }
      }
      const xs = (t2) => t2.zoom || t2.drag || t2.pitch || t2.rotate;
      class ys extends e.k {
      }
      function bs(t2) {
        return t2.panDelta && t2.panDelta.mag() || t2.zoomDelta || t2.bearingDelta || t2.pitchDelta;
      }
      class ws {
        constructor(t2, e2) {
          this.handleWindowEvent = (t3) => {
            this.handleEvent(t3, `${t3.type}Window`);
          }, this.handleEvent = (t3, e3) => {
            if ("blur" === t3.type) return void this.stop(true);
            this._updatingCamera = true;
            const i3 = "renderFrame" === t3.type ? void 0 : t3, a2 = { needsRenderFrame: false }, s2 = {}, o2 = {}, n2 = t3.touches, l2 = n2 ? this._getMapTouches(n2) : void 0, h2 = l2 ? r.touchPos(this._map.getCanvas(), l2) : r.mousePos(this._map.getCanvas(), t3);
            for (const { handlerName: r2, handler: n3, allowed: c3 } of this._handlers) {
              if (!n3.isEnabled()) continue;
              let u4;
              this._blockedByActive(o2, c3, r2) ? n3.reset() : n3[e3 || t3.type] && (u4 = n3[e3 || t3.type](t3, h2, l2), this.mergeHandlerResult(a2, s2, u4, r2, i3), u4 && u4.needsRenderFrame && this._triggerRenderFrame()), (u4 || n3.isActive()) && (o2[r2] = n3);
            }
            const c2 = {};
            for (const t4 in this._previousActiveHandlers) o2[t4] || (c2[t4] = i3);
            this._previousActiveHandlers = o2, (Object.keys(c2).length || bs(a2)) && (this._changes.push([a2, s2, c2]), this._triggerRenderFrame()), (Object.keys(o2).length || bs(a2)) && this._map._stop(true), this._updatingCamera = false;
            const { cameraAnimation: u3 } = a2;
            u3 && (this._inertia.clear(), this._fireEvents({}, {}, true), this._changes = [], u3(this._map));
          }, this._map = t2, this._el = this._map.getCanvasContainer(), this._handlers = [], this._handlersById = {}, this._changes = [], this._inertia = new Ma(t2), this._bearingSnap = e2.bearingSnap, this._previousActiveHandlers = {}, this._eventsInProgress = {}, this._addDefaultHandlers(e2);
          const i2 = this._el;
          this._listeners = [[i2, "touchstart", { passive: true }], [i2, "touchmove", { passive: false }], [i2, "touchend", void 0], [i2, "touchcancel", void 0], [i2, "mousedown", void 0], [i2, "mousemove", void 0], [i2, "mouseup", void 0], [document, "mousemove", { capture: true }], [document, "mouseup", void 0], [i2, "mouseover", void 0], [i2, "mouseout", void 0], [i2, "dblclick", void 0], [i2, "click", void 0], [i2, "keydown", { capture: false }], [i2, "keyup", void 0], [i2, "wheel", { passive: false }], [i2, "contextmenu", void 0], [window, "blur", void 0]];
          for (const [t3, e3, i3] of this._listeners) r.addEventListener(t3, e3, t3 === document ? this.handleWindowEvent : this.handleEvent, i3);
        }
        destroy() {
          for (const [t2, e2, i2] of this._listeners) r.removeEventListener(t2, e2, t2 === document ? this.handleWindowEvent : this.handleEvent, i2);
        }
        _addDefaultHandlers(t2) {
          const e2 = this._map, i2 = e2.getCanvasContainer();
          this._add("mapEvent", new Ba(e2, t2));
          const a2 = e2.boxZoom = new Ua(e2, t2);
          this._add("boxZoom", a2), t2.interactive && t2.boxZoom && a2.enable();
          const s2 = e2.cooperativeGestures = new vs(e2, t2.cooperativeGestures);
          this._add("cooperativeGestures", s2), t2.cooperativeGestures && s2.enable();
          const o2 = new Va(e2), n2 = new _s(e2);
          e2.doubleClickZoom = new ds(n2, o2), this._add("tapZoom", o2), this._add("clickZoom", n2), t2.interactive && t2.doubleClickZoom && e2.doubleClickZoom.enable();
          const l2 = new ps();
          this._add("tapDragZoom", l2);
          const h2 = e2.touchPitch = new rs(e2);
          this._add("touchPitch", h2), t2.interactive && t2.touchPitch && e2.touchPitch.enable(t2.touchPitch);
          const c2 = Ka(t2), u3 = Ja(t2);
          e2.dragRotate = new fs(t2, c2, u3), this._add("mouseRotate", c2, ["mousePitch"]), this._add("mousePitch", u3, ["mouseRotate"]), t2.interactive && t2.dragRotate && e2.dragRotate.enable();
          const d2 = (({ enable: t3, clickTolerance: e3 }) => {
            const i3 = new Wa({ checkCorrectEvent: (t4) => 0 === r.mouseButton(t4) && !t4.ctrlKey });
            return new Ga({ clickTolerance: e3, move: (t4, e4) => ({ around: e4, panDelta: e4.sub(t4) }), activateOnStart: true, moveStateManager: i3, enable: t3, assignEvents: Xa });
          })(t2), _2 = new Ya(t2, e2);
          e2.dragPan = new ms(i2, d2, _2), this._add("mousePan", d2), this._add("touchPan", _2, ["touchZoom", "touchRotate"]), t2.interactive && t2.dragPan && e2.dragPan.enable(t2.dragPan);
          const p3 = new ss(), m2 = new is();
          e2.touchZoomRotate = new gs(i2, m2, p3, l2), this._add("touchRotate", p3, ["touchPan", "touchZoom"]), this._add("touchZoom", m2, ["touchPan", "touchRotate"]), t2.interactive && t2.touchZoomRotate && e2.touchZoomRotate.enable(t2.touchZoomRotate);
          const f2 = e2.scrollZoom = new us(e2, () => this._triggerRenderFrame());
          this._add("scrollZoom", f2, ["mousePan"]), t2.interactive && t2.scrollZoom && e2.scrollZoom.enable(t2.scrollZoom);
          const g2 = e2.keyboard = new ls(e2);
          this._add("keyboard", g2), t2.interactive && t2.keyboard && e2.keyboard.enable(), this._add("blockableMapEvent", new Oa(e2));
        }
        _add(t2, e2, i2) {
          this._handlers.push({ handlerName: t2, handler: e2, allowed: i2 }), this._handlersById[t2] = e2;
        }
        stop(t2) {
          if (!this._updatingCamera) {
            for (const { handler: t3 } of this._handlers) t3.reset();
            this._inertia.clear(), this._fireEvents({}, {}, t2), this._changes = [];
          }
        }
        isActive() {
          for (const { handler: t2 } of this._handlers) if (t2.isActive()) return true;
          return false;
        }
        isZooming() {
          return !!this._eventsInProgress.zoom || this._map.scrollZoom.isZooming();
        }
        isRotating() {
          return !!this._eventsInProgress.rotate;
        }
        isMoving() {
          return Boolean(xs(this._eventsInProgress)) || this.isZooming();
        }
        _blockedByActive(t2, e2, i2) {
          for (const a2 in t2) if (a2 !== i2 && (!e2 || e2.indexOf(a2) < 0)) return true;
          return false;
        }
        _getMapTouches(t2) {
          const e2 = [];
          for (const i2 of t2) this._el.contains(i2.target) && e2.push(i2);
          return e2;
        }
        mergeHandlerResult(t2, i2, a2, s2, o2) {
          if (!a2) return;
          e.e(t2, a2);
          const r2 = { handlerName: s2, originalEvent: a2.originalEvent || o2 };
          void 0 !== a2.zoomDelta && (i2.zoom = r2), void 0 !== a2.panDelta && (i2.drag = r2), void 0 !== a2.pitchDelta && (i2.pitch = r2), void 0 !== a2.bearingDelta && (i2.rotate = r2);
        }
        _applyChanges() {
          const t2 = {}, i2 = {}, a2 = {};
          for (const [s2, o2, r2] of this._changes) s2.panDelta && (t2.panDelta = (t2.panDelta || new e.P(0, 0))._add(s2.panDelta)), s2.zoomDelta && (t2.zoomDelta = (t2.zoomDelta || 0) + s2.zoomDelta), s2.bearingDelta && (t2.bearingDelta = (t2.bearingDelta || 0) + s2.bearingDelta), s2.pitchDelta && (t2.pitchDelta = (t2.pitchDelta || 0) + s2.pitchDelta), void 0 !== s2.around && (t2.around = s2.around), void 0 !== s2.pinchAround && (t2.pinchAround = s2.pinchAround), s2.noInertia && (t2.noInertia = s2.noInertia), e.e(i2, o2), e.e(a2, r2);
          this._updateMapTransform(t2, i2, a2), this._changes = [];
        }
        _updateMapTransform(t2, e2, i2) {
          const a2 = this._map, s2 = a2._getTransformForUpdate(), o2 = a2.terrain;
          if (!(bs(t2) || o2 && this._terrainMovement)) return this._fireEvents(e2, i2, true);
          let { panDelta: r2, zoomDelta: n2, bearingDelta: l2, pitchDelta: h2, around: c2, pinchAround: u3 } = t2;
          void 0 !== u3 && (c2 = u3), a2._stop(true), c2 = c2 || a2.transform.centerPoint;
          const d2 = s2.pointLocation(r2 ? c2.sub(r2) : c2);
          l2 && (s2.bearing += l2), h2 && (s2.pitch += h2), n2 && (s2.zoom += n2), o2 ? this._terrainMovement || !e2.drag && !e2.zoom ? e2.drag && this._terrainMovement ? s2.center = s2.pointLocation(s2.centerPoint.sub(r2)) : s2.setLocationAtPoint(d2, c2) : (this._terrainMovement = true, this._map._elevationFreeze = true, s2.setLocationAtPoint(d2, c2)) : s2.setLocationAtPoint(d2, c2), a2._applyUpdatedTransform(s2), this._map._update(), t2.noInertia || this._inertia.record(t2), this._fireEvents(e2, i2, true);
        }
        _fireEvents(t2, i2, a2) {
          const s2 = xs(this._eventsInProgress), r2 = xs(t2), n2 = {};
          for (const e2 in t2) {
            const { originalEvent: i3 } = t2[e2];
            this._eventsInProgress[e2] || (n2[`${e2}start`] = i3), this._eventsInProgress[e2] = t2[e2];
          }
          !s2 && r2 && this._fireEvent("movestart", r2.originalEvent);
          for (const t3 in n2) this._fireEvent(t3, n2[t3]);
          r2 && this._fireEvent("move", r2.originalEvent);
          for (const e2 in t2) {
            const { originalEvent: i3 } = t2[e2];
            this._fireEvent(e2, i3);
          }
          const l2 = {};
          let h2;
          for (const t3 in this._eventsInProgress) {
            const { handlerName: e2, originalEvent: a3 } = this._eventsInProgress[t3];
            this._handlersById[e2].isActive() || (delete this._eventsInProgress[t3], h2 = i2[e2] || a3, l2[`${t3}end`] = h2);
          }
          for (const t3 in l2) this._fireEvent(t3, l2[t3]);
          const c2 = xs(this._eventsInProgress), u3 = (s2 || r2) && !c2;
          if (u3 && this._terrainMovement) {
            this._map._elevationFreeze = false, this._terrainMovement = false;
            const t3 = this._map._getTransformForUpdate();
            t3.recalculateZoom(this._map.terrain), this._map._applyUpdatedTransform(t3);
          }
          if (a2 && u3) {
            this._updatingCamera = true;
            const t3 = this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions), i3 = (t4) => 0 !== t4 && -this._bearingSnap < t4 && t4 < this._bearingSnap;
            !t3 || !t3.essential && o.prefersReducedMotion ? (this._map.fire(new e.k("moveend", { originalEvent: h2 })), i3(this._map.getBearing()) && this._map.resetNorth()) : (i3(t3.bearing || this._map.getBearing()) && (t3.bearing = 0), t3.freezeElevation = true, this._map.easeTo(t3, { originalEvent: h2 })), this._updatingCamera = false;
          }
        }
        _fireEvent(t2, i2) {
          this._map.fire(new e.k(t2, i2 ? { originalEvent: i2 } : {}));
        }
        _requestFrame() {
          return this._map.triggerRepaint(), this._map._renderTaskQueue.add((t2) => {
            delete this._frameId, this.handleEvent(new ys("renderFrame", { timeStamp: t2 })), this._applyChanges();
          });
        }
        _triggerRenderFrame() {
          void 0 === this._frameId && (this._frameId = this._requestFrame());
        }
      }
      class Ts extends e.E {
        constructor(t2, e2) {
          super(), this._renderFrameCallback = () => {
            const t3 = Math.min((o.now() - this._easeStart) / this._easeOptions.duration, 1);
            this._onEaseFrame(this._easeOptions.easing(t3)), t3 < 1 && this._easeFrameId ? this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback) : this.stop();
          }, this._moving = false, this._zooming = false, this.transform = t2, this._bearingSnap = e2.bearingSnap, this.on("moveend", () => {
            delete this._requestedCameraState;
          });
        }
        getCenter() {
          return new e.N(this.transform.center.lng, this.transform.center.lat);
        }
        setCenter(t2, e2) {
          return this.jumpTo({ center: t2 }, e2);
        }
        panBy(t2, i2, a2) {
          return t2 = e.P.convert(t2).mult(-1), this.panTo(this.transform.center, e.e({ offset: t2 }, i2), a2);
        }
        panTo(t2, i2, a2) {
          return this.easeTo(e.e({ center: t2 }, i2), a2);
        }
        getZoom() {
          return this.transform.zoom;
        }
        setZoom(t2, e2) {
          return this.jumpTo({ zoom: t2 }, e2), this;
        }
        zoomTo(t2, i2, a2) {
          return this.easeTo(e.e({ zoom: t2 }, i2), a2);
        }
        zoomIn(t2, e2) {
          return this.zoomTo(this.getZoom() + 1, t2, e2), this;
        }
        zoomOut(t2, e2) {
          return this.zoomTo(this.getZoom() - 1, t2, e2), this;
        }
        getBearing() {
          return this.transform.bearing;
        }
        setBearing(t2, e2) {
          return this.jumpTo({ bearing: t2 }, e2), this;
        }
        getPadding() {
          return this.transform.padding;
        }
        setPadding(t2, e2) {
          return this.jumpTo({ padding: t2 }, e2), this;
        }
        rotateTo(t2, i2, a2) {
          return this.easeTo(e.e({ bearing: t2 }, i2), a2);
        }
        resetNorth(t2, i2) {
          return this.rotateTo(0, e.e({ duration: 1e3 }, t2), i2), this;
        }
        resetNorthPitch(t2, i2) {
          return this.easeTo(e.e({ bearing: 0, pitch: 0, duration: 1e3 }, t2), i2), this;
        }
        snapToNorth(t2, e2) {
          return Math.abs(this.getBearing()) < this._bearingSnap ? this.resetNorth(t2, e2) : this;
        }
        getPitch() {
          return this.transform.pitch;
        }
        setPitch(t2, e2) {
          return this.jumpTo({ pitch: t2 }, e2), this;
        }
        cameraForBounds(t2, e2) {
          t2 = H.convert(t2).adjustAntiMeridian();
          const i2 = e2 && e2.bearing || 0;
          return this._cameraForBoxAndBearing(t2.getNorthWest(), t2.getSouthEast(), i2, e2);
        }
        _cameraForBoxAndBearing(t2, i2, a2, s2) {
          const o2 = { top: 0, bottom: 0, right: 0, left: 0 };
          if ("number" == typeof (s2 = e.e({ padding: o2, offset: [0, 0], maxZoom: this.transform.maxZoom }, s2)).padding) {
            const t3 = s2.padding;
            s2.padding = { top: t3, bottom: t3, right: t3, left: t3 };
          }
          s2.padding = e.e(o2, s2.padding);
          const r2 = this.transform, n2 = r2.padding, l2 = new H(t2, i2), h2 = r2.project(l2.getNorthWest()), c2 = r2.project(l2.getNorthEast()), u3 = r2.project(l2.getSouthEast()), d2 = r2.project(l2.getSouthWest()), _2 = e.ba(-a2), p3 = h2.rotate(_2), m2 = c2.rotate(_2), f2 = u3.rotate(_2), g2 = d2.rotate(_2), v2 = new e.P(Math.max(p3.x, m2.x, g2.x, f2.x), Math.max(p3.y, m2.y, g2.y, f2.y)), x2 = new e.P(Math.min(p3.x, m2.x, g2.x, f2.x), Math.min(p3.y, m2.y, g2.y, f2.y)), y2 = v2.sub(x2), b2 = (r2.width - (n2.left + n2.right + s2.padding.left + s2.padding.right)) / y2.x, w3 = (r2.height - (n2.top + n2.bottom + s2.padding.top + s2.padding.bottom)) / y2.y;
          if (w3 < 0 || b2 < 0) return void e.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");
          const T2 = Math.min(r2.scaleZoom(r2.scale * Math.min(b2, w3)), s2.maxZoom), I2 = e.P.convert(s2.offset), E2 = new e.P((s2.padding.left - s2.padding.right) / 2, (s2.padding.top - s2.padding.bottom) / 2).rotate(e.ba(a2)), P3 = I2.add(E2).mult(r2.scale / r2.zoomScale(T2));
          return { center: r2.unproject(h2.add(u3).div(2).sub(P3)), zoom: T2, bearing: a2 };
        }
        fitBounds(t2, e2, i2) {
          return this._fitInternal(this.cameraForBounds(t2, e2), e2, i2);
        }
        fitScreenCoordinates(t2, i2, a2, s2, o2) {
          return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.P.convert(t2)), this.transform.pointLocation(e.P.convert(i2)), a2, s2), s2, o2);
        }
        _fitInternal(t2, i2, a2) {
          return t2 ? (delete (i2 = e.e(t2, i2)).padding, i2.linear ? this.easeTo(i2, a2) : this.flyTo(i2, a2)) : this;
        }
        jumpTo(t2, i2) {
          this.stop();
          const a2 = this._getTransformForUpdate();
          let s2 = false, o2 = false, r2 = false;
          return "zoom" in t2 && a2.zoom !== +t2.zoom && (s2 = true, a2.zoom = +t2.zoom), void 0 !== t2.center && (a2.center = e.N.convert(t2.center)), "bearing" in t2 && a2.bearing !== +t2.bearing && (o2 = true, a2.bearing = +t2.bearing), "pitch" in t2 && a2.pitch !== +t2.pitch && (r2 = true, a2.pitch = +t2.pitch), null == t2.padding || a2.isPaddingEqual(t2.padding) || (a2.padding = t2.padding), this._applyUpdatedTransform(a2), this.fire(new e.k("movestart", i2)).fire(new e.k("move", i2)), s2 && this.fire(new e.k("zoomstart", i2)).fire(new e.k("zoom", i2)).fire(new e.k("zoomend", i2)), o2 && this.fire(new e.k("rotatestart", i2)).fire(new e.k("rotate", i2)).fire(new e.k("rotateend", i2)), r2 && this.fire(new e.k("pitchstart", i2)).fire(new e.k("pitch", i2)).fire(new e.k("pitchend", i2)), this.fire(new e.k("moveend", i2));
        }
        calculateCameraOptionsFromTo(t2, i2, a2, s2 = 0) {
          const o2 = e.Z.fromLngLat(t2, i2), r2 = e.Z.fromLngLat(a2, s2), n2 = r2.x - o2.x, l2 = r2.y - o2.y, h2 = r2.z - o2.z, c2 = Math.hypot(n2, l2, h2);
          if (0 === c2) throw new Error("Can't calculate camera options with same From and To");
          const u3 = Math.hypot(n2, l2), d2 = this.transform.scaleZoom(this.transform.cameraToCenterDistance / c2 / this.transform.tileSize), _2 = 180 * Math.atan2(n2, -l2) / Math.PI;
          let p3 = 180 * Math.acos(u3 / c2) / Math.PI;
          return p3 = h2 < 0 ? 90 - p3 : 90 + p3, { center: r2.toLngLat(), zoom: d2, pitch: p3, bearing: _2 };
        }
        easeTo(t2, i2) {
          var a2;
          this._stop(false, t2.easeId), (false === (t2 = e.e({ offset: [0, 0], duration: 500, easing: e.b9 }, t2)).animate || !t2.essential && o.prefersReducedMotion) && (t2.duration = 0);
          const s2 = this._getTransformForUpdate(), r2 = s2.zoom, n2 = s2.bearing, l2 = s2.pitch, h2 = s2.padding, c2 = "bearing" in t2 ? this._normalizeBearing(t2.bearing, n2) : n2, u3 = "pitch" in t2 ? +t2.pitch : l2, d2 = "padding" in t2 ? t2.padding : s2.padding, _2 = e.P.convert(t2.offset);
          let p3 = s2.centerPoint.add(_2);
          const m2 = s2.pointLocation(p3), { center: f2, zoom: g2 } = s2.getConstrained(e.N.convert(t2.center || m2), null !== (a2 = t2.zoom) && void 0 !== a2 ? a2 : r2);
          this._normalizeCenter(f2, s2);
          const v2 = s2.project(m2), x2 = s2.project(f2).sub(v2), y2 = s2.zoomScale(g2 - r2);
          let b2, w3;
          t2.around && (b2 = e.N.convert(t2.around), w3 = s2.locationPoint(b2));
          const T2 = { moving: this._moving, zooming: this._zooming, rotating: this._rotating, pitching: this._pitching };
          return this._zooming = this._zooming || g2 !== r2, this._rotating = this._rotating || n2 !== c2, this._pitching = this._pitching || u3 !== l2, this._padding = !s2.isPaddingEqual(d2), this._easeId = t2.easeId, this._prepareEase(i2, t2.noMoveStart, T2), this.terrain && this._prepareElevation(f2), this._ease((a3) => {
            if (this._zooming && (s2.zoom = e.y.number(r2, g2, a3)), this._rotating && (s2.bearing = e.y.number(n2, c2, a3)), this._pitching && (s2.pitch = e.y.number(l2, u3, a3)), this._padding && (s2.interpolatePadding(h2, d2, a3), p3 = s2.centerPoint.add(_2)), this.terrain && !t2.freezeElevation && this._updateElevation(a3), b2) s2.setLocationAtPoint(b2, w3);
            else {
              const t3 = s2.zoomScale(s2.zoom - r2), e2 = g2 > r2 ? Math.min(2, y2) : Math.max(0.5, y2), i3 = Math.pow(e2, 1 - a3), o2 = s2.unproject(v2.add(x2.mult(a3 * i3)).mult(t3));
              s2.setLocationAtPoint(s2.renderWorldCopies ? o2.wrap() : o2, p3);
            }
            this._applyUpdatedTransform(s2), this._fireMoveEvents(i2);
          }, (e2) => {
            this.terrain && t2.freezeElevation && this._finalizeElevation(), this._afterEase(i2, e2);
          }, t2), this;
        }
        _prepareEase(t2, i2, a2 = {}) {
          this._moving = true, i2 || a2.moving || this.fire(new e.k("movestart", t2)), this._zooming && !a2.zooming && this.fire(new e.k("zoomstart", t2)), this._rotating && !a2.rotating && this.fire(new e.k("rotatestart", t2)), this._pitching && !a2.pitching && this.fire(new e.k("pitchstart", t2));
        }
        _prepareElevation(t2) {
          this._elevationCenter = t2, this._elevationStart = this.transform.elevation, this._elevationTarget = this.terrain.getElevationForLngLatZoom(t2, this.transform.tileZoom), this._elevationFreeze = true;
        }
        _updateElevation(t2) {
          this.transform.minElevationForCurrentTile = this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter, this.transform.tileZoom);
          const i2 = this.terrain.getElevationForLngLatZoom(this._elevationCenter, this.transform.tileZoom);
          if (t2 < 1 && i2 !== this._elevationTarget) {
            const e2 = this._elevationTarget - this._elevationStart;
            this._elevationStart += t2 * (e2 - (i2 - (e2 * t2 + this._elevationStart)) / (1 - t2)), this._elevationTarget = i2;
          }
          this.transform.elevation = e.y.number(this._elevationStart, this._elevationTarget, t2);
        }
        _finalizeElevation() {
          this._elevationFreeze = false, this.transform.recalculateZoom(this.terrain);
        }
        _getTransformForUpdate() {
          return this.transformCameraUpdate || this.terrain ? (this._requestedCameraState || (this._requestedCameraState = this.transform.clone()), this._requestedCameraState) : this.transform;
        }
        _elevateCameraIfInsideTerrain(t2) {
          const e2 = t2.getCameraPosition(), i2 = this.terrain.getElevationForLngLatZoom(e2.lngLat, t2.zoom);
          if (e2.altitude < i2) {
            const a2 = this.calculateCameraOptionsFromTo(e2.lngLat, i2, t2.center, t2.elevation);
            return { pitch: a2.pitch, zoom: a2.zoom };
          }
          return {};
        }
        _applyUpdatedTransform(t2) {
          const e2 = [];
          if (this.terrain && e2.push((t3) => this._elevateCameraIfInsideTerrain(t3)), this.transformCameraUpdate && e2.push((t3) => this.transformCameraUpdate(t3)), !e2.length) return;
          const i2 = t2.clone();
          for (const t3 of e2) {
            const e3 = i2.clone(), { center: a2, zoom: s2, pitch: o2, bearing: r2, elevation: n2 } = t3(e3);
            a2 && (e3.center = a2), void 0 !== s2 && (e3.zoom = s2), void 0 !== o2 && (e3.pitch = o2), void 0 !== r2 && (e3.bearing = r2), void 0 !== n2 && (e3.elevation = n2), i2.apply(e3);
          }
          this.transform.apply(i2);
        }
        _fireMoveEvents(t2) {
          this.fire(new e.k("move", t2)), this._zooming && this.fire(new e.k("zoom", t2)), this._rotating && this.fire(new e.k("rotate", t2)), this._pitching && this.fire(new e.k("pitch", t2));
        }
        _afterEase(t2, i2) {
          if (this._easeId && i2 && this._easeId === i2) return;
          delete this._easeId;
          const a2 = this._zooming, s2 = this._rotating, o2 = this._pitching;
          this._moving = false, this._zooming = false, this._rotating = false, this._pitching = false, this._padding = false, a2 && this.fire(new e.k("zoomend", t2)), s2 && this.fire(new e.k("rotateend", t2)), o2 && this.fire(new e.k("pitchend", t2)), this.fire(new e.k("moveend", t2));
        }
        flyTo(t2, i2) {
          var a2;
          if (!t2.essential && o.prefersReducedMotion) {
            const a3 = e.M(t2, ["center", "zoom", "bearing", "pitch", "around"]);
            return this.jumpTo(a3, i2);
          }
          this.stop(), t2 = e.e({ offset: [0, 0], speed: 1.2, curve: 1.42, easing: e.b9 }, t2);
          const s2 = this._getTransformForUpdate(), r2 = s2.zoom, n2 = s2.bearing, l2 = s2.pitch, h2 = s2.padding, c2 = "bearing" in t2 ? this._normalizeBearing(t2.bearing, n2) : n2, u3 = "pitch" in t2 ? +t2.pitch : l2, d2 = "padding" in t2 ? t2.padding : s2.padding, _2 = e.P.convert(t2.offset);
          let p3 = s2.centerPoint.add(_2);
          const m2 = s2.pointLocation(p3), { center: f2, zoom: g2 } = s2.getConstrained(e.N.convert(t2.center || m2), null !== (a2 = t2.zoom) && void 0 !== a2 ? a2 : r2);
          this._normalizeCenter(f2, s2);
          const v2 = s2.zoomScale(g2 - r2), x2 = s2.project(m2), y2 = s2.project(f2).sub(x2);
          let b2 = t2.curve;
          const w3 = Math.max(s2.width, s2.height), T2 = w3 / v2, I2 = y2.mag();
          if ("minZoom" in t2) {
            const i3 = e.ac(Math.min(t2.minZoom, r2, g2), s2.minZoom, s2.maxZoom), a3 = w3 / s2.zoomScale(i3 - r2);
            b2 = Math.sqrt(a3 / I2 * 2);
          }
          const E2 = b2 * b2;
          function P3(t3) {
            const e2 = (T2 * T2 - w3 * w3 + (t3 ? -1 : 1) * E2 * E2 * I2 * I2) / (2 * (t3 ? T2 : w3) * E2 * I2);
            return Math.log(Math.sqrt(e2 * e2 + 1) - e2);
          }
          function C2(t3) {
            return (Math.exp(t3) - Math.exp(-t3)) / 2;
          }
          function S2(t3) {
            return (Math.exp(t3) + Math.exp(-t3)) / 2;
          }
          const z3 = P3(false);
          let D2 = function(t3) {
            return S2(z3) / S2(z3 + b2 * t3);
          }, M2 = function(t3) {
            return w3 * ((S2(z3) * (C2(e2 = z3 + b2 * t3) / S2(e2)) - C2(z3)) / E2) / I2;
            var e2;
          }, A2 = (P3(true) - z3) / b2;
          if (Math.abs(I2) < 1e-6 || !isFinite(A2)) {
            if (Math.abs(w3 - T2) < 1e-6) return this.easeTo(t2, i2);
            const e2 = T2 < w3 ? -1 : 1;
            A2 = Math.abs(Math.log(T2 / w3)) / b2, M2 = () => 0, D2 = (t3) => Math.exp(e2 * b2 * t3);
          }
          return t2.duration = "duration" in t2 ? +t2.duration : 1e3 * A2 / ("screenSpeed" in t2 ? +t2.screenSpeed / b2 : +t2.speed), t2.maxDuration && t2.duration > t2.maxDuration && (t2.duration = 0), this._zooming = true, this._rotating = n2 !== c2, this._pitching = u3 !== l2, this._padding = !s2.isPaddingEqual(d2), this._prepareEase(i2, false), this.terrain && this._prepareElevation(f2), this._ease((a3) => {
            const o2 = a3 * A2, m3 = 1 / D2(o2);
            s2.zoom = 1 === a3 ? g2 : r2 + s2.scaleZoom(m3), this._rotating && (s2.bearing = e.y.number(n2, c2, a3)), this._pitching && (s2.pitch = e.y.number(l2, u3, a3)), this._padding && (s2.interpolatePadding(h2, d2, a3), p3 = s2.centerPoint.add(_2)), this.terrain && !t2.freezeElevation && this._updateElevation(a3);
            const v3 = 1 === a3 ? f2 : s2.unproject(x2.add(y2.mult(M2(o2))).mult(m3));
            s2.setLocationAtPoint(s2.renderWorldCopies ? v3.wrap() : v3, p3), this._applyUpdatedTransform(s2), this._fireMoveEvents(i2);
          }, () => {
            this.terrain && t2.freezeElevation && this._finalizeElevation(), this._afterEase(i2);
          }, t2), this;
        }
        isEasing() {
          return !!this._easeFrameId;
        }
        stop() {
          return this._stop();
        }
        _stop(t2, e2) {
          var i2;
          if (this._easeFrameId && (this._cancelRenderFrame(this._easeFrameId), delete this._easeFrameId, delete this._onEaseFrame), this._onEaseEnd) {
            const t3 = this._onEaseEnd;
            delete this._onEaseEnd, t3.call(this, e2);
          }
          return t2 || null === (i2 = this.handlers) || void 0 === i2 || i2.stop(false), this;
        }
        _ease(t2, e2, i2) {
          false === i2.animate || 0 === i2.duration ? (t2(1), e2()) : (this._easeStart = o.now(), this._easeOptions = i2, this._onEaseFrame = t2, this._onEaseEnd = e2, this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback));
        }
        _normalizeBearing(t2, i2) {
          t2 = e.b3(t2, -180, 180);
          const a2 = Math.abs(t2 - i2);
          return Math.abs(t2 - 360 - i2) < a2 && (t2 -= 360), Math.abs(t2 + 360 - i2) < a2 && (t2 += 360), t2;
        }
        _normalizeCenter(t2, e2) {
          if (!e2.renderWorldCopies || e2.lngRange) return;
          const i2 = t2.lng - e2.center.lng;
          t2.lng += i2 > 180 ? -360 : i2 < -180 ? 360 : 0;
        }
        queryTerrainElevation(t2) {
          return this.terrain ? this.terrain.getElevationForLngLatZoom(e.N.convert(t2), this.transform.tileZoom) - this.transform.elevation : null;
        }
      }
      const Is = { compact: true, customAttribution: '<a href="https://maplibre.org/" target="_blank">MapLibre</a>' };
      class Es {
        constructor(t2 = Is) {
          this._toggleAttribution = () => {
            this._container.classList.contains("maplibregl-compact") && (this._container.classList.contains("maplibregl-compact-show") ? (this._container.setAttribute("open", ""), this._container.classList.remove("maplibregl-compact-show")) : (this._container.classList.add("maplibregl-compact-show"), this._container.removeAttribute("open")));
          }, this._updateData = (t3) => {
            !t3 || "metadata" !== t3.sourceDataType && "visibility" !== t3.sourceDataType && "style" !== t3.dataType && "terrain" !== t3.type || this._updateAttributions();
          }, this._updateCompact = () => {
            this._map.getCanvasContainer().offsetWidth <= 640 || this._compact ? false === this._compact ? this._container.setAttribute("open", "") : this._container.classList.contains("maplibregl-compact") || this._container.classList.contains("maplibregl-attrib-empty") || (this._container.setAttribute("open", ""), this._container.classList.add("maplibregl-compact", "maplibregl-compact-show")) : (this._container.setAttribute("open", ""), this._container.classList.contains("maplibregl-compact") && this._container.classList.remove("maplibregl-compact", "maplibregl-compact-show"));
          }, this._updateCompactMinimize = () => {
            this._container.classList.contains("maplibregl-compact") && this._container.classList.contains("maplibregl-compact-show") && this._container.classList.remove("maplibregl-compact-show");
          }, this.options = t2;
        }
        getDefaultPosition() {
          return "bottom-right";
        }
        onAdd(t2) {
          return this._map = t2, this._compact = this.options.compact, this._container = r.create("details", "maplibregl-ctrl maplibregl-ctrl-attrib"), this._compactButton = r.create("summary", "maplibregl-ctrl-attrib-button", this._container), this._compactButton.addEventListener("click", this._toggleAttribution), this._setElementTitle(this._compactButton, "ToggleAttribution"), this._innerContainer = r.create("div", "maplibregl-ctrl-attrib-inner", this._container), this._updateAttributions(), this._updateCompact(), this._map.on("styledata", this._updateData), this._map.on("sourcedata", this._updateData), this._map.on("terrain", this._updateData), this._map.on("resize", this._updateCompact), this._map.on("drag", this._updateCompactMinimize), this._container;
        }
        onRemove() {
          r.remove(this._container), this._map.off("styledata", this._updateData), this._map.off("sourcedata", this._updateData), this._map.off("terrain", this._updateData), this._map.off("resize", this._updateCompact), this._map.off("drag", this._updateCompactMinimize), this._map = void 0, this._compact = void 0, this._attribHTML = void 0;
        }
        _setElementTitle(t2, e2) {
          const i2 = this._map._getUIString(`AttributionControl.${e2}`);
          t2.title = i2, t2.setAttribute("aria-label", i2);
        }
        _updateAttributions() {
          if (!this._map.style) return;
          let t2 = [];
          if (this.options.customAttribution && (Array.isArray(this.options.customAttribution) ? t2 = t2.concat(this.options.customAttribution.map((t3) => "string" != typeof t3 ? "" : t3)) : "string" == typeof this.options.customAttribution && t2.push(this.options.customAttribution)), this._map.style.stylesheet) {
            const t3 = this._map.style.stylesheet;
            this.styleOwner = t3.owner, this.styleId = t3.id;
          }
          const e2 = this._map.style.sourceCaches;
          for (const i3 in e2) {
            const a2 = e2[i3];
            if (a2.used || a2.usedForTerrain) {
              const e3 = a2.getSource();
              e3.attribution && t2.indexOf(e3.attribution) < 0 && t2.push(e3.attribution);
            }
          }
          t2 = t2.filter((t3) => String(t3).trim()), t2.sort((t3, e3) => t3.length - e3.length), t2 = t2.filter((e3, i3) => {
            for (let a2 = i3 + 1; a2 < t2.length; a2++) if (t2[a2].indexOf(e3) >= 0) return false;
            return true;
          });
          const i2 = t2.join(" | ");
          i2 !== this._attribHTML && (this._attribHTML = i2, t2.length ? (this._innerContainer.innerHTML = i2, this._container.classList.remove("maplibregl-attrib-empty")) : this._container.classList.add("maplibregl-attrib-empty"), this._updateCompact(), this._editLink = null);
        }
      }
      class Ps {
        constructor(t2 = {}) {
          this._updateCompact = () => {
            const t3 = this._container.children;
            if (t3.length) {
              const e2 = t3[0];
              this._map.getCanvasContainer().offsetWidth <= 640 || this._compact ? false !== this._compact && e2.classList.add("maplibregl-compact") : e2.classList.remove("maplibregl-compact");
            }
          }, this.options = t2;
        }
        getDefaultPosition() {
          return "bottom-left";
        }
        onAdd(t2) {
          this._map = t2, this._compact = this.options && this.options.compact, this._container = r.create("div", "maplibregl-ctrl");
          const e2 = r.create("a", "maplibregl-ctrl-logo");
          return e2.target = "_blank", e2.rel = "noopener nofollow", e2.href = "https://maplibre.org/", e2.setAttribute("aria-label", this._map._getUIString("LogoControl.Title")), e2.setAttribute("rel", "noopener nofollow"), this._container.appendChild(e2), this._container.style.display = "block", this._map.on("resize", this._updateCompact), this._updateCompact(), this._container;
        }
        onRemove() {
          r.remove(this._container), this._map.off("resize", this._updateCompact), this._map = void 0, this._compact = void 0;
        }
      }
      class Cs {
        constructor() {
          this._queue = [], this._id = 0, this._cleared = false, this._currentlyRunning = false;
        }
        add(t2) {
          const e2 = ++this._id;
          return this._queue.push({ callback: t2, id: e2, cancelled: false }), e2;
        }
        remove(t2) {
          const e2 = this._currentlyRunning, i2 = e2 ? this._queue.concat(e2) : this._queue;
          for (const e3 of i2) if (e3.id === t2) return void (e3.cancelled = true);
        }
        run(t2 = 0) {
          if (this._currentlyRunning) throw new Error("Attempting to run(), but is already running.");
          const e2 = this._currentlyRunning = this._queue;
          this._queue = [];
          for (const i2 of e2) if (!i2.cancelled && (i2.callback(t2), this._cleared)) break;
          this._cleared = false, this._currentlyRunning = false;
        }
        clear() {
          this._currentlyRunning && (this._cleared = true), this._queue = [];
        }
      }
      var Ss = e.Y([{ name: "a_pos3d", type: "Int16", components: 3 }]);
      class zs extends e.E {
        constructor(t2) {
          super(), this.sourceCache = t2, this._tiles = {}, this._renderableTilesKeys = [], this._sourceTileCache = {}, this.minzoom = 0, this.maxzoom = 22, this.tileSize = 512, this.deltaZoom = 1, t2.usedForTerrain = true, t2.tileSize = this.tileSize * 2 ** this.deltaZoom;
        }
        destruct() {
          this.sourceCache.usedForTerrain = false, this.sourceCache.tileSize = null;
        }
        update(t2, i2) {
          this.sourceCache.update(t2, i2), this._renderableTilesKeys = [];
          const a2 = {};
          for (const s2 of t2.coveringTiles({ tileSize: this.tileSize, minzoom: this.minzoom, maxzoom: this.maxzoom, reparseOverscaled: false, terrain: i2 })) a2[s2.key] = true, this._renderableTilesKeys.push(s2.key), this._tiles[s2.key] || (s2.posMatrix = new Float64Array(16), e.aP(s2.posMatrix, 0, e.X, 0, e.X, 0, 1), this._tiles[s2.key] = new lt2(s2, this.tileSize));
          for (const t3 in this._tiles) a2[t3] || delete this._tiles[t3];
        }
        freeRtt(t2) {
          for (const e2 in this._tiles) {
            const i2 = this._tiles[e2];
            (!t2 || i2.tileID.equals(t2) || i2.tileID.isChildOf(t2) || t2.isChildOf(i2.tileID)) && (i2.rtt = []);
          }
        }
        getRenderableTiles() {
          return this._renderableTilesKeys.map((t2) => this.getTileByID(t2));
        }
        getTileByID(t2) {
          return this._tiles[t2];
        }
        getTerrainCoords(t2) {
          const i2 = {};
          for (const a2 of this._renderableTilesKeys) {
            const s2 = this._tiles[a2].tileID;
            if (s2.canonical.equals(t2.canonical)) {
              const s3 = t2.clone();
              s3.posMatrix = new Float64Array(16), e.aP(s3.posMatrix, 0, e.X, 0, e.X, 0, 1), i2[a2] = s3;
            } else if (s2.canonical.isChildOf(t2.canonical)) {
              const o2 = t2.clone();
              o2.posMatrix = new Float64Array(16);
              const r2 = s2.canonical.z - t2.canonical.z, n2 = s2.canonical.x - (s2.canonical.x >> r2 << r2), l2 = s2.canonical.y - (s2.canonical.y >> r2 << r2), h2 = e.X >> r2;
              e.aP(o2.posMatrix, 0, h2, 0, h2, 0, 1), e.J(o2.posMatrix, o2.posMatrix, [-n2 * h2, -l2 * h2, 0]), i2[a2] = o2;
            } else if (t2.canonical.isChildOf(s2.canonical)) {
              const o2 = t2.clone();
              o2.posMatrix = new Float64Array(16);
              const r2 = t2.canonical.z - s2.canonical.z, n2 = t2.canonical.x - (t2.canonical.x >> r2 << r2), l2 = t2.canonical.y - (t2.canonical.y >> r2 << r2), h2 = e.X >> r2;
              e.aP(o2.posMatrix, 0, e.X, 0, e.X, 0, 1), e.J(o2.posMatrix, o2.posMatrix, [n2 * h2, l2 * h2, 0]), e.K(o2.posMatrix, o2.posMatrix, [1 / 2 ** r2, 1 / 2 ** r2, 0]), i2[a2] = o2;
            }
          }
          return i2;
        }
        getSourceTile(t2, e2) {
          const i2 = this.sourceCache._source;
          let a2 = t2.overscaledZ - this.deltaZoom;
          if (a2 > i2.maxzoom && (a2 = i2.maxzoom), a2 < i2.minzoom) return null;
          this._sourceTileCache[t2.key] || (this._sourceTileCache[t2.key] = t2.scaledTo(a2).key);
          let s2 = this.sourceCache.getTileByID(this._sourceTileCache[t2.key]);
          if ((!s2 || !s2.dem) && e2) for (; a2 >= i2.minzoom && (!s2 || !s2.dem); ) s2 = this.sourceCache.getTileByID(t2.scaledTo(a2--).key);
          return s2;
        }
        tilesAfterTime(t2 = Date.now()) {
          return Object.values(this._tiles).filter((e2) => e2.timeAdded >= t2);
        }
      }
      class Ds {
        constructor(t2, e2, i2) {
          this.painter = t2, this.sourceCache = new zs(e2), this.options = i2, this.exaggeration = "number" == typeof i2.exaggeration ? i2.exaggeration : 1, this.qualityFactor = 2, this.meshSize = 128, this._demMatrixCache = {}, this.coordsIndex = [], this._coordsTextureSize = 1024;
        }
        getDEMElevation(t2, i2, a2, s2 = e.X) {
          var o2;
          if (!(i2 >= 0 && i2 < s2 && a2 >= 0 && a2 < s2)) return 0;
          const r2 = this.getTerrainData(t2), n2 = null === (o2 = r2.tile) || void 0 === o2 ? void 0 : o2.dem;
          if (!n2) return 0;
          const l2 = function(t3, e2, i3) {
            var a3 = e2[0], s3 = e2[1];
            return t3[0] = i3[0] * a3 + i3[4] * s3 + i3[12], t3[1] = i3[1] * a3 + i3[5] * s3 + i3[13], t3;
          }([], [i2 / s2 * e.X, a2 / s2 * e.X], r2.u_terrain_matrix), h2 = [l2[0] * n2.dim, l2[1] * n2.dim], c2 = Math.floor(h2[0]), u3 = Math.floor(h2[1]), d2 = h2[0] - c2, _2 = h2[1] - u3;
          return n2.get(c2, u3) * (1 - d2) * (1 - _2) + n2.get(c2 + 1, u3) * d2 * (1 - _2) + n2.get(c2, u3 + 1) * (1 - d2) * _2 + n2.get(c2 + 1, u3 + 1) * d2 * _2;
        }
        getElevationForLngLatZoom(t2, i2) {
          if (!e.bb(i2, t2.wrap())) return 0;
          const { tileID: a2, mercatorX: s2, mercatorY: o2 } = this._getOverscaledTileIDFromLngLatZoom(t2, i2);
          return this.getElevation(a2, s2 % e.X, o2 % e.X, e.X);
        }
        getElevation(t2, i2, a2, s2 = e.X) {
          return this.getDEMElevation(t2, i2, a2, s2) * this.exaggeration;
        }
        getTerrainData(t2) {
          if (!this._emptyDemTexture) {
            const t3 = this.painter.context, i3 = new e.R({ width: 1, height: 1 }, new Uint8Array(4));
            this._emptyDepthTexture = new b(t3, i3, t3.gl.RGBA, { premultiply: false }), this._emptyDemUnpack = [0, 0, 0, 0], this._emptyDemTexture = new b(t3, new e.R({ width: 1, height: 1 }), t3.gl.RGBA, { premultiply: false }), this._emptyDemTexture.bind(t3.gl.NEAREST, t3.gl.CLAMP_TO_EDGE), this._emptyDemMatrix = e.an([]);
          }
          const i2 = this.sourceCache.getSourceTile(t2, true);
          if (i2 && i2.dem && (!i2.demTexture || i2.needsTerrainPrepare)) {
            const t3 = this.painter.context;
            i2.demTexture = this.painter.getTileTexture(i2.dem.stride), i2.demTexture ? i2.demTexture.update(i2.dem.getPixels(), { premultiply: false }) : i2.demTexture = new b(t3, i2.dem.getPixels(), t3.gl.RGBA, { premultiply: false }), i2.demTexture.bind(t3.gl.NEAREST, t3.gl.CLAMP_TO_EDGE), i2.needsTerrainPrepare = false;
          }
          const a2 = i2 && i2 + i2.tileID.key + t2.key;
          if (a2 && !this._demMatrixCache[a2]) {
            const a3 = this.sourceCache.sourceCache._source.maxzoom;
            let s2 = t2.canonical.z - i2.tileID.canonical.z;
            t2.overscaledZ > t2.canonical.z && (t2.canonical.z >= a3 ? s2 = t2.canonical.z - a3 : e.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));
            const o2 = t2.canonical.x - (t2.canonical.x >> s2 << s2), r2 = t2.canonical.y - (t2.canonical.y >> s2 << s2), n2 = e.bc(new Float64Array(16), [1 / (e.X << s2), 1 / (e.X << s2), 0]);
            e.J(n2, n2, [o2 * e.X, r2 * e.X, 0]), this._demMatrixCache[t2.key] = { matrix: n2, coord: t2 };
          }
          return { u_depth: 2, u_terrain: 3, u_terrain_dim: i2 && i2.dem && i2.dem.dim || 1, u_terrain_matrix: a2 ? this._demMatrixCache[t2.key].matrix : this._emptyDemMatrix, u_terrain_unpack: i2 && i2.dem && i2.dem.getUnpackVector() || this._emptyDemUnpack, u_terrain_exaggeration: this.exaggeration, texture: (i2 && i2.demTexture || this._emptyDemTexture).texture, depthTexture: (this._fboDepthTexture || this._emptyDepthTexture).texture, tile: i2 };
        }
        getFramebuffer(t2) {
          const e2 = this.painter, i2 = e2.width / devicePixelRatio, a2 = e2.height / devicePixelRatio;
          return !this._fbo || this._fbo.width === i2 && this._fbo.height === a2 || (this._fbo.destroy(), this._fboCoordsTexture.destroy(), this._fboDepthTexture.destroy(), delete this._fbo, delete this._fboDepthTexture, delete this._fboCoordsTexture), this._fboCoordsTexture || (this._fboCoordsTexture = new b(e2.context, { width: i2, height: a2, data: null }, e2.context.gl.RGBA, { premultiply: false }), this._fboCoordsTexture.bind(e2.context.gl.NEAREST, e2.context.gl.CLAMP_TO_EDGE)), this._fboDepthTexture || (this._fboDepthTexture = new b(e2.context, { width: i2, height: a2, data: null }, e2.context.gl.RGBA, { premultiply: false }), this._fboDepthTexture.bind(e2.context.gl.NEAREST, e2.context.gl.CLAMP_TO_EDGE)), this._fbo || (this._fbo = e2.context.createFramebuffer(i2, a2, true, false), this._fbo.depthAttachment.set(e2.context.createRenderbuffer(e2.context.gl.DEPTH_COMPONENT16, i2, a2))), this._fbo.colorAttachment.set("coords" === t2 ? this._fboCoordsTexture.texture : this._fboDepthTexture.texture), this._fbo;
        }
        getCoordsTexture() {
          const t2 = this.painter.context;
          if (this._coordsTexture) return this._coordsTexture;
          const i2 = new Uint8Array(this._coordsTextureSize * this._coordsTextureSize * 4);
          for (let t3 = 0, e2 = 0; t3 < this._coordsTextureSize; t3++) for (let a3 = 0; a3 < this._coordsTextureSize; a3++, e2 += 4) i2[e2 + 0] = 255 & a3, i2[e2 + 1] = 255 & t3, i2[e2 + 2] = a3 >> 8 << 4 | t3 >> 8, i2[e2 + 3] = 0;
          const a2 = new e.R({ width: this._coordsTextureSize, height: this._coordsTextureSize }, new Uint8Array(i2.buffer)), s2 = new b(t2, a2, t2.gl.RGBA, { premultiply: false });
          return s2.bind(t2.gl.NEAREST, t2.gl.CLAMP_TO_EDGE), this._coordsTexture = s2, s2;
        }
        pointCoordinate(t2) {
          this.painter.maybeDrawDepthAndCoords(true);
          const i2 = new Uint8Array(4), a2 = this.painter.context, s2 = a2.gl, o2 = Math.round(t2.x * this.painter.pixelRatio / devicePixelRatio), r2 = Math.round(t2.y * this.painter.pixelRatio / devicePixelRatio), n2 = Math.round(this.painter.height / devicePixelRatio);
          a2.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer), s2.readPixels(o2, n2 - r2 - 1, 1, 1, s2.RGBA, s2.UNSIGNED_BYTE, i2), a2.bindFramebuffer.set(null);
          const l2 = i2[0] + (i2[2] >> 4 << 8), h2 = i2[1] + ((15 & i2[2]) << 8), c2 = this.coordsIndex[255 - i2[3]], u3 = c2 && this.sourceCache.getTileByID(c2);
          if (!u3) return null;
          const d2 = this._coordsTextureSize, _2 = (1 << u3.tileID.canonical.z) * d2;
          return new e.Z((u3.tileID.canonical.x * d2 + l2) / _2 + u3.tileID.wrap, (u3.tileID.canonical.y * d2 + h2) / _2, this.getElevation(u3.tileID, l2, h2, d2));
        }
        depthAtPoint(t2) {
          const e2 = new Uint8Array(4), i2 = this.painter.context, a2 = i2.gl;
          return i2.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer), a2.readPixels(t2.x, this.painter.height / devicePixelRatio - t2.y - 1, 1, 1, a2.RGBA, a2.UNSIGNED_BYTE, e2), i2.bindFramebuffer.set(null), (e2[0] / 16777216 + e2[1] / 65536 + e2[2] / 256 + e2[3]) / 256;
        }
        getTerrainMesh() {
          if (this._mesh) return this._mesh;
          const t2 = this.painter.context, i2 = new e.bd(), a2 = new e.aY(), s2 = this.meshSize, o2 = e.X / s2, r2 = s2 * s2;
          for (let t3 = 0; t3 <= s2; t3++) for (let e2 = 0; e2 <= s2; e2++) i2.emplaceBack(e2 * o2, t3 * o2, 0);
          for (let t3 = 0; t3 < r2; t3 += s2 + 1) for (let e2 = 0; e2 < s2; e2++) a2.emplaceBack(e2 + t3, s2 + e2 + t3 + 1, s2 + e2 + t3 + 2), a2.emplaceBack(e2 + t3, s2 + e2 + t3 + 2, e2 + t3 + 1);
          const n2 = i2.length, l2 = n2 + 2 * (s2 + 1);
          for (const t3 of [0, 1]) for (let a3 = 0; a3 <= s2; a3++) for (const s3 of [0, 1]) i2.emplaceBack(a3 * o2, t3 * e.X, s3);
          for (let t3 = 0; t3 < 2 * s2; t3 += 2) a2.emplaceBack(l2 + t3, l2 + t3 + 1, l2 + t3 + 3), a2.emplaceBack(l2 + t3, l2 + t3 + 3, l2 + t3 + 2), a2.emplaceBack(n2 + t3, n2 + t3 + 3, n2 + t3 + 1), a2.emplaceBack(n2 + t3, n2 + t3 + 2, n2 + t3 + 3);
          const h2 = i2.length, c2 = h2 + 2 * (s2 + 1);
          for (const t3 of [0, 1]) for (let a3 = 0; a3 <= s2; a3++) for (const s3 of [0, 1]) i2.emplaceBack(t3 * e.X, a3 * o2, s3);
          for (let t3 = 0; t3 < 2 * s2; t3 += 2) a2.emplaceBack(h2 + t3, h2 + t3 + 1, h2 + t3 + 3), a2.emplaceBack(h2 + t3, h2 + t3 + 3, h2 + t3 + 2), a2.emplaceBack(c2 + t3, c2 + t3 + 3, c2 + t3 + 1), a2.emplaceBack(c2 + t3, c2 + t3 + 2, c2 + t3 + 3);
          return this._mesh = new ga(t2.createVertexBuffer(i2, Ss.members), t2.createIndexBuffer(a2), e.a0.simpleSegment(0, 0, i2.length, a2.length)), this._mesh;
        }
        getMeshFrameDelta(t2) {
          return 2 * Math.PI * e.be / Math.pow(2, t2) / 5;
        }
        getMinTileElevationForLngLatZoom(t2, e2) {
          var i2;
          const { tileID: a2 } = this._getOverscaledTileIDFromLngLatZoom(t2, e2);
          return null !== (i2 = this.getMinMaxElevation(a2).minElevation) && void 0 !== i2 ? i2 : 0;
        }
        getMinMaxElevation(t2) {
          const e2 = this.getTerrainData(t2).tile, i2 = { minElevation: null, maxElevation: null };
          return e2 && e2.dem && (i2.minElevation = e2.dem.min * this.exaggeration, i2.maxElevation = e2.dem.max * this.exaggeration), i2;
        }
        _getOverscaledTileIDFromLngLatZoom(t2, i2) {
          const a2 = e.Z.fromLngLat(t2.wrap()), s2 = (1 << i2) * e.X, o2 = a2.x * s2, r2 = a2.y * s2, n2 = Math.floor(o2 / e.X), l2 = Math.floor(r2 / e.X);
          return { tileID: new e.S(i2, 0, i2, n2, l2), mercatorX: o2, mercatorY: r2 };
        }
      }
      class Ms {
        constructor(t2, e2, i2) {
          this._context = t2, this._size = e2, this._tileSize = i2, this._objects = [], this._recentlyUsed = [], this._stamp = 0;
        }
        destruct() {
          for (const t2 of this._objects) t2.texture.destroy(), t2.fbo.destroy();
        }
        _createObject(t2) {
          const e2 = this._context.createFramebuffer(this._tileSize, this._tileSize, true, true), i2 = new b(this._context, { width: this._tileSize, height: this._tileSize, data: null }, this._context.gl.RGBA);
          return i2.bind(this._context.gl.LINEAR, this._context.gl.CLAMP_TO_EDGE), e2.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL, this._tileSize, this._tileSize)), e2.colorAttachment.set(i2.texture), { id: t2, fbo: e2, texture: i2, stamp: -1, inUse: false };
        }
        getObjectForId(t2) {
          return this._objects[t2];
        }
        useObject(t2) {
          t2.inUse = true, this._recentlyUsed = this._recentlyUsed.filter((e2) => t2.id !== e2), this._recentlyUsed.push(t2.id);
        }
        stampObject(t2) {
          t2.stamp = ++this._stamp;
        }
        getOrCreateFreeObject() {
          for (const t3 of this._recentlyUsed) if (!this._objects[t3].inUse) return this._objects[t3];
          if (this._objects.length >= this._size) throw new Error("No free RenderPool available, call freeAllObjects() required!");
          const t2 = this._createObject(this._objects.length);
          return this._objects.push(t2), t2;
        }
        freeObject(t2) {
          t2.inUse = false;
        }
        freeAllObjects() {
          for (const t2 of this._objects) this.freeObject(t2);
        }
        isFull() {
          return !(this._objects.length < this._size) && false === this._objects.some((t2) => !t2.inUse);
        }
      }
      const As = { background: true, fill: true, line: true, raster: true, hillshade: true };
      class Rs {
        constructor(t2, e2) {
          this.painter = t2, this.terrain = e2, this.pool = new Ms(t2.context, 30, e2.sourceCache.tileSize * e2.qualityFactor);
        }
        destruct() {
          this.pool.destruct();
        }
        getTexture(t2) {
          return this.pool.getObjectForId(t2.rtt[this._stacks.length - 1].id).texture;
        }
        prepareForRender(t2, e2) {
          this._stacks = [], this._prevType = null, this._rttTiles = [], this._renderableTiles = this.terrain.sourceCache.getRenderableTiles(), this._renderableLayerIds = t2._order.filter((i2) => !t2._layers[i2].isHidden(e2)), this._coordsDescendingInv = {};
          for (const e3 in t2.sourceCaches) {
            this._coordsDescendingInv[e3] = {};
            const i2 = t2.sourceCaches[e3].getVisibleCoordinates();
            for (const t3 of i2) {
              const i3 = this.terrain.sourceCache.getTerrainCoords(t3);
              for (const t4 in i3) this._coordsDescendingInv[e3][t4] || (this._coordsDescendingInv[e3][t4] = []), this._coordsDescendingInv[e3][t4].push(i3[t4]);
            }
          }
          this._coordsDescendingInvStr = {};
          for (const e3 of t2._order) {
            const i2 = t2._layers[e3], a2 = i2.source;
            if (As[i2.type] && !this._coordsDescendingInvStr[a2]) {
              this._coordsDescendingInvStr[a2] = {};
              for (const t3 in this._coordsDescendingInv[a2]) this._coordsDescendingInvStr[a2][t3] = this._coordsDescendingInv[a2][t3].map((t4) => t4.key).sort().join();
            }
          }
          for (const t3 of this._renderableTiles) for (const e3 in this._coordsDescendingInvStr) {
            const i2 = this._coordsDescendingInvStr[e3][t3.tileID.key];
            i2 && i2 !== t3.rttCoords[e3] && (t3.rtt = []);
          }
        }
        renderLayer(t2) {
          if (t2.isHidden(this.painter.transform.zoom)) return false;
          const i2 = t2.type, a2 = this.painter, s2 = this._renderableLayerIds[this._renderableLayerIds.length - 1] === t2.id;
          if (As[i2] && (this._prevType && As[this._prevType] || this._stacks.push([]), this._prevType = i2, this._stacks[this._stacks.length - 1].push(t2.id), !s2)) return true;
          if (As[this._prevType] || As[i2] && s2) {
            this._prevType = i2;
            const t3 = this._stacks.length - 1, s3 = this._stacks[t3] || [];
            for (const i3 of this._renderableTiles) {
              if (this.pool.isFull() && (fa(this.painter, this.terrain, this._rttTiles), this._rttTiles = [], this.pool.freeAllObjects()), this._rttTiles.push(i3), i3.rtt[t3]) {
                const e2 = this.pool.getObjectForId(i3.rtt[t3].id);
                if (e2.stamp === i3.rtt[t3].stamp) {
                  this.pool.useObject(e2);
                  continue;
                }
              }
              const o2 = this.pool.getOrCreateFreeObject();
              this.pool.useObject(o2), this.pool.stampObject(o2), i3.rtt[t3] = { id: o2.id, stamp: o2.stamp }, a2.context.bindFramebuffer.set(o2.fbo.framebuffer), a2.context.clear({ color: e.aM.transparent, stencil: 0 }), a2.currentStencilSource = void 0;
              for (let t4 = 0; t4 < s3.length; t4++) {
                const e2 = a2.style._layers[s3[t4]], r2 = e2.source ? this._coordsDescendingInv[e2.source][i3.tileID.key] : [i3.tileID];
                a2.context.viewport.set([0, 0, o2.fbo.width, o2.fbo.height]), a2._renderTileClippingMasks(e2, r2), a2.renderLayer(a2, a2.style.sourceCaches[e2.source], e2, r2), e2.source && (i3.rttCoords[e2.source] = this._coordsDescendingInvStr[e2.source][i3.tileID.key]);
              }
            }
            return fa(this.painter, this.terrain, this._rttTiles), this._rttTiles = [], this.pool.freeAllObjects(), As[i2];
          }
          return false;
        }
      }
      const ks = { "AttributionControl.ToggleAttribution": "Toggle attribution", "AttributionControl.MapFeedback": "Map feedback", "FullscreenControl.Enter": "Enter fullscreen", "FullscreenControl.Exit": "Exit fullscreen", "GeolocateControl.FindMyLocation": "Find my location", "GeolocateControl.LocationNotAvailable": "Location not available", "LogoControl.Title": "MapLibre logo", "Map.Title": "Map", "Marker.Title": "Map marker", "NavigationControl.ResetBearing": "Reset bearing to north", "NavigationControl.ZoomIn": "Zoom in", "NavigationControl.ZoomOut": "Zoom out", "Popup.Close": "Close popup", "ScaleControl.Feet": "ft", "ScaleControl.Meters": "m", "ScaleControl.Kilometers": "km", "ScaleControl.Miles": "mi", "ScaleControl.NauticalMiles": "nm", "TerrainControl.Enable": "Enable terrain", "TerrainControl.Disable": "Disable terrain", "CooperativeGesturesHandler.WindowsHelpText": "Use Ctrl + scroll to zoom the map", "CooperativeGesturesHandler.MacHelpText": "Use âŒ˜ + scroll to zoom the map", "CooperativeGesturesHandler.MobileHelpText": "Use two fingers to move the map" }, Ls = i, Fs = { hash: false, interactive: true, bearingSnap: 7, attributionControl: Is, maplibreLogo: false, failIfMajorPerformanceCaveat: false, preserveDrawingBuffer: false, refreshExpiredTiles: true, scrollZoom: true, minZoom: -2, maxZoom: 22, minPitch: 0, maxPitch: 60, boxZoom: true, dragRotate: true, dragPan: true, keyboard: true, doubleClickZoom: true, touchZoomRotate: true, touchPitch: true, cooperativeGestures: false, trackResize: true, center: [0, 0], zoom: 0, bearing: 0, pitch: 0, renderWorldCopies: true, maxTileCacheSize: null, maxTileCacheZoomLevels: e.a.MAX_TILE_CACHE_ZOOM_LEVELS, transformRequest: null, transformCameraUpdate: null, fadeDuration: 300, crossSourceCollisions: true, clickTolerance: 3, localIdeographFontFamily: "sans-serif", pitchWithRotate: true, validateStyle: true, maxCanvasSize: [4096, 4096], cancelPendingTileRequestsWhileZooming: true }, Bs = (t2) => {
        t2.touchstart = t2.dragStart, t2.touchmoveWindow = t2.dragMove, t2.touchend = t2.dragEnd;
      }, Os = { showCompass: true, showZoom: true, visualizePitch: false };
      class Ns {
        constructor(t2, i2, a2 = false) {
          this.mousedown = (t3) => {
            this.startMouse(e.e({}, t3, { ctrlKey: true, preventDefault: () => t3.preventDefault() }), r.mousePos(this.element, t3)), r.addEventListener(window, "mousemove", this.mousemove), r.addEventListener(window, "mouseup", this.mouseup);
          }, this.mousemove = (t3) => {
            this.moveMouse(t3, r.mousePos(this.element, t3));
          }, this.mouseup = (t3) => {
            this.mouseRotate.dragEnd(t3), this.mousePitch && this.mousePitch.dragEnd(t3), this.offTemp();
          }, this.touchstart = (t3) => {
            1 !== t3.targetTouches.length ? this.reset() : (this._startPos = this._lastPos = r.touchPos(this.element, t3.targetTouches)[0], this.startTouch(t3, this._startPos), r.addEventListener(window, "touchmove", this.touchmove, { passive: false }), r.addEventListener(window, "touchend", this.touchend));
          }, this.touchmove = (t3) => {
            1 !== t3.targetTouches.length ? this.reset() : (this._lastPos = r.touchPos(this.element, t3.targetTouches)[0], this.moveTouch(t3, this._lastPos));
          }, this.touchend = (t3) => {
            0 === t3.targetTouches.length && this._startPos && this._lastPos && this._startPos.dist(this._lastPos) < this._clickTolerance && this.element.click(), delete this._startPos, delete this._lastPos, this.offTemp();
          }, this.reset = () => {
            this.mouseRotate.reset(), this.mousePitch && this.mousePitch.reset(), this.touchRotate.reset(), this.touchPitch && this.touchPitch.reset(), delete this._startPos, delete this._lastPos, this.offTemp();
          }, this._clickTolerance = 10;
          const s2 = t2.dragRotate._mouseRotate.getClickTolerance(), o2 = t2.dragRotate._mousePitch.getClickTolerance();
          this.element = i2, this.mouseRotate = Ka({ clickTolerance: s2, enable: true }), this.touchRotate = (({ enable: t3, clickTolerance: e2, bearingDegreesPerPixelMoved: i3 = 0.8 }) => {
            const a3 = new $a();
            return new Ga({ clickTolerance: e2, move: (t4, e3) => ({ bearingDelta: (e3.x - t4.x) * i3 }), moveStateManager: a3, enable: t3, assignEvents: Bs });
          })({ clickTolerance: s2, enable: true }), this.map = t2, a2 && (this.mousePitch = Ja({ clickTolerance: o2, enable: true }), this.touchPitch = (({ enable: t3, clickTolerance: e2, pitchDegreesPerPixelMoved: i3 = -0.5 }) => {
            const a3 = new $a();
            return new Ga({ clickTolerance: e2, move: (t4, e3) => ({ pitchDelta: (e3.y - t4.y) * i3 }), moveStateManager: a3, enable: t3, assignEvents: Bs });
          })({ clickTolerance: o2, enable: true })), r.addEventListener(i2, "mousedown", this.mousedown), r.addEventListener(i2, "touchstart", this.touchstart, { passive: false }), r.addEventListener(i2, "touchcancel", this.reset);
        }
        startMouse(t2, e2) {
          this.mouseRotate.dragStart(t2, e2), this.mousePitch && this.mousePitch.dragStart(t2, e2), r.disableDrag();
        }
        startTouch(t2, e2) {
          this.touchRotate.dragStart(t2, e2), this.touchPitch && this.touchPitch.dragStart(t2, e2), r.disableDrag();
        }
        moveMouse(t2, e2) {
          const i2 = this.map, { bearingDelta: a2 } = this.mouseRotate.dragMove(t2, e2) || {};
          if (a2 && i2.setBearing(i2.getBearing() + a2), this.mousePitch) {
            const { pitchDelta: a3 } = this.mousePitch.dragMove(t2, e2) || {};
            a3 && i2.setPitch(i2.getPitch() + a3);
          }
        }
        moveTouch(t2, e2) {
          const i2 = this.map, { bearingDelta: a2 } = this.touchRotate.dragMove(t2, e2) || {};
          if (a2 && i2.setBearing(i2.getBearing() + a2), this.touchPitch) {
            const { pitchDelta: a3 } = this.touchPitch.dragMove(t2, e2) || {};
            a3 && i2.setPitch(i2.getPitch() + a3);
          }
        }
        off() {
          const t2 = this.element;
          r.removeEventListener(t2, "mousedown", this.mousedown), r.removeEventListener(t2, "touchstart", this.touchstart, { passive: false }), r.removeEventListener(window, "touchmove", this.touchmove, { passive: false }), r.removeEventListener(window, "touchend", this.touchend), r.removeEventListener(t2, "touchcancel", this.reset), this.offTemp();
        }
        offTemp() {
          r.enableDrag(), r.removeEventListener(window, "mousemove", this.mousemove), r.removeEventListener(window, "mouseup", this.mouseup), r.removeEventListener(window, "touchmove", this.touchmove, { passive: false }), r.removeEventListener(window, "touchend", this.touchend);
        }
      }
      let Us;
      function js(t2, i2, a2) {
        const s2 = new e.N(t2.lng, t2.lat);
        if (t2 = new e.N(t2.lng, t2.lat), i2) {
          const s3 = new e.N(t2.lng - 360, t2.lat), o2 = new e.N(t2.lng + 360, t2.lat), r2 = a2.locationPoint(t2).distSqr(i2);
          a2.locationPoint(s3).distSqr(i2) < r2 ? t2 = s3 : a2.locationPoint(o2).distSqr(i2) < r2 && (t2 = o2);
        }
        for (; Math.abs(t2.lng - a2.center.lng) > 180; ) {
          const e2 = a2.locationPoint(t2);
          if (e2.x >= 0 && e2.y >= 0 && e2.x <= a2.width && e2.y <= a2.height) break;
          t2.lng > a2.center.lng ? t2.lng -= 360 : t2.lng += 360;
        }
        return t2.lng !== s2.lng && a2.locationPoint(t2).y > a2.height / 2 - a2.getHorizon() ? t2 : s2;
      }
      const Zs = { center: "translate(-50%,-50%)", top: "translate(-50%,0)", "top-left": "translate(0,0)", "top-right": "translate(-100%,0)", bottom: "translate(-50%,-100%)", "bottom-left": "translate(0,-100%)", "bottom-right": "translate(-100%,-100%)", left: "translate(0,-50%)", right: "translate(-100%,-50%)" };
      function qs(t2, e2, i2) {
        const a2 = t2.classList;
        for (const t3 in Zs) a2.remove(`maplibregl-${i2}-anchor-${t3}`);
        a2.add(`maplibregl-${i2}-anchor-${e2}`);
      }
      class Vs extends e.E {
        constructor(t2) {
          if (super(), this._onKeyPress = (t3) => {
            const e2 = t3.code, i2 = t3.charCode || t3.keyCode;
            "Space" !== e2 && "Enter" !== e2 && 32 !== i2 && 13 !== i2 || this.togglePopup();
          }, this._onMapClick = (t3) => {
            const e2 = t3.originalEvent.target, i2 = this._element;
            this._popup && (e2 === i2 || i2.contains(e2)) && this.togglePopup();
          }, this._update = (t3) => {
            var e2;
            if (!this._map) return;
            const i2 = this._map.loaded() && !this._map.isMoving();
            ("terrain" === (null == t3 ? void 0 : t3.type) || "render" === (null == t3 ? void 0 : t3.type) && !i2) && this._map.once("render", this._update), this._lngLat = this._map.transform.renderWorldCopies ? js(this._lngLat, this._flatPos, this._map.transform) : null === (e2 = this._lngLat) || void 0 === e2 ? void 0 : e2.wrap(), this._flatPos = this._pos = this._map.project(this._lngLat)._add(this._offset), this._map.terrain && (this._flatPos = this._map.transform.locationPoint(this._lngLat)._add(this._offset));
            let a2 = "";
            "viewport" === this._rotationAlignment || "auto" === this._rotationAlignment ? a2 = `rotateZ(${this._rotation}deg)` : "map" === this._rotationAlignment && (a2 = `rotateZ(${this._rotation - this._map.getBearing()}deg)`);
            let s2 = "";
            "viewport" === this._pitchAlignment || "auto" === this._pitchAlignment ? s2 = "rotateX(0deg)" : "map" === this._pitchAlignment && (s2 = `rotateX(${this._map.getPitch()}deg)`), this._subpixelPositioning || t3 && "moveend" !== t3.type || (this._pos = this._pos.round()), r.setTransform(this._element, `${Zs[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${s2} ${a2}`), o.frameAsync(new AbortController()).then(() => {
              this._updateOpacity(t3 && "moveend" === t3.type);
            }).catch(() => {
            });
          }, this._onMove = (t3) => {
            if (!this._isDragging) {
              const e2 = this._clickTolerance || this._map._clickTolerance;
              this._isDragging = t3.point.dist(this._pointerdownPos) >= e2;
            }
            this._isDragging && (this._pos = t3.point.sub(this._positionDelta), this._lngLat = this._map.unproject(this._pos), this.setLngLat(this._lngLat), this._element.style.pointerEvents = "none", "pending" === this._state && (this._state = "active", this.fire(new e.k("dragstart"))), this.fire(new e.k("drag")));
          }, this._onUp = () => {
            this._element.style.pointerEvents = "auto", this._positionDelta = null, this._pointerdownPos = null, this._isDragging = false, this._map.off("mousemove", this._onMove), this._map.off("touchmove", this._onMove), "active" === this._state && this.fire(new e.k("dragend")), this._state = "inactive";
          }, this._addDragHandler = (t3) => {
            this._element.contains(t3.originalEvent.target) && (t3.preventDefault(), this._positionDelta = t3.point.sub(this._pos).add(this._offset), this._pointerdownPos = t3.point, this._state = "pending", this._map.on("mousemove", this._onMove), this._map.on("touchmove", this._onMove), this._map.once("mouseup", this._onUp), this._map.once("touchend", this._onUp));
          }, this._anchor = t2 && t2.anchor || "center", this._color = t2 && t2.color || "#3FB1CE", this._scale = t2 && t2.scale || 1, this._draggable = t2 && t2.draggable || false, this._clickTolerance = t2 && t2.clickTolerance || 0, this._subpixelPositioning = t2 && t2.subpixelPositioning || false, this._isDragging = false, this._state = "inactive", this._rotation = t2 && t2.rotation || 0, this._rotationAlignment = t2 && t2.rotationAlignment || "auto", this._pitchAlignment = t2 && t2.pitchAlignment && "auto" !== t2.pitchAlignment ? t2.pitchAlignment : this._rotationAlignment, this.setOpacity(), this.setOpacity(null == t2 ? void 0 : t2.opacity, null == t2 ? void 0 : t2.opacityWhenCovered), t2 && t2.element) this._element = t2.element, this._offset = e.P.convert(t2 && t2.offset || [0, 0]);
          else {
            this._defaultMarker = true, this._element = r.create("div");
            const i2 = r.createNS("http://www.w3.org/2000/svg", "svg"), a2 = 41, s2 = 27;
            i2.setAttributeNS(null, "display", "block"), i2.setAttributeNS(null, "height", `${a2}px`), i2.setAttributeNS(null, "width", `${s2}px`), i2.setAttributeNS(null, "viewBox", `0 0 ${s2} ${a2}`);
            const o2 = r.createNS("http://www.w3.org/2000/svg", "g");
            o2.setAttributeNS(null, "stroke", "none"), o2.setAttributeNS(null, "stroke-width", "1"), o2.setAttributeNS(null, "fill", "none"), o2.setAttributeNS(null, "fill-rule", "evenodd");
            const n2 = r.createNS("http://www.w3.org/2000/svg", "g");
            n2.setAttributeNS(null, "fill-rule", "nonzero");
            const l2 = r.createNS("http://www.w3.org/2000/svg", "g");
            l2.setAttributeNS(null, "transform", "translate(3.0, 29.0)"), l2.setAttributeNS(null, "fill", "#000000");
            const h2 = [{ rx: "10.5", ry: "5.25002273" }, { rx: "10.5", ry: "5.25002273" }, { rx: "9.5", ry: "4.77275007" }, { rx: "8.5", ry: "4.29549936" }, { rx: "7.5", ry: "3.81822308" }, { rx: "6.5", ry: "3.34094679" }, { rx: "5.5", ry: "2.86367051" }, { rx: "4.5", ry: "2.38636864" }];
            for (const t3 of h2) {
              const e2 = r.createNS("http://www.w3.org/2000/svg", "ellipse");
              e2.setAttributeNS(null, "opacity", "0.04"), e2.setAttributeNS(null, "cx", "10.5"), e2.setAttributeNS(null, "cy", "5.80029008"), e2.setAttributeNS(null, "rx", t3.rx), e2.setAttributeNS(null, "ry", t3.ry), l2.appendChild(e2);
            }
            const c2 = r.createNS("http://www.w3.org/2000/svg", "g");
            c2.setAttributeNS(null, "fill", this._color);
            const u3 = r.createNS("http://www.w3.org/2000/svg", "path");
            u3.setAttributeNS(null, "d", "M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"), c2.appendChild(u3);
            const d2 = r.createNS("http://www.w3.org/2000/svg", "g");
            d2.setAttributeNS(null, "opacity", "0.25"), d2.setAttributeNS(null, "fill", "#000000");
            const _2 = r.createNS("http://www.w3.org/2000/svg", "path");
            _2.setAttributeNS(null, "d", "M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"), d2.appendChild(_2);
            const p3 = r.createNS("http://www.w3.org/2000/svg", "g");
            p3.setAttributeNS(null, "transform", "translate(6.0, 7.0)"), p3.setAttributeNS(null, "fill", "#FFFFFF");
            const m2 = r.createNS("http://www.w3.org/2000/svg", "g");
            m2.setAttributeNS(null, "transform", "translate(8.0, 8.0)");
            const f2 = r.createNS("http://www.w3.org/2000/svg", "circle");
            f2.setAttributeNS(null, "fill", "#000000"), f2.setAttributeNS(null, "opacity", "0.25"), f2.setAttributeNS(null, "cx", "5.5"), f2.setAttributeNS(null, "cy", "5.5"), f2.setAttributeNS(null, "r", "5.4999962");
            const g2 = r.createNS("http://www.w3.org/2000/svg", "circle");
            g2.setAttributeNS(null, "fill", "#FFFFFF"), g2.setAttributeNS(null, "cx", "5.5"), g2.setAttributeNS(null, "cy", "5.5"), g2.setAttributeNS(null, "r", "5.4999962"), m2.appendChild(f2), m2.appendChild(g2), n2.appendChild(l2), n2.appendChild(c2), n2.appendChild(d2), n2.appendChild(p3), n2.appendChild(m2), i2.appendChild(n2), i2.setAttributeNS(null, "height", a2 * this._scale + "px"), i2.setAttributeNS(null, "width", s2 * this._scale + "px"), this._element.appendChild(i2), this._offset = e.P.convert(t2 && t2.offset || [0, -14]);
          }
          if (this._element.classList.add("maplibregl-marker"), this._element.addEventListener("dragstart", (t3) => {
            t3.preventDefault();
          }), this._element.addEventListener("mousedown", (t3) => {
            t3.preventDefault();
          }), qs(this._element, this._anchor, "marker"), t2 && t2.className) for (const e2 of t2.className.split(" ")) this._element.classList.add(e2);
          this._popup = null;
        }
        addTo(t2) {
          return this.remove(), this._map = t2, this._element.setAttribute("aria-label", t2._getUIString("Marker.Title")), t2.getCanvasContainer().appendChild(this._element), t2.on("move", this._update), t2.on("moveend", this._update), t2.on("terrain", this._update), this.setDraggable(this._draggable), this._update(), this._map.on("click", this._onMapClick), this;
        }
        remove() {
          return this._opacityTimeout && (clearTimeout(this._opacityTimeout), delete this._opacityTimeout), this._map && (this._map.off("click", this._onMapClick), this._map.off("move", this._update), this._map.off("moveend", this._update), this._map.off("terrain", this._update), this._map.off("mousedown", this._addDragHandler), this._map.off("touchstart", this._addDragHandler), this._map.off("mouseup", this._onUp), this._map.off("touchend", this._onUp), this._map.off("mousemove", this._onMove), this._map.off("touchmove", this._onMove), delete this._map), r.remove(this._element), this._popup && this._popup.remove(), this;
        }
        getLngLat() {
          return this._lngLat;
        }
        setLngLat(t2) {
          return this._lngLat = e.N.convert(t2), this._pos = null, this._popup && this._popup.setLngLat(this._lngLat), this._update(), this;
        }
        getElement() {
          return this._element;
        }
        setPopup(t2) {
          if (this._popup && (this._popup.remove(), this._popup = null, this._element.removeEventListener("keypress", this._onKeyPress), this._originalTabIndex || this._element.removeAttribute("tabindex")), t2) {
            if (!("offset" in t2.options)) {
              const e2 = 38.1, i2 = 13.5, a2 = Math.abs(i2) / Math.SQRT2;
              t2.options.offset = this._defaultMarker ? { top: [0, 0], "top-left": [0, 0], "top-right": [0, 0], bottom: [0, -e2], "bottom-left": [a2, -1 * (e2 - i2 + a2)], "bottom-right": [-a2, -1 * (e2 - i2 + a2)], left: [i2, -1 * (e2 - i2)], right: [-i2, -1 * (e2 - i2)] } : this._offset;
            }
            this._popup = t2, this._originalTabIndex = this._element.getAttribute("tabindex"), this._originalTabIndex || this._element.setAttribute("tabindex", "0"), this._element.addEventListener("keypress", this._onKeyPress);
          }
          return this;
        }
        setSubpixelPositioning(t2) {
          return this._subpixelPositioning = t2, this;
        }
        getPopup() {
          return this._popup;
        }
        togglePopup() {
          const t2 = this._popup;
          return this._element.style.opacity === this._opacityWhenCovered ? this : t2 ? (t2.isOpen() ? t2.remove() : (t2.setLngLat(this._lngLat), t2.addTo(this._map)), this) : this;
        }
        _updateOpacity(t2 = false) {
          var i2, a2;
          if (!(null === (i2 = this._map) || void 0 === i2 ? void 0 : i2.terrain)) return void (this._element.style.opacity !== this._opacity && (this._element.style.opacity = this._opacity));
          if (t2) this._opacityTimeout = null;
          else {
            if (this._opacityTimeout) return;
            this._opacityTimeout = setTimeout(() => {
              this._opacityTimeout = null;
            }, 100);
          }
          const s2 = this._map, o2 = s2.terrain.depthAtPoint(this._pos), r2 = s2.terrain.getElevationForLngLatZoom(this._lngLat, s2.transform.tileZoom);
          if (s2.transform.lngLatToCameraDepth(this._lngLat, r2) - o2 < 6e-3) return void (this._element.style.opacity = this._opacity);
          const n2 = -this._offset.y / s2.transform._pixelPerMeter, l2 = Math.sin(s2.getPitch() * Math.PI / 180) * n2, h2 = s2.terrain.depthAtPoint(new e.P(this._pos.x, this._pos.y - this._offset.y)), c2 = s2.transform.lngLatToCameraDepth(this._lngLat, r2 + l2) - h2 > 6e-3;
          (null === (a2 = this._popup) || void 0 === a2 ? void 0 : a2.isOpen()) && c2 && this._popup.remove(), this._element.style.opacity = c2 ? this._opacityWhenCovered : this._opacity;
        }
        getOffset() {
          return this._offset;
        }
        setOffset(t2) {
          return this._offset = e.P.convert(t2), this._update(), this;
        }
        addClassName(t2) {
          this._element.classList.add(t2);
        }
        removeClassName(t2) {
          this._element.classList.remove(t2);
        }
        toggleClassName(t2) {
          return this._element.classList.toggle(t2);
        }
        setDraggable(t2) {
          return this._draggable = !!t2, this._map && (t2 ? (this._map.on("mousedown", this._addDragHandler), this._map.on("touchstart", this._addDragHandler)) : (this._map.off("mousedown", this._addDragHandler), this._map.off("touchstart", this._addDragHandler))), this;
        }
        isDraggable() {
          return this._draggable;
        }
        setRotation(t2) {
          return this._rotation = t2 || 0, this._update(), this;
        }
        getRotation() {
          return this._rotation;
        }
        setRotationAlignment(t2) {
          return this._rotationAlignment = t2 || "auto", this._update(), this;
        }
        getRotationAlignment() {
          return this._rotationAlignment;
        }
        setPitchAlignment(t2) {
          return this._pitchAlignment = t2 && "auto" !== t2 ? t2 : this._rotationAlignment, this._update(), this;
        }
        getPitchAlignment() {
          return this._pitchAlignment;
        }
        setOpacity(t2, e2) {
          return void 0 === t2 && void 0 === e2 && (this._opacity = "1", this._opacityWhenCovered = "0.2"), void 0 !== t2 && (this._opacity = t2), void 0 !== e2 && (this._opacityWhenCovered = e2), this._map && this._updateOpacity(true), this;
        }
      }
      const Gs = { positionOptions: { enableHighAccuracy: false, maximumAge: 0, timeout: 6e3 }, fitBoundsOptions: { maxZoom: 15 }, trackUserLocation: false, showAccuracyCircle: true, showUserLocation: true };
      let Hs = 0, Ws = false;
      const $s = { maxWidth: 100, unit: "metric" };
      function Xs(t2, e2, i2) {
        const a2 = i2 && i2.maxWidth || 100, s2 = t2._container.clientHeight / 2, o2 = t2.unproject([0, s2]), r2 = t2.unproject([a2, s2]), n2 = o2.distanceTo(r2);
        if (i2 && "imperial" === i2.unit) {
          const i3 = 3.2808 * n2;
          i3 > 5280 ? Ks(e2, a2, i3 / 5280, t2._getUIString("ScaleControl.Miles")) : Ks(e2, a2, i3, t2._getUIString("ScaleControl.Feet"));
        } else i2 && "nautical" === i2.unit ? Ks(e2, a2, n2 / 1852, t2._getUIString("ScaleControl.NauticalMiles")) : n2 >= 1e3 ? Ks(e2, a2, n2 / 1e3, t2._getUIString("ScaleControl.Kilometers")) : Ks(e2, a2, n2, t2._getUIString("ScaleControl.Meters"));
      }
      function Ks(t2, e2, i2, a2) {
        const s2 = function(t3) {
          const e3 = Math.pow(10, `${Math.floor(t3)}`.length - 1);
          let i3 = t3 / e3;
          return i3 = i3 >= 10 ? 10 : i3 >= 5 ? 5 : i3 >= 3 ? 3 : i3 >= 2 ? 2 : i3 >= 1 ? 1 : function(t4) {
            const e4 = Math.pow(10, Math.ceil(-Math.log(t4) / Math.LN10));
            return Math.round(t4 * e4) / e4;
          }(i3), e3 * i3;
        }(i2);
        t2.style.width = e2 * (s2 / i2) + "px", t2.innerHTML = `${s2}&nbsp;${a2}`;
      }
      const Js = { closeButton: true, closeOnClick: true, focusAfterOpen: true, className: "", maxWidth: "240px", subpixelPositioning: false }, Ys = ["a[href]", "[tabindex]:not([tabindex='-1'])", "[contenteditable]:not([contenteditable='false'])", "button:not([disabled])", "input:not([disabled])", "select:not([disabled])", "textarea:not([disabled])"].join(", ");
      function Qs(t2) {
        if (t2) {
          if ("number" == typeof t2) {
            const i2 = Math.round(Math.abs(t2) / Math.SQRT2);
            return { center: new e.P(0, 0), top: new e.P(0, t2), "top-left": new e.P(i2, i2), "top-right": new e.P(-i2, i2), bottom: new e.P(0, -t2), "bottom-left": new e.P(i2, -i2), "bottom-right": new e.P(-i2, -i2), left: new e.P(t2, 0), right: new e.P(-t2, 0) };
          }
          if (t2 instanceof e.P || Array.isArray(t2)) {
            const i2 = e.P.convert(t2);
            return { center: i2, top: i2, "top-left": i2, "top-right": i2, bottom: i2, "bottom-left": i2, "bottom-right": i2, left: i2, right: i2 };
          }
          return { center: e.P.convert(t2.center || [0, 0]), top: e.P.convert(t2.top || [0, 0]), "top-left": e.P.convert(t2["top-left"] || [0, 0]), "top-right": e.P.convert(t2["top-right"] || [0, 0]), bottom: e.P.convert(t2.bottom || [0, 0]), "bottom-left": e.P.convert(t2["bottom-left"] || [0, 0]), "bottom-right": e.P.convert(t2["bottom-right"] || [0, 0]), left: e.P.convert(t2.left || [0, 0]), right: e.P.convert(t2.right || [0, 0]) };
        }
        return Qs(new e.P(0, 0));
      }
      const to = i;
      t.AJAXError = e.bh, t.Evented = e.E, t.LngLat = e.N, t.MercatorCoordinate = e.Z, t.Point = e.P, t.addProtocol = e.bi, t.config = e.a, t.removeProtocol = e.bj, t.AttributionControl = Es, t.BoxZoomHandler = Ua, t.CanvasSource = et2, t.CooperativeGesturesHandler = vs, t.DoubleClickZoomHandler = ds, t.DragPanHandler = ms, t.DragRotateHandler = fs, t.EdgeInsets = ba, t.FullscreenControl = class extends e.E {
        constructor(t2 = {}) {
          super(), this._onFullscreenChange = () => {
            var t3;
            let e2 = window.document.fullscreenElement || window.document.mozFullScreenElement || window.document.webkitFullscreenElement || window.document.msFullscreenElement;
            for (; null === (t3 = null == e2 ? void 0 : e2.shadowRoot) || void 0 === t3 ? void 0 : t3.fullscreenElement; ) e2 = e2.shadowRoot.fullscreenElement;
            e2 === this._container !== this._fullscreen && this._handleFullscreenChange();
          }, this._onClickFullscreen = () => {
            this._isFullscreen() ? this._exitFullscreen() : this._requestFullscreen();
          }, this._fullscreen = false, t2 && t2.container && (t2.container instanceof HTMLElement ? this._container = t2.container : e.w("Full screen control 'container' must be a DOM element.")), "onfullscreenchange" in document ? this._fullscreenchange = "fullscreenchange" : "onmozfullscreenchange" in document ? this._fullscreenchange = "mozfullscreenchange" : "onwebkitfullscreenchange" in document ? this._fullscreenchange = "webkitfullscreenchange" : "onmsfullscreenchange" in document && (this._fullscreenchange = "MSFullscreenChange");
        }
        onAdd(t2) {
          return this._map = t2, this._container || (this._container = this._map.getContainer()), this._controlContainer = r.create("div", "maplibregl-ctrl maplibregl-ctrl-group"), this._setupUI(), this._controlContainer;
        }
        onRemove() {
          r.remove(this._controlContainer), this._map = null, window.document.removeEventListener(this._fullscreenchange, this._onFullscreenChange);
        }
        _setupUI() {
          const t2 = this._fullscreenButton = r.create("button", "maplibregl-ctrl-fullscreen", this._controlContainer);
          r.create("span", "maplibregl-ctrl-icon", t2).setAttribute("aria-hidden", "true"), t2.type = "button", this._updateTitle(), this._fullscreenButton.addEventListener("click", this._onClickFullscreen), window.document.addEventListener(this._fullscreenchange, this._onFullscreenChange);
        }
        _updateTitle() {
          const t2 = this._getTitle();
          this._fullscreenButton.setAttribute("aria-label", t2), this._fullscreenButton.title = t2;
        }
        _getTitle() {
          return this._map._getUIString(this._isFullscreen() ? "FullscreenControl.Exit" : "FullscreenControl.Enter");
        }
        _isFullscreen() {
          return this._fullscreen;
        }
        _handleFullscreenChange() {
          this._fullscreen = !this._fullscreen, this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"), this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"), this._updateTitle(), this._fullscreen ? (this.fire(new e.k("fullscreenstart")), this._prevCooperativeGesturesEnabled = this._map.cooperativeGestures.isEnabled(), this._map.cooperativeGestures.disable()) : (this.fire(new e.k("fullscreenend")), this._prevCooperativeGesturesEnabled && this._map.cooperativeGestures.enable());
        }
        _exitFullscreen() {
          window.document.exitFullscreen ? window.document.exitFullscreen() : window.document.mozCancelFullScreen ? window.document.mozCancelFullScreen() : window.document.msExitFullscreen ? window.document.msExitFullscreen() : window.document.webkitCancelFullScreen ? window.document.webkitCancelFullScreen() : this._togglePseudoFullScreen();
        }
        _requestFullscreen() {
          this._container.requestFullscreen ? this._container.requestFullscreen() : this._container.mozRequestFullScreen ? this._container.mozRequestFullScreen() : this._container.msRequestFullscreen ? this._container.msRequestFullscreen() : this._container.webkitRequestFullscreen ? this._container.webkitRequestFullscreen() : this._togglePseudoFullScreen();
        }
        _togglePseudoFullScreen() {
          this._container.classList.toggle("maplibregl-pseudo-fullscreen"), this._handleFullscreenChange(), this._map.resize();
        }
      }, t.GeoJSONSource = J2, t.GeolocateControl = class extends e.E {
        constructor(t2) {
          super(), this._onSuccess = (t3) => {
            if (this._map) {
              if (this._isOutOfMapMaxBounds(t3)) return this._setErrorState(), this.fire(new e.k("outofmaxbounds", t3)), this._updateMarker(), void this._finish();
              if (this.options.trackUserLocation) switch (this._lastKnownPosition = t3, this._watchState) {
                case "WAITING_ACTIVE":
                case "ACTIVE_LOCK":
                case "ACTIVE_ERROR":
                  this._watchState = "ACTIVE_LOCK", this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"), this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");
                  break;
                case "BACKGROUND":
                case "BACKGROUND_ERROR":
                  this._watchState = "BACKGROUND", this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"), this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");
                  break;
                default:
                  throw new Error(`Unexpected watchState ${this._watchState}`);
              }
              this.options.showUserLocation && "OFF" !== this._watchState && this._updateMarker(t3), this.options.trackUserLocation && "ACTIVE_LOCK" !== this._watchState || this._updateCamera(t3), this.options.showUserLocation && this._dotElement.classList.remove("maplibregl-user-location-dot-stale"), this.fire(new e.k("geolocate", t3)), this._finish();
            }
          }, this._updateCamera = (t3) => {
            const i2 = new e.N(t3.coords.longitude, t3.coords.latitude), a2 = t3.coords.accuracy, s2 = this._map.getBearing(), o2 = e.e({ bearing: s2 }, this.options.fitBoundsOptions), r2 = H.fromLngLat(i2, a2);
            this._map.fitBounds(r2, o2, { geolocateSource: true });
          }, this._updateMarker = (t3) => {
            if (t3) {
              const i2 = new e.N(t3.coords.longitude, t3.coords.latitude);
              this._accuracyCircleMarker.setLngLat(i2).addTo(this._map), this._userLocationDotMarker.setLngLat(i2).addTo(this._map), this._accuracy = t3.coords.accuracy, this.options.showUserLocation && this.options.showAccuracyCircle && this._updateCircleRadius();
            } else this._userLocationDotMarker.remove(), this._accuracyCircleMarker.remove();
          }, this._onZoom = () => {
            this.options.showUserLocation && this.options.showAccuracyCircle && this._updateCircleRadius();
          }, this._onError = (t3) => {
            if (this._map) {
              if (this.options.trackUserLocation) if (1 === t3.code) {
                this._watchState = "OFF", this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"), this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"), this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"), this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"), this._geolocateButton.disabled = true;
                const t4 = this._map._getUIString("GeolocateControl.LocationNotAvailable");
                this._geolocateButton.title = t4, this._geolocateButton.setAttribute("aria-label", t4), void 0 !== this._geolocationWatchID && this._clearWatch();
              } else {
                if (3 === t3.code && Ws) return;
                this._setErrorState();
              }
              "OFF" !== this._watchState && this.options.showUserLocation && this._dotElement.classList.add("maplibregl-user-location-dot-stale"), this.fire(new e.k("error", t3)), this._finish();
            }
          }, this._finish = () => {
            this._timeoutId && clearTimeout(this._timeoutId), this._timeoutId = void 0;
          }, this._setupUI = () => {
            this._map && (this._container.addEventListener("contextmenu", (t3) => t3.preventDefault()), this._geolocateButton = r.create("button", "maplibregl-ctrl-geolocate", this._container), r.create("span", "maplibregl-ctrl-icon", this._geolocateButton).setAttribute("aria-hidden", "true"), this._geolocateButton.type = "button", this._geolocateButton.disabled = true);
          }, this._finishSetupUI = (t3) => {
            if (this._map) {
              if (false === t3) {
                e.w("Geolocation support is not available so the GeolocateControl will be disabled.");
                const t4 = this._map._getUIString("GeolocateControl.LocationNotAvailable");
                this._geolocateButton.disabled = true, this._geolocateButton.title = t4, this._geolocateButton.setAttribute("aria-label", t4);
              } else {
                const t4 = this._map._getUIString("GeolocateControl.FindMyLocation");
                this._geolocateButton.disabled = false, this._geolocateButton.title = t4, this._geolocateButton.setAttribute("aria-label", t4);
              }
              this.options.trackUserLocation && (this._geolocateButton.setAttribute("aria-pressed", "false"), this._watchState = "OFF"), this.options.showUserLocation && (this._dotElement = r.create("div", "maplibregl-user-location-dot"), this._userLocationDotMarker = new Vs({ element: this._dotElement }), this._circleElement = r.create("div", "maplibregl-user-location-accuracy-circle"), this._accuracyCircleMarker = new Vs({ element: this._circleElement, pitchAlignment: "map" }), this.options.trackUserLocation && (this._watchState = "OFF"), this._map.on("zoom", this._onZoom)), this._geolocateButton.addEventListener("click", () => this.trigger()), this._setup = true, this.options.trackUserLocation && this._map.on("movestart", (t4) => {
                t4.geolocateSource || "ACTIVE_LOCK" !== this._watchState || t4.originalEvent && "resize" === t4.originalEvent.type || (this._watchState = "BACKGROUND", this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"), this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"), this.fire(new e.k("trackuserlocationend")), this.fire(new e.k("userlocationlostfocus")));
              });
            }
          }, this.options = e.e({}, Gs, t2);
        }
        onAdd(t2) {
          return this._map = t2, this._container = r.create("div", "maplibregl-ctrl maplibregl-ctrl-group"), this._setupUI(), function() {
            return e._(this, arguments, void 0, function* (t3 = false) {
              if (void 0 !== Us && !t3) return Us;
              if (void 0 === window.navigator.permissions) return Us = !!window.navigator.geolocation, Us;
              try {
                const t4 = yield window.navigator.permissions.query({ name: "geolocation" });
                Us = "denied" !== t4.state;
              } catch (t4) {
                Us = !!window.navigator.geolocation;
              }
              return Us;
            });
          }().then((t3) => this._finishSetupUI(t3)), this._container;
        }
        onRemove() {
          void 0 !== this._geolocationWatchID && (window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0), this.options.showUserLocation && this._userLocationDotMarker && this._userLocationDotMarker.remove(), this.options.showAccuracyCircle && this._accuracyCircleMarker && this._accuracyCircleMarker.remove(), r.remove(this._container), this._map.off("zoom", this._onZoom), this._map = void 0, Hs = 0, Ws = false;
        }
        _isOutOfMapMaxBounds(t2) {
          const e2 = this._map.getMaxBounds(), i2 = t2.coords;
          return e2 && (i2.longitude < e2.getWest() || i2.longitude > e2.getEast() || i2.latitude < e2.getSouth() || i2.latitude > e2.getNorth());
        }
        _setErrorState() {
          switch (this._watchState) {
            case "WAITING_ACTIVE":
              this._watchState = "ACTIVE_ERROR", this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"), this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");
              break;
            case "ACTIVE_LOCK":
              this._watchState = "ACTIVE_ERROR", this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"), this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"), this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");
              break;
            case "BACKGROUND":
              this._watchState = "BACKGROUND_ERROR", this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"), this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"), this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");
              break;
            case "ACTIVE_ERROR":
              break;
            default:
              throw new Error(`Unexpected watchState ${this._watchState}`);
          }
        }
        _updateCircleRadius() {
          const t2 = this._map.getBounds(), e2 = t2.getSouthEast(), i2 = t2.getNorthEast(), a2 = e2.distanceTo(i2), s2 = Math.ceil(this._accuracy / (a2 / this._map._container.clientHeight) * 2);
          this._circleElement.style.width = `${s2}px`, this._circleElement.style.height = `${s2}px`;
        }
        trigger() {
          if (!this._setup) return e.w("Geolocate control triggered before added to a map"), false;
          if (this.options.trackUserLocation) {
            switch (this._watchState) {
              case "OFF":
                this._watchState = "WAITING_ACTIVE", this.fire(new e.k("trackuserlocationstart"));
                break;
              case "WAITING_ACTIVE":
              case "ACTIVE_LOCK":
              case "ACTIVE_ERROR":
              case "BACKGROUND_ERROR":
                Hs--, Ws = false, this._watchState = "OFF", this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"), this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"), this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"), this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"), this.fire(new e.k("trackuserlocationend"));
                break;
              case "BACKGROUND":
                this._watchState = "ACTIVE_LOCK", this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"), this._lastKnownPosition && this._updateCamera(this._lastKnownPosition), this.fire(new e.k("trackuserlocationstart")), this.fire(new e.k("userlocationfocus"));
                break;
              default:
                throw new Error(`Unexpected watchState ${this._watchState}`);
            }
            switch (this._watchState) {
              case "WAITING_ACTIVE":
                this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"), this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");
                break;
              case "ACTIVE_LOCK":
                this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");
                break;
              case "OFF":
                break;
              default:
                throw new Error(`Unexpected watchState ${this._watchState}`);
            }
            if ("OFF" === this._watchState && void 0 !== this._geolocationWatchID) this._clearWatch();
            else if (void 0 === this._geolocationWatchID) {
              let t2;
              this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"), this._geolocateButton.setAttribute("aria-pressed", "true"), Hs++, Hs > 1 ? (t2 = { maximumAge: 6e5, timeout: 0 }, Ws = true) : (t2 = this.options.positionOptions, Ws = false), this._geolocationWatchID = window.navigator.geolocation.watchPosition(this._onSuccess, this._onError, t2);
            }
          } else window.navigator.geolocation.getCurrentPosition(this._onSuccess, this._onError, this.options.positionOptions), this._timeoutId = setTimeout(this._finish, 1e4);
          return true;
        }
        _clearWatch() {
          window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0, this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"), this._geolocateButton.setAttribute("aria-pressed", "false"), this.options.showUserLocation && this._updateMarker(null);
        }
      }, t.Hash = Ea, t.ImageSource = Q, t.KeyboardHandler = ls, t.LngLatBounds = H, t.LogoControl = Ps, t.Map = class extends Ts {
        constructor(t2) {
          e.bf.mark(e.bg.create);
          const i2 = Object.assign(Object.assign({}, Fs), t2);
          if (null != i2.minZoom && null != i2.maxZoom && i2.minZoom > i2.maxZoom) throw new Error("maxZoom must be greater than or equal to minZoom");
          if (null != i2.minPitch && null != i2.maxPitch && i2.minPitch > i2.maxPitch) throw new Error("maxPitch must be greater than or equal to minPitch");
          if (null != i2.minPitch && i2.minPitch < 0) throw new Error("minPitch must be greater than or equal to 0");
          if (null != i2.maxPitch && i2.maxPitch > 85) throw new Error("maxPitch must be less than or equal to 85");
          if (super(new Ta(i2.minZoom, i2.maxZoom, i2.minPitch, i2.maxPitch, i2.renderWorldCopies), { bearingSnap: i2.bearingSnap }), this._idleTriggered = false, this._crossFadingFactor = 1, this._renderTaskQueue = new Cs(), this._controls = [], this._mapId = e.a4(), this._contextLost = (t3) => {
            t3.preventDefault(), this._frameRequest && (this._frameRequest.abort(), this._frameRequest = null), this.fire(new e.k("webglcontextlost", { originalEvent: t3 }));
          }, this._contextRestored = (t3) => {
            this._setupPainter(), this.resize(), this._update(), this.fire(new e.k("webglcontextrestored", { originalEvent: t3 }));
          }, this._onMapScroll = (t3) => {
            if (t3.target === this._container) return this._container.scrollTop = 0, this._container.scrollLeft = 0, false;
          }, this._onWindowOnline = () => {
            this._update();
          }, this._interactive = i2.interactive, this._maxTileCacheSize = i2.maxTileCacheSize, this._maxTileCacheZoomLevels = i2.maxTileCacheZoomLevels, this._failIfMajorPerformanceCaveat = true === i2.failIfMajorPerformanceCaveat, this._preserveDrawingBuffer = true === i2.preserveDrawingBuffer, this._antialias = true === i2.antialias, this._trackResize = true === i2.trackResize, this._bearingSnap = i2.bearingSnap, this._refreshExpiredTiles = true === i2.refreshExpiredTiles, this._fadeDuration = i2.fadeDuration, this._crossSourceCollisions = true === i2.crossSourceCollisions, this._collectResourceTiming = true === i2.collectResourceTiming, this._locale = Object.assign(Object.assign({}, ks), i2.locale), this._clickTolerance = i2.clickTolerance, this._overridePixelRatio = i2.pixelRatio, this._maxCanvasSize = i2.maxCanvasSize, this.transformCameraUpdate = i2.transformCameraUpdate, this.cancelPendingTileRequestsWhileZooming = true === i2.cancelPendingTileRequestsWhileZooming, this._imageQueueHandle = _.addThrottleControl(() => this.isMoving()), this._requestManager = new p2(i2.transformRequest), "string" == typeof i2.container) {
            if (this._container = document.getElementById(i2.container), !this._container) throw new Error(`Container '${i2.container}' not found.`);
          } else {
            if (!(i2.container instanceof HTMLElement)) throw new Error("Invalid type: 'container' must be a String or HTMLElement.");
            this._container = i2.container;
          }
          if (i2.maxBounds && this.setMaxBounds(i2.maxBounds), this._setupContainer(), this._setupPainter(), this.on("move", () => this._update(false)).on("moveend", () => this._update(false)).on("zoom", () => this._update(true)).on("terrain", () => {
            this.painter.terrainFacilitator.dirty = true, this._update(true);
          }).once("idle", () => {
            this._idleTriggered = true;
          }), "undefined" != typeof window) {
            addEventListener("online", this._onWindowOnline, false);
            let t3 = false;
            const e2 = Ia((t4) => {
              this._trackResize && !this._removed && (this.resize(t4), this.redraw());
            }, 50);
            this._resizeObserver = new ResizeObserver((i3) => {
              t3 ? e2(i3) : t3 = true;
            }), this._resizeObserver.observe(this._container);
          }
          this.handlers = new ws(this, i2), this._hash = i2.hash && new Ea("string" == typeof i2.hash && i2.hash || void 0).addTo(this), this._hash && this._hash._onHashChange() || (this.jumpTo({ center: i2.center, zoom: i2.zoom, bearing: i2.bearing, pitch: i2.pitch }), i2.bounds && (this.resize(), this.fitBounds(i2.bounds, e.e({}, i2.fitBoundsOptions, { duration: 0 })))), this.resize(), this._localIdeographFontFamily = i2.localIdeographFontFamily, this._validateStyle = i2.validateStyle, i2.style && this.setStyle(i2.style, { localIdeographFontFamily: i2.localIdeographFontFamily }), i2.attributionControl && this.addControl(new Es("boolean" == typeof i2.attributionControl ? void 0 : i2.attributionControl)), i2.maplibreLogo && this.addControl(new Ps(), i2.logoPosition), this.on("style.load", () => {
            this.transform.unmodified && this.jumpTo(this.style.stylesheet);
          }), this.on("data", (t3) => {
            this._update("style" === t3.dataType), this.fire(new e.k(`${t3.dataType}data`, t3));
          }), this.on("dataloading", (t3) => {
            this.fire(new e.k(`${t3.dataType}dataloading`, t3));
          }), this.on("dataabort", (t3) => {
            this.fire(new e.k("sourcedataabort", t3));
          });
        }
        _getMapId() {
          return this._mapId;
        }
        addControl(t2, i2) {
          if (void 0 === i2 && (i2 = t2.getDefaultPosition ? t2.getDefaultPosition() : "top-right"), !t2 || !t2.onAdd) return this.fire(new e.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
          const a2 = t2.onAdd(this);
          this._controls.push(t2);
          const s2 = this._controlPositions[i2];
          return -1 !== i2.indexOf("bottom") ? s2.insertBefore(a2, s2.firstChild) : s2.appendChild(a2), this;
        }
        removeControl(t2) {
          if (!t2 || !t2.onRemove) return this.fire(new e.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));
          const i2 = this._controls.indexOf(t2);
          return i2 > -1 && this._controls.splice(i2, 1), t2.onRemove(this), this;
        }
        hasControl(t2) {
          return this._controls.indexOf(t2) > -1;
        }
        calculateCameraOptionsFromTo(t2, e2, i2, a2) {
          return null == a2 && this.terrain && (a2 = this.terrain.getElevationForLngLatZoom(i2, this.transform.tileZoom)), super.calculateCameraOptionsFromTo(t2, e2, i2, a2);
        }
        resize(t2) {
          var i2;
          const a2 = this._containerDimensions(), s2 = a2[0], o2 = a2[1], r2 = this._getClampedPixelRatio(s2, o2);
          if (this._resizeCanvas(s2, o2, r2), this.painter.resize(s2, o2, r2), this.painter.overLimit()) {
            const t3 = this.painter.context.gl;
            this._maxCanvasSize = [t3.drawingBufferWidth, t3.drawingBufferHeight];
            const e2 = this._getClampedPixelRatio(s2, o2);
            this._resizeCanvas(s2, o2, e2), this.painter.resize(s2, o2, e2);
          }
          this.transform.resize(s2, o2), null === (i2 = this._requestedCameraState) || void 0 === i2 || i2.resize(s2, o2);
          const n2 = !this._moving;
          return n2 && (this.stop(), this.fire(new e.k("movestart", t2)).fire(new e.k("move", t2))), this.fire(new e.k("resize", t2)), n2 && this.fire(new e.k("moveend", t2)), this;
        }
        _getClampedPixelRatio(t2, e2) {
          const { 0: i2, 1: a2 } = this._maxCanvasSize, s2 = this.getPixelRatio(), o2 = t2 * s2, r2 = e2 * s2;
          return Math.min(o2 > i2 ? i2 / o2 : 1, r2 > a2 ? a2 / r2 : 1) * s2;
        }
        getPixelRatio() {
          var t2;
          return null !== (t2 = this._overridePixelRatio) && void 0 !== t2 ? t2 : devicePixelRatio;
        }
        setPixelRatio(t2) {
          this._overridePixelRatio = t2, this.resize();
        }
        getBounds() {
          return this.transform.getBounds();
        }
        getMaxBounds() {
          return this.transform.getMaxBounds();
        }
        setMaxBounds(t2) {
          return this.transform.setMaxBounds(H.convert(t2)), this._update();
        }
        setMinZoom(t2) {
          if ((t2 = null == t2 ? -2 : t2) >= -2 && t2 <= this.transform.maxZoom) return this.transform.minZoom = t2, this._update(), this.getZoom() < t2 && this.setZoom(t2), this;
          throw new Error("minZoom must be between -2 and the current maxZoom, inclusive");
        }
        getMinZoom() {
          return this.transform.minZoom;
        }
        setMaxZoom(t2) {
          if ((t2 = null == t2 ? 22 : t2) >= this.transform.minZoom) return this.transform.maxZoom = t2, this._update(), this.getZoom() > t2 && this.setZoom(t2), this;
          throw new Error("maxZoom must be greater than the current minZoom");
        }
        getMaxZoom() {
          return this.transform.maxZoom;
        }
        setMinPitch(t2) {
          if ((t2 = null == t2 ? 0 : t2) < 0) throw new Error("minPitch must be greater than or equal to 0");
          if (t2 >= 0 && t2 <= this.transform.maxPitch) return this.transform.minPitch = t2, this._update(), this.getPitch() < t2 && this.setPitch(t2), this;
          throw new Error("minPitch must be between 0 and the current maxPitch, inclusive");
        }
        getMinPitch() {
          return this.transform.minPitch;
        }
        setMaxPitch(t2) {
          if ((t2 = null == t2 ? 60 : t2) > 85) throw new Error("maxPitch must be less than or equal to 85");
          if (t2 >= this.transform.minPitch) return this.transform.maxPitch = t2, this._update(), this.getPitch() > t2 && this.setPitch(t2), this;
          throw new Error("maxPitch must be greater than the current minPitch");
        }
        getMaxPitch() {
          return this.transform.maxPitch;
        }
        getRenderWorldCopies() {
          return this.transform.renderWorldCopies;
        }
        setRenderWorldCopies(t2) {
          return this.transform.renderWorldCopies = t2, this._update();
        }
        project(t2) {
          return this.transform.locationPoint(e.N.convert(t2), this.style && this.terrain);
        }
        unproject(t2) {
          return this.transform.pointLocation(e.P.convert(t2), this.terrain);
        }
        isMoving() {
          var t2;
          return this._moving || (null === (t2 = this.handlers) || void 0 === t2 ? void 0 : t2.isMoving());
        }
        isZooming() {
          var t2;
          return this._zooming || (null === (t2 = this.handlers) || void 0 === t2 ? void 0 : t2.isZooming());
        }
        isRotating() {
          var t2;
          return this._rotating || (null === (t2 = this.handlers) || void 0 === t2 ? void 0 : t2.isRotating());
        }
        _createDelegatedListener(t2, e2, i2) {
          if ("mouseenter" === t2 || "mouseover" === t2) {
            let a2 = false;
            const s2 = (s3) => {
              const o2 = e2.filter((t3) => this.getLayer(t3)), r2 = 0 !== o2.length ? this.queryRenderedFeatures(s3.point, { layers: o2 }) : [];
              r2.length ? a2 || (a2 = true, i2.call(this, new ka(t2, this, s3.originalEvent, { features: r2 }))) : a2 = false;
            };
            return { layers: e2, listener: i2, delegates: { mousemove: s2, mouseout: () => {
              a2 = false;
            } } };
          }
          if ("mouseleave" === t2 || "mouseout" === t2) {
            let a2 = false;
            const s2 = (s3) => {
              const o3 = e2.filter((t3) => this.getLayer(t3));
              (0 !== o3.length ? this.queryRenderedFeatures(s3.point, { layers: o3 }) : []).length ? a2 = true : a2 && (a2 = false, i2.call(this, new ka(t2, this, s3.originalEvent)));
            }, o2 = (e3) => {
              a2 && (a2 = false, i2.call(this, new ka(t2, this, e3.originalEvent)));
            };
            return { layers: e2, listener: i2, delegates: { mousemove: s2, mouseout: o2 } };
          }
          {
            const a2 = (t3) => {
              const a3 = e2.filter((t4) => this.getLayer(t4)), s2 = 0 !== a3.length ? this.queryRenderedFeatures(t3.point, { layers: a3 }) : [];
              s2.length && (t3.features = s2, i2.call(this, t3), delete t3.features);
            };
            return { layers: e2, listener: i2, delegates: { [t2]: a2 } };
          }
        }
        _saveDelegatedListener(t2, e2) {
          this._delegatedListeners = this._delegatedListeners || {}, this._delegatedListeners[t2] = this._delegatedListeners[t2] || [], this._delegatedListeners[t2].push(e2);
        }
        _removeDelegatedListener(t2, e2, i2) {
          if (!this._delegatedListeners || !this._delegatedListeners[t2]) return;
          const a2 = this._delegatedListeners[t2];
          for (let t3 = 0; t3 < a2.length; t3++) {
            const s2 = a2[t3];
            if (s2.listener === i2 && s2.layers.length === e2.length && s2.layers.every((t4) => e2.includes(t4))) {
              for (const t4 in s2.delegates) this.off(t4, s2.delegates[t4]);
              return void a2.splice(t3, 1);
            }
          }
        }
        on(t2, e2, i2) {
          if (void 0 === i2) return super.on(t2, e2);
          const a2 = this._createDelegatedListener(t2, "string" == typeof e2 ? [e2] : e2, i2);
          this._saveDelegatedListener(t2, a2);
          for (const t3 in a2.delegates) this.on(t3, a2.delegates[t3]);
          return this;
        }
        once(t2, e2, i2) {
          if (void 0 === i2) return super.once(t2, e2);
          const a2 = "string" == typeof e2 ? [e2] : e2, s2 = this._createDelegatedListener(t2, a2, i2);
          for (const e3 in s2.delegates) {
            const o2 = s2.delegates[e3];
            s2.delegates[e3] = (...e4) => {
              this._removeDelegatedListener(t2, a2, i2), o2(...e4);
            };
          }
          this._saveDelegatedListener(t2, s2);
          for (const t3 in s2.delegates) this.once(t3, s2.delegates[t3]);
          return this;
        }
        off(t2, e2, i2) {
          return void 0 === i2 ? super.off(t2, e2) : (this._removeDelegatedListener(t2, "string" == typeof e2 ? [e2] : e2, i2), this);
        }
        queryRenderedFeatures(t2, i2) {
          if (!this.style) return [];
          let a2;
          const s2 = t2 instanceof e.P || Array.isArray(t2), o2 = s2 ? t2 : [[0, 0], [this.transform.width, this.transform.height]];
          if (i2 = i2 || (s2 ? {} : t2) || {}, o2 instanceof e.P || "number" == typeof o2[0]) a2 = [e.P.convert(o2)];
          else {
            const t3 = e.P.convert(o2[0]), i3 = e.P.convert(o2[1]);
            a2 = [t3, new e.P(i3.x, t3.y), i3, new e.P(t3.x, i3.y), t3];
          }
          return this.style.queryRenderedFeatures(a2, i2, this.transform);
        }
        querySourceFeatures(t2, e2) {
          return this.style.querySourceFeatures(t2, e2);
        }
        setStyle(t2, i2) {
          return false !== (i2 = e.e({}, { localIdeographFontFamily: this._localIdeographFontFamily, validate: this._validateStyle }, i2)).diff && i2.localIdeographFontFamily === this._localIdeographFontFamily && this.style && t2 ? (this._diffStyle(t2, i2), this) : (this._localIdeographFontFamily = i2.localIdeographFontFamily, this._updateStyle(t2, i2));
        }
        setTransformRequest(t2) {
          return this._requestManager.setTransformRequest(t2), this;
        }
        _getUIString(t2) {
          const e2 = this._locale[t2];
          if (null == e2) throw new Error(`Missing UI string '${t2}'`);
          return e2;
        }
        _updateStyle(t2, e2) {
          if (e2.transformStyle && this.style && !this.style._loaded) return void this.style.once("style.load", () => this._updateStyle(t2, e2));
          const i2 = this.style && e2.transformStyle ? this.style.serialize() : void 0;
          return this.style && (this.style.setEventedParent(null), this.style._remove(!t2)), t2 ? (this.style = new de2(this, e2 || {}), this.style.setEventedParent(this, { style: this.style }), "string" == typeof t2 ? this.style.loadURL(t2, e2, i2) : this.style.loadJSON(t2, e2, i2), this) : (delete this.style, this);
        }
        _lazyInitEmptyStyle() {
          this.style || (this.style = new de2(this, {}), this.style.setEventedParent(this, { style: this.style }), this.style.loadEmpty());
        }
        _diffStyle(t2, i2) {
          if ("string" == typeof t2) {
            const a2 = this._requestManager.transformRequest(t2, "Style");
            e.h(a2, new AbortController()).then((t3) => {
              this._updateDiff(t3.data, i2);
            }).catch((t3) => {
              t3 && this.fire(new e.j(t3));
            });
          } else "object" == typeof t2 && this._updateDiff(t2, i2);
        }
        _updateDiff(t2, i2) {
          try {
            this.style.setState(t2, i2) && this._update(true);
          } catch (a2) {
            e.w(`Unable to perform style diff: ${a2.message || a2.error || a2}.  Rebuilding the style from scratch.`), this._updateStyle(t2, i2);
          }
        }
        getStyle() {
          if (this.style) return this.style.serialize();
        }
        isStyleLoaded() {
          return this.style ? this.style.loaded() : e.w("There is no style added to the map.");
        }
        addSource(t2, e2) {
          return this._lazyInitEmptyStyle(), this.style.addSource(t2, e2), this._update(true);
        }
        isSourceLoaded(t2) {
          const i2 = this.style && this.style.sourceCaches[t2];
          if (void 0 !== i2) return i2.loaded();
          this.fire(new e.j(new Error(`There is no source with ID '${t2}'`)));
        }
        setTerrain(t2) {
          if (this.style._checkLoaded(), this._terrainDataCallback && this.style.off("data", this._terrainDataCallback), t2) {
            const i2 = this.style.sourceCaches[t2.source];
            if (!i2) throw new Error(`cannot load terrain, because there exists no source with ID: ${t2.source}`);
            null === this.terrain && i2.reload();
            for (const i3 in this.style._layers) {
              const a2 = this.style._layers[i3];
              "hillshade" === a2.type && a2.source === t2.source && e.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.");
            }
            this.terrain = new Ds(this.painter, i2, t2), this.painter.renderToTexture = new Rs(this.painter, this.terrain), this.transform.minElevationForCurrentTile = this.terrain.getMinTileElevationForLngLatZoom(this.transform.center, this.transform.tileZoom), this.transform.elevation = this.terrain.getElevationForLngLatZoom(this.transform.center, this.transform.tileZoom), this._terrainDataCallback = (e2) => {
              "style" === e2.dataType ? this.terrain.sourceCache.freeRtt() : "source" === e2.dataType && e2.tile && (e2.sourceId !== t2.source || this._elevationFreeze || (this.transform.minElevationForCurrentTile = this.terrain.getMinTileElevationForLngLatZoom(this.transform.center, this.transform.tileZoom), this.transform.elevation = this.terrain.getElevationForLngLatZoom(this.transform.center, this.transform.tileZoom)), this.terrain.sourceCache.freeRtt(e2.tile.tileID));
            }, this.style.on("data", this._terrainDataCallback);
          } else this.terrain && this.terrain.sourceCache.destruct(), this.terrain = null, this.painter.renderToTexture && this.painter.renderToTexture.destruct(), this.painter.renderToTexture = null, this.transform.minElevationForCurrentTile = 0, this.transform.elevation = 0;
          return this.fire(new e.k("terrain", { terrain: t2 })), this;
        }
        getTerrain() {
          var t2, e2;
          return null !== (e2 = null === (t2 = this.terrain) || void 0 === t2 ? void 0 : t2.options) && void 0 !== e2 ? e2 : null;
        }
        areTilesLoaded() {
          const t2 = this.style && this.style.sourceCaches;
          for (const e2 in t2) {
            const i2 = t2[e2]._tiles;
            for (const t3 in i2) {
              const e3 = i2[t3];
              if ("loaded" !== e3.state && "errored" !== e3.state) return false;
            }
          }
          return true;
        }
        removeSource(t2) {
          return this.style.removeSource(t2), this._update(true);
        }
        getSource(t2) {
          return this.style.getSource(t2);
        }
        addImage(t2, i2, a2 = {}) {
          const { pixelRatio: s2 = 1, sdf: r2 = false, stretchX: n2, stretchY: l2, content: h2, textFitWidth: c2, textFitHeight: u3 } = a2;
          if (this._lazyInitEmptyStyle(), !(i2 instanceof HTMLImageElement || e.b(i2))) {
            if (void 0 === i2.width || void 0 === i2.height) return this.fire(new e.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
            {
              const { width: a3, height: o2, data: d2 } = i2, _2 = i2;
              return this.style.addImage(t2, { data: new e.R({ width: a3, height: o2 }, new Uint8Array(d2)), pixelRatio: s2, stretchX: n2, stretchY: l2, content: h2, textFitWidth: c2, textFitHeight: u3, sdf: r2, version: 0, userImage: _2 }), _2.onAdd && _2.onAdd(this, t2), this;
            }
          }
          {
            const { width: a3, height: d2, data: _2 } = o.getImageData(i2);
            this.style.addImage(t2, { data: new e.R({ width: a3, height: d2 }, _2), pixelRatio: s2, stretchX: n2, stretchY: l2, content: h2, textFitWidth: c2, textFitHeight: u3, sdf: r2, version: 0 });
          }
        }
        updateImage(t2, i2) {
          const a2 = this.style.getImage(t2);
          if (!a2) return this.fire(new e.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));
          const s2 = i2 instanceof HTMLImageElement || e.b(i2) ? o.getImageData(i2) : i2, { width: r2, height: n2, data: l2 } = s2;
          if (void 0 === r2 || void 0 === n2) return this.fire(new e.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
          if (r2 !== a2.data.width || n2 !== a2.data.height) return this.fire(new e.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));
          const h2 = !(i2 instanceof HTMLImageElement || e.b(i2));
          return a2.data.replace(l2, h2), this.style.updateImage(t2, a2), this;
        }
        getImage(t2) {
          return this.style.getImage(t2);
        }
        hasImage(t2) {
          return t2 ? !!this.style.getImage(t2) : (this.fire(new e.j(new Error("Missing required image id"))), false);
        }
        removeImage(t2) {
          this.style.removeImage(t2);
        }
        loadImage(t2) {
          return _.getImage(this._requestManager.transformRequest(t2, "Image"), new AbortController());
        }
        listImages() {
          return this.style.listImages();
        }
        addLayer(t2, e2) {
          return this._lazyInitEmptyStyle(), this.style.addLayer(t2, e2), this._update(true);
        }
        moveLayer(t2, e2) {
          return this.style.moveLayer(t2, e2), this._update(true);
        }
        removeLayer(t2) {
          return this.style.removeLayer(t2), this._update(true);
        }
        getLayer(t2) {
          return this.style.getLayer(t2);
        }
        getLayersOrder() {
          return this.style.getLayersOrder();
        }
        setLayerZoomRange(t2, e2, i2) {
          return this.style.setLayerZoomRange(t2, e2, i2), this._update(true);
        }
        setFilter(t2, e2, i2 = {}) {
          return this.style.setFilter(t2, e2, i2), this._update(true);
        }
        getFilter(t2) {
          return this.style.getFilter(t2);
        }
        setPaintProperty(t2, e2, i2, a2 = {}) {
          return this.style.setPaintProperty(t2, e2, i2, a2), this._update(true);
        }
        getPaintProperty(t2, e2) {
          return this.style.getPaintProperty(t2, e2);
        }
        setLayoutProperty(t2, e2, i2, a2 = {}) {
          return this.style.setLayoutProperty(t2, e2, i2, a2), this._update(true);
        }
        getLayoutProperty(t2, e2) {
          return this.style.getLayoutProperty(t2, e2);
        }
        setGlyphs(t2, e2 = {}) {
          return this._lazyInitEmptyStyle(), this.style.setGlyphs(t2, e2), this._update(true);
        }
        getGlyphs() {
          return this.style.getGlyphsUrl();
        }
        addSprite(t2, e2, i2 = {}) {
          return this._lazyInitEmptyStyle(), this.style.addSprite(t2, e2, i2, (t3) => {
            t3 || this._update(true);
          }), this;
        }
        removeSprite(t2) {
          return this._lazyInitEmptyStyle(), this.style.removeSprite(t2), this._update(true);
        }
        getSprite() {
          return this.style.getSprite();
        }
        setSprite(t2, e2 = {}) {
          return this._lazyInitEmptyStyle(), this.style.setSprite(t2, e2, (t3) => {
            t3 || this._update(true);
          }), this;
        }
        setLight(t2, e2 = {}) {
          return this._lazyInitEmptyStyle(), this.style.setLight(t2, e2), this._update(true);
        }
        getLight() {
          return this.style.getLight();
        }
        setSky(t2) {
          return this._lazyInitEmptyStyle(), this.style.setSky(t2), this._update(true);
        }
        getSky() {
          return this.style.getSky();
        }
        setFeatureState(t2, e2) {
          return this.style.setFeatureState(t2, e2), this._update();
        }
        removeFeatureState(t2, e2) {
          return this.style.removeFeatureState(t2, e2), this._update();
        }
        getFeatureState(t2) {
          return this.style.getFeatureState(t2);
        }
        getContainer() {
          return this._container;
        }
        getCanvasContainer() {
          return this._canvasContainer;
        }
        getCanvas() {
          return this._canvas;
        }
        _containerDimensions() {
          let t2 = 0, e2 = 0;
          return this._container && (t2 = this._container.clientWidth || 400, e2 = this._container.clientHeight || 300), [t2, e2];
        }
        _setupContainer() {
          const t2 = this._container;
          t2.classList.add("maplibregl-map");
          const e2 = this._canvasContainer = r.create("div", "maplibregl-canvas-container", t2);
          this._interactive && e2.classList.add("maplibregl-interactive"), this._canvas = r.create("canvas", "maplibregl-canvas", e2), this._canvas.addEventListener("webglcontextlost", this._contextLost, false), this._canvas.addEventListener("webglcontextrestored", this._contextRestored, false), this._canvas.setAttribute("tabindex", this._interactive ? "0" : "-1"), this._canvas.setAttribute("aria-label", this._getUIString("Map.Title")), this._canvas.setAttribute("role", "region");
          const i2 = this._containerDimensions(), a2 = this._getClampedPixelRatio(i2[0], i2[1]);
          this._resizeCanvas(i2[0], i2[1], a2);
          const s2 = this._controlContainer = r.create("div", "maplibregl-control-container", t2), o2 = this._controlPositions = {};
          ["top-left", "top-right", "bottom-left", "bottom-right"].forEach((t3) => {
            o2[t3] = r.create("div", `maplibregl-ctrl-${t3} `, s2);
          }), this._container.addEventListener("scroll", this._onMapScroll, false);
        }
        _resizeCanvas(t2, e2, i2) {
          this._canvas.width = Math.floor(i2 * t2), this._canvas.height = Math.floor(i2 * e2), this._canvas.style.width = `${t2}px`, this._canvas.style.height = `${e2}px`;
        }
        _setupPainter() {
          const t2 = { alpha: true, stencil: true, depth: true, failIfMajorPerformanceCaveat: this._failIfMajorPerformanceCaveat, preserveDrawingBuffer: this._preserveDrawingBuffer, antialias: this._antialias || false };
          let e2 = null;
          this._canvas.addEventListener("webglcontextcreationerror", (i3) => {
            e2 = { requestedAttributes: t2 }, i3 && (e2.statusMessage = i3.statusMessage, e2.type = i3.type);
          }, { once: true });
          const i2 = this._canvas.getContext("webgl2", t2) || this._canvas.getContext("webgl", t2);
          if (!i2) {
            const t3 = "Failed to initialize WebGL";
            throw e2 ? (e2.message = t3, new Error(JSON.stringify(e2))) : new Error(t3);
          }
          this.painter = new va(i2, this.transform), n.testSupport(i2);
        }
        loaded() {
          return !this._styleDirty && !this._sourcesDirty && !!this.style && this.style.loaded();
        }
        _update(t2) {
          return this.style && this.style._loaded ? (this._styleDirty = this._styleDirty || t2, this._sourcesDirty = true, this.triggerRepaint(), this) : this;
        }
        _requestRenderFrame(t2) {
          return this._update(), this._renderTaskQueue.add(t2);
        }
        _cancelRenderFrame(t2) {
          this._renderTaskQueue.remove(t2);
        }
        _render(t2) {
          const i2 = this._idleTriggered ? this._fadeDuration : 0;
          if (this.painter.context.setDirty(), this.painter.setBaseState(), this._renderTaskQueue.run(t2), this._removed) return;
          let a2 = false;
          if (this.style && this._styleDirty) {
            this._styleDirty = false;
            const t3 = this.transform.zoom, s3 = o.now();
            this.style.zoomHistory.update(t3, s3);
            const r2 = new e.z(t3, { now: s3, fadeDuration: i2, zoomHistory: this.style.zoomHistory, transition: this.style.getTransition() }), n2 = r2.crossFadingFactor();
            1 === n2 && n2 === this._crossFadingFactor || (a2 = true, this._crossFadingFactor = n2), this.style.update(r2);
          }
          this.style && this._sourcesDirty && (this._sourcesDirty = false, this.style._updateSources(this.transform)), this.terrain ? (this.terrain.sourceCache.update(this.transform, this.terrain), this.transform.minElevationForCurrentTile = this.terrain.getMinTileElevationForLngLatZoom(this.transform.center, this.transform.tileZoom), this._elevationFreeze || (this.transform.elevation = this.terrain.getElevationForLngLatZoom(this.transform.center, this.transform.tileZoom))) : (this.transform.minElevationForCurrentTile = 0, this.transform.elevation = 0), this._placementDirty = this.style && this.style._updatePlacement(this.painter.transform, this.showCollisionBoxes, i2, this._crossSourceCollisions), this.painter.render(this.style, { showTileBoundaries: this.showTileBoundaries, showOverdrawInspector: this._showOverdrawInspector, rotating: this.isRotating(), zooming: this.isZooming(), moving: this.isMoving(), fadeDuration: i2, showPadding: this.showPadding }), this.fire(new e.k("render")), this.loaded() && !this._loaded && (this._loaded = true, e.bf.mark(e.bg.load), this.fire(new e.k("load"))), this.style && (this.style.hasTransitions() || a2) && (this._styleDirty = true), this.style && !this._placementDirty && this.style._releaseSymbolFadeTiles();
          const s2 = this._sourcesDirty || this._styleDirty || this._placementDirty;
          return s2 || this._repaint ? this.triggerRepaint() : !this.isMoving() && this.loaded() && this.fire(new e.k("idle")), !this._loaded || this._fullyLoaded || s2 || (this._fullyLoaded = true, e.bf.mark(e.bg.fullLoad)), this;
        }
        redraw() {
          return this.style && (this._frameRequest && (this._frameRequest.abort(), this._frameRequest = null), this._render(0)), this;
        }
        remove() {
          var t2;
          this._hash && this._hash.remove();
          for (const t3 of this._controls) t3.onRemove(this);
          this._controls = [], this._frameRequest && (this._frameRequest.abort(), this._frameRequest = null), this._renderTaskQueue.clear(), this.painter.destroy(), this.handlers.destroy(), delete this.handlers, this.setStyle(null), "undefined" != typeof window && removeEventListener("online", this._onWindowOnline, false), _.removeThrottleControl(this._imageQueueHandle), null === (t2 = this._resizeObserver) || void 0 === t2 || t2.disconnect();
          const i2 = this.painter.context.gl.getExtension("WEBGL_lose_context");
          (null == i2 ? void 0 : i2.loseContext) && i2.loseContext(), this._canvas.removeEventListener("webglcontextrestored", this._contextRestored, false), this._canvas.removeEventListener("webglcontextlost", this._contextLost, false), r.remove(this._canvasContainer), r.remove(this._controlContainer), this._container.classList.remove("maplibregl-map"), e.bf.clearMetrics(), this._removed = true, this.fire(new e.k("remove"));
        }
        triggerRepaint() {
          this.style && !this._frameRequest && (this._frameRequest = new AbortController(), o.frameAsync(this._frameRequest).then((t2) => {
            e.bf.frame(t2), this._frameRequest = null, this._render(t2);
          }).catch(() => {
          }));
        }
        get showTileBoundaries() {
          return !!this._showTileBoundaries;
        }
        set showTileBoundaries(t2) {
          this._showTileBoundaries !== t2 && (this._showTileBoundaries = t2, this._update());
        }
        get showPadding() {
          return !!this._showPadding;
        }
        set showPadding(t2) {
          this._showPadding !== t2 && (this._showPadding = t2, this._update());
        }
        get showCollisionBoxes() {
          return !!this._showCollisionBoxes;
        }
        set showCollisionBoxes(t2) {
          this._showCollisionBoxes !== t2 && (this._showCollisionBoxes = t2, t2 ? this.style._generateCollisionBoxes() : this._update());
        }
        get showOverdrawInspector() {
          return !!this._showOverdrawInspector;
        }
        set showOverdrawInspector(t2) {
          this._showOverdrawInspector !== t2 && (this._showOverdrawInspector = t2, this._update());
        }
        get repaint() {
          return !!this._repaint;
        }
        set repaint(t2) {
          this._repaint !== t2 && (this._repaint = t2, this.triggerRepaint());
        }
        get vertices() {
          return !!this._vertices;
        }
        set vertices(t2) {
          this._vertices = t2, this._update();
        }
        get version() {
          return Ls;
        }
        getCameraTargetElevation() {
          return this.transform.elevation;
        }
      }, t.MapMouseEvent = ka, t.MapTouchEvent = La, t.MapWheelEvent = Fa, t.Marker = Vs, t.NavigationControl = class {
        constructor(t2) {
          this._updateZoomButtons = () => {
            const t3 = this._map.getZoom(), e2 = t3 === this._map.getMaxZoom(), i2 = t3 === this._map.getMinZoom();
            this._zoomInButton.disabled = e2, this._zoomOutButton.disabled = i2, this._zoomInButton.setAttribute("aria-disabled", e2.toString()), this._zoomOutButton.setAttribute("aria-disabled", i2.toString());
          }, this._rotateCompassArrow = () => {
            const t3 = this.options.visualizePitch ? `scale(${1 / Math.pow(Math.cos(this._map.transform.pitch * (Math.PI / 180)), 0.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle * (180 / Math.PI)}deg)` : `rotate(${this._map.transform.angle * (180 / Math.PI)}deg)`;
            this._compassIcon.style.transform = t3;
          }, this._setButtonTitle = (t3, e2) => {
            const i2 = this._map._getUIString(`NavigationControl.${e2}`);
            t3.title = i2, t3.setAttribute("aria-label", i2);
          }, this.options = e.e({}, Os, t2), this._container = r.create("div", "maplibregl-ctrl maplibregl-ctrl-group"), this._container.addEventListener("contextmenu", (t3) => t3.preventDefault()), this.options.showZoom && (this._zoomInButton = this._createButton("maplibregl-ctrl-zoom-in", (t3) => this._map.zoomIn({}, { originalEvent: t3 })), r.create("span", "maplibregl-ctrl-icon", this._zoomInButton).setAttribute("aria-hidden", "true"), this._zoomOutButton = this._createButton("maplibregl-ctrl-zoom-out", (t3) => this._map.zoomOut({}, { originalEvent: t3 })), r.create("span", "maplibregl-ctrl-icon", this._zoomOutButton).setAttribute("aria-hidden", "true")), this.options.showCompass && (this._compass = this._createButton("maplibregl-ctrl-compass", (t3) => {
            this.options.visualizePitch ? this._map.resetNorthPitch({}, { originalEvent: t3 }) : this._map.resetNorth({}, { originalEvent: t3 });
          }), this._compassIcon = r.create("span", "maplibregl-ctrl-icon", this._compass), this._compassIcon.setAttribute("aria-hidden", "true"));
        }
        onAdd(t2) {
          return this._map = t2, this.options.showZoom && (this._setButtonTitle(this._zoomInButton, "ZoomIn"), this._setButtonTitle(this._zoomOutButton, "ZoomOut"), this._map.on("zoom", this._updateZoomButtons), this._updateZoomButtons()), this.options.showCompass && (this._setButtonTitle(this._compass, "ResetBearing"), this.options.visualizePitch && this._map.on("pitch", this._rotateCompassArrow), this._map.on("rotate", this._rotateCompassArrow), this._rotateCompassArrow(), this._handler = new Ns(this._map, this._compass, this.options.visualizePitch)), this._container;
        }
        onRemove() {
          r.remove(this._container), this.options.showZoom && this._map.off("zoom", this._updateZoomButtons), this.options.showCompass && (this.options.visualizePitch && this._map.off("pitch", this._rotateCompassArrow), this._map.off("rotate", this._rotateCompassArrow), this._handler.off(), delete this._handler), delete this._map;
        }
        _createButton(t2, e2) {
          const i2 = r.create("button", t2, this._container);
          return i2.type = "button", i2.addEventListener("click", e2), i2;
        }
      }, t.Popup = class extends e.E {
        constructor(t2) {
          super(), this.remove = () => (this._content && r.remove(this._content), this._container && (r.remove(this._container), delete this._container), this._map && (this._map.off("move", this._update), this._map.off("move", this._onClose), this._map.off("click", this._onClose), this._map.off("remove", this.remove), this._map.off("mousemove", this._onMouseMove), this._map.off("mouseup", this._onMouseUp), this._map.off("drag", this._onDrag), this._map._canvasContainer.classList.remove("maplibregl-track-pointer"), delete this._map, this.fire(new e.k("close"))), this), this._onMouseUp = (t3) => {
            this._update(t3.point);
          }, this._onMouseMove = (t3) => {
            this._update(t3.point);
          }, this._onDrag = (t3) => {
            this._update(t3.point);
          }, this._update = (t3) => {
            var e2;
            if (!this._map || !this._lngLat && !this._trackPointer || !this._content) return;
            if (!this._container) {
              if (this._container = r.create("div", "maplibregl-popup", this._map.getContainer()), this._tip = r.create("div", "maplibregl-popup-tip", this._container), this._container.appendChild(this._content), this.options.className) for (const t4 of this.options.className.split(" ")) this._container.classList.add(t4);
              this._closeButton && this._closeButton.setAttribute("aria-label", this._map._getUIString("Popup.Close")), this._trackPointer && this._container.classList.add("maplibregl-popup-track-pointer");
            }
            if (this.options.maxWidth && this._container.style.maxWidth !== this.options.maxWidth && (this._container.style.maxWidth = this.options.maxWidth), this._lngLat = this._map.transform.renderWorldCopies && !this._trackPointer ? js(this._lngLat, this._flatPos, this._map.transform) : null === (e2 = this._lngLat) || void 0 === e2 ? void 0 : e2.wrap(), this._trackPointer && !t3) return;
            const i2 = this._flatPos = this._pos = this._trackPointer && t3 ? t3 : this._map.project(this._lngLat);
            this._map.terrain && (this._flatPos = this._trackPointer && t3 ? t3 : this._map.transform.locationPoint(this._lngLat));
            let a2 = this.options.anchor;
            const s2 = Qs(this.options.offset);
            if (!a2) {
              const t4 = this._container.offsetWidth, e3 = this._container.offsetHeight;
              let o3;
              o3 = i2.y + s2.bottom.y < e3 ? ["top"] : i2.y > this._map.transform.height - e3 ? ["bottom"] : [], i2.x < t4 / 2 ? o3.push("left") : i2.x > this._map.transform.width - t4 / 2 && o3.push("right"), a2 = 0 === o3.length ? "bottom" : o3.join("-");
            }
            let o2 = i2.add(s2[a2]);
            this.options.subpixelPositioning || (o2 = o2.round()), r.setTransform(this._container, `${Zs[a2]} translate(${o2.x}px,${o2.y}px)`), qs(this._container, a2, "popup");
          }, this._onClose = () => {
            this.remove();
          }, this.options = e.e(Object.create(Js), t2);
        }
        addTo(t2) {
          return this._map && this.remove(), this._map = t2, this.options.closeOnClick && this._map.on("click", this._onClose), this.options.closeOnMove && this._map.on("move", this._onClose), this._map.on("remove", this.remove), this._update(), this._focusFirstElement(), this._trackPointer ? (this._map.on("mousemove", this._onMouseMove), this._map.on("mouseup", this._onMouseUp), this._container && this._container.classList.add("maplibregl-popup-track-pointer"), this._map._canvasContainer.classList.add("maplibregl-track-pointer")) : this._map.on("move", this._update), this.fire(new e.k("open")), this;
        }
        isOpen() {
          return !!this._map;
        }
        getLngLat() {
          return this._lngLat;
        }
        setLngLat(t2) {
          return this._lngLat = e.N.convert(t2), this._pos = null, this._flatPos = null, this._trackPointer = false, this._update(), this._map && (this._map.on("move", this._update), this._map.off("mousemove", this._onMouseMove), this._container && this._container.classList.remove("maplibregl-popup-track-pointer"), this._map._canvasContainer.classList.remove("maplibregl-track-pointer")), this;
        }
        trackPointer() {
          return this._trackPointer = true, this._pos = null, this._flatPos = null, this._update(), this._map && (this._map.off("move", this._update), this._map.on("mousemove", this._onMouseMove), this._map.on("drag", this._onDrag), this._container && this._container.classList.add("maplibregl-popup-track-pointer"), this._map._canvasContainer.classList.add("maplibregl-track-pointer")), this;
        }
        getElement() {
          return this._container;
        }
        setText(t2) {
          return this.setDOMContent(document.createTextNode(t2));
        }
        setHTML(t2) {
          const e2 = document.createDocumentFragment(), i2 = document.createElement("body");
          let a2;
          for (i2.innerHTML = t2; a2 = i2.firstChild, a2; ) e2.appendChild(a2);
          return this.setDOMContent(e2);
        }
        getMaxWidth() {
          var t2;
          return null === (t2 = this._container) || void 0 === t2 ? void 0 : t2.style.maxWidth;
        }
        setMaxWidth(t2) {
          return this.options.maxWidth = t2, this._update(), this;
        }
        setDOMContent(t2) {
          if (this._content) for (; this._content.hasChildNodes(); ) this._content.firstChild && this._content.removeChild(this._content.firstChild);
          else this._content = r.create("div", "maplibregl-popup-content", this._container);
          return this._content.appendChild(t2), this._createCloseButton(), this._update(), this._focusFirstElement(), this;
        }
        addClassName(t2) {
          return this._container && this._container.classList.add(t2), this;
        }
        removeClassName(t2) {
          return this._container && this._container.classList.remove(t2), this;
        }
        setOffset(t2) {
          return this.options.offset = t2, this._update(), this;
        }
        toggleClassName(t2) {
          if (this._container) return this._container.classList.toggle(t2);
        }
        setSubpixelPositioning(t2) {
          this.options.subpixelPositioning = t2;
        }
        _createCloseButton() {
          this.options.closeButton && (this._closeButton = r.create("button", "maplibregl-popup-close-button", this._content), this._closeButton.type = "button", this._closeButton.innerHTML = "&#215;", this._closeButton.addEventListener("click", this._onClose));
        }
        _focusFirstElement() {
          if (!this.options.focusAfterOpen || !this._container) return;
          const t2 = this._container.querySelector(Ys);
          t2 && t2.focus();
        }
      }, t.RasterDEMTileSource = K, t.RasterTileSource = X2, t.ScaleControl = class {
        constructor(t2) {
          this._onMove = () => {
            Xs(this._map, this._container, this.options);
          }, this.setUnit = (t3) => {
            this.options.unit = t3, Xs(this._map, this._container, this.options);
          }, this.options = Object.assign(Object.assign({}, $s), t2);
        }
        getDefaultPosition() {
          return "bottom-left";
        }
        onAdd(t2) {
          return this._map = t2, this._container = r.create("div", "maplibregl-ctrl maplibregl-ctrl-scale", t2.getContainer()), this._map.on("move", this._onMove), this._onMove(), this._container;
        }
        onRemove() {
          r.remove(this._container), this._map.off("move", this._onMove), this._map = void 0;
        }
      }, t.ScrollZoomHandler = us, t.Style = de2, t.TerrainControl = class {
        constructor(t2) {
          this._toggleTerrain = () => {
            this._map.getTerrain() ? this._map.setTerrain(null) : this._map.setTerrain(this.options), this._updateTerrainIcon();
          }, this._updateTerrainIcon = () => {
            this._terrainButton.classList.remove("maplibregl-ctrl-terrain"), this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"), this._map.terrain ? (this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"), this._terrainButton.title = this._map._getUIString("TerrainControl.Disable")) : (this._terrainButton.classList.add("maplibregl-ctrl-terrain"), this._terrainButton.title = this._map._getUIString("TerrainControl.Enable"));
          }, this.options = t2;
        }
        onAdd(t2) {
          return this._map = t2, this._container = r.create("div", "maplibregl-ctrl maplibregl-ctrl-group"), this._terrainButton = r.create("button", "maplibregl-ctrl-terrain", this._container), r.create("span", "maplibregl-ctrl-icon", this._terrainButton).setAttribute("aria-hidden", "true"), this._terrainButton.type = "button", this._terrainButton.addEventListener("click", this._toggleTerrain), this._updateTerrainIcon(), this._map.on("terrain", this._updateTerrainIcon), this._container;
        }
        onRemove() {
          r.remove(this._container), this._map.off("terrain", this._updateTerrainIcon), this._map = void 0;
        }
      }, t.TwoFingersTouchPitchHandler = rs, t.TwoFingersTouchRotateHandler = ss, t.TwoFingersTouchZoomHandler = is, t.TwoFingersTouchZoomRotateHandler = gs, t.VectorTileSource = $2, t.VideoSource = tt2, t.addSourceType = (t2, i2) => e._(void 0, void 0, void 0, function* () {
        if (at2(t2)) throw new Error(`A source type called "${t2}" already exists.`);
        ((t3, e2) => {
          it2[t3] = e2;
        })(t2, i2);
      }), t.clearPrewarmedResources = function() {
        const t2 = B2;
        t2 && (t2.isPreloaded() && 1 === t2.numActive() ? (t2.release(k), B2 = null) : console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"));
      }, t.getMaxParallelImageRequests = function() {
        return e.a.MAX_PARALLEL_IMAGE_REQUESTS;
      }, t.getRTLTextPluginStatus = function() {
        return nt2().getRTLTextPluginStatus();
      }, t.getVersion = function() {
        return to;
      }, t.getWorkerCount = function() {
        return L2.workerCount;
      }, t.getWorkerUrl = function() {
        return e.a.WORKER_URL;
      }, t.importScriptInWorkers = function(t2) {
        return j2().broadcast("IS", t2);
      }, t.prewarm = function() {
        N2().acquire(k);
      }, t.setMaxParallelImageRequests = function(t2) {
        e.a.MAX_PARALLEL_IMAGE_REQUESTS = t2;
      }, t.setRTLTextPlugin = function(t2, e2) {
        return nt2().setRTLTextPlugin(t2, e2);
      }, t.setWorkerCount = function(t2) {
        L2.workerCount = t2;
      }, t.setWorkerUrl = function(t2) {
        e.a.WORKER_URL = t2;
      };
    });
    var maplibregl$1 = maplibregl2;
    return maplibregl$1;
  });
})(maplibreGl);
var maplibreGlExports = maplibreGl.exports;
const maplibregl = /* @__PURE__ */ getDefaultExportFromCjs(maplibreGlExports);
const isMobile = typeof globalThis === "undefined" ? false : globalThis.innerWidth < 640;
const config = {
  geoCodingApi: "https://nominatim.openstreetmap.org",
  routingApi: "https://router.project-osrm.org/route/v1",
  mapConfig: {
    center: [-77.0723, 38.9076],
    // Georgetown University Hilltop Campus
    zoom: isMobile ? 17 : 18.5,
    bearing: 0,
    // Reset bearing for Georgetown campus
    pitch: 40,
    maxBounds: [
      [-77.085, 38.9],
      // Southwest corner of Georgetown campus area (expanded left)
      [-77.065, 38.915]
      // Northeast corner of Georgetown campus area
    ]
  },
  mapStyles: {
    light: "https://tiles.openfreemap.org/styles/bright",
    dark: "/styles/dark/style.json"
  }
};
class IndoorMapLayer {
  constructor(indoorMapData, theme = "light") {
    __publicField(this, "id", "indoor-map");
    __publicField(this, "type", "custom");
    __publicField(this, "map", null);
    __publicField(this, "indoorMapData");
    __publicField(this, "theme");
    __publicField(this, "hoveredRoomId", null);
    __publicField(this, "currentPopup", null);
    __publicField(this, "render", () => {
    });
    this.indoorMapData = indoorMapData;
    this.theme = theme;
  }
  setFloorLevel(level) {
    if (!this.map || !this.indoorMapData) return;
    const source = this.map.getSource("indoor-map");
    const filteredFeatures = this.indoorMapData.features.filter(
      (feature) => feature.properties.level_id === level || feature.properties.level_id === null
    );
    source.setData({
      type: "FeatureCollection",
      features: filteredFeatures
    });
  }
  async getAvailableFloors() {
    const floors = /* @__PURE__ */ new Set();
    this.indoorMapData.features.forEach((feature) => {
      if (feature.properties.level_id !== null) {
        floors.add(feature.properties.level_id);
      }
    });
    const uniqueFloors = [...floors];
    if (!uniqueFloors.includes(0)) {
      uniqueFloors.push(0);
    }
    return uniqueFloors;
  }
  async onAdd(map) {
    this.map = map;
    const lightColor = {
      unit: "#f3f3f3",
      unit_hovered: "#e0e0e0",
      corridor: "#d6d5d1",
      outline: "#a6a5a2"
    };
    const darkColor = {
      unit: "#1f2937",
      unit_hovered: "#374151",
      corridor: "#030712",
      outline: "#1f2937"
    };
    const colors2 = this.theme === "dark" ? darkColor : lightColor;
    map.addSource("indoor-map", {
      type: "geojson",
      data: this.indoorMapData
    });
    map.addLayer({
      id: "indoor-map-fill",
      type: "fill",
      source: "indoor-map",
      paint: {
        "fill-color": ["coalesce", ["get", "fill"], colors2.corridor]
      },
      filter: ["==", ["geometry-type"], "Polygon"]
    });
    map.addLayer({
      id: "indoor-map-fill-outline",
      type: "line",
      source: "indoor-map",
      paint: {
        "line-color": ["coalesce", ["get", "stroke"], colors2.outline],
        "line-width": ["coalesce", ["get", "stroke-width"], 2],
        "line-opacity": ["coalesce", ["get", "stroke-opacity"], 1]
      },
      filter: ["==", ["geometry-type"], "Polygon"]
    });
    map.addLayer({
      id: "indoor-map-extrusion",
      type: "fill-extrusion",
      source: "indoor-map",
      filter: ["all", ["==", "feature_type", "unit"]],
      paint: {
        "fill-extrusion-color": [
          "case",
          ["boolean", ["feature-state", "hover"], false],
          colors2.unit_hovered,
          colors2.unit
        ],
        "fill-extrusion-height": [
          "case",
          ["has", "height"],
          ["get", "height"],
          2.5
        ],
        "fill-extrusion-opacity": 1
      }
    });
    map.addLayer({
      id: "indoor-map-fill-extrusion",
      type: "fill-extrusion",
      source: "indoor-map",
      filter: ["all", ["==", "feature_type", "corridor"]],
      paint: {
        "fill-extrusion-color": colors2.corridor,
        "fill-extrusion-height": [
          "case",
          ["has", "height"],
          ["*", ["get", "height"], 0.1],
          // Make corridors/levels much lower than rooms
          0.2
        ],
        "fill-extrusion-opacity": 1
      }
    });
    map.on("mousemove", "indoor-map-extrusion", (e) => {
      if (e.features && e.features.length > 0) {
        const feature = e.features[0];
        if (this.hoveredRoomId !== null) {
          map.setFeatureState(
            { source: "indoor-map", id: this.hoveredRoomId },
            { hover: false }
          );
        }
        this.hoveredRoomId = e.features[0].id;
        map.setFeatureState(
          { source: "indoor-map", id: this.hoveredRoomId },
          { hover: true }
        );
        if (feature.properties && feature.properties.name) {
          map.getCanvas().style.cursor = "pointer";
          if (this.currentPopup) {
            this.currentPopup.remove();
          }
          const displayType = feature.properties.indoor || "Room";
          this.currentPopup = new maplibreGlExports.Popup({
            closeButton: false,
            closeOnClick: false,
            maxWidth: "none"
          }).setLngLat(e.lngLat).setHTML(`<div style="padding: 4px 8px; font-size: 12px; font-weight: bold; background: white; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">${displayType} ${feature.properties.name}</div>`).addTo(map);
        }
      }
    });
    map.on("mouseleave", "indoor-map-extrusion", () => {
      if (this.hoveredRoomId !== null) {
        map.setFeatureState(
          { source: "indoor-map", id: this.hoveredRoomId },
          { hover: false }
        );
        this.hoveredRoomId = null;
      }
      if (this.currentPopup) {
        this.currentPopup.remove();
        this.currentPopup = null;
      }
      map.getCanvas().style.cursor = "";
    });
  }
}
class POIsLayer {
  constructor(POIs, theme = "light") {
    __publicField(this, "id", "pois");
    __publicField(this, "type", "custom");
    __publicField(this, "POIs");
    __publicField(this, "theme");
    __publicField(this, "map");
    __publicField(this, "render", () => {
    });
    this.POIs = POIs;
    this.theme = theme;
  }
  // Method to update floor filter
  setFloorLevel(level) {
    if (!this.map) return;
    const floorFilter = [
      "any",
      ["!", ["has", "floor"]],
      // Show POIs without floor property
      [
        "in",
        ["get", "type"],
        [
          "literal",
          ["residence_hall", "academic_building", "library", "dining", "athletic_facility", "chapel", "outdoor_space"]
        ]
      ],
      // Show building-level POIs (removed "entrance" to make entrances floor-specific)
      ["==", ["get", "floor"], level]
      // Show POIs for current floor (rooms, restrooms, entrances)
    ];
    this.map.setFilter("point", floorFilter);
    this.map.setFilter("point-label", floorFilter);
  }
  onAdd(map) {
    this.map = map;
    const lightColor = {
      text: "#404040",
      halo: "#ffffff",
      circle: "#695f58",
      academic: "#2563eb",
      // Blue for academic buildings
      library: "#7c3aed",
      // Purple for library
      dining: "#dc2626",
      // Red for dining
      athletic: "#059669",
      // Green for athletic facilities
      chapel: "#ca8a04",
      // Gold for chapel
      outdoor: "#16a34a",
      // Green for outdoor spaces
      residence: "#ec4899",
      // Pink for residence halls
      dorm_room: "#f97316",
      // Orange for individual dorm rooms
      restroom: "#6366f1",
      // Indigo for restrooms
      entrance: "#065f46"
      // Dark green for entrances
    };
    const darkColor = {
      text: "#ffffff",
      halo: "#404040",
      circle: "#9ca3af",
      academic: "#60a5fa",
      // Light blue for academic buildings
      library: "#a78bfa",
      // Light purple for library
      dining: "#f87171",
      // Light red for dining
      athletic: "#34d399",
      // Light green for athletic facilities
      chapel: "#fbbf24",
      // Light gold for chapel
      outdoor: "#4ade80",
      // Light green for outdoor spaces
      residence: "#f472b6",
      // Light pink for residence halls
      dorm_room: "#fb923c",
      // Light orange for individual dorm rooms
      restroom: "#818cf8",
      // Light indigo for restrooms
      entrance: "#10b981"
      // Light green for entrances
    };
    const color = this.theme === "light" ? lightColor : darkColor;
    map.addSource("pois", {
      type: "geojson",
      data: this.POIs
    });
    map.addLayer({
      id: "point",
      type: "circle",
      source: "pois",
      minzoom: 15,
      // Lower minzoom so rooms are visible earlier
      paint: {
        "circle-radius": [
          "case",
          ["==", ["get", "type"], "academic_building"],
          6,
          ["==", ["get", "type"], "library"],
          6,
          ["==", ["get", "type"], "residence_hall"],
          6,
          ["==", ["get", "type"], "dining"],
          5,
          ["==", ["get", "type"], "athletic_facility"],
          5,
          ["==", ["get", "type"], "chapel"],
          5,
          ["==", ["get", "type"], "outdoor_space"],
          4,
          ["==", ["get", "type"], "entrance"],
          5,
          // Medium size for entrances
          ["==", ["get", "type"], "dorm_room"],
          3,
          // Smaller for individual rooms
          ["==", ["get", "type"], "restroom"],
          4,
          // Medium size for restrooms
          4
          // default
        ],
        "circle-color": [
          "case",
          ["==", ["get", "type"], "academic_building"],
          color.academic,
          ["==", ["get", "type"], "library"],
          color.library,
          ["==", ["get", "type"], "residence_hall"],
          color.residence,
          ["==", ["get", "type"], "dining"],
          color.dining,
          ["==", ["get", "type"], "athletic_facility"],
          color.athletic,
          ["==", ["get", "type"], "chapel"],
          color.chapel,
          ["==", ["get", "type"], "outdoor_space"],
          color.outdoor,
          ["==", ["get", "type"], "entrance"],
          color.entrance,
          ["==", ["get", "type"], "dorm_room"],
          color.dorm_room,
          ["==", ["get", "type"], "restroom"],
          color.restroom,
          color.circle
          // default
        ],
        "circle-stroke-color": "#ffffff",
        "circle-stroke-width": 1
      }
    });
    map.addLayer({
      id: "point-label",
      type: "symbol",
      source: "pois",
      minzoom: 17,
      // Show room labels only at higher zoom
      layout: {
        "text-field": ["get", "name"],
        "text-font": ["Noto Sans Regular"],
        "text-size": [
          "case",
          ["==", ["get", "type"], "academic_building"],
          13,
          ["==", ["get", "type"], "library"],
          13,
          ["==", ["get", "type"], "residence_hall"],
          13,
          ["==", ["get", "type"], "outdoor_space"],
          14,
          ["==", ["get", "type"], "entrance"],
          12,
          // Medium text for entrances
          ["==", ["get", "type"], "dorm_room"],
          10,
          // Smaller text for rooms
          ["==", ["get", "type"], "restroom"],
          11,
          // Medium text for restrooms
          12
          // default
        ],
        "text-offset": [0.8, 0],
        "text-anchor": "left",
        "text-max-width": 12
      },
      paint: {
        "text-color": color.text,
        "text-halo-color": color.halo,
        "text-halo-width": 1.5
      }
    });
  }
}
const id = 1;
const name = "Georgetown University Hilltop Campus";
const description = "Georgetown University's main campus in Washington, D.C.";
const address = "37th and O Streets NW, Washington, DC 20057";
const location$1 = {
  latitude: 38.9076,
  longitude: -77.0723
};
const indoor_map = {
  type: "FeatureCollection",
  features: [
    {
      type: "Feature",
      properties: {
        name: "Darnall Hall",
        alt_name: null,
        category: "building",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          building: "university",
          name: "Darnall Hall",
          "building:levels": "6",
          "building:levels:underground": "2",
          "roof:levels": "0"
        },
        original_id: "way/-2",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365626,
              38.91148805
            ],
            [
              -77.07365626,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144474
            ],
            [
              -77.07373538,
              38.9114463
            ],
            [
              -77.07373941,
              38.91131743
            ],
            [
              -77.07372935,
              38.91131638
            ],
            [
              -77.07373203,
              38.9112329
            ],
            [
              -77.07374209,
              38.91123238
            ],
            [
              -77.07374678,
              38.91110298
            ],
            [
              -77.07367839,
              38.91110141
            ],
            [
              -77.0736767,
              38.91110585
            ],
            [
              -77.07366966,
              38.91110585
            ],
            [
              -77.073669,
              38.91105811
            ],
            [
              -77.07354226,
              38.91105445
            ],
            [
              -77.07354092,
              38.91110298
            ],
            [
              -77.07353288,
              38.91110298
            ],
            [
              -77.07353288,
              38.91109828
            ],
            [
              -77.07346314,
              38.9110962
            ],
            [
              -77.07345777,
              38.91122299
            ],
            [
              -77.07346649,
              38.91122455
            ],
            [
              -77.07346515,
              38.91130856
            ],
            [
              -77.07345307,
              38.91130908
            ],
            [
              -77.07344839,
              38.91143796
            ],
            [
              -77.07351812,
              38.91144056
            ],
            [
              -77.07351745,
              38.91143535
            ],
            [
              -77.07353019,
              38.91143535
            ],
            [
              -77.0735275,
              38.91148283
            ],
            [
              -77.07365626,
              38.91148805
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "501",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "501"
        },
        original_id: "way/-7",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351359,
              38.91143091
            ],
            [
              -77.0735161,
              38.91143065
            ],
            [
              -77.07351741,
              38.91140561
            ],
            [
              -77.07345709,
              38.91140482
            ],
            [
              -77.07345572,
              38.911433
            ],
            [
              -77.07347248,
              38.91143352
            ],
            [
              -77.07347503,
              38.91143496
            ],
            [
              -77.07351258,
              38.91143561
            ],
            [
              -77.07351359,
              38.91143091
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "502",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "502"
        },
        original_id: "way/-8",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07345808,
              38.91137391
            ],
            [
              -77.07345709,
              38.91140482
            ],
            [
              -77.07347479,
              38.91140505
            ],
            [
              -77.07351741,
              38.91140561
            ],
            [
              -77.07351893,
              38.9113756
            ],
            [
              -77.07345808,
              38.91137391
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "503",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "503"
        },
        original_id: "way/-9",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351893,
              38.9113756
            ],
            [
              -77.07352096,
              38.91134417
            ],
            [
              -77.07345894,
              38.91134325
            ],
            [
              -77.07345808,
              38.91137391
            ],
            [
              -77.07351893,
              38.9113756
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "504",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "504"
        },
        original_id: "way/-10",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352096,
              38.91134417
            ],
            [
              -77.0735228,
              38.91131404
            ],
            [
              -77.07346044,
              38.91131182
            ],
            [
              -77.07345894,
              38.91134325
            ],
            [
              -77.07352096,
              38.91134417
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "505",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "505"
        },
        original_id: "way/-11",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353286,
              38.91131325
            ],
            [
              -77.07353487,
              38.91128351
            ],
            [
              -77.07347385,
              38.91128116
            ],
            [
              -77.07347218,
              38.91131221
            ],
            [
              -77.07353286,
              38.91131325
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "506",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "506"
        },
        original_id: "way/-12",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353487,
              38.91128351
            ],
            [
              -77.07353621,
              38.91125273
            ],
            [
              -77.07350705,
              38.91125247
            ],
            [
              -77.07347486,
              38.91125194
            ],
            [
              -77.07347385,
              38.91128116
            ],
            [
              -77.07353487,
              38.91128351
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "507",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "507"
        },
        original_id: "way/-13",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353621,
              38.91125273
            ],
            [
              -77.07353789,
              38.91122351
            ],
            [
              -77.07347486,
              38.9112209
            ],
            [
              -77.07347486,
              38.91125194
            ],
            [
              -77.07353621,
              38.91125273
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "508",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "508"
        },
        original_id: "way/-14",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352769,
              38.91122309
            ],
            [
              -77.07352851,
              38.91119246
            ],
            [
              -77.07346716,
              38.91119038
            ],
            [
              -77.07346648,
              38.91121751
            ],
            [
              -77.07347486,
              38.9112209
            ],
            [
              -77.07352769,
              38.91122309
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "509",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "509"
        },
        original_id: "way/-15",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352851,
              38.91119246
            ],
            [
              -77.07353018,
              38.91116168
            ],
            [
              -77.07346883,
              38.91115985
            ],
            [
              -77.07346716,
              38.91119038
            ],
            [
              -77.07352851,
              38.91119246
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "509",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "509"
        },
        original_id: "way/-16",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353018,
              38.91116168
            ],
            [
              -77.07353152,
              38.91113089
            ],
            [
              -77.0734705,
              38.91112933
            ],
            [
              -77.07346883,
              38.91115985
            ],
            [
              -77.07353018,
              38.91116168
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "511",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "511"
        },
        original_id: "way/-17",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353152,
              38.91113089
            ],
            [
              -77.07353288,
              38.91110298
            ],
            [
              -77.07353288,
              38.91110298
            ],
            [
              -77.07353288,
              38.91110298
            ],
            [
              -77.07353286,
              38.91109828
            ],
            [
              -77.07352735,
              38.91109812
            ],
            [
              -77.07347164,
              38.91109645
            ],
            [
              -77.0734705,
              38.91112933
            ],
            [
              -77.07353152,
              38.91113089
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "512",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "512"
        },
        original_id: "way/-18",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07358724,
              38.91110637
            ],
            [
              -77.07358877,
              38.91105579
            ],
            [
              -77.07355118,
              38.91105471
            ],
            [
              -77.07354868,
              38.91110507
            ],
            [
              -77.07358724,
              38.91110637
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "513",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "513"
        },
        original_id: "way/-19",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0736268,
              38.91110741
            ],
            [
              -77.07362867,
              38.91105695
            ],
            [
              -77.07358877,
              38.91105579
            ],
            [
              -77.07358724,
              38.91110637
            ],
            [
              -77.0736268,
              38.91110741
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "514",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "514"
        },
        original_id: "way/-20",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07366949,
              38.91110976
            ],
            [
              -77.07366966,
              38.91110585
            ],
            [
              -77.073669,
              38.91105811
            ],
            [
              -77.07362867,
              38.91105695
            ],
            [
              -77.07362674,
              38.91110741
            ],
            [
              -77.07364954,
              38.91110924
            ],
            [
              -77.0736648,
              38.91110937
            ],
            [
              -77.07366949,
              38.91110976
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "518",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "518"
        },
        original_id: "way/-21",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374241,
              38.9112269
            ],
            [
              -77.07374342,
              38.91119742
            ],
            [
              -77.07367905,
              38.91119507
            ],
            [
              -77.07367737,
              38.91122455
            ],
            [
              -77.07374241,
              38.9112269
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "517",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "517"
        },
        original_id: "way/-22",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374339,
              38.91119663
            ],
            [
              -77.07374445,
              38.91116716
            ],
            [
              -77.07368012,
              38.91116481
            ],
            [
              -77.07367905,
              38.91119507
            ],
            [
              -77.07374339,
              38.91119663
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "516",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "516"
        },
        original_id: "way/-23",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374445,
              38.91116716
            ],
            [
              -77.07374555,
              38.9111369
            ],
            [
              -77.07368112,
              38.91113481
            ],
            [
              -77.07368012,
              38.91116481
            ],
            [
              -77.07374445,
              38.91116716
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "515",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "515"
        },
        original_id: "way/-24",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374555,
              38.9111369
            ],
            [
              -77.07374678,
              38.91110298
            ],
            [
              -77.07368399,
              38.91110154
            ],
            [
              -77.07368112,
              38.91113481
            ],
            [
              -77.07374555,
              38.9111369
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level519: "5",
          indoor: "room",
          room: "bedroom",
          access: "private"
        },
        original_id: "way/-25",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373202,
              38.91122664
            ],
            [
              -77.0736663,
              38.91122507
            ],
            [
              -77.07366568,
              38.91125455
            ],
            [
              -77.07373126,
              38.91125674
            ],
            [
              -77.07373202,
              38.91122664
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "520",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "520"
        },
        original_id: "way/-26",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373135,
              38.9112569
            ],
            [
              -77.07373029,
              38.91128721
            ],
            [
              -77.07366429,
              38.91128586
            ],
            [
              -77.07366568,
              38.91125455
            ],
            [
              -77.07373135,
              38.9112569
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "512",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "512"
        },
        original_id: "way/-27",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07372935,
              38.91131638
            ],
            [
              -77.07373029,
              38.91128721
            ],
            [
              -77.07366429,
              38.91128586
            ],
            [
              -77.07366266,
              38.91131534
            ],
            [
              -77.07372935,
              38.91131638
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "522",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "522"
        },
        original_id: "way/-28",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373941,
              38.91131743
            ],
            [
              -77.07367207,
              38.91131549
            ],
            [
              -77.07367167,
              38.91134638
            ],
            [
              -77.07373848,
              38.91134718
            ],
            [
              -77.07373941,
              38.91131743
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "523",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "523"
        },
        original_id: "way/-29",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373752,
              38.91137798
            ],
            [
              -77.07373844,
              38.91134849
            ],
            [
              -77.07367167,
              38.91134638
            ],
            [
              -77.073671,
              38.91137743
            ],
            [
              -77.07373752,
              38.91137798
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "524",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "524"
        },
        original_id: "way/-32",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373752,
              38.91137798
            ],
            [
              -77.07373651,
              38.91141004
            ],
            [
              -77.07366798,
              38.91140795
            ],
            [
              -77.073671,
              38.91137743
            ],
            [
              -77.07373752,
              38.91137798
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "525",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "525"
        },
        original_id: "way/-33",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373651,
              38.91141004
            ],
            [
              -77.07373538,
              38.9114463
            ],
            [
              -77.07366565,
              38.91144474
            ],
            [
              -77.07366798,
              38.91140795
            ],
            [
              -77.07373651,
              38.91141004
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "526",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "526"
        },
        original_id: "way/-34",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365289,
              38.91143378
            ],
            [
              -77.07365055,
              38.91148778
            ],
            [
              -77.07360919,
              38.91148614
            ],
            [
              -77.07361299,
              38.91143352
            ],
            [
              -77.07365289,
              38.91143378
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "527",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "527"
        },
        original_id: "way/-35",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07361299,
              38.91143352
            ],
            [
              -77.07357209,
              38.91143169
            ],
            [
              -77.07356894,
              38.91148451
            ],
            [
              -77.07360825,
              38.9114861
            ],
            [
              -77.07361299,
              38.91143352
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "528",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "528"
        },
        original_id: "way/-36",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07357209,
              38.91143169
            ],
            [
              -77.07352984,
              38.91143013
            ],
            [
              -77.0735275,
              38.91148283
            ],
            [
              -77.07356907,
              38.91148439
            ],
            [
              -77.07357209,
              38.91143169
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "519",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "519"
        },
        original_id: "way/-37",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0737313,
              38.91125558
            ],
            [
              -77.07373248,
              38.91122654
            ],
            [
              -77.07366664,
              38.91122586
            ],
            [
              -77.07366568,
              38.91125455
            ],
            [
              -77.0737313,
              38.91125558
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          diaper: "no",
          fee: "no",
          wheelchair: "yes"
        },
        original_id: "way/-38",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364686,
              38.91140978
            ],
            [
              -77.07364853,
              38.91137586
            ],
            [
              -77.07358986,
              38.91137456
            ],
            [
              -77.07359187,
              38.91133021
            ],
            [
              -77.07354493,
              38.91132891
            ],
            [
              -77.07354091,
              38.91140248
            ],
            [
              -77.07356438,
              38.91140248
            ],
            [
              -77.07356438,
              38.91140821
            ],
            [
              -77.07364686,
              38.91140978
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          wheelchair: "yes",
          fee: "no"
        },
        original_id: "way/-39",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07359757,
              38.91120707
            ],
            [
              -77.07359891,
              38.91116481
            ],
            [
              -77.07365758,
              38.91116611
            ],
            [
              -77.07365993,
              38.91113246
            ],
            [
              -77.07358382,
              38.91112959
            ],
            [
              -77.07358315,
              38.91113481
            ],
            [
              -77.07355465,
              38.91113455
            ],
            [
              -77.07355398,
              38.9111575
            ],
            [
              -77.07355164,
              38.91120681
            ],
            [
              -77.07358215,
              38.91120629
            ],
            [
              -77.07359757,
              38.91120707
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-40",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364786,
              38.91137013
            ],
            [
              -77.0736492,
              38.91134717
            ],
            [
              -77.07360595,
              38.91134612
            ],
            [
              -77.07360394,
              38.9113683
            ],
            [
              -77.07364786,
              38.91137013
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-42",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364485,
              38.91119325
            ],
            [
              -77.07364552,
              38.91118177
            ],
            [
              -77.07365893,
              38.91118177
            ],
            [
              -77.07365859,
              38.91117264
            ],
            [
              -77.07359873,
              38.91117047
            ],
            [
              -77.07359804,
              38.91119212
            ],
            [
              -77.07364485,
              38.91119325
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: "B",
        show: "true",
        area: 0,
        original_tags: {
          level: "B",
          highway: "elevator",
          indoor: "room",
          room: "elevator",
          wheelchair: "yes",
          access: "private"
        },
        original_id: "way/-43",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0736425,
              38.91130647
            ],
            [
              -77.07364317,
              38.91128403
            ],
            [
              -77.07361601,
              38.91128351
            ],
            [
              -77.07361702,
              38.91126629
            ],
            [
              -77.07359891,
              38.91126551
            ],
            [
              -77.07359891,
              38.91128351
            ],
            [
              -77.07355834,
              38.91128273
            ],
            [
              -77.07355767,
              38.91130386
            ],
            [
              -77.0736425,
              38.91130647
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "kitchen",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          level: "5",
          shop: "kitchen"
        },
        original_id: "way/-44",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07359891,
              38.91128351
            ],
            [
              -77.07359891,
              38.91126551
            ],
            [
              -77.0735902,
              38.91126538
            ],
            [
              -77.07359087,
              38.91125586
            ],
            [
              -77.07356103,
              38.91125534
            ],
            [
              -77.07355834,
              38.91128273
            ],
            [
              -77.07359891,
              38.91128351
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        level_id: 5,
        show: "true",
        area: 0,
        original_tags: {
          indoor: "level",
          level: "5"
        },
        original_id: "way/-45",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365626,
              38.91148805
            ],
            [
              -77.07365626,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144474
            ],
            [
              -77.07373538,
              38.9114463
            ],
            [
              -77.07373941,
              38.91131743
            ],
            [
              -77.07372935,
              38.91131638
            ],
            [
              -77.07373203,
              38.9112329
            ],
            [
              -77.07374209,
              38.91123238
            ],
            [
              -77.07374678,
              38.91110298
            ],
            [
              -77.07367839,
              38.91110141
            ],
            [
              -77.0736767,
              38.91110585
            ],
            [
              -77.07366966,
              38.91110585
            ],
            [
              -77.073669,
              38.91105811
            ],
            [
              -77.07354226,
              38.91105445
            ],
            [
              -77.07354092,
              38.91110298
            ],
            [
              -77.07353288,
              38.91110298
            ],
            [
              -77.07353288,
              38.91109828
            ],
            [
              -77.07346314,
              38.9110962
            ],
            [
              -77.07345777,
              38.91122299
            ],
            [
              -77.07346649,
              38.91122455
            ],
            [
              -77.07346515,
              38.91130856
            ],
            [
              -77.07345307,
              38.91130908
            ],
            [
              -77.07344839,
              38.91143796
            ],
            [
              -77.07351812,
              38.91144056
            ],
            [
              -77.07351745,
              38.91143535
            ],
            [
              -77.07353019,
              38.91143535
            ],
            [
              -77.0735275,
              38.91148283
            ],
            [
              -77.07365626,
              38.91148805
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          indoor: "level",
          level: "4"
        },
        original_id: "way/-46",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365626,
              38.91148805
            ],
            [
              -77.07365626,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144474
            ],
            [
              -77.07373538,
              38.9114463
            ],
            [
              -77.07373941,
              38.91131743
            ],
            [
              -77.07372935,
              38.91131638
            ],
            [
              -77.07373203,
              38.9112329
            ],
            [
              -77.07374209,
              38.91123238
            ],
            [
              -77.07374678,
              38.91110298
            ],
            [
              -77.07367839,
              38.91110141
            ],
            [
              -77.0736767,
              38.91110585
            ],
            [
              -77.07366966,
              38.91110585
            ],
            [
              -77.073669,
              38.91105811
            ],
            [
              -77.07354226,
              38.91105445
            ],
            [
              -77.07354092,
              38.91110298
            ],
            [
              -77.07353288,
              38.91110298
            ],
            [
              -77.07353288,
              38.91109828
            ],
            [
              -77.07346314,
              38.9110962
            ],
            [
              -77.07345777,
              38.91122299
            ],
            [
              -77.07346649,
              38.91122455
            ],
            [
              -77.07346515,
              38.91130856
            ],
            [
              -77.07345307,
              38.91130908
            ],
            [
              -77.07344839,
              38.91143796
            ],
            [
              -77.07351812,
              38.91144056
            ],
            [
              -77.07351745,
              38.91143535
            ],
            [
              -77.07353019,
              38.91143535
            ],
            [
              -77.0735275,
              38.91148283
            ],
            [
              -77.07365626,
              38.91148805
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          indoor: "level",
          level: "3"
        },
        original_id: "way/-47",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365626,
              38.91148805
            ],
            [
              -77.07365626,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144474
            ],
            [
              -77.07373538,
              38.9114463
            ],
            [
              -77.07373941,
              38.91131743
            ],
            [
              -77.07372935,
              38.91131638
            ],
            [
              -77.07373203,
              38.9112329
            ],
            [
              -77.07374209,
              38.91123238
            ],
            [
              -77.07374678,
              38.91110298
            ],
            [
              -77.07367839,
              38.91110141
            ],
            [
              -77.0736767,
              38.91110585
            ],
            [
              -77.07366966,
              38.91110585
            ],
            [
              -77.073669,
              38.91105811
            ],
            [
              -77.07354226,
              38.91105445
            ],
            [
              -77.07354092,
              38.91110298
            ],
            [
              -77.07353288,
              38.91110298
            ],
            [
              -77.07353288,
              38.91109828
            ],
            [
              -77.07346314,
              38.9110962
            ],
            [
              -77.07345777,
              38.91122299
            ],
            [
              -77.07346649,
              38.91122455
            ],
            [
              -77.07346515,
              38.91130856
            ],
            [
              -77.07345307,
              38.91130908
            ],
            [
              -77.07344839,
              38.91143796
            ],
            [
              -77.07351812,
              38.91144056
            ],
            [
              -77.07351745,
              38.91143535
            ],
            [
              -77.07353019,
              38.91143535
            ],
            [
              -77.0735275,
              38.91148283
            ],
            [
              -77.07365626,
              38.91148805
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          indoor: "level",
          level: "1"
        },
        original_id: "way/-48",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365626,
              38.91148805
            ],
            [
              -77.07365626,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144474
            ],
            [
              -77.07373538,
              38.9114463
            ],
            [
              -77.07373941,
              38.91131743
            ],
            [
              -77.07372935,
              38.91131638
            ],
            [
              -77.07373203,
              38.9112329
            ],
            [
              -77.07374209,
              38.91123238
            ],
            [
              -77.07374678,
              38.91110298
            ],
            [
              -77.07367839,
              38.91110141
            ],
            [
              -77.0736767,
              38.91110585
            ],
            [
              -77.07366966,
              38.91110585
            ],
            [
              -77.073669,
              38.91105811
            ],
            [
              -77.07354226,
              38.91105445
            ],
            [
              -77.07354092,
              38.91110298
            ],
            [
              -77.07353288,
              38.91110298
            ],
            [
              -77.07353288,
              38.91109828
            ],
            [
              -77.07346314,
              38.9110962
            ],
            [
              -77.07345777,
              38.91122299
            ],
            [
              -77.07346649,
              38.91122455
            ],
            [
              -77.07346515,
              38.91130856
            ],
            [
              -77.07345307,
              38.91130908
            ],
            [
              -77.07344839,
              38.91143796
            ],
            [
              -77.07351812,
              38.91144056
            ],
            [
              -77.07351745,
              38.91143535
            ],
            [
              -77.07353019,
              38.91143535
            ],
            [
              -77.0735275,
              38.91148283
            ],
            [
              -77.07365626,
              38.91148805
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          indoor: "level",
          level: "2"
        },
        original_id: "way/-49",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365626,
              38.91148805
            ],
            [
              -77.07365626,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144004
            ],
            [
              -77.07366565,
              38.91144474
            ],
            [
              -77.07373538,
              38.9114463
            ],
            [
              -77.07373941,
              38.91131743
            ],
            [
              -77.07372935,
              38.91131638
            ],
            [
              -77.07373203,
              38.9112329
            ],
            [
              -77.07374209,
              38.91123238
            ],
            [
              -77.07374678,
              38.91110298
            ],
            [
              -77.07367839,
              38.91110141
            ],
            [
              -77.0736767,
              38.91110585
            ],
            [
              -77.07366966,
              38.91110585
            ],
            [
              -77.073669,
              38.91105811
            ],
            [
              -77.07354226,
              38.91105445
            ],
            [
              -77.07354092,
              38.91110298
            ],
            [
              -77.07353288,
              38.91110298
            ],
            [
              -77.07353288,
              38.91109828
            ],
            [
              -77.07346314,
              38.9110962
            ],
            [
              -77.07345777,
              38.91122299
            ],
            [
              -77.07346649,
              38.91122455
            ],
            [
              -77.07346515,
              38.91130856
            ],
            [
              -77.07345307,
              38.91130908
            ],
            [
              -77.07344839,
              38.91143796
            ],
            [
              -77.07351812,
              38.91144056
            ],
            [
              -77.07351745,
              38.91143535
            ],
            [
              -77.07353019,
              38.91143535
            ],
            [
              -77.0735275,
              38.91148283
            ],
            [
              -77.07365626,
              38.91148805
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "101",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "101"
        },
        original_id: "way/-7",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352159,
              38.91142691
            ],
            [
              -77.0735241,
              38.91142665
            ],
            [
              -77.07352540999999,
              38.911401610000006
            ],
            [
              -77.07346509,
              38.911400820000004
            ],
            [
              -77.07346371999999,
              38.911429000000005
            ],
            [
              -77.07348048,
              38.911429520000006
            ],
            [
              -77.07348302999999,
              38.911430960000004
            ],
            [
              -77.07352058,
              38.91143161
            ],
            [
              -77.07352159,
              38.91142691
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "102",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "102"
        },
        original_id: "way/-8",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07346607999999,
              38.911369910000005
            ],
            [
              -77.07346509,
              38.911400820000004
            ],
            [
              -77.07348279,
              38.91140105
            ],
            [
              -77.07352540999999,
              38.911401610000006
            ],
            [
              -77.07352693,
              38.9113716
            ],
            [
              -77.07346607999999,
              38.911369910000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "103",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "103"
        },
        original_id: "way/-9",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352693,
              38.9113716
            ],
            [
              -77.07352895999999,
              38.91134017
            ],
            [
              -77.07346693999999,
              38.911339250000005
            ],
            [
              -77.07346607999999,
              38.911369910000005
            ],
            [
              -77.07352693,
              38.9113716
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "104",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "104"
        },
        original_id: "way/-10",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352895999999,
              38.91134017
            ],
            [
              -77.0735308,
              38.911310040000004
            ],
            [
              -77.07346844,
              38.911307820000005
            ],
            [
              -77.07346693999999,
              38.911339250000005
            ],
            [
              -77.07352895999999,
              38.91134017
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "105",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "105"
        },
        original_id: "way/-11",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07354086,
              38.91130925
            ],
            [
              -77.07354287,
              38.91127951
            ],
            [
              -77.07348185,
              38.911277160000004
            ],
            [
              -77.07348017999999,
              38.91130821
            ],
            [
              -77.07354086,
              38.91130925
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "106",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "106"
        },
        original_id: "way/-12",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07354287,
              38.91127951
            ],
            [
              -77.07354421,
              38.911248730000004
            ],
            [
              -77.07351505,
              38.911248470000004
            ],
            [
              -77.07348286,
              38.91124794
            ],
            [
              -77.07348185,
              38.911277160000004
            ],
            [
              -77.07354287,
              38.91127951
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "107",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "107"
        },
        original_id: "way/-13",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07354421,
              38.911248730000004
            ],
            [
              -77.07354588999999,
              38.91121951
            ],
            [
              -77.07348286,
              38.9112169
            ],
            [
              -77.07348286,
              38.91124794
            ],
            [
              -77.07354421,
              38.911248730000004
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "108",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "108"
        },
        original_id: "way/-14",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353569,
              38.91121909
            ],
            [
              -77.07353651,
              38.911188460000005
            ],
            [
              -77.07347516,
              38.911186380000004
            ],
            [
              -77.07347447999999,
              38.91121351
            ],
            [
              -77.07348286,
              38.9112169
            ],
            [
              -77.07353569,
              38.91121909
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "109",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "109"
        },
        original_id: "way/-15",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353651,
              38.911188460000005
            ],
            [
              -77.07353818,
              38.91115768
            ],
            [
              -77.07347682999999,
              38.91115585
            ],
            [
              -77.07347516,
              38.911186380000004
            ],
            [
              -77.07353651,
              38.911188460000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "109",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "109"
        },
        original_id: "way/-16",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353818,
              38.91115768
            ],
            [
              -77.07353952,
              38.911126890000006
            ],
            [
              -77.0734785,
              38.911125330000004
            ],
            [
              -77.07347682999999,
              38.91115585
            ],
            [
              -77.07353818,
              38.91115768
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "111",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "111"
        },
        original_id: "way/-17",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353952,
              38.911126890000006
            ],
            [
              -77.07354088,
              38.911098980000006
            ],
            [
              -77.07354088,
              38.911098980000006
            ],
            [
              -77.07354088,
              38.911098980000006
            ],
            [
              -77.07354086,
              38.91109428
            ],
            [
              -77.07353535,
              38.91109412
            ],
            [
              -77.07347963999999,
              38.911092450000005
            ],
            [
              -77.0734785,
              38.911125330000004
            ],
            [
              -77.07353952,
              38.911126890000006
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "112",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "112"
        },
        original_id: "way/-18",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07359523999999,
              38.91110237
            ],
            [
              -77.07359677,
              38.91105179
            ],
            [
              -77.07355917999999,
              38.911050710000005
            ],
            [
              -77.07355668,
              38.91110107
            ],
            [
              -77.07359523999999,
              38.91110237
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "113",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "113"
        },
        original_id: "way/-19",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0736348,
              38.91110341
            ],
            [
              -77.07363667,
              38.911052950000006
            ],
            [
              -77.07359677,
              38.91105179
            ],
            [
              -77.07359523999999,
              38.91110237
            ],
            [
              -77.0736348,
              38.91110341
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "114",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "114"
        },
        original_id: "way/-20",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07367749,
              38.911105760000005
            ],
            [
              -77.07367765999999,
              38.91110185
            ],
            [
              -77.07367699999999,
              38.91105411
            ],
            [
              -77.07363667,
              38.911052950000006
            ],
            [
              -77.07363473999999,
              38.91110341
            ],
            [
              -77.07365754,
              38.911105240000005
            ],
            [
              -77.0736728,
              38.91110537
            ],
            [
              -77.07367749,
              38.911105760000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "118",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "118"
        },
        original_id: "way/-21",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07375040999999,
              38.911222900000006
            ],
            [
              -77.07375142,
              38.911193420000004
            ],
            [
              -77.07368704999999,
              38.91119107
            ],
            [
              -77.07368536999999,
              38.91122055
            ],
            [
              -77.07375040999999,
              38.911222900000006
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "117",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "117"
        },
        original_id: "way/-22",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07375139,
              38.91119263
            ],
            [
              -77.07375245,
              38.91116316
            ],
            [
              -77.07368812,
              38.911160810000005
            ],
            [
              -77.07368704999999,
              38.91119107
            ],
            [
              -77.07375139,
              38.91119263
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "116",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "116"
        },
        original_id: "way/-23",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07375245,
              38.91116316
            ],
            [
              -77.07375354999999,
              38.911132900000005
            ],
            [
              -77.07368912,
              38.91113081
            ],
            [
              -77.07368812,
              38.911160810000005
            ],
            [
              -77.07375245,
              38.91116316
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "115",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "115"
        },
        original_id: "way/-24",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07375354999999,
              38.911132900000005
            ],
            [
              -77.07375477999999,
              38.911098980000006
            ],
            [
              -77.07369199,
              38.91109754
            ],
            [
              -77.07368912,
              38.91113081
            ],
            [
              -77.07375354999999,
              38.911132900000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "120",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "120"
        },
        original_id: "way/-26",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373935,
              38.9112529
            ],
            [
              -77.07373829,
              38.91128321
            ],
            [
              -77.07367228999999,
              38.91128186
            ],
            [
              -77.07367368,
              38.911250550000005
            ],
            [
              -77.07373935,
              38.9112529
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "112",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "112"
        },
        original_id: "way/-27",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373734999999,
              38.911312380000005
            ],
            [
              -77.07373829,
              38.91128321
            ],
            [
              -77.07367228999999,
              38.91128186
            ],
            [
              -77.07367065999999,
              38.911311340000005
            ],
            [
              -77.07373734999999,
              38.911312380000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "122",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "122"
        },
        original_id: "way/-28",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374741,
              38.91131343
            ],
            [
              -77.07368007,
              38.91131149
            ],
            [
              -77.07367966999999,
              38.91134238
            ],
            [
              -77.07374648,
              38.91134318
            ],
            [
              -77.07374741,
              38.91131343
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "123",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "123"
        },
        original_id: "way/-29",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374551999999,
              38.91137398
            ],
            [
              -77.07374644,
              38.911344490000005
            ],
            [
              -77.07367966999999,
              38.91134238
            ],
            [
              -77.073679,
              38.911373430000005
            ],
            [
              -77.07374551999999,
              38.91137398
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "124",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "124"
        },
        original_id: "way/-32",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374551999999,
              38.91137398
            ],
            [
              -77.07374451,
              38.91140604
            ],
            [
              -77.07367597999999,
              38.91140395
            ],
            [
              -77.073679,
              38.911373430000005
            ],
            [
              -77.07374551999999,
              38.91137398
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "125",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "125"
        },
        original_id: "way/-33",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374451,
              38.91140604
            ],
            [
              -77.07374338,
              38.911442300000004
            ],
            [
              -77.07367364999999,
              38.91144074
            ],
            [
              -77.07367597999999,
              38.91140395
            ],
            [
              -77.07374451,
              38.91140604
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "126",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "126"
        },
        original_id: "way/-34",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07366089,
              38.911429780000006
            ],
            [
              -77.07365854999999,
              38.911483780000005
            ],
            [
              -77.07361719,
              38.911482140000004
            ],
            [
              -77.07362099,
              38.911429520000006
            ],
            [
              -77.07366089,
              38.911429780000006
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "127",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "127"
        },
        original_id: "way/-35",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07362099,
              38.911429520000006
            ],
            [
              -77.07358009,
              38.911427690000004
            ],
            [
              -77.07357694,
              38.911480510000004
            ],
            [
              -77.07361625,
              38.9114821
            ],
            [
              -77.07362099,
              38.911429520000006
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "128",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "128"
        },
        original_id: "way/-36",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07358009,
              38.911427690000004
            ],
            [
              -77.07353784,
              38.91142613
            ],
            [
              -77.07353549999999,
              38.91147883
            ],
            [
              -77.07357707,
              38.91148039
            ],
            [
              -77.07358009,
              38.911427690000004
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "119",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "119"
        },
        original_id: "way/-37",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0737393,
              38.911251580000005
            ],
            [
              -77.07374048,
              38.911222540000004
            ],
            [
              -77.07367464,
              38.911221860000005
            ],
            [
              -77.07367368,
              38.911250550000005
            ],
            [
              -77.0737393,
              38.911251580000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          diaper: "no",
          fee: "no",
          wheelchair: "yes"
        },
        original_id: "way/-38",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365485999999,
              38.91140578
            ],
            [
              -77.07365653,
              38.91137186
            ],
            [
              -77.07359785999999,
              38.91137056
            ],
            [
              -77.07359987,
              38.911326210000006
            ],
            [
              -77.07355292999999,
              38.911324910000005
            ],
            [
              -77.07354891,
              38.91139848
            ],
            [
              -77.07357237999999,
              38.91139848
            ],
            [
              -77.07357237999999,
              38.91140421
            ],
            [
              -77.07365485999999,
              38.91140578
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          wheelchair: "yes",
          fee: "no"
        },
        original_id: "way/-39",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360557,
              38.911203070000006
            ],
            [
              -77.07360691,
              38.911160810000005
            ],
            [
              -77.07366558,
              38.91116211000001
            ],
            [
              -77.07366793,
              38.91112846
            ],
            [
              -77.07359181999999,
              38.911125590000005
            ],
            [
              -77.07359115,
              38.91113081
            ],
            [
              -77.07356265,
              38.91113055
            ],
            [
              -77.07356198,
              38.911153500000005
            ],
            [
              -77.07355964,
              38.911202810000006
            ],
            [
              -77.07359014999999,
              38.911202290000006
            ],
            [
              -77.07360557,
              38.911203070000006
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-40",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365585999999,
              38.911366130000005
            ],
            [
              -77.0736572,
              38.91134317
            ],
            [
              -77.07361395,
              38.91134212
            ],
            [
              -77.07361193999999,
              38.9113643
            ],
            [
              -77.07365585999999,
              38.911366130000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-42",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365284999999,
              38.91118925
            ],
            [
              -77.07365352,
              38.91117777
            ],
            [
              -77.07366692999999,
              38.91117777
            ],
            [
              -77.07366658999999,
              38.91116864
            ],
            [
              -77.07360673,
              38.911166470000005
            ],
            [
              -77.07360603999999,
              38.911188120000006
            ],
            [
              -77.07365284999999,
              38.91118925
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "kitchen",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          level: "1",
          shop: "kitchen"
        },
        original_id: "way/-44",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360691,
              38.91127951
            ],
            [
              -77.07360691,
              38.91126151
            ],
            [
              -77.07359819999999,
              38.911261380000006
            ],
            [
              -77.07359887,
              38.91125186
            ],
            [
              -77.07356902999999,
              38.91125134
            ],
            [
              -77.07356634,
              38.91127873000001
            ],
            [
              -77.07360691,
              38.91127951
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        level_id: 1,
        show: "true",
        area: 0,
        original_tags: {
          indoor: "level",
          level: "1"
        },
        original_id: "way/-45",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07366426,
              38.911484050000006
            ],
            [
              -77.07366426,
              38.911436040000005
            ],
            [
              -77.07367364999999,
              38.911436040000005
            ],
            [
              -77.07367364999999,
              38.91144074
            ],
            [
              -77.07374338,
              38.911442300000004
            ],
            [
              -77.07374741,
              38.91131343
            ],
            [
              -77.07373734999999,
              38.911312380000005
            ],
            [
              -77.07374003,
              38.911228900000005
            ],
            [
              -77.07375008999999,
              38.911228380000004
            ],
            [
              -77.07375477999999,
              38.911098980000006
            ],
            [
              -77.07368638999999,
              38.91109741
            ],
            [
              -77.07368469999999,
              38.91110185
            ],
            [
              -77.07367765999999,
              38.91110185
            ],
            [
              -77.07367699999999,
              38.91105411
            ],
            [
              -77.07355025999999,
              38.911050450000005
            ],
            [
              -77.07354892,
              38.911098980000006
            ],
            [
              -77.07354088,
              38.911098980000006
            ],
            [
              -77.07354088,
              38.91109428
            ],
            [
              -77.07347114,
              38.911092200000006
            ],
            [
              -77.07346577,
              38.91121899
            ],
            [
              -77.07347449,
              38.91122055
            ],
            [
              -77.07347315,
              38.911304560000005
            ],
            [
              -77.07346107,
              38.911305080000005
            ],
            [
              -77.07345638999999,
              38.911433960000004
            ],
            [
              -77.07352612,
              38.911436560000006
            ],
            [
              -77.07352544999999,
              38.91143135
            ],
            [
              -77.07353819,
              38.91143135
            ],
            [
              -77.07353549999999,
              38.91147883
            ],
            [
              -77.07366426,
              38.911484050000006
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "201",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "201"
        },
        original_id: "way/-7",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351959,
              38.91142791
            ],
            [
              -77.0735221,
              38.91142765
            ],
            [
              -77.07352340999999,
              38.91140261
            ],
            [
              -77.07346309,
              38.91140182
            ],
            [
              -77.07346172,
              38.91143
            ],
            [
              -77.07347848,
              38.91143052
            ],
            [
              -77.07348103,
              38.91143196
            ],
            [
              -77.07351858,
              38.91143261
            ],
            [
              -77.07351959,
              38.91142791
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "202",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "202"
        },
        original_id: "way/-8",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07346408,
              38.91137091
            ],
            [
              -77.07346309,
              38.91140182
            ],
            [
              -77.07348079,
              38.91140205
            ],
            [
              -77.07352340999999,
              38.91140261
            ],
            [
              -77.07352493,
              38.9113726
            ],
            [
              -77.07346408,
              38.91137091
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "203",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "203"
        },
        original_id: "way/-9",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352493,
              38.9113726
            ],
            [
              -77.07352696,
              38.91134117
            ],
            [
              -77.07346494,
              38.91134025
            ],
            [
              -77.07346408,
              38.91137091
            ],
            [
              -77.07352493,
              38.9113726
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "204",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "204"
        },
        original_id: "way/-10",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352696,
              38.91134117
            ],
            [
              -77.0735288,
              38.91131104
            ],
            [
              -77.07346644,
              38.91130882
            ],
            [
              -77.07346494,
              38.91134025
            ],
            [
              -77.07352696,
              38.91134117
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "205",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "205"
        },
        original_id: "way/-11",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353886,
              38.91131025
            ],
            [
              -77.07354087,
              38.91128051
            ],
            [
              -77.07347985,
              38.91127816
            ],
            [
              -77.07347818,
              38.91130921
            ],
            [
              -77.07353886,
              38.91131025
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "206",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "206"
        },
        original_id: "way/-12",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07354087,
              38.91128051
            ],
            [
              -77.07354221,
              38.91124973
            ],
            [
              -77.07351305,
              38.91124947
            ],
            [
              -77.07348086,
              38.91124894
            ],
            [
              -77.07347985,
              38.91127816
            ],
            [
              -77.07354087,
              38.91128051
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "207",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "207"
        },
        original_id: "way/-13",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07354221,
              38.91124973
            ],
            [
              -77.07354389,
              38.91122051
            ],
            [
              -77.07348086,
              38.9112179
            ],
            [
              -77.07348086,
              38.91124894
            ],
            [
              -77.07354221,
              38.91124973
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "208",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "208"
        },
        original_id: "way/-14",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353369,
              38.91122009
            ],
            [
              -77.07353451,
              38.91118946
            ],
            [
              -77.07347316,
              38.91118738
            ],
            [
              -77.07347247999999,
              38.91121451
            ],
            [
              -77.07348086,
              38.9112179
            ],
            [
              -77.07353369,
              38.91122009
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "209",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "209"
        },
        original_id: "way/-15",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353451,
              38.91118946
            ],
            [
              -77.07353618,
              38.91115868
            ],
            [
              -77.07347483,
              38.91115685
            ],
            [
              -77.07347316,
              38.91118738
            ],
            [
              -77.07353451,
              38.91118946
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "209",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "209"
        },
        original_id: "way/-16",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353618,
              38.91115868
            ],
            [
              -77.07353752,
              38.91112789
            ],
            [
              -77.0734765,
              38.91112633
            ],
            [
              -77.07347483,
              38.91115685
            ],
            [
              -77.07353618,
              38.91115868
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "211",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "211"
        },
        original_id: "way/-17",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353752,
              38.91112789
            ],
            [
              -77.07353888,
              38.91109998
            ],
            [
              -77.07353888,
              38.91109998
            ],
            [
              -77.07353888,
              38.91109998
            ],
            [
              -77.07353886,
              38.91109528
            ],
            [
              -77.07353335,
              38.91109512
            ],
            [
              -77.07347764,
              38.91109345
            ],
            [
              -77.0734765,
              38.91112633
            ],
            [
              -77.07353752,
              38.91112789
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "212",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "212"
        },
        original_id: "way/-18",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07359324,
              38.91110337
            ],
            [
              -77.07359477,
              38.91105279
            ],
            [
              -77.07355718,
              38.91105171
            ],
            [
              -77.07355468,
              38.91110207
            ],
            [
              -77.07359324,
              38.91110337
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "213",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "213"
        },
        original_id: "way/-19",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0736328,
              38.91110441
            ],
            [
              -77.07363467,
              38.91105395
            ],
            [
              -77.07359477,
              38.91105279
            ],
            [
              -77.07359324,
              38.91110337
            ],
            [
              -77.0736328,
              38.91110441
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "214",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "214"
        },
        original_id: "way/-20",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07367549,
              38.91110676
            ],
            [
              -77.07367565999999,
              38.91110285
            ],
            [
              -77.073675,
              38.91105511
            ],
            [
              -77.07363467,
              38.91105395
            ],
            [
              -77.07363274,
              38.91110441
            ],
            [
              -77.07365554,
              38.91110624
            ],
            [
              -77.0736708,
              38.91110637
            ],
            [
              -77.07367549,
              38.91110676
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "218",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "218"
        },
        original_id: "way/-21",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374841,
              38.9112239
            ],
            [
              -77.07374942,
              38.91119442
            ],
            [
              -77.07368505,
              38.91119207
            ],
            [
              -77.07368337,
              38.91122155
            ],
            [
              -77.07374841,
              38.9112239
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "217",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "217"
        },
        original_id: "way/-22",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374939,
              38.91119363
            ],
            [
              -77.07375045,
              38.91116416
            ],
            [
              -77.07368612,
              38.91116181
            ],
            [
              -77.07368505,
              38.91119207
            ],
            [
              -77.07374939,
              38.91119363
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "216",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "216"
        },
        original_id: "way/-23",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07375045,
              38.91116416
            ],
            [
              -77.07375155,
              38.9111339
            ],
            [
              -77.07368712,
              38.91113181
            ],
            [
              -77.07368612,
              38.91116181
            ],
            [
              -77.07375045,
              38.91116416
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "215",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "215"
        },
        original_id: "way/-24",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07375155,
              38.9111339
            ],
            [
              -77.07375277999999,
              38.91109998
            ],
            [
              -77.07368999,
              38.91109854
            ],
            [
              -77.07368712,
              38.91113181
            ],
            [
              -77.07375155,
              38.9111339
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "220",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "220"
        },
        original_id: "way/-26",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373735,
              38.9112539
            ],
            [
              -77.07373629,
              38.91128421
            ],
            [
              -77.07367029,
              38.91128286
            ],
            [
              -77.07367168,
              38.91125155
            ],
            [
              -77.07373735,
              38.9112539
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "212",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "212"
        },
        original_id: "way/-27",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373534999999,
              38.91131338
            ],
            [
              -77.07373629,
              38.91128421
            ],
            [
              -77.07367029,
              38.91128286
            ],
            [
              -77.07366866,
              38.91131234
            ],
            [
              -77.07373534999999,
              38.91131338
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "222",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "222"
        },
        original_id: "way/-28",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374541,
              38.91131443
            ],
            [
              -77.07367807,
              38.91131249
            ],
            [
              -77.07367767,
              38.91134338
            ],
            [
              -77.07374448,
              38.91134418
            ],
            [
              -77.07374541,
              38.91131443
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "223",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "223"
        },
        original_id: "way/-29",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374352,
              38.91137498
            ],
            [
              -77.07374444,
              38.91134549
            ],
            [
              -77.07367767,
              38.91134338
            ],
            [
              -77.073677,
              38.91137443
            ],
            [
              -77.07374352,
              38.91137498
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "224",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "224"
        },
        original_id: "way/-32",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374352,
              38.91137498
            ],
            [
              -77.07374251,
              38.91140704
            ],
            [
              -77.07367398,
              38.91140495
            ],
            [
              -77.073677,
              38.91137443
            ],
            [
              -77.07374352,
              38.91137498
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "225",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "225"
        },
        original_id: "way/-33",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374251,
              38.91140704
            ],
            [
              -77.07374138,
              38.9114433
            ],
            [
              -77.07367165,
              38.91144174
            ],
            [
              -77.07367398,
              38.91140495
            ],
            [
              -77.07374251,
              38.91140704
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "226",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "226"
        },
        original_id: "way/-34",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365889,
              38.91143078
            ],
            [
              -77.07365655,
              38.91148478
            ],
            [
              -77.07361519,
              38.91148314
            ],
            [
              -77.07361899,
              38.91143052
            ],
            [
              -77.07365889,
              38.91143078
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "227",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "227"
        },
        original_id: "way/-35",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07361899,
              38.91143052
            ],
            [
              -77.07357809,
              38.91142869
            ],
            [
              -77.07357494,
              38.91148151
            ],
            [
              -77.07361425,
              38.9114831
            ],
            [
              -77.07361899,
              38.91143052
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "228",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "228"
        },
        original_id: "way/-36",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07357809,
              38.91142869
            ],
            [
              -77.07353584,
              38.91142713
            ],
            [
              -77.0735335,
              38.91147983
            ],
            [
              -77.07357507,
              38.91148139
            ],
            [
              -77.07357809,
              38.91142869
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "219",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "219"
        },
        original_id: "way/-37",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0737373,
              38.91125258
            ],
            [
              -77.07373848,
              38.91122354
            ],
            [
              -77.07367264,
              38.91122286
            ],
            [
              -77.07367168,
              38.91125155
            ],
            [
              -77.0737373,
              38.91125258
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          diaper: "no",
          fee: "no",
          wheelchair: "yes"
        },
        original_id: "way/-38",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365286,
              38.91140678
            ],
            [
              -77.07365453,
              38.91137286
            ],
            [
              -77.07359586,
              38.91137156
            ],
            [
              -77.07359787,
              38.91132721
            ],
            [
              -77.07355093,
              38.91132591
            ],
            [
              -77.07354691,
              38.91139948
            ],
            [
              -77.07357037999999,
              38.91139948
            ],
            [
              -77.07357037999999,
              38.91140521
            ],
            [
              -77.07365286,
              38.91140678
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          wheelchair: "yes",
          fee: "no"
        },
        original_id: "way/-39",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360357,
              38.911204070000004
            ],
            [
              -77.07360491,
              38.91116181
            ],
            [
              -77.07366358,
              38.911163110000004
            ],
            [
              -77.07366593,
              38.91112946
            ],
            [
              -77.07358982,
              38.91112659
            ],
            [
              -77.07358915,
              38.91113181
            ],
            [
              -77.07356065,
              38.91113155
            ],
            [
              -77.07355998,
              38.9111545
            ],
            [
              -77.07355764,
              38.91120381
            ],
            [
              -77.07358814999999,
              38.91120329
            ],
            [
              -77.07360357,
              38.911204070000004
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-40",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365386,
              38.91136713
            ],
            [
              -77.0736552,
              38.91134417
            ],
            [
              -77.07361195,
              38.91134312
            ],
            [
              -77.07360994,
              38.9113653
            ],
            [
              -77.07365386,
              38.91136713
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-42",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365084999999,
              38.91119025
            ],
            [
              -77.07365152,
              38.91117877
            ],
            [
              -77.07366492999999,
              38.91117877
            ],
            [
              -77.07366458999999,
              38.91116964
            ],
            [
              -77.07360473,
              38.91116747
            ],
            [
              -77.07360403999999,
              38.91118912
            ],
            [
              -77.07365084999999,
              38.91119025
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "kitchen",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          level: "2",
          shop: "kitchen"
        },
        original_id: "way/-44",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360491,
              38.91128051
            ],
            [
              -77.07360491,
              38.91126251
            ],
            [
              -77.0735962,
              38.911262380000004
            ],
            [
              -77.07359687,
              38.91125286
            ],
            [
              -77.07356702999999,
              38.91125234
            ],
            [
              -77.07356434,
              38.911279730000004
            ],
            [
              -77.07360491,
              38.91128051
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        level_id: 2,
        show: "true",
        area: 0,
        original_tags: {
          indoor: "level",
          level: "2"
        },
        original_id: "way/-45",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07366226,
              38.91148505
            ],
            [
              -77.07366226,
              38.91143704
            ],
            [
              -77.07367165,
              38.91143704
            ],
            [
              -77.07367165,
              38.91144174
            ],
            [
              -77.07374138,
              38.9114433
            ],
            [
              -77.07374541,
              38.91131443
            ],
            [
              -77.07373534999999,
              38.91131338
            ],
            [
              -77.07373803,
              38.9112299
            ],
            [
              -77.07374809,
              38.91122938
            ],
            [
              -77.07375277999999,
              38.91109998
            ],
            [
              -77.07368439,
              38.91109841
            ],
            [
              -77.07368269999999,
              38.91110285
            ],
            [
              -77.07367565999999,
              38.91110285
            ],
            [
              -77.073675,
              38.91105511
            ],
            [
              -77.07354826,
              38.91105145
            ],
            [
              -77.07354692,
              38.91109998
            ],
            [
              -77.07353888,
              38.91109998
            ],
            [
              -77.07353888,
              38.91109528
            ],
            [
              -77.07346914,
              38.9110932
            ],
            [
              -77.07346377,
              38.91121999
            ],
            [
              -77.07347249,
              38.91122155
            ],
            [
              -77.07347115,
              38.91130556
            ],
            [
              -77.07345907,
              38.91130608
            ],
            [
              -77.07345439,
              38.91143496
            ],
            [
              -77.07352412,
              38.91143756
            ],
            [
              -77.07352345,
              38.91143235
            ],
            [
              -77.07353619,
              38.91143235
            ],
            [
              -77.0735335,
              38.91147983
            ],
            [
              -77.07366226,
              38.91148505
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "301",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "301"
        },
        original_id: "way/-7",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351759000001,
              38.91142891
            ],
            [
              -77.07352010000001,
              38.91142865
            ],
            [
              -77.07352141,
              38.91140361
            ],
            [
              -77.07346109000001,
              38.91140282
            ],
            [
              -77.07345972,
              38.911431
            ],
            [
              -77.07347648000001,
              38.91143152
            ],
            [
              -77.07347903,
              38.91143296
            ],
            [
              -77.07351658,
              38.911433609999996
            ],
            [
              -77.07351759000001,
              38.91142891
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "302",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "302"
        },
        original_id: "way/-8",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07346208,
              38.91137191
            ],
            [
              -77.07346109000001,
              38.91140282
            ],
            [
              -77.07347879000001,
              38.91140305
            ],
            [
              -77.07352141,
              38.91140361
            ],
            [
              -77.07352293000001,
              38.9113736
            ],
            [
              -77.07346208,
              38.91137191
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "303",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "303"
        },
        original_id: "way/-9",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352293000001,
              38.9113736
            ],
            [
              -77.07352496,
              38.91134217
            ],
            [
              -77.07346294,
              38.91134125
            ],
            [
              -77.07346208,
              38.91137191
            ],
            [
              -77.07352293000001,
              38.9113736
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "304",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "304"
        },
        original_id: "way/-10",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352496,
              38.91134217
            ],
            [
              -77.07352680000001,
              38.91131204
            ],
            [
              -77.07346444000001,
              38.91130982
            ],
            [
              -77.07346294,
              38.91134125
            ],
            [
              -77.07352496,
              38.91134217
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "305",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "305"
        },
        original_id: "way/-11",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353686,
              38.91131125
            ],
            [
              -77.07353887000001,
              38.911281509999995
            ],
            [
              -77.07347785,
              38.91127916
            ],
            [
              -77.07347618,
              38.911310209999996
            ],
            [
              -77.07353686,
              38.91131125
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "306",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "306"
        },
        original_id: "way/-12",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353887000001,
              38.911281509999995
            ],
            [
              -77.07354021,
              38.91125073
            ],
            [
              -77.07351105000001,
              38.91125047
            ],
            [
              -77.07347886000001,
              38.91124994
            ],
            [
              -77.07347785,
              38.91127916
            ],
            [
              -77.07353887000001,
              38.911281509999995
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "307",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "307"
        },
        original_id: "way/-13",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07354021,
              38.91125073
            ],
            [
              -77.07354189,
              38.91122151
            ],
            [
              -77.07347886000001,
              38.911218899999994
            ],
            [
              -77.07347886000001,
              38.91124994
            ],
            [
              -77.07354021,
              38.91125073
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "308",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "308"
        },
        original_id: "way/-14",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353169000001,
              38.91122109
            ],
            [
              -77.07353251,
              38.91119046
            ],
            [
              -77.07347116000001,
              38.91118838
            ],
            [
              -77.07347048,
              38.91121551
            ],
            [
              -77.07347886000001,
              38.911218899999994
            ],
            [
              -77.07353169000001,
              38.91122109
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "309",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "309"
        },
        original_id: "way/-15",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353251,
              38.91119046
            ],
            [
              -77.07353418000001,
              38.91115968
            ],
            [
              -77.07347283,
              38.911157849999995
            ],
            [
              -77.07347116000001,
              38.91118838
            ],
            [
              -77.07353251,
              38.91119046
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "309",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "309"
        },
        original_id: "way/-16",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353418000001,
              38.91115968
            ],
            [
              -77.07353552000001,
              38.91112889
            ],
            [
              -77.0734745,
              38.91112733
            ],
            [
              -77.07347283,
              38.911157849999995
            ],
            [
              -77.07353418000001,
              38.91115968
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "311",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "311"
        },
        original_id: "way/-17",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353552000001,
              38.91112889
            ],
            [
              -77.07353688,
              38.91110098
            ],
            [
              -77.07353688,
              38.91110098
            ],
            [
              -77.07353688,
              38.91110098
            ],
            [
              -77.07353686,
              38.911096279999995
            ],
            [
              -77.07353135000001,
              38.911096119999996
            ],
            [
              -77.07347564,
              38.91109445
            ],
            [
              -77.0734745,
              38.91112733
            ],
            [
              -77.07353552000001,
              38.91112889
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "312",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "312"
        },
        original_id: "way/-18",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07359124,
              38.91110437
            ],
            [
              -77.07359277,
              38.91105379
            ],
            [
              -77.07355518,
              38.91105271
            ],
            [
              -77.07355268,
              38.911103069999996
            ],
            [
              -77.07359124,
              38.91110437
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "313",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "313"
        },
        original_id: "way/-19",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0736308,
              38.91110541
            ],
            [
              -77.07363267000001,
              38.91105495
            ],
            [
              -77.07359277,
              38.91105379
            ],
            [
              -77.07359124,
              38.91110437
            ],
            [
              -77.0736308,
              38.91110541
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "314",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "314"
        },
        original_id: "way/-20",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07367349,
              38.91110776
            ],
            [
              -77.07367366,
              38.911103849999996
            ],
            [
              -77.073673,
              38.91105611
            ],
            [
              -77.07363267000001,
              38.91105495
            ],
            [
              -77.07363074,
              38.91110541
            ],
            [
              -77.07365354000001,
              38.91110724
            ],
            [
              -77.07366880000001,
              38.911107369999996
            ],
            [
              -77.07367349,
              38.91110776
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "318",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "318"
        },
        original_id: "way/-21",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374641,
              38.9112249
            ],
            [
              -77.07374742,
              38.91119542
            ],
            [
              -77.07368305,
              38.911193069999996
            ],
            [
              -77.07368137,
              38.91122255
            ],
            [
              -77.07374641,
              38.9112249
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "317",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "317"
        },
        original_id: "way/-22",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374739000001,
              38.91119463
            ],
            [
              -77.07374845000001,
              38.911165159999996
            ],
            [
              -77.07368412000001,
              38.91116281
            ],
            [
              -77.07368305,
              38.911193069999996
            ],
            [
              -77.07374739000001,
              38.91119463
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "316",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "316"
        },
        original_id: "way/-23",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374845000001,
              38.911165159999996
            ],
            [
              -77.07374955,
              38.9111349
            ],
            [
              -77.07368512000001,
              38.91113281
            ],
            [
              -77.07368412000001,
              38.91116281
            ],
            [
              -77.07374845000001,
              38.911165159999996
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "315",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "315"
        },
        original_id: "way/-24",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374955,
              38.9111349
            ],
            [
              -77.07375078,
              38.91110098
            ],
            [
              -77.07368799000001,
              38.911099539999995
            ],
            [
              -77.07368512000001,
              38.91113281
            ],
            [
              -77.07374955,
              38.9111349
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "320",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "320"
        },
        original_id: "way/-26",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373535,
              38.911254899999996
            ],
            [
              -77.07373429,
              38.911285209999996
            ],
            [
              -77.07366829,
              38.91128386
            ],
            [
              -77.07366968000001,
              38.91125255
            ],
            [
              -77.07373535,
              38.911254899999996
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "312",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "312"
        },
        original_id: "way/-27",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373335,
              38.91131438
            ],
            [
              -77.07373429,
              38.911285209999996
            ],
            [
              -77.07366829,
              38.91128386
            ],
            [
              -77.07366666,
              38.91131334
            ],
            [
              -77.07373335,
              38.91131438
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "322",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "322"
        },
        original_id: "way/-28",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374341,
              38.911315429999995
            ],
            [
              -77.07367607,
              38.91131349
            ],
            [
              -77.07367567,
              38.911344379999996
            ],
            [
              -77.07374248,
              38.91134518
            ],
            [
              -77.07374341,
              38.911315429999995
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "323",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "323"
        },
        original_id: "way/-29",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374152,
              38.911375979999995
            ],
            [
              -77.07374244,
              38.91134649
            ],
            [
              -77.07367567,
              38.911344379999996
            ],
            [
              -77.07367500000001,
              38.91137543
            ],
            [
              -77.07374152,
              38.911375979999995
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "324",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "324"
        },
        original_id: "way/-32",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374152,
              38.911375979999995
            ],
            [
              -77.07374051000001,
              38.91140804
            ],
            [
              -77.07367198,
              38.911405949999995
            ],
            [
              -77.07367500000001,
              38.91137543
            ],
            [
              -77.07374152,
              38.911375979999995
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "325",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "325"
        },
        original_id: "way/-33",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374051000001,
              38.91140804
            ],
            [
              -77.07373938,
              38.9114443
            ],
            [
              -77.07366965,
              38.91144274
            ],
            [
              -77.07367198,
              38.911405949999995
            ],
            [
              -77.07374051000001,
              38.91140804
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "326",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "326"
        },
        original_id: "way/-34",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365689000001,
              38.91143178
            ],
            [
              -77.07365455,
              38.91148578
            ],
            [
              -77.07361319,
              38.91148414
            ],
            [
              -77.07361699,
              38.91143152
            ],
            [
              -77.07365689000001,
              38.91143178
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "327",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "327"
        },
        original_id: "way/-35",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07361699,
              38.91143152
            ],
            [
              -77.07357609,
              38.91142969
            ],
            [
              -77.07357294,
              38.91148251
            ],
            [
              -77.07361225000001,
              38.911484099999996
            ],
            [
              -77.07361699,
              38.91143152
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "328",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "328"
        },
        original_id: "way/-36",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07357609,
              38.91142969
            ],
            [
              -77.07353384000001,
              38.91142813
            ],
            [
              -77.0735315,
              38.911480829999995
            ],
            [
              -77.07357307000001,
              38.911482389999996
            ],
            [
              -77.07357609,
              38.91142969
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "319",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "319"
        },
        original_id: "way/-37",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373530000001,
              38.91125358
            ],
            [
              -77.07373648000001,
              38.91122454
            ],
            [
              -77.07367064,
              38.91122386
            ],
            [
              -77.07366968000001,
              38.91125255
            ],
            [
              -77.07373530000001,
              38.91125358
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          diaper: "no",
          fee: "no",
          wheelchair: "yes"
        },
        original_id: "way/-38",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365086,
              38.91140778
            ],
            [
              -77.07365253,
              38.91137386
            ],
            [
              -77.07359386,
              38.91137256
            ],
            [
              -77.07359587,
              38.91132821
            ],
            [
              -77.07354893,
              38.91132691
            ],
            [
              -77.07354491000001,
              38.91140048
            ],
            [
              -77.07356838,
              38.91140048
            ],
            [
              -77.07356838,
              38.911406209999996
            ],
            [
              -77.07365086,
              38.91140778
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          wheelchair: "yes",
          fee: "no"
        },
        original_id: "way/-39",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360157000001,
              38.91120507
            ],
            [
              -77.07360291,
              38.91116281
            ],
            [
              -77.07366158,
              38.91116411
            ],
            [
              -77.07366393000001,
              38.911130459999995
            ],
            [
              -77.07358782,
              38.91112759
            ],
            [
              -77.07358715000001,
              38.91113281
            ],
            [
              -77.07355865000001,
              38.91113255
            ],
            [
              -77.07355798,
              38.9111555
            ],
            [
              -77.07355564000001,
              38.91120481
            ],
            [
              -77.07358615,
              38.91120429
            ],
            [
              -77.07360157000001,
              38.91120507
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-40",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365186,
              38.91136813
            ],
            [
              -77.07365320000001,
              38.91134517
            ],
            [
              -77.07360995,
              38.911344119999995
            ],
            [
              -77.07360794,
              38.9113663
            ],
            [
              -77.07365186,
              38.91136813
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-42",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364885,
              38.911191249999995
            ],
            [
              -77.07364952,
              38.91117977
            ],
            [
              -77.07366293,
              38.91117977
            ],
            [
              -77.07366259,
              38.911170639999995
            ],
            [
              -77.07360273,
              38.91116847
            ],
            [
              -77.07360204,
              38.91119012
            ],
            [
              -77.07364885,
              38.911191249999995
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "kitchen",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          level: "3",
          shop: "kitchen"
        },
        original_id: "way/-44",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360291,
              38.911281509999995
            ],
            [
              -77.07360291,
              38.91126351
            ],
            [
              -77.0735942,
              38.91126338
            ],
            [
              -77.07359487000001,
              38.911253859999995
            ],
            [
              -77.07356503,
              38.911253339999995
            ],
            [
              -77.07356234000001,
              38.91128073
            ],
            [
              -77.07360291,
              38.911281509999995
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        level_id: 3,
        show: "true",
        area: 0,
        original_tags: {
          indoor: "level",
          level: "3"
        },
        original_id: "way/-45",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07366026000001,
              38.91148605
            ],
            [
              -77.07366026000001,
              38.91143804
            ],
            [
              -77.07366965,
              38.91143804
            ],
            [
              -77.07366965,
              38.91144274
            ],
            [
              -77.07373938,
              38.9114443
            ],
            [
              -77.07374341,
              38.911315429999995
            ],
            [
              -77.07373335,
              38.91131438
            ],
            [
              -77.07373603,
              38.9112309
            ],
            [
              -77.07374609,
              38.91123038
            ],
            [
              -77.07375078,
              38.91110098
            ],
            [
              -77.07368239,
              38.91109941
            ],
            [
              -77.0736807,
              38.911103849999996
            ],
            [
              -77.07367366,
              38.911103849999996
            ],
            [
              -77.073673,
              38.91105611
            ],
            [
              -77.07354626,
              38.91105245
            ],
            [
              -77.07354492,
              38.91110098
            ],
            [
              -77.07353688,
              38.91110098
            ],
            [
              -77.07353688,
              38.911096279999995
            ],
            [
              -77.07346714,
              38.9110942
            ],
            [
              -77.07346177000001,
              38.91122099
            ],
            [
              -77.07347049,
              38.91122255
            ],
            [
              -77.07346915000001,
              38.91130656
            ],
            [
              -77.07345707,
              38.91130708
            ],
            [
              -77.07345239,
              38.91143596
            ],
            [
              -77.07352212,
              38.91143856
            ],
            [
              -77.07352145,
              38.911433349999996
            ],
            [
              -77.07353419,
              38.911433349999996
            ],
            [
              -77.0735315,
              38.911480829999995
            ],
            [
              -77.07366026000001,
              38.91148605
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "401",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "401"
        },
        original_id: "way/-7",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351559,
              38.91142991
            ],
            [
              -77.0735181,
              38.91142965
            ],
            [
              -77.07351940999999,
              38.911404610000005
            ],
            [
              -77.07345909,
              38.911403820000004
            ],
            [
              -77.07345772,
              38.911432000000005
            ],
            [
              -77.07347448,
              38.911432520000005
            ],
            [
              -77.07347702999999,
              38.911433960000004
            ],
            [
              -77.07351458,
              38.91143461
            ],
            [
              -77.07351559,
              38.91142991
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "402",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "402"
        },
        original_id: "way/-8",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07346007999999,
              38.911372910000004
            ],
            [
              -77.07345909,
              38.911403820000004
            ],
            [
              -77.07347679,
              38.91140405
            ],
            [
              -77.07351940999999,
              38.911404610000005
            ],
            [
              -77.07352093,
              38.9113746
            ],
            [
              -77.07346007999999,
              38.911372910000004
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "403",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "403"
        },
        original_id: "way/-9",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352093,
              38.9113746
            ],
            [
              -77.07352295999999,
              38.91134317
            ],
            [
              -77.07346093999999,
              38.911342250000004
            ],
            [
              -77.07346007999999,
              38.911372910000004
            ],
            [
              -77.07352093,
              38.9113746
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "404",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "404"
        },
        original_id: "way/-10",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352295999999,
              38.91134317
            ],
            [
              -77.0735248,
              38.91131304
            ],
            [
              -77.07346244,
              38.911310820000004
            ],
            [
              -77.07346093999999,
              38.911342250000004
            ],
            [
              -77.07352295999999,
              38.91134317
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "405",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "405"
        },
        original_id: "way/-11",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353486,
              38.91131225
            ],
            [
              -77.07353687,
              38.91128251
            ],
            [
              -77.07347585,
              38.911280160000004
            ],
            [
              -77.07347417999999,
              38.91131121
            ],
            [
              -77.07353486,
              38.91131225
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "406",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "406"
        },
        original_id: "way/-12",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353687,
              38.91128251
            ],
            [
              -77.07353821,
              38.911251730000004
            ],
            [
              -77.07350905,
              38.91125147
            ],
            [
              -77.07347686,
              38.91125094
            ],
            [
              -77.07347585,
              38.911280160000004
            ],
            [
              -77.07353687,
              38.91128251
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "407",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "407"
        },
        original_id: "way/-13",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353821,
              38.911251730000004
            ],
            [
              -77.07353988999999,
              38.91122251
            ],
            [
              -77.07347686,
              38.9112199
            ],
            [
              -77.07347686,
              38.91125094
            ],
            [
              -77.07353821,
              38.911251730000004
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "408",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "408"
        },
        original_id: "way/-14",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352969,
              38.91122209
            ],
            [
              -77.07353051,
              38.911191460000005
            ],
            [
              -77.07346916,
              38.91118938
            ],
            [
              -77.07346847999999,
              38.91121651
            ],
            [
              -77.07347686,
              38.9112199
            ],
            [
              -77.07352969,
              38.91122209
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "409",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "409"
        },
        original_id: "way/-15",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353051,
              38.911191460000005
            ],
            [
              -77.07353218,
              38.91116068
            ],
            [
              -77.07347082999999,
              38.91115885
            ],
            [
              -77.07346916,
              38.91118938
            ],
            [
              -77.07353051,
              38.911191460000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "409",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "409"
        },
        original_id: "way/-16",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353218,
              38.91116068
            ],
            [
              -77.07353352,
              38.911129890000005
            ],
            [
              -77.0734725,
              38.911128330000004
            ],
            [
              -77.07347082999999,
              38.91115885
            ],
            [
              -77.07353218,
              38.91116068
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "411",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "411"
        },
        original_id: "way/-17",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353352,
              38.911129890000005
            ],
            [
              -77.07353488,
              38.911101980000005
            ],
            [
              -77.07353488,
              38.911101980000005
            ],
            [
              -77.07353488,
              38.911101980000005
            ],
            [
              -77.07353486,
              38.91109728
            ],
            [
              -77.07352935,
              38.91109712
            ],
            [
              -77.07347363999999,
              38.911095450000005
            ],
            [
              -77.0734725,
              38.911128330000004
            ],
            [
              -77.07353352,
              38.911129890000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "412",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "412"
        },
        original_id: "way/-18",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07358923999999,
              38.91110537
            ],
            [
              -77.07359077,
              38.91105479
            ],
            [
              -77.07355317999999,
              38.911053710000004
            ],
            [
              -77.07355068,
              38.91110407
            ],
            [
              -77.07358923999999,
              38.91110537
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "413",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "413"
        },
        original_id: "way/-19",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0736288,
              38.91110641
            ],
            [
              -77.07363067,
              38.911055950000005
            ],
            [
              -77.07359077,
              38.91105479
            ],
            [
              -77.07358923999999,
              38.91110537
            ],
            [
              -77.0736288,
              38.91110641
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "414",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "414"
        },
        original_id: "way/-20",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07367149,
              38.911108760000005
            ],
            [
              -77.07367165999999,
              38.91110485
            ],
            [
              -77.07367099999999,
              38.91105711
            ],
            [
              -77.07363067,
              38.911055950000005
            ],
            [
              -77.07362873999999,
              38.91110641
            ],
            [
              -77.07365154,
              38.911108240000004
            ],
            [
              -77.0736668,
              38.91110837
            ],
            [
              -77.07367149,
              38.911108760000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "418",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "418"
        },
        original_id: "way/-21",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374440999999,
              38.911225900000005
            ],
            [
              -77.07374542,
              38.91119642
            ],
            [
              -77.07368104999999,
              38.91119407
            ],
            [
              -77.07367937,
              38.91122355
            ],
            [
              -77.07374440999999,
              38.911225900000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "417",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "417"
        },
        original_id: "way/-22",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374539,
              38.91119563
            ],
            [
              -77.07374645,
              38.91116616
            ],
            [
              -77.07368212,
              38.911163810000005
            ],
            [
              -77.07368104999999,
              38.91119407
            ],
            [
              -77.07374539,
              38.91119563
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "416",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "416"
        },
        original_id: "way/-23",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374645,
              38.91116616
            ],
            [
              -77.07374755,
              38.911135900000005
            ],
            [
              -77.07368312,
              38.91113381
            ],
            [
              -77.07368212,
              38.911163810000005
            ],
            [
              -77.07374645,
              38.91116616
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "415",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "415"
        },
        original_id: "way/-24",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374755,
              38.911135900000005
            ],
            [
              -77.07374877999999,
              38.911101980000005
            ],
            [
              -77.07368599,
              38.91110054
            ],
            [
              -77.07368312,
              38.91113381
            ],
            [
              -77.07374755,
              38.911135900000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "420",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "420"
        },
        original_id: "way/-26",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373335,
              38.9112559
            ],
            [
              -77.07373229,
              38.91128621
            ],
            [
              -77.07366628999999,
              38.91128486
            ],
            [
              -77.07366768,
              38.911253550000005
            ],
            [
              -77.07373335,
              38.9112559
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "412",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "412"
        },
        original_id: "way/-27",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373134999999,
              38.911315380000005
            ],
            [
              -77.07373229,
              38.91128621
            ],
            [
              -77.07366628999999,
              38.91128486
            ],
            [
              -77.07366465999999,
              38.911314340000004
            ],
            [
              -77.07373134999999,
              38.911315380000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "422",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "422"
        },
        original_id: "way/-28",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374141,
              38.91131643
            ],
            [
              -77.07367407,
              38.91131449
            ],
            [
              -77.07367366999999,
              38.91134538
            ],
            [
              -77.07374048,
              38.91134618
            ],
            [
              -77.07374141,
              38.91131643
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "423",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "423"
        },
        original_id: "way/-29",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373951999999,
              38.91137698
            ],
            [
              -77.07374044,
              38.911347490000004
            ],
            [
              -77.07367366999999,
              38.91134538
            ],
            [
              -77.073673,
              38.911376430000004
            ],
            [
              -77.07373951999999,
              38.91137698
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "424",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "424"
        },
        original_id: "way/-32",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373951999999,
              38.91137698
            ],
            [
              -77.07373851,
              38.91140904
            ],
            [
              -77.07366997999999,
              38.91140695
            ],
            [
              -77.073673,
              38.911376430000004
            ],
            [
              -77.07373951999999,
              38.91137698
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "425",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "425"
        },
        original_id: "way/-33",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373851,
              38.91140904
            ],
            [
              -77.07373738,
              38.911445300000004
            ],
            [
              -77.07366764999999,
              38.91144374
            ],
            [
              -77.07366997999999,
              38.91140695
            ],
            [
              -77.07373851,
              38.91140904
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "426",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "426"
        },
        original_id: "way/-34",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365489,
              38.911432780000005
            ],
            [
              -77.07365254999999,
              38.911486780000004
            ],
            [
              -77.07361119,
              38.91148514
            ],
            [
              -77.07361499,
              38.911432520000005
            ],
            [
              -77.07365489,
              38.911432780000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "427",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "427"
        },
        original_id: "way/-35",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07361499,
              38.911432520000005
            ],
            [
              -77.07357409,
              38.91143069
            ],
            [
              -77.07357094,
              38.911483510000004
            ],
            [
              -77.07361025,
              38.9114851
            ],
            [
              -77.07361499,
              38.911432520000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "428",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "428"
        },
        original_id: "way/-36",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07357409,
              38.91143069
            ],
            [
              -77.07353184,
              38.91142913
            ],
            [
              -77.07352949999999,
              38.91148183
            ],
            [
              -77.07357107,
              38.91148339
            ],
            [
              -77.07357409,
              38.91143069
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "419",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "419"
        },
        original_id: "way/-37",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0737333,
              38.911254580000005
            ],
            [
              -77.07373448,
              38.911225540000004
            ],
            [
              -77.07366864,
              38.911224860000004
            ],
            [
              -77.07366768,
              38.911253550000005
            ],
            [
              -77.0737333,
              38.911254580000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          diaper: "no",
          fee: "no",
          wheelchair: "yes"
        },
        original_id: "way/-38",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364885999999,
              38.91140878
            ],
            [
              -77.07365053,
              38.91137486
            ],
            [
              -77.07359186,
              38.91137356
            ],
            [
              -77.07359387,
              38.911329210000005
            ],
            [
              -77.07354692999999,
              38.911327910000004
            ],
            [
              -77.07354291,
              38.91140148
            ],
            [
              -77.07356637999999,
              38.91140148
            ],
            [
              -77.07356637999999,
              38.91140721
            ],
            [
              -77.07364885999999,
              38.91140878
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          wheelchair: "yes",
          fee: "no"
        },
        original_id: "way/-39",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07359957,
              38.911206070000006
            ],
            [
              -77.07360091,
              38.911163810000005
            ],
            [
              -77.07365958,
              38.911165110000006
            ],
            [
              -77.07366193,
              38.91113146
            ],
            [
              -77.07358581999999,
              38.911128590000004
            ],
            [
              -77.07358515,
              38.91113381
            ],
            [
              -77.07355665,
              38.91113355
            ],
            [
              -77.07355598,
              38.911156500000004
            ],
            [
              -77.07355364,
              38.911205810000006
            ],
            [
              -77.07358414999999,
              38.911205290000005
            ],
            [
              -77.07359957,
              38.911206070000006
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-40",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364985999999,
              38.911369130000004
            ],
            [
              -77.0736512,
              38.91134617
            ],
            [
              -77.07360795,
              38.91134512
            ],
            [
              -77.07360594,
              38.9113673
            ],
            [
              -77.07364985999999,
              38.911369130000004
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-42",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364684999999,
              38.91119225
            ],
            [
              -77.07364752,
              38.91118077
            ],
            [
              -77.07366092999999,
              38.91118077
            ],
            [
              -77.07366058999999,
              38.91117164
            ],
            [
              -77.07360073,
              38.911169470000004
            ],
            [
              -77.07360003999999,
              38.911191120000005
            ],
            [
              -77.07364684999999,
              38.91119225
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "kitchen",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          level: "4",
          shop: "kitchen"
        },
        original_id: "way/-44",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360091,
              38.91128251
            ],
            [
              -77.07360091,
              38.91126451
            ],
            [
              -77.0735922,
              38.911264380000006
            ],
            [
              -77.07359287,
              38.91125486
            ],
            [
              -77.07356302999999,
              38.91125434
            ],
            [
              -77.07356034,
              38.911281730000006
            ],
            [
              -77.07360091,
              38.91128251
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        level_id: 4,
        show: "true",
        area: 0,
        original_tags: {
          indoor: "level",
          level: "4"
        },
        original_id: "way/-45",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365826,
              38.911487050000005
            ],
            [
              -77.07365826,
              38.911439040000005
            ],
            [
              -77.07366764999999,
              38.911439040000005
            ],
            [
              -77.07366764999999,
              38.91144374
            ],
            [
              -77.07373738,
              38.911445300000004
            ],
            [
              -77.07374141,
              38.91131643
            ],
            [
              -77.07373134999999,
              38.911315380000005
            ],
            [
              -77.07373403,
              38.911231900000004
            ],
            [
              -77.07374408999999,
              38.911231380000004
            ],
            [
              -77.07374877999999,
              38.911101980000005
            ],
            [
              -77.07368038999999,
              38.91110041
            ],
            [
              -77.07367869999999,
              38.91110485
            ],
            [
              -77.07367165999999,
              38.91110485
            ],
            [
              -77.07367099999999,
              38.91105711
            ],
            [
              -77.07354425999999,
              38.911053450000004
            ],
            [
              -77.07354292,
              38.911101980000005
            ],
            [
              -77.07353488,
              38.911101980000005
            ],
            [
              -77.07353488,
              38.91109728
            ],
            [
              -77.07346514,
              38.911095200000005
            ],
            [
              -77.07345977,
              38.91122199
            ],
            [
              -77.07346849,
              38.91122355
            ],
            [
              -77.07346715,
              38.911307560000004
            ],
            [
              -77.07345507,
              38.911308080000005
            ],
            [
              -77.07345038999999,
              38.91143696
            ],
            [
              -77.07352012,
              38.911439560000005
            ],
            [
              -77.07351944999999,
              38.91143435
            ],
            [
              -77.07353219,
              38.91143435
            ],
            [
              -77.07352949999999,
              38.91148183
            ],
            [
              -77.07365826,
              38.911487050000005
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "601",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "601"
        },
        original_id: "way/-7",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351159000001,
              38.91143191
            ],
            [
              -77.07351410000001,
              38.91143165
            ],
            [
              -77.07351541,
              38.91140661
            ],
            [
              -77.07345509000001,
              38.91140582
            ],
            [
              -77.07345372,
              38.911434
            ],
            [
              -77.07347048000001,
              38.91143452
            ],
            [
              -77.07347303,
              38.91143596
            ],
            [
              -77.07351058,
              38.911436609999996
            ],
            [
              -77.07351159000001,
              38.91143191
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "602",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "602"
        },
        original_id: "way/-8",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07345608,
              38.91137491
            ],
            [
              -77.07345509000001,
              38.91140582
            ],
            [
              -77.07347279000001,
              38.91140605
            ],
            [
              -77.07351541,
              38.91140661
            ],
            [
              -77.07351693000001,
              38.9113766
            ],
            [
              -77.07345608,
              38.91137491
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "603",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "603"
        },
        original_id: "way/-9",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351693000001,
              38.9113766
            ],
            [
              -77.07351896,
              38.91134517
            ],
            [
              -77.07345694,
              38.91134425
            ],
            [
              -77.07345608,
              38.91137491
            ],
            [
              -77.07351693000001,
              38.9113766
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "604",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "604"
        },
        original_id: "way/-10",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351896,
              38.91134517
            ],
            [
              -77.07352080000001,
              38.91131504
            ],
            [
              -77.07345844000001,
              38.91131282
            ],
            [
              -77.07345694,
              38.91134425
            ],
            [
              -77.07351896,
              38.91134517
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "605",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "605"
        },
        original_id: "way/-11",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353086,
              38.91131425
            ],
            [
              -77.07353287000001,
              38.911284509999994
            ],
            [
              -77.07347185,
              38.91128216
            ],
            [
              -77.07347018,
              38.911313209999996
            ],
            [
              -77.07353086,
              38.91131425
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "606",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "606"
        },
        original_id: "way/-12",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353287000001,
              38.911284509999994
            ],
            [
              -77.07353421,
              38.91125373
            ],
            [
              -77.07350505000001,
              38.91125347
            ],
            [
              -77.07347286000001,
              38.91125294
            ],
            [
              -77.07347185,
              38.91128216
            ],
            [
              -77.07353287000001,
              38.911284509999994
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "607",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "607"
        },
        original_id: "way/-13",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353421,
              38.91125373
            ],
            [
              -77.07353589,
              38.91122451
            ],
            [
              -77.07347286000001,
              38.911221899999994
            ],
            [
              -77.07347286000001,
              38.91125294
            ],
            [
              -77.07353421,
              38.91125373
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "608",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "608"
        },
        original_id: "way/-14",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352569000001,
              38.91122409
            ],
            [
              -77.07352651000001,
              38.91119346
            ],
            [
              -77.07346516000001,
              38.91119138
            ],
            [
              -77.07346448,
              38.91121851
            ],
            [
              -77.07347286000001,
              38.911221899999994
            ],
            [
              -77.07352569000001,
              38.91122409
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "609",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "609"
        },
        original_id: "way/-15",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352651000001,
              38.91119346
            ],
            [
              -77.07352818000001,
              38.91116268
            ],
            [
              -77.07346683,
              38.911160849999995
            ],
            [
              -77.07346516000001,
              38.91119138
            ],
            [
              -77.07352651000001,
              38.91119346
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "609",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "609"
        },
        original_id: "way/-16",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352818000001,
              38.91116268
            ],
            [
              -77.07352952000001,
              38.91113189
            ],
            [
              -77.0734685,
              38.91113033
            ],
            [
              -77.07346683,
              38.911160849999995
            ],
            [
              -77.07352818000001,
              38.91116268
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "611",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "611"
        },
        original_id: "way/-17",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07352952000001,
              38.91113189
            ],
            [
              -77.07353088,
              38.91110398
            ],
            [
              -77.07353088,
              38.91110398
            ],
            [
              -77.07353088,
              38.91110398
            ],
            [
              -77.07353086,
              38.911099279999995
            ],
            [
              -77.07352535000001,
              38.911099119999996
            ],
            [
              -77.07346964,
              38.91109745
            ],
            [
              -77.0734685,
              38.91113033
            ],
            [
              -77.07352952000001,
              38.91113189
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "612",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "612"
        },
        original_id: "way/-18",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07358524,
              38.911107369999996
            ],
            [
              -77.07358677,
              38.911056789999996
            ],
            [
              -77.07354918,
              38.91105571
            ],
            [
              -77.07354668,
              38.911106069999995
            ],
            [
              -77.07358524,
              38.911107369999996
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "613",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "613"
        },
        original_id: "way/-19",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0736248,
              38.91110841
            ],
            [
              -77.07362667000001,
              38.91105795
            ],
            [
              -77.07358677,
              38.911056789999996
            ],
            [
              -77.07358524,
              38.911107369999996
            ],
            [
              -77.0736248,
              38.91110841
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "614",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "614"
        },
        original_id: "way/-20",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07366749,
              38.91111076
            ],
            [
              -77.07366766,
              38.911106849999996
            ],
            [
              -77.073667,
              38.91105911
            ],
            [
              -77.07362667000001,
              38.91105795
            ],
            [
              -77.07362474,
              38.91110841
            ],
            [
              -77.07364754000001,
              38.91111024
            ],
            [
              -77.07366280000001,
              38.911110369999996
            ],
            [
              -77.07366749,
              38.91111076
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "618",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "618"
        },
        original_id: "way/-21",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374041,
              38.9112279
            ],
            [
              -77.07374142,
              38.91119842
            ],
            [
              -77.07367705,
              38.911196069999995
            ],
            [
              -77.07367537,
              38.91122555
            ],
            [
              -77.07374041,
              38.9112279
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "617",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "617"
        },
        original_id: "way/-22",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374139000001,
              38.91119763
            ],
            [
              -77.07374245000001,
              38.911168159999995
            ],
            [
              -77.07367812000001,
              38.91116581
            ],
            [
              -77.07367705,
              38.911196069999995
            ],
            [
              -77.07374139000001,
              38.91119763
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "616",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "616"
        },
        original_id: "way/-23",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374245000001,
              38.911168159999995
            ],
            [
              -77.07374355,
              38.9111379
            ],
            [
              -77.07367912000001,
              38.91113581
            ],
            [
              -77.07367812000001,
              38.91116581
            ],
            [
              -77.07374245000001,
              38.911168159999995
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "615",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "615"
        },
        original_id: "way/-24",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07374355,
              38.9111379
            ],
            [
              -77.07374478,
              38.91110398
            ],
            [
              -77.07368199000001,
              38.911102539999995
            ],
            [
              -77.07367912000001,
              38.91113581
            ],
            [
              -77.07374355,
              38.9111379
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "620",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "620"
        },
        original_id: "way/-26",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07372935000001,
              38.911257899999995
            ],
            [
              -77.07372829,
              38.911288209999995
            ],
            [
              -77.07366229,
              38.91128686
            ],
            [
              -77.07366368000001,
              38.91125555
            ],
            [
              -77.07372935000001,
              38.911257899999995
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "612",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "612"
        },
        original_id: "way/-27",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07372735,
              38.91131738
            ],
            [
              -77.07372829,
              38.911288209999995
            ],
            [
              -77.07366229,
              38.91128686
            ],
            [
              -77.07366066,
              38.91131634
            ],
            [
              -77.07372735,
              38.91131738
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "622",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "622"
        },
        original_id: "way/-28",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373741,
              38.911318429999994
            ],
            [
              -77.07367007,
              38.91131649
            ],
            [
              -77.07366967,
              38.911347379999995
            ],
            [
              -77.07373648000001,
              38.91134818
            ],
            [
              -77.07373741,
              38.911318429999994
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "623",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "623"
        },
        original_id: "way/-29",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373552,
              38.911378979999995
            ],
            [
              -77.07373644,
              38.91134949
            ],
            [
              -77.07366967,
              38.911347379999995
            ],
            [
              -77.07366900000001,
              38.91137843
            ],
            [
              -77.07373552,
              38.911378979999995
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "624",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "624"
        },
        original_id: "way/-32",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373552,
              38.911378979999995
            ],
            [
              -77.07373451000001,
              38.91141104
            ],
            [
              -77.07366598,
              38.911408949999995
            ],
            [
              -77.07366900000001,
              38.91137843
            ],
            [
              -77.07373552,
              38.911378979999995
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "625",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "625"
        },
        original_id: "way/-33",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373451000001,
              38.91141104
            ],
            [
              -77.07373338000001,
              38.9114473
            ],
            [
              -77.07366365,
              38.91144574
            ],
            [
              -77.07366598,
              38.911408949999995
            ],
            [
              -77.07373451000001,
              38.91141104
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "626",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "626"
        },
        original_id: "way/-34",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365089000001,
              38.91143478
            ],
            [
              -77.07364855,
              38.91148878
            ],
            [
              -77.07360719,
              38.91148714
            ],
            [
              -77.07361099,
              38.91143452
            ],
            [
              -77.07365089000001,
              38.91143478
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "627",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "627"
        },
        original_id: "way/-35",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07361099,
              38.91143452
            ],
            [
              -77.07357009,
              38.91143269
            ],
            [
              -77.07356694,
              38.91148551
            ],
            [
              -77.07360625000001,
              38.911487099999995
            ],
            [
              -77.07361099,
              38.91143452
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "628",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "628"
        },
        original_id: "way/-36",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07357009,
              38.91143269
            ],
            [
              -77.07352784000001,
              38.91143113
            ],
            [
              -77.0735255,
              38.911483829999995
            ],
            [
              -77.07356707000001,
              38.911485389999996
            ],
            [
              -77.07357009,
              38.91143269
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: "619",
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "bedroom",
          access: "private",
          name: "619"
        },
        original_id: "way/-37",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07372930000001,
              38.91125658
            ],
            [
              -77.07373048000001,
              38.91122754
            ],
            [
              -77.07366464,
              38.91122686
            ],
            [
              -77.07366368000001,
              38.91125555
            ],
            [
              -77.07372930000001,
              38.91125658
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          diaper: "no",
          fee: "no",
          wheelchair: "yes"
        },
        original_id: "way/-38",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364486,
              38.91141078
            ],
            [
              -77.07364653,
              38.91137686
            ],
            [
              -77.07358786,
              38.911375559999996
            ],
            [
              -77.07358987,
              38.91133121
            ],
            [
              -77.07354293,
              38.91132991
            ],
            [
              -77.07353891000001,
              38.91140348
            ],
            [
              -77.07356238,
              38.91140348
            ],
            [
              -77.07356238,
              38.911409209999995
            ],
            [
              -77.07364486,
              38.91141078
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "bathroom",
        restriction: "customers",
        accessibility: "yes",
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          amenity: "toilets",
          access: "customers",
          "toilets:disposal": "flush",
          "toilets:position": "seated",
          wheelchair: "yes",
          fee: "no"
        },
        original_id: "way/-39",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07359557000001,
              38.91120807
            ],
            [
              -77.07359691,
              38.91116581
            ],
            [
              -77.07365558000001,
              38.91116711
            ],
            [
              -77.07365793000001,
              38.911133459999995
            ],
            [
              -77.07358182,
              38.91113059
            ],
            [
              -77.07358115000001,
              38.91113581
            ],
            [
              -77.07355265000001,
              38.91113555
            ],
            [
              -77.07355198,
              38.9111585
            ],
            [
              -77.07354964000001,
              38.91120781
            ],
            [
              -77.07358015,
              38.91120729
            ],
            [
              -77.07359557000001,
              38.91120807
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-40",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364586,
              38.91137113
            ],
            [
              -77.07364720000001,
              38.91134817
            ],
            [
              -77.07360395,
              38.911347119999995
            ],
            [
              -77.07360194,
              38.9113693
            ],
            [
              -77.07364586,
              38.91137113
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "room",
        restriction: "private",
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          indoor: "room",
          room: "stairs",
          access: "private"
        },
        original_id: "way/-42",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364285,
              38.911194249999994
            ],
            [
              -77.07364352,
              38.911182769999996
            ],
            [
              -77.07365693,
              38.911182769999996
            ],
            [
              -77.07365659,
              38.911173639999994
            ],
            [
              -77.07359673,
              38.91117147
            ],
            [
              -77.07359604,
              38.91119312
            ],
            [
              -77.07364285,
              38.911194249999994
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "kitchen",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          level: "6",
          shop: "kitchen"
        },
        original_id: "way/-44",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07359691,
              38.911284509999994
            ],
            [
              -77.07359691,
              38.91126651
            ],
            [
              -77.0735882,
              38.91126638
            ],
            [
              -77.07358887000001,
              38.911256859999995
            ],
            [
              -77.07355903,
              38.911256339999994
            ],
            [
              -77.07355634000001,
              38.91128373
            ],
            [
              -77.07359691,
              38.911284509999994
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        name: null,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        level_id: 6,
        show: "true",
        area: 0,
        original_tags: {
          indoor: "level",
          level: "6"
        },
        original_id: "way/-45",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365426000001,
              38.91148905
            ],
            [
              -77.07365426000001,
              38.91144104
            ],
            [
              -77.07366365,
              38.91144104
            ],
            [
              -77.07366365,
              38.91144574
            ],
            [
              -77.07373338000001,
              38.9114473
            ],
            [
              -77.07373741,
              38.911318429999994
            ],
            [
              -77.07372735,
              38.91131738
            ],
            [
              -77.07373003000001,
              38.9112339
            ],
            [
              -77.07374009,
              38.91123338
            ],
            [
              -77.07374478,
              38.91110398
            ],
            [
              -77.07367639,
              38.91110241
            ],
            [
              -77.0736747,
              38.911106849999996
            ],
            [
              -77.07366766,
              38.911106849999996
            ],
            [
              -77.073667,
              38.91105911
            ],
            [
              -77.07354026,
              38.91105545
            ],
            [
              -77.07353892,
              38.91110398
            ],
            [
              -77.07353088,
              38.91110398
            ],
            [
              -77.07353088,
              38.911099279999995
            ],
            [
              -77.07346114,
              38.9110972
            ],
            [
              -77.07345577000001,
              38.911223989999996
            ],
            [
              -77.07346449,
              38.91122555
            ],
            [
              -77.07346315000001,
              38.91130956
            ],
            [
              -77.07345107,
              38.91131008
            ],
            [
              -77.07344639,
              38.91143896
            ],
            [
              -77.07351612000001,
              38.91144156
            ],
            [
              -77.07351545,
              38.911436349999995
            ],
            [
              -77.07352819,
              38.911436349999995
            ],
            [
              -77.0735255,
              38.911483829999995
            ],
            [
              -77.07365426000001,
              38.91148905
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        indoor: "level",
        level: "0",
        name: "Mezzaine",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368173,
              38.91144109
            ],
            [
              -77.07369179,
              38.91121673
            ],
            [
              -77.07366899,
              38.91121673
            ],
            [
              -77.07366832,
              38.9112209
            ],
            [
              -77.07366027,
              38.91122038
            ],
            [
              -77.07366027,
              38.91119325
            ],
            [
              -77.07361601,
              38.91119116
            ],
            [
              -77.07362071,
              38.91107846
            ],
            [
              -77.07358181,
              38.91107689
            ],
            [
              -77.07358181,
              38.91105967
            ],
            [
              -77.07354728,
              38.91105785
            ],
            [
              -77.07354292,
              38.91119011
            ],
            [
              -77.07354963,
              38.91119064
            ],
            [
              -77.07353957,
              38.91143743
            ],
            [
              -77.07368173,
              38.91144109
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M27",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368173,
              38.91144109
            ],
            [
              -77.07365089,
              38.9114403
            ],
            [
              -77.07365122,
              38.91141917
            ],
            [
              -77.07368267,
              38.91142022
            ],
            [
              -77.07368173,
              38.91144109
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M26",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368365,
              38.91139833
            ],
            [
              -77.07365256,
              38.91139739
            ],
            [
              -77.07365172,
              38.91141722
            ],
            [
              -77.07368273,
              38.91141813
            ],
            [
              -77.07368365,
              38.91139833
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M23",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368471,
              38.9113747
            ],
            [
              -77.07365339,
              38.91137365
            ],
            [
              -77.07365256,
              38.91139595
            ],
            [
              -77.07368371,
              38.91139687
            ],
            [
              -77.07368471,
              38.9113747
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M21",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368566,
              38.91135343
            ],
            [
              -77.07366361,
              38.91135252
            ],
            [
              -77.0736631,
              38.91136426
            ],
            [
              -77.07365375,
              38.9113641
            ],
            [
              -77.07365345,
              38.91137206
            ],
            [
              -77.07368477,
              38.91137328
            ],
            [
              -77.07368566,
              38.91135343
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M17",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368576,
              38.9113511
            ],
            [
              -77.07368669,
              38.91133036
            ],
            [
              -77.07365506,
              38.91132927
            ],
            [
              -77.07365476,
              38.91133724
            ],
            [
              -77.07366394,
              38.91133751
            ],
            [
              -77.07366362,
              38.91134991
            ],
            [
              -77.07368576,
              38.9113511
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M15",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368771,
              38.9113078
            ],
            [
              -77.07365592,
              38.91130621
            ],
            [
              -77.07365563,
              38.91131403
            ],
            [
              -77.07365561,
              38.91131462
            ],
            [
              -77.07365924,
              38.91131482
            ],
            [
              -77.07365893,
              38.91132669
            ],
            [
              -77.07368676,
              38.91132786
            ],
            [
              -77.07368771,
              38.9113078
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M13",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365602,
              38.9113037
            ],
            [
              -77.07368785,
              38.91130453
            ],
            [
              -77.0736887,
              38.91128573
            ],
            [
              -77.07365672,
              38.91128495
            ],
            [
              -77.07365602,
              38.9113037
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M11",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368969,
              38.91126358
            ],
            [
              -77.07365759,
              38.91126186
            ],
            [
              -77.07365678,
              38.91128336
            ],
            [
              -77.07368878,
              38.91128392
            ],
            [
              -77.07368969,
              38.91126358
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M19",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07366069,
              38.91136269
            ],
            [
              -77.07366052,
              38.91133901
            ],
            [
              -77.07364493,
              38.91133875
            ],
            [
              -77.07364418,
              38.91136249
            ],
            [
              -77.07366069,
              38.91136269
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M22",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364076,
              38.91141722
            ],
            [
              -77.0736178,
              38.91141617
            ],
            [
              -77.07361655,
              38.91143941
            ],
            [
              -77.07362928,
              38.91143974
            ],
            [
              -77.07362927,
              38.91143974
            ],
            [
              -77.07362927,
              38.91143974
            ],
            [
              -77.07362928,
              38.91143974
            ],
            [
              -77.07362961,
              38.91143975
            ],
            [
              -77.07363932,
              38.91144
            ],
            [
              -77.07364076,
              38.91141722
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M20",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364143,
              38.91139647
            ],
            [
              -77.07363188,
              38.91139569
            ],
            [
              -77.07363205,
              38.911394
            ],
            [
              -77.0736188,
              38.91139361
            ],
            [
              -77.0736178,
              38.91141343
            ],
            [
              -77.0736406,
              38.91141421
            ],
            [
              -77.07364143,
              38.91139647
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M18A",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07363439,
              38.91134834
            ],
            [
              -77.07363623,
              38.91132538
            ],
            [
              -77.07361729,
              38.91132512
            ],
            [
              -77.07361696,
              38.91133751
            ],
            [
              -77.0736183,
              38.91133765
            ],
            [
              -77.07361779,
              38.91134808
            ],
            [
              -77.07363439,
              38.91134834
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M18B",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360824,
              38.91134795
            ],
            [
              -77.07360857,
              38.91133778
            ],
            [
              -77.07361327,
              38.91133778
            ],
            [
              -77.07361377,
              38.9113246
            ],
            [
              -77.07359365,
              38.91132434
            ],
            [
              -77.07359265,
              38.9113473
            ],
            [
              -77.07360824,
              38.91134795
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M04",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07359288,
              38.9113109
            ],
            [
              -77.07359422,
              38.91129186
            ],
            [
              -77.07357042,
              38.91129082
            ],
            [
              -77.07357042,
              38.91131117
            ],
            [
              -77.07359288,
              38.9113109
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M10",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07358114,
              38.9112856
            ],
            [
              -77.07359456,
              38.91128612
            ],
            [
              -77.07359657,
              38.91123916
            ],
            [
              -77.07358651,
              38.91123916
            ],
            [
              -77.07358517,
              38.91124307
            ],
            [
              -77.07357042,
              38.91124307
            ],
            [
              -77.07356941,
              38.91128534
            ],
            [
              -77.07358114,
              38.9112856
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M16",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364401,
              38.91130386
            ],
            [
              -77.07364485,
              38.91128469
            ],
            [
              -77.07361601,
              38.9112839
            ],
            [
              -77.07361585,
              38.91130438
            ],
            [
              -77.07363546,
              38.91130503
            ],
            [
              -77.07363546,
              38.91130308
            ],
            [
              -77.07364401,
              38.91130386
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M18C",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07359841,
              38.91128266
            ],
            [
              -77.07359673,
              38.91131038
            ],
            [
              -77.07361333,
              38.9113109
            ],
            [
              -77.0736145,
              38.91128319
            ],
            [
              -77.07359841,
              38.91128266
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M14",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0736452,
              38.91128169
            ],
            [
              -77.07364603,
              38.91126212
            ],
            [
              -77.07362508,
              38.91126186
            ],
            [
              -77.07362407,
              38.91128103
            ],
            [
              -77.0736452,
              38.91128169
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M09A",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364367,
              38.9112389
            ],
            [
              -77.07364434,
              38.91121999
            ],
            [
              -77.07363479,
              38.91121973
            ],
            [
              -77.07363429,
              38.91123786
            ],
            [
              -77.07364367,
              38.9112389
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M03A",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07361147,
              38.91126316
            ],
            [
              -77.07361164,
              38.91123564
            ],
            [
              -77.07359856,
              38.91123525
            ],
            [
              -77.0735989,
              38.9112629
            ],
            [
              -77.07361147,
              38.91126316
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M03",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07361147,
              38.91123277
            ],
            [
              -77.07359588,
              38.91123251
            ],
            [
              -77.07359504,
              38.91123642
            ],
            [
              -77.07358666,
              38.91123629
            ],
            [
              -77.0735875,
              38.91119103
            ],
            [
              -77.07361264,
              38.91119233
            ],
            [
              -77.07361147,
              38.91123277
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        room: "bedroom",
        access: "private",
        name: "M07",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07356901,
              38.91143819
            ],
            [
              -77.07357273,
              38.91137117
            ],
            [
              -77.07354231,
              38.91137013
            ],
            [
              -77.07353957,
              38.91143743
            ],
            [
              -77.07356901,
              38.91143819
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M01",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07361977,
              38.91110091
            ],
            [
              -77.07360458,
              38.91110063
            ],
            [
              -77.07360632,
              38.91107788
            ],
            [
              -77.07362071,
              38.91107846
            ],
            [
              -77.07361977,
              38.91110091
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        indoor: "room",
        name: "M02",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07358181,
              38.91107689
            ],
            [
              -77.07357072,
              38.91107637
            ],
            [
              -77.07357176,
              38.91105915
            ],
            [
              -77.07358181,
              38.91105967
            ],
            [
              -77.07358181,
              38.91107689
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        amenity: "toilets",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0736178,
              38.91141343
            ],
            [
              -77.07358913,
              38.91141187
            ],
            [
              -77.07358704,
              38.91143865
            ],
            [
              -77.07361655,
              38.91143941
            ],
            [
              -77.0736178,
              38.91141343
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        level: "0",
        amenity: "toilets",
        level_id: "M",
        building_id: "darnall",
        alt_name: null,
        category: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07359265,
              38.9113473
            ],
            [
              -77.07356735,
              38.91134769
            ],
            [
              -77.07357042,
              38.91131117
            ],
            [
              -77.07359288,
              38.9113109
            ],
            [
              -77.07359265,
              38.9113473
            ]
          ]
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10099204505",
      properties: {
        type: "node",
        id: "10099204505",
        tags: {
          highway: "elevator",
          level: "2",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-10-24T18:51:41Z",
          version: "2",
          changeset: "128010527",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            2
          ],
          ways: [
            "way/1103652026",
            "way/1106664812"
          ]
        },
        highway: "elevator",
        level: "2",
        wheelchair: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.073697,
          38.9100246
        ]
      }
    },
    {
      type: "Feature",
      id: "node/1218540872",
      properties: {
        type: "node",
        id: "1218540872",
        tags: {
          amenity: "library",
          level: "3",
          name: "Blommer Science Library",
          owner: "Georgetown University",
          website: "https://www.library.georgetown.edu/blommer"
        },
        relations: [],
        meta: {
          timestamp: "2019-02-20T21:00:09Z",
          version: "3",
          changeset: "67407604",
          user: "b-jazz-bot",
          uid: "9451067"
        },
        own: {
          levels: [
            3
          ],
          fixed: true
        },
        amenity: "library",
        level: "3",
        name: "Blommer Science Library",
        owner: "Georgetown University",
        website: "https://www.library.georgetown.edu/blommer",
        level_id: "3",
        alt_name: null,
        category: "library",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0734889,
          38.9095702
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10099204505",
      properties: {
        type: "node",
        id: "10099204505",
        tags: {
          highway: "elevator",
          level: "2",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-10-24T18:51:41Z",
          version: "2",
          changeset: "128010527",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            2
          ],
          ways: [
            "way/1103652026",
            "way/1106664812",
            "way/1103652026",
            "way/1106664812",
            "way/1103652026",
            "way/1106664812"
          ],
          fixed: true
        },
        highway: "elevator",
        level: "2",
        wheelchair: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.073697,
          38.9100246
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10099231937",
      properties: {
        type: "node",
        id: "10099231937",
        tags: {
          highway: "elevator",
          level: "2",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-10-13T20:32:42Z",
          version: "1",
          changeset: "127489764",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            2
          ],
          ways: [
            "way/1103652041",
            "way/1103652041",
            "way/1103652041"
          ],
          fixed: true
        },
        highway: "elevator",
        level: "2",
        wheelchair: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0735636,
          38.9091809
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0;1",
          highway: "steps"
        },
        own: {
          "new": true,
          levels: [
            0,
            1
          ]
        },
        level: "0;1",
        highway: "steps",
        level_id: "0;1",
        alt_name: null,
        category: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.0735284,
            38.90953217
          ],
          [
            -77.07358104,
            38.90950765
          ],
          [
            -77.07353879,
            38.90946121
          ],
          [
            -77.07348649,
            38.90949225
          ],
          [
            -77.07352739,
            38.90953191
          ]
        ]
      },
      id: "way/-26"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "-1-6",
          highway: "elevator",
          indoor: "room",
          room: "elevator",
          wheelchair: "yes"
        },
        own: {
          "new": true,
          levels: [
            -1,
            0,
            1,
            2,
            3,
            4,
            5,
            6
          ]
        },
        level: "-1-6",
        highway: "elevator",
        indoor: "room",
        room: "elevator",
        wheelchair: "yes",
        level_id: "-1-6",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735009,
              38.90954965
            ],
            [
              -77.07345799,
              38.90950478
            ],
            [
              -77.07342949,
              38.90951808
            ],
            [
              -77.07347274,
              38.90956348
            ],
            [
              -77.0735009,
              38.90954965
            ]
          ]
        ]
      },
      id: "way/-27"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "-1"
        },
        own: {
          "new": true,
          levels: [
            -1
          ]
        },
        indoor: "level",
        level: "-1",
        level_id: "-1",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-37"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "1"
        },
        own: {
          "new": true,
          levels: [
            1
          ]
        },
        indoor: "level",
        level: "1",
        level_id: "1",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-39"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "2"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        indoor: "level",
        level: "2",
        level_id: "2",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-40"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "3"
        },
        own: {
          "new": true,
          levels: [
            3
          ]
        },
        indoor: "level",
        level: "3",
        level_id: "3",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-41"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "4"
        },
        own: {
          "new": true,
          levels: [
            4
          ]
        },
        indoor: "level",
        level: "4",
        level_id: "4",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-42"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "5"
        },
        own: {
          "new": true,
          levels: [
            5
          ]
        },
        indoor: "level",
        level: "5",
        level_id: "5",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-43"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "6"
        },
        own: {
          "new": true,
          levels: [
            6
          ]
        },
        indoor: "level",
        level: "6",
        level_id: "6",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-44"
    },
    {
      type: "Feature",
      id: "node/740272454",
      properties: {
        type: "node",
        id: "740272454",
        tags: {
          "addr:housenumber": "3800",
          "addr:street": "Reservoir Road Northwest",
          amenity: "restaurant",
          dataset: "ABRA locations",
          name: "Epicurean and Company",
          source: "dcgis"
        },
        relations: [],
        meta: {
          timestamp: "2015-08-15T16:32:21Z",
          version: "4",
          changeset: "33354973",
          user: "RoadGeek_MD99",
          uid: "475877"
        },
        own: {
          levels: [
            0
          ]
        },
        "addr:housenumber": "3800",
        "addr:street": "Reservoir Road Northwest",
        amenity: "restaurant",
        dataset: "ABRA locations",
        name: "Epicurean and Company",
        source: "dcgis",
        level_id: "G",
        level: "0",
        alt_name: null,
        category: "restaurant",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0738137,
          38.9111765
        ]
      }
    },
    {
      type: "Feature",
      id: "node/1218539023",
      properties: {
        type: "node",
        id: "1218539023",
        tags: {
          "addr:city": "Washington",
          "addr:housenumber": "3800",
          "addr:postcode": "20007",
          "addr:state": "DC",
          "addr:street": "Reservoir Road",
          amenity: "cafe",
          branch: "Georgetown University Leavey C",
          brand: "Starbucks",
          "brand:wikidata": "Q37158",
          cuisine: "coffee_shop",
          name: "Starbucks",
          official_name: "Starbucks Coffee",
          phone: "+1 202-975-9841",
          ref: "10977",
          takeaway: "yes",
          website: "https://www.starbucks.com/store-locator/store/10977/georgetown-university-leavey-c-3800-reservoir-road-washington-dc-200072113-us"
        },
        relations: [],
        meta: {
          timestamp: "2024-06-20T01:42:44Z",
          version: "6",
          changeset: "152920594",
          user: "whammo",
          uid: "1962542"
        },
        own: {
          levels: [
            0
          ]
        },
        "addr:city": "Washington",
        "addr:housenumber": "3800",
        "addr:postcode": "20007",
        "addr:state": "DC",
        "addr:street": "Reservoir Road",
        amenity: "cafe",
        branch: "Georgetown University Leavey C",
        brand: "Starbucks",
        "brand:wikidata": "Q37158",
        cuisine: "coffee_shop",
        name: "Starbucks",
        official_name: "Starbucks Coffee",
        phone: "+1 202-975-9841",
        ref: "10977",
        takeaway: "yes",
        website: "https://www.starbucks.com/store-locator/store/10977/georgetown-university-leavey-c-3800-reservoir-road-washington-dc-200072113-us",
        level_id: "G",
        level: "0",
        alt_name: null,
        category: "cafe",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0749547,
          38.9101453
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10099204505",
      properties: {
        type: "node",
        id: "10099204505",
        tags: {
          highway: "elevator",
          level: "2",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-10-24T18:51:41Z",
          version: "2",
          changeset: "128010527",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            2
          ],
          ways: [
            "way/1103652026",
            "way/1106664812"
          ]
        },
        highway: "elevator",
        level: "2",
        wheelchair: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.073697,
          38.9100246
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        tags: {
          indoor: "level",
          level: "0"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        indoor: "level",
        level: "0",
        level_id: "G",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07386544,
              38.91129186
            ],
            [
              -77.07387667,
              38.91104747
            ],
            [
              -77.07371994,
              38.91104193
            ],
            [
              -77.07370116,
              38.9110435
            ],
            [
              -77.07370116,
              38.91097515
            ],
            [
              -77.07372597,
              38.91097515
            ],
            [
              -77.07372731,
              38.91094436
            ],
            [
              -77.07370317,
              38.91094384
            ],
            [
              -77.0737066,
              38.9109094
            ],
            [
              -77.0737074,
              38.9108931
            ],
            [
              -77.0736538,
              38.9108916
            ],
            [
              -77.0736528,
              38.9109147
            ],
            [
              -77.07364752,
              38.91110298
            ],
            [
              -77.07344837,
              38.91110037
            ],
            [
              -77.07343698,
              38.91127934
            ],
            [
              -77.07386544,
              38.91129186
            ]
          ]
        ]
      },
      id: "way/-1"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "wall"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "0",
        indoor: "wall",
        level_id: "G",
        alt_name: null,
        category: "wall",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "wall",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07370116,
            38.9110435
          ],
          [
            -77.07364925,
            38.91104139
          ]
        ]
      },
      id: "way/-2"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          amenity: "restaurant",
          name: "Epicurean & Company"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "0",
        amenity: "restaurant",
        name: "Epicurean & Company",
        level_id: "G",
        alt_name: null,
        category: "restaurant",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07386544,
              38.91129186
            ],
            [
              -77.07387671,
              38.91104664
            ],
            [
              -77.07364926,
              38.91104088
            ],
            [
              -77.07364351,
              38.9112856
            ],
            [
              -77.07386544,
              38.91129186
            ]
          ]
        ]
      },
      id: "way/-4"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          name: "G09I",
          room: "bedroom"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "0",
        indoor: "room",
        name: "G09I",
        room: "bedroom",
        level_id: "G",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07354054,
              38.91123029
            ],
            [
              -77.07363073,
              38.9112316
            ],
            [
              -77.07363073,
              38.91126655
            ],
            [
              -77.07353852,
              38.91126551
            ],
            [
              -77.07354054,
              38.91123029
            ]
          ]
        ]
      },
      id: "way/-5"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          name: "G09K",
          room: "bedroom"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "0",
        indoor: "room",
        name: "G09K",
        room: "bedroom",
        level_id: "G",
        alt_name: null,
        category: "room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "darnall",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07363915,
              38.91113716
            ],
            [
              -77.07364051,
              38.91110289
            ],
            [
              -77.0735513,
              38.91110172
            ],
            [
              -77.07355164,
              38.91113402
            ],
            [
              -77.07363915,
              38.91113716
            ]
          ]
        ]
      },
      id: "way/-6"
    },
    {
      type: "Feature",
      id: "node/1218540872",
      properties: {
        type: "node",
        id: "1218540872",
        tags: {
          amenity: "library",
          level: "3",
          name: "Blommer Science Library",
          owner: "Georgetown University",
          website: "https://www.library.georgetown.edu/blommer"
        },
        relations: [],
        meta: {
          timestamp: "2019-02-20T21:00:09Z",
          version: "3",
          changeset: "67407604",
          user: "b-jazz-bot",
          uid: "9451067"
        },
        own: {
          levels: [
            3
          ],
          fixed: true
        },
        amenity: "library",
        level: "3",
        name: "Blommer Science Library",
        owner: "Georgetown University",
        website: "https://www.library.georgetown.edu/blommer",
        level_id: "3",
        alt_name: null,
        category: "library",
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0734889,
          38.9095702
        ]
      }
    },
    {
      type: "Feature",
      id: "node/1488838046",
      properties: {
        type: "node",
        id: "1488838046",
        tags: {
          entrance: "yes",
          source: "survey"
        },
        relations: [],
        meta: {
          timestamp: "2014-08-17T05:21:01Z",
          version: "4",
          changeset: "24799834",
          user: "lxbarth",
          uid: "589596"
        },
        own: {
          levels: [
            0
          ],
          ways: [
            "way/67521384",
            "way/1113414783",
            "way/67521384",
            "way/1113414783",
            "way/67521384"
          ],
          fixed: true
        },
        entrance: "yes",
        source: "survey",
        level_id: 1,
        level: "1",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0756618,
          38.9103664
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10167313751",
      properties: {
        type: "node",
        id: "10167313751",
        tags: {
          highway: "elevator",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-11-07T19:21:17Z",
          version: "1",
          changeset: "128610899",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            0
          ],
          ways: [
            "way/1111158584",
            "way/1111158584",
            "way/1111158584"
          ],
          fixed: true
        },
        highway: "elevator",
        wheelchair: "yes",
        level_id: 1,
        level: "1",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0751233,
          38.9088465
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07349874,
          38.90965847
        ]
      },
      id: "node/-2"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07340233,
          38.90955685
        ]
      },
      id: "node/-3"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07338096,
          38.90953433
        ]
      },
      id: "node/-4"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07323293,
          38.9093783
        ]
      },
      id: "node/-5"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes",
          automatic_door: "no"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          utilityNode: false,
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        automatic_door: "no",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07353292,
          38.90969449
        ]
      },
      id: "node/-6"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          room: "class",
          name: "172A"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "Classroom",
        room: "class",
        name: "172A",
        level_id: 1,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07361333,
              38.90978863
            ],
            [
              -77.07353292,
              38.90969449
            ],
            [
              -77.07351668,
              38.90967738
            ],
            [
              -77.0734544,
              38.90970723
            ],
            [
              -77.07355901,
              38.9098168
            ],
            [
              -77.07361333,
              38.90978863
            ]
          ]
        ]
      },
      id: "way/-7"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          room: "class",
          name: "172"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "Classroom",
        room: "class",
        name: "172",
        level_id: 1,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351172,
              38.90967122
            ],
            [
              -77.07349874,
              38.90965847
            ],
            [
              -77.07345339,
              38.90960835
            ],
            [
              -77.07338534,
              38.90964096
            ],
            [
              -77.07344735,
              38.90970514
            ],
            [
              -77.07351172,
              38.90967122
            ]
          ]
        ]
      },
      id: "way/-8"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          room: "class",
          name: "152"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "Classroom",
        room: "class",
        name: "152",
        level_id: 1,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.073449,
              38.90960418
            ],
            [
              -77.07340233,
              38.90955685
            ],
            [
              -77.07339267,
              38.90954339
            ],
            [
              -77.07332562,
              38.90957887
            ],
            [
              -77.07338132,
              38.90963627
            ],
            [
              -77.073449,
              38.90960418
            ]
          ]
        ]
      },
      id: "way/-9"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          name: "154",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "Classroom",
        name: "154",
        room: "class",
        level_id: 1,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07338697,
              38.90953895
            ],
            [
              -77.07323983,
              38.90939051
            ],
            [
              -77.0731801,
              38.90942312
            ],
            [
              -77.07332562,
              38.90957887
            ],
            [
              -77.07338697,
              38.90953895
            ]
          ]
        ]
      },
      id: "way/-10"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          name: "156",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "Classroom",
        name: "156",
        room: "class",
        level_id: 1,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0731773,
              38.9094209
            ],
            [
              -77.073239,
              38.9093862
            ],
            [
              -77.07319751,
              38.90934146
            ],
            [
              -77.07313415,
              38.90937668
            ],
            [
              -77.0731773,
              38.9094209
            ]
          ]
        ]
      },
      id: "way/-11"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          room: "class",
          name: "103"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "Classroom",
        room: "class",
        name: "103",
        level_id: 1,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07339406,
              38.90950895
            ],
            [
              -77.07352918,
              38.90942964
            ],
            [
              -77.07335617,
              38.90929606
            ],
            [
              -77.07324654,
              38.90935502
            ],
            [
              -77.07339406,
              38.90950895
            ]
          ]
        ]
      },
      id: "way/-12"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07346771,
          38.90946572
        ]
      },
      id: "node/-13"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07345101,
          38.90947552
        ]
      },
      id: "node/-14"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          room: "class",
          name: "112"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "Classroom",
        room: "class",
        name: "112",
        level_id: 1,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07370257,
              38.90967957
            ],
            [
              -77.07362211,
              38.90956269
            ],
            [
              -77.07352219,
              38.90960809
            ],
            [
              -77.07363283,
              38.90971662
            ],
            [
              -77.07370257,
              38.90967957
            ]
          ]
        ]
      },
      id: "way/-15"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07356987,
          38.90958643
        ]
      },
      id: "node/-16"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          room: "bathroom"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "Bathroom",
        room: "bathroom",
        level_id: 1,
        alt_name: null,
        category: "Bathroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07354695,
              38.90941686
            ],
            [
              -77.07356771,
              38.90940225
            ],
            [
              -77.07350323,
              38.90934865
            ],
            [
              -77.07347819,
              38.90936676
            ],
            [
              -77.07354695,
              38.90941686
            ]
          ]
        ]
      },
      id: "way/-17"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          room: "bathroom"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "Bathroom",
        room: "bathroom",
        level_id: 1,
        alt_name: null,
        category: "Bathroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07371119,
              38.90956727
            ],
            [
              -77.07367299,
              38.90958096
            ],
            [
              -77.07365086,
              38.90954678
            ],
            [
              -77.07365756,
              38.90954521
            ],
            [
              -77.07363845,
              38.90951756
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.07371119,
              38.90956727
            ]
          ]
        ]
      },
      id: "way/-18"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0736441,
          38.90952573
        ]
      },
      id: "node/-19"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes",
          entrance: "main"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          utilityNode: false,
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        entrance: "main",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07362674,
          38.90947999
        ]
      },
      id: "node/-20"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes",
          entrance: "main"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          utilityNode: false,
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        entrance: "main",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07358601,
          38.90943903
        ]
      },
      id: "node/-21"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          room: "class",
          name: "185"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "Classroom",
        room: "class",
        name: "185",
        level_id: 1,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07378484,
              38.90973057
            ],
            [
              -77.07375649,
              38.90968818
            ],
            [
              -77.07378614,
              38.90967631
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.07378484,
              38.90973057
            ]
          ]
        ]
      },
      id: "way/-22"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07376379,
          38.90969909
        ]
      },
      id: "node/-23"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "room",
          room: "class",
          name: "186"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "Classroom",
        room: "class",
        name: "186",
        level_id: 1,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07378342,
              38.90967235
            ],
            [
              -77.07375276,
              38.90968323
            ],
            [
              -77.07374107,
              38.9096634
            ],
            [
              -77.07372594,
              38.90966862
            ],
            [
              -77.07368441,
              38.90961018
            ],
            [
              -77.07372969,
              38.90959418
            ],
            [
              -77.07378342,
              38.90967235
            ]
          ]
        ]
      },
      id: "way/-24"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07369923,
          38.90963064
        ]
      },
      id: "node/-25"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0;1",
          highway: "steps"
        },
        own: {
          "new": true,
          levels: [
            0,
            1
          ]
        },
        level: "0;1",
        highway: "steps",
        level_id: "0;1",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.0735284,
            38.90953217
          ],
          [
            -77.07358104,
            38.90950765
          ],
          [
            -77.07353879,
            38.90946121
          ],
          [
            -77.07348649,
            38.90949225
          ],
          [
            -77.07352739,
            38.90953191
          ]
        ]
      },
      id: "way/-26"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "-1-6",
          highway: "elevator",
          indoor: "room",
          room: "elevator",
          wheelchair: "yes"
        },
        own: {
          "new": true,
          levels: [
            -1,
            0,
            1,
            2,
            3,
            4,
            5,
            6
          ]
        },
        level: "-1-6",
        highway: "elevator",
        indoor: "Elevator",
        room: "elevator",
        wheelchair: "yes",
        level_id: "-1-6",
        alt_name: null,
        category: "Elevator",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735009,
              38.90954965
            ],
            [
              -77.07345799,
              38.90950478
            ],
            [
              -77.07342949,
              38.90951808
            ],
            [
              -77.07347274,
              38.90956348
            ],
            [
              -77.0735009,
              38.90954965
            ]
          ]
        ]
      },
      id: "way/-27"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            0
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "1",
        door: "yes",
        level_id: 1,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07352955,
          38.90940418
        ]
      },
      id: "node/-28"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "corridor"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "corridor",
        level_id: 1,
        alt_name: null,
        category: "corridor",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07321703,
              38.90933311
            ],
            [
              -77.0733083,
              38.90924854
            ],
            [
              -77.07336146,
              38.9092937
            ],
            [
              -77.07324128,
              38.90935527
            ],
            [
              -77.07321703,
              38.90933311
            ]
          ]
        ]
      },
      id: "way/-31"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "corridor"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "corridor",
        level_id: 1,
        alt_name: null,
        category: "corridor",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07362211,
              38.90956269
            ],
            [
              -77.07352219,
              38.90960809
            ],
            [
              -77.07340596,
              38.90950576
            ],
            [
              -77.07352918,
              38.90942964
            ],
            [
              -77.07362211,
              38.90956269
            ]
          ]
        ]
      },
      id: "way/-32"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "corridor"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "corridor",
        level_id: 1,
        alt_name: null,
        category: "corridor",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07372594,
              38.90966862
            ],
            [
              -77.07368441,
              38.90961018
            ],
            [
              -77.07367299,
              38.90958096
            ],
            [
              -77.07365086,
              38.90954678
            ],
            [
              -77.07365756,
              38.90954521
            ],
            [
              -77.07363845,
              38.90951756
            ],
            [
              -77.07362674,
              38.90947999
            ],
            [
              -77.07358601,
              38.90943903
            ],
            [
              -77.07354695,
              38.90941686
            ],
            [
              -77.07347819,
              38.90936676
            ],
            [
              -77.07350296,
              38.90934843
            ],
            [
              -77.07350068,
              38.90934668
            ],
            [
              -77.0734638,
              38.90937955
            ],
            [
              -77.07352918,
              38.90942964
            ],
            [
              -77.07362211,
              38.90956269
            ],
            [
              -77.07370257,
              38.90967957
            ],
            [
              -77.07372594,
              38.90966862
            ]
          ]
        ]
      },
      id: "way/-34"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "corridor"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "corridor",
        level_id: 1,
        alt_name: null,
        category: "corridor",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07361333,
              38.90978863
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.07378065,
              38.90973232
            ],
            [
              -77.07374107,
              38.9096634
            ],
            [
              -77.07370257,
              38.90967957
            ],
            [
              -77.07356904,
              38.90973678
            ],
            [
              -77.07361333,
              38.90978863
            ]
          ]
        ]
      },
      id: "way/-33"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "corridor"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "corridor",
        level_id: 1,
        alt_name: null,
        category: "corridor",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07363283,
              38.90971662
            ],
            [
              -77.07352219,
              38.90960809
            ],
            [
              -77.07345891,
              38.90955238
            ],
            [
              -77.07341547,
              38.90951413
            ],
            [
              -77.07339406,
              38.90950895
            ],
            [
              -77.07337674,
              38.90949088
            ],
            [
              -77.07325801,
              38.90936698
            ],
            [
              -77.07324654,
              38.90935502
            ],
            [
              -77.07321703,
              38.90933311
            ],
            [
              -77.07319751,
              38.90934146
            ],
            [
              -77.07338096,
              38.90953433
            ],
            [
              -77.07355144,
              38.90971618
            ],
            [
              -77.07356904,
              38.90973678
            ],
            [
              -77.07363283,
              38.90971662
            ]
          ]
        ]
      },
      id: "way/-35"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "0",
          indoor: "corridor"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        level: "1",
        indoor: "corridor",
        level_id: 1,
        alt_name: null,
        category: "corridor",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0734638,
              38.90937955
            ],
            [
              -77.07350068,
              38.90934668
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0733083,
              38.90924854
            ],
            [
              -77.0734638,
              38.90937955
            ]
          ]
        ]
      },
      id: "way/-36"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "-1"
        },
        own: {
          "new": true,
          levels: [
            -1
          ]
        },
        indoor: "level",
        level: "-1",
        level_id: "-1",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#e8e8e8",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-37"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "0"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        indoor: "level",
        level: "1",
        level_id: 1,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#e8e8e8",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-38"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "1"
        },
        own: {
          "new": true,
          levels: [
            1
          ]
        },
        indoor: "level",
        level: "1",
        level_id: "1",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#e8e8e8",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-39"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "3"
        },
        own: {
          "new": true,
          levels: [
            3
          ]
        },
        indoor: "level",
        level: "3",
        level_id: "3",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#e8e8e8",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-41"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "4"
        },
        own: {
          "new": true,
          levels: [
            4
          ]
        },
        indoor: "level",
        level: "4",
        level_id: "4",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#e8e8e8",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-42"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "5"
        },
        own: {
          "new": true,
          levels: [
            5
          ]
        },
        indoor: "level",
        level: "5",
        level_id: "5",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#e8e8e8",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-43"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "6"
        },
        own: {
          "new": true,
          levels: [
            6
          ]
        },
        indoor: "level",
        level: "6",
        level_id: "6",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#e8e8e8",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-44"
    },
    {
      type: "Feature",
      id: "reiss-exit-entrance-indoor",
      properties: {
        amenity: "entrance",
        level: "0",
        name: "Reiss Exit/Entrance",
        type: "entrance",
        building: "reiss",
        floor: "0",
        owner: "Georgetown University",
        level_id: "0",
        alt_name: null,
        category: "building",
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        access: "public",
        description: "Main exit/entrance for Reiss Science Building",
        fill: "#22c55e",
        stroke: "#16a34a",
        "stroke-width": 2,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07360623,
          38.90946303
        ]
      }
    },
    {
      type: "Feature",
      id: "node/367143815",
      properties: {
        type: "node",
        id: "367143815",
        tags: {
          "addr:state": "DC",
          building: "university",
          ele: "45",
          "gnis:feature_id": "529193",
          name: "Gaston Hall",
          operator: "Georgetown University",
          room: "auditorium",
          source: "USGS Geonames",
          wikidata: "Q22097026",
          wikipedia: "en:Gaston Hall"
        },
        relations: [],
        meta: {
          timestamp: "2024-08-12T19:26:13Z",
          version: "6",
          changeset: "155164666",
          user: "Mateusz Konieczny - bot account",
          uid: "3199858"
        },
        own: {
          levels: [
            0
          ],
          fixed: true
        },
        "addr:state": "DC",
        building: "university",
        ele: "45",
        "gnis:feature_id": "529193",
        name: "Gaston Hall",
        operator: "Georgetown University",
        room: "auditorium",
        source: "USGS Geonames",
        wikidata: "Q22097026",
        wikipedia: "en:Gaston Hall",
        level_id: "2",
        level: "2",
        alt_name: null,
        category: "auditorium",
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0727556,
          38.9076116
        ]
      }
    },
    {
      type: "Feature",
      id: "node/1218540872",
      properties: {
        type: "node",
        id: "1218540872",
        tags: {
          amenity: "library",
          level: "3",
          name: "Blommer Science Library",
          owner: "Georgetown University",
          website: "https://www.library.georgetown.edu/blommer"
        },
        relations: [],
        meta: {
          timestamp: "2019-02-20T21:00:09Z",
          version: "3",
          changeset: "67407604",
          user: "b-jazz-bot",
          uid: "9451067"
        },
        own: {
          levels: [
            3
          ],
          fixed: true
        },
        amenity: "library",
        level: "2",
        name: "Blommer Science Library",
        owner: "Georgetown University",
        website: "https://www.library.georgetown.edu/blommer",
        level_id: "2",
        alt_name: null,
        category: "library",
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0734889,
          38.9095702
        ]
      }
    },
    {
      type: "Feature",
      id: "node/1488838046",
      properties: {
        type: "node",
        id: "1488838046",
        tags: {
          entrance: "yes",
          source: "survey"
        },
        relations: [],
        meta: {
          timestamp: "2014-08-17T05:21:01Z",
          version: "4",
          changeset: "24799834",
          user: "lxbarth",
          uid: "589596"
        },
        own: {
          levels: [
            0
          ],
          ways: [
            "way/67521384",
            "way/1113414783",
            "way/67521384",
            "way/67521384",
            "way/67521384",
            "way/1113414783",
            "way/67521384",
            "way/1113414783"
          ],
          fixed: true
        },
        entrance: "yes",
        source: "survey",
        level_id: "2",
        level: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0756618,
          38.9103664
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10099204505",
      properties: {
        type: "node",
        id: "10099204505",
        tags: {
          highway: "elevator",
          level: "2",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-10-24T18:51:41Z",
          version: "2",
          changeset: "128010527",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            2
          ],
          ways: [
            "way/1103652026",
            "way/1106664812",
            "way/1103652026",
            "way/1106664812",
            "way/1103652026",
            "way/1106664812",
            "way/1103652026",
            "way/1106664812",
            "way/1103652026",
            "way/1106664812"
          ],
          fixed: true
        },
        highway: "elevator",
        level: "2",
        wheelchair: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.073697,
          38.9100246
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10099231937",
      properties: {
        type: "node",
        id: "10099231937",
        tags: {
          highway: "elevator",
          level: "2",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-10-13T20:32:42Z",
          version: "1",
          changeset: "127489764",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            2
          ],
          ways: [
            "way/1103652041",
            "way/1103652041",
            "way/1103652041",
            "way/1103652041",
            "way/1103652041"
          ],
          fixed: true
        },
        highway: "elevator",
        level: "2",
        wheelchair: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0735636,
          38.9091809
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10167313751",
      properties: {
        type: "node",
        id: "10167313751",
        tags: {
          highway: "elevator",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-11-07T19:21:17Z",
          version: "1",
          changeset: "128610899",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            0
          ],
          ways: [
            "way/1111158584",
            "way/1111158584",
            "way/1111158584",
            "way/1111158584"
          ],
          fixed: true
        },
        highway: "elevator",
        wheelchair: "yes",
        level_id: "2",
        level: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0751233,
          38.9088465
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10078216975",
      properties: {
        type: "node",
        id: "10078216975",
        tags: {
          automatic_door: "motion",
          door: "automatic",
          entrance: "main",
          level: "3",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-10-05T18:46:16Z",
          version: "1",
          changeset: "127062336",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            3
          ],
          ways: [
            "way/69609516"
          ],
          fixed: true
        },
        automatic_door: "motion",
        door: "automatic",
        entrance: "main",
        level: "2",
        wheelchair: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0721662,
          38.9067335
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "234"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "234",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07378188,
              38.90967011
            ],
            [
              -77.0737119,
              38.90969784
            ],
            [
              -77.0736938,
              38.9096754
            ],
            [
              -77.0737654,
              38.90964613
            ],
            [
              -77.07378188,
              38.90967011
            ]
          ]
        ]
      },
      id: "way/-1"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "232"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "232",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07376525,
              38.9096459
            ],
            [
              -77.07370021,
              38.90967214
            ],
            [
              -77.07369359,
              38.90967511
            ],
            [
              -77.073677,
              38.90964956
            ],
            [
              -77.07374845,
              38.90962139
            ],
            [
              -77.07376525,
              38.9096459
            ]
          ]
        ]
      },
      id: "way/-2"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "230"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "230",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0737482,
              38.90962107
            ],
            [
              -77.07373168,
              38.90959713
            ],
            [
              -77.0736601,
              38.90962661
            ],
            [
              -77.07367695,
              38.90964915
            ],
            [
              -77.0737482,
              38.90962107
            ]
          ]
        ]
      },
      id: "way/-3"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          name: "228",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        name: "228",
        room: "class",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373154,
              38.90959687
            ],
            [
              -77.07371604,
              38.90957433
            ],
            [
              -77.07364401,
              38.90960274
            ],
            [
              -77.07365983,
              38.90962627
            ],
            [
              -77.07373154,
              38.90959687
            ]
          ]
        ]
      },
      id: "way/-4"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          name: "226",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        name: "226",
        room: "class",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07371579,
              38.90957396
            ],
            [
              -77.07364365,
              38.90960232
            ],
            [
              -77.07362792,
              38.90957861
            ],
            [
              -77.0736991,
              38.90954969
            ],
            [
              -77.07371579,
              38.90957396
            ]
          ]
        ]
      },
      id: "way/-5"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "224"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "224",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07369894,
              38.90954945
            ],
            [
              -77.07362773,
              38.9095783
            ],
            [
              -77.07360998,
              38.90955408
            ],
            [
              -77.07368273,
              38.90952587
            ],
            [
              -77.07369894,
              38.90954945
            ]
          ]
        ]
      },
      id: "way/-6"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "222"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "222",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368259,
              38.90952566
            ],
            [
              -77.07360977,
              38.90955376
            ],
            [
              -77.07359456,
              38.90953165
            ],
            [
              -77.07366714,
              38.90950246
            ],
            [
              -77.07368259,
              38.90952566
            ]
          ]
        ]
      },
      id: "way/-7"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07370541,
          38.90968979
        ]
      },
      id: "node/-8"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.073683,
          38.9096588
        ]
      },
      id: "node/-9"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07367163,
          38.90964203
        ]
      },
      id: "node/-10"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0736493,
          38.9096106
        ]
      },
      id: "node/-11"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07363917,
          38.90959557
        ]
      },
      id: "node/-12"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07361614,
          38.90956249
        ]
      },
      id: "node/-13"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07360572,
          38.90954787
        ]
      },
      id: "node/-14"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          name: "209",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        name: "209",
        room: "class",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365996,
              38.90950489
            ],
            [
              -77.073643,
              38.90948143
            ],
            [
              -77.07359606,
              38.90950093
            ],
            [
              -77.07361126,
              38.90952421
            ],
            [
              -77.07365996,
              38.90950489
            ]
          ]
        ]
      },
      id: "way/-15"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "208"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "208",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364267,
              38.90948108
            ],
            [
              -77.07362507,
              38.90945866
            ],
            [
              -77.07358056,
              38.90948025
            ],
            [
              -77.07359588,
              38.90950055
            ],
            [
              -77.07364267,
              38.90948108
            ]
          ]
        ]
      },
      id: "way/-16"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "207"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "207",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07362452,
              38.90945814
            ],
            [
              -77.07360679,
              38.90943825
            ],
            [
              -77.07356522,
              38.90946473
            ],
            [
              -77.07357974,
              38.90947942
            ],
            [
              -77.07362452,
              38.90945814
            ]
          ]
        ]
      },
      id: "way/-17"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "206"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "206",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360625,
              38.90943769
            ],
            [
              -77.07358399,
              38.9094179
            ],
            [
              -77.07354544,
              38.90944555
            ],
            [
              -77.07356461,
              38.90946313
            ],
            [
              -77.07360625,
              38.90943769
            ]
          ]
        ]
      },
      id: "way/-18"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "205"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "205",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07358332,
              38.90941748
            ],
            [
              -77.07355977,
              38.90939898
            ],
            [
              -77.07352155,
              38.90942651
            ],
            [
              -77.07354464,
              38.90944516
            ],
            [
              -77.07358332,
              38.90941748
            ]
          ]
        ]
      },
      id: "way/-19"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "242"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "242",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07355889,
              38.90939869
            ],
            [
              -77.07350093,
              38.90943923
            ],
            [
              -77.07347788,
              38.90942162
            ],
            [
              -77.07353496,
              38.90937955
            ],
            [
              -77.07355889,
              38.90939869
            ]
          ]
        ]
      },
      id: "way/-20"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07360428,
          38.90951352
        ]
      },
      id: "node/-21"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359095,
          38.90949402
        ]
      },
      id: "node/-22"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07357303,
          38.90947263
        ]
      },
      id: "node/-23"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07355687,
          38.90945603
        ]
      },
      id: "node/-24"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07353245,
          38.90943531
        ]
      },
      id: "node/-25"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07348427,
          38.9094265
        ]
      },
      id: "node/-26"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "244"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "244",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353444,
              38.90937927
            ],
            [
              -77.07351107,
              38.9093593
            ],
            [
              -77.07345424,
              38.90940101
            ],
            [
              -77.07347721,
              38.90941979
            ],
            [
              -77.07353444,
              38.90937927
            ]
          ]
        ]
      },
      id: "way/-28"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "246"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "246",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351048,
              38.90935897
            ],
            [
              -77.07348643,
              38.90933963
            ],
            [
              -77.0734291,
              38.90938183
            ],
            [
              -77.07345389,
              38.90940058
            ],
            [
              -77.07351048,
              38.90935897
            ]
          ]
        ]
      },
      id: "way/-29"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "248"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "248",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07348605,
              38.90933945
            ],
            [
              -77.07346204,
              38.90932003
            ],
            [
              -77.07340429,
              38.90936155
            ],
            [
              -77.07342887,
              38.90938152
            ],
            [
              -77.07348605,
              38.90933945
            ]
          ]
        ]
      },
      id: "way/-31"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "252"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "252",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07340366,
              38.90936093
            ],
            [
              -77.0734616,
              38.90931969
            ],
            [
              -77.07343681,
              38.90930017
            ],
            [
              -77.07338006,
              38.90934309
            ],
            [
              -77.07340366,
              38.90936093
            ]
          ]
        ]
      },
      id: "way/-32"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "254"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "254",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07337973,
              38.90934265
            ],
            [
              -77.07343633,
              38.90930006
            ],
            [
              -77.07341359,
              38.90928197
            ],
            [
              -77.073355,
              38.90932333
            ],
            [
              -77.07337973,
              38.90934265
            ]
          ]
        ]
      },
      id: "way/-33"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07347157,
          38.90941518
        ]
      },
      id: "node/-34"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07343605,
          38.90938709
        ]
      },
      id: "node/-35"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07342123,
          38.90937531
        ]
      },
      id: "node/-36"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07338677,
          38.90934816
        ]
      },
      id: "node/-37"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07337441,
          38.9093385
        ]
      },
      id: "node/-38"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "256"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "256",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07335429,
              38.90932271
            ],
            [
              -77.07341242,
              38.90928142
            ],
            [
              -77.07334188,
              38.90922283
            ],
            [
              -77.07326101,
              38.90928475
            ],
            [
              -77.07330412,
              38.90931563
            ],
            [
              -77.07332499,
              38.90930076
            ],
            [
              -77.07335429,
              38.90932271
            ]
          ]
        ]
      },
      id: "way/-39"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07334053,
          38.9093124
        ]
      },
      id: "node/-40"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "238"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "238",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.07378293,
              38.90967164
            ],
            [
              -77.07368324,
              38.90971075
            ],
            [
              -77.0737005,
              38.90973553
            ],
            [
              -77.07371693,
              38.90975901
            ],
            [
              -77.0738148,
              38.909718
            ]
          ]
        ]
      },
      id: "way/-41"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07369134,
          38.90970757
        ]
      },
      id: "node/-42"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          name: "240A",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        name: "240A",
        room: "class",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364267,
              38.90970084
            ],
            [
              -77.07362104,
              38.90967853
            ],
            [
              -77.07359288,
              38.90969327
            ],
            [
              -77.07360327,
              38.9097054
            ],
            [
              -77.07359975,
              38.90970788
            ],
            [
              -77.07361115,
              38.90971936
            ],
            [
              -77.07364267,
              38.90970084
            ]
          ]
        ]
      },
      id: "way/-43"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07362499,
          38.90971123
        ]
      },
      id: "node/-44"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Room",
        level_id: "2",
        alt_name: null,
        category: "Room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368072,
              38.90968779
            ],
            [
              -77.07366027,
              38.90965596
            ],
            [
              -77.07362104,
              38.90967853
            ],
            [
              -77.07364887,
              38.90970592
            ],
            [
              -77.07368072,
              38.90968779
            ]
          ]
        ]
      },
      id: "way/-45"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "261A"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "261A",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364753,
              38.90966392
            ],
            [
              -77.07359321,
              38.90960391
            ],
            [
              -77.07353387,
              38.90963679
            ],
            [
              -77.07358684,
              38.9096947
            ],
            [
              -77.07364753,
              38.90966392
            ]
          ]
        ]
      },
      id: "way/-46"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07356214,
          38.9096677
        ]
      },
      id: "node/-47"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "toilets",
          name: "Toilet"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Room",
        room: "toilets",
        name: "Toilet",
        level_id: "2",
        alt_name: null,
        category: "Room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07358886,
              38.90976749
            ],
            [
              -77.07357142,
              38.90974871
            ],
            [
              -77.07358181,
              38.9097414
            ],
            [
              -77.07357712,
              38.90973514
            ],
            [
              -77.07349864,
              38.90978055
            ],
            [
              -77.07352164,
              38.90980489
            ],
            [
              -77.07358886,
              38.90976749
            ]
          ]
        ]
      },
      id: "way/-48"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "264"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "264",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07357586,
              38.90973423
            ],
            [
              -77.07351476,
              38.90967057
            ],
            [
              -77.07343732,
              38.90971562
            ],
            [
              -77.07349845,
              38.90978035
            ],
            [
              -77.07357586,
              38.90973423
            ]
          ]
        ]
      },
      id: "way/-49"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "262"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "262",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351308,
              38.90966933
            ],
            [
              -77.07343161,
              38.90958291
            ],
            [
              -77.07335567,
              38.90962661
            ],
            [
              -77.07343613,
              38.90971437
            ],
            [
              -77.07351308,
              38.90966933
            ]
          ]
        ]
      },
      id: "way/-50"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07356977,
          38.90972789
        ]
      },
      id: "node/-51"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07358278,
          38.90976094
        ]
      },
      id: "node/-52"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07350729,
          38.90966319
        ]
      },
      id: "node/-53"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "282"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "282",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07339339,
              38.90954261
            ],
            [
              -77.07328744,
              38.90943134
            ],
            [
              -77.07321201,
              38.90947519
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.07339339,
              38.90954261
            ]
          ]
        ]
      },
      id: "way/-55"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07338491,
          38.90953375
        ]
      },
      id: "node/-56"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07329404,
          38.90943872
        ]
      },
      id: "node/-57"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "284"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "284",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0732865,
              38.90943101
            ],
            [
              -77.07324838,
              38.90939024
            ],
            [
              -77.07317347,
              38.90943373
            ],
            [
              -77.07321064,
              38.90947372
            ],
            [
              -77.0732865,
              38.90943101
            ]
          ]
        ]
      },
      id: "way/-58"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "toilets",
          name: "Toilet"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Room",
        room: "toilets",
        name: "Toilet",
        level_id: "2",
        alt_name: null,
        category: "Room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07317208,
              38.90943223
            ],
            [
              -77.07323615,
              38.90939403
            ],
            [
              -77.07321268,
              38.90936963
            ],
            [
              -77.07314956,
              38.90940799
            ],
            [
              -77.07317208,
              38.90943223
            ]
          ]
        ]
      },
      id: "way/-59"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07325405,
          38.90939631
        ]
      },
      id: "node/-60"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0732212,
          38.90937849
        ]
      },
      id: "node/-61"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "0"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        indoor: "level",
        level: "2",
        level_id: "2",
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#e8e8e8",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-62"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "281"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "281",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07339456,
              38.90949499
            ],
            [
              -77.07347251,
              38.90945234
            ],
            [
              -77.07340747,
              38.90939898
            ],
            [
              -77.07337411,
              38.90941777
            ],
            [
              -77.07335802,
              38.90942651
            ],
            [
              -77.07333773,
              38.90943721
            ],
            [
              -77.07339456,
              38.90949499
            ]
          ]
        ]
      },
      id: "way/-63"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07342799,
          38.9094147
        ]
      },
      id: "node/-64"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07339048,
          38.90948975
        ]
      },
      id: "node/-65"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07335604,
          38.90945536
        ]
      },
      id: "node/-66"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "283"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "283",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07340613,
              38.90939781
            ],
            [
              -77.07333036,
              38.90933833
            ],
            [
              -77.07327588,
              38.9093699
            ],
            [
              -77.07333715,
              38.9094359
            ],
            [
              -77.07340613,
              38.90939781
            ]
          ]
        ]
      },
      id: "way/-67"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0733514,
          38.90935484
        ]
      },
      id: "node/-68"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07333163,
          38.90942995
        ]
      },
      id: "node/-69"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07329088,
          38.90938605
        ]
      },
      id: "node/-70"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "stairs"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Room",
        room: "stairs",
        level_id: "2",
        alt_name: null,
        category: "Room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07357109,
              38.90950739
            ],
            [
              -77.07355298,
              38.9094813
            ],
            [
              -77.07352817,
              38.90946147
            ],
            [
              -77.07345508,
              38.9095053
            ],
            [
              -77.07349397,
              38.90954548
            ],
            [
              -77.07357109,
              38.90950739
            ]
          ]
        ]
      },
      id: "way/-72"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          highway: "elevator",
          indoor: "room",
          room: "elevator"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        highway: "elevator",
        indoor: "Elevator",
        room: "elevator",
        level_id: "2",
        alt_name: null,
        category: "Elevator",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07349129,
              38.90954756
            ],
            [
              -77.07345693,
              38.90950721
            ],
            [
              -77.07342474,
              38.90952604
            ],
            [
              -77.07346028,
              38.90956465
            ],
            [
              -77.07349129,
              38.90954756
            ]
          ]
        ]
      },
      id: "way/-73"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          name: "261",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        name: "261",
        room: "class",
        level_id: "2",
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360595,
              38.90959661
            ],
            [
              -77.07358114,
              38.90956896
            ],
            [
              -77.07350571,
              38.90960939
            ],
            [
              -77.07353278,
              38.90963568
            ],
            [
              -77.07360595,
              38.90959661
            ]
          ]
        ]
      },
      id: "way/-74"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359323,
          38.90958243
        ]
      },
      id: "node/-75"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07352071,
          38.90962396
        ]
      },
      id: "node/-76"
    },
    {
      type: "Feature",
      id: "node/367143815",
      properties: {
        type: "node",
        id: "367143815",
        tags: {
          "addr:state": "DC",
          building: "university",
          ele: "45",
          "gnis:feature_id": "529193",
          name: "Gaston Hall",
          operator: "Georgetown University",
          room: "auditorium",
          source: "USGS Geonames",
          wikidata: "Q22097026",
          wikipedia: "en:Gaston Hall"
        },
        relations: [],
        meta: {
          timestamp: "2024-08-12T19:26:13Z",
          version: "6",
          changeset: "155164666",
          user: "Mateusz Konieczny - bot account",
          uid: "3199858"
        },
        own: {
          levels: [
            0
          ],
          fixed: true
        },
        "addr:state": "DC",
        building: "university",
        ele: "45",
        "gnis:feature_id": "529193",
        name: "Gaston Hall",
        operator: "Georgetown University",
        room: "auditorium",
        source: "USGS Geonames",
        wikidata: "Q22097026",
        wikipedia: "en:Gaston Hall",
        level_id: 2,
        level: "2",
        alt_name: null,
        category: "auditorium",
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0727556,
          38.9076116
        ]
      }
    },
    {
      type: "Feature",
      id: "node/1218540872",
      properties: {
        type: "node",
        id: "1218540872",
        tags: {
          amenity: "library",
          level: "3",
          name: "Blommer Science Library",
          owner: "Georgetown University",
          website: "https://www.library.georgetown.edu/blommer"
        },
        relations: [],
        meta: {
          timestamp: "2019-02-20T21:00:09Z",
          version: "3",
          changeset: "67407604",
          user: "b-jazz-bot",
          uid: "9451067"
        },
        own: {
          levels: [
            3
          ],
          fixed: true
        },
        amenity: "library",
        level: "2",
        name: "Blommer Science Library",
        owner: "Georgetown University",
        website: "https://www.library.georgetown.edu/blommer",
        level_id: 2,
        alt_name: null,
        category: "library",
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0734889,
          38.9095702
        ]
      }
    },
    {
      type: "Feature",
      id: "node/1488838046",
      properties: {
        type: "node",
        id: "1488838046",
        tags: {
          entrance: "yes",
          source: "survey"
        },
        relations: [],
        meta: {
          timestamp: "2014-08-17T05:21:01Z",
          version: "4",
          changeset: "24799834",
          user: "lxbarth",
          uid: "589596"
        },
        own: {
          levels: [
            0
          ],
          ways: [
            "way/67521384",
            "way/1113414783",
            "way/67521384",
            "way/67521384",
            "way/67521384",
            "way/1113414783",
            "way/67521384",
            "way/1113414783"
          ],
          fixed: true
        },
        entrance: "yes",
        source: "survey",
        level_id: 2,
        level: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0756618,
          38.9103664
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10099204505",
      properties: {
        type: "node",
        id: "10099204505",
        tags: {
          highway: "elevator",
          level: "2",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-10-24T18:51:41Z",
          version: "2",
          changeset: "128010527",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            2
          ],
          ways: [
            "way/1103652026",
            "way/1106664812",
            "way/1103652026",
            "way/1106664812",
            "way/1103652026",
            "way/1106664812",
            "way/1103652026",
            "way/1106664812",
            "way/1103652026",
            "way/1106664812"
          ],
          fixed: true
        },
        highway: "elevator",
        level: "2",
        wheelchair: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.073697,
          38.9100246
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10099231937",
      properties: {
        type: "node",
        id: "10099231937",
        tags: {
          highway: "elevator",
          level: "2",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-10-13T20:32:42Z",
          version: "1",
          changeset: "127489764",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            2
          ],
          ways: [
            "way/1103652041",
            "way/1103652041",
            "way/1103652041",
            "way/1103652041",
            "way/1103652041"
          ],
          fixed: true
        },
        highway: "elevator",
        level: "2",
        wheelchair: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0735636,
          38.9091809
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10167313751",
      properties: {
        type: "node",
        id: "10167313751",
        tags: {
          highway: "elevator",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-11-07T19:21:17Z",
          version: "1",
          changeset: "128610899",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            0
          ],
          ways: [
            "way/1111158584",
            "way/1111158584",
            "way/1111158584",
            "way/1111158584"
          ],
          fixed: true
        },
        highway: "elevator",
        wheelchair: "yes",
        level_id: 2,
        level: "2",
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0751233,
          38.9088465
        ]
      }
    },
    {
      type: "Feature",
      id: "node/10078216975",
      properties: {
        type: "node",
        id: "10078216975",
        tags: {
          automatic_door: "motion",
          door: "automatic",
          entrance: "main",
          level: "3",
          wheelchair: "yes"
        },
        relations: [],
        meta: {
          timestamp: "2022-10-05T18:46:16Z",
          version: "1",
          changeset: "127062336",
          user: "Albinoflea",
          uid: "4445759"
        },
        own: {
          levels: [
            3
          ],
          ways: [
            "way/69609516"
          ],
          fixed: true
        },
        automatic_door: "motion",
        door: "automatic",
        entrance: "main",
        level: "2",
        wheelchair: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0721662,
          38.9067335
        ]
      }
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "234"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "234",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07378188,
              38.90967011
            ],
            [
              -77.0737119,
              38.90969784
            ],
            [
              -77.0736938,
              38.9096754
            ],
            [
              -77.0737654,
              38.90964613
            ],
            [
              -77.07378188,
              38.90967011
            ]
          ]
        ]
      },
      id: "way/-1"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "232"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "232",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07376525,
              38.9096459
            ],
            [
              -77.07370021,
              38.90967214
            ],
            [
              -77.07369359,
              38.90967511
            ],
            [
              -77.073677,
              38.90964956
            ],
            [
              -77.07374845,
              38.90962139
            ],
            [
              -77.07376525,
              38.9096459
            ]
          ]
        ]
      },
      id: "way/-2"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "230"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "230",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0737482,
              38.90962107
            ],
            [
              -77.07373168,
              38.90959713
            ],
            [
              -77.0736601,
              38.90962661
            ],
            [
              -77.07367695,
              38.90964915
            ],
            [
              -77.0737482,
              38.90962107
            ]
          ]
        ]
      },
      id: "way/-3"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          name: "228",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        name: "228",
        room: "class",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07373154,
              38.90959687
            ],
            [
              -77.07371604,
              38.90957433
            ],
            [
              -77.07364401,
              38.90960274
            ],
            [
              -77.07365983,
              38.90962627
            ],
            [
              -77.07373154,
              38.90959687
            ]
          ]
        ]
      },
      id: "way/-4"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          name: "226",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        name: "226",
        room: "class",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07371579,
              38.90957396
            ],
            [
              -77.07364365,
              38.90960232
            ],
            [
              -77.07362792,
              38.90957861
            ],
            [
              -77.0736991,
              38.90954969
            ],
            [
              -77.07371579,
              38.90957396
            ]
          ]
        ]
      },
      id: "way/-5"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "224"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "224",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07369894,
              38.90954945
            ],
            [
              -77.07362773,
              38.9095783
            ],
            [
              -77.07360998,
              38.90955408
            ],
            [
              -77.07368273,
              38.90952587
            ],
            [
              -77.07369894,
              38.90954945
            ]
          ]
        ]
      },
      id: "way/-6"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "222"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "222",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368259,
              38.90952566
            ],
            [
              -77.07360977,
              38.90955376
            ],
            [
              -77.07359456,
              38.90953165
            ],
            [
              -77.07366714,
              38.90950246
            ],
            [
              -77.07368259,
              38.90952566
            ]
          ]
        ]
      },
      id: "way/-7"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07370541,
          38.90968979
        ]
      },
      id: "node/-8"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.073683,
          38.9096588
        ]
      },
      id: "node/-9"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07367163,
          38.90964203
        ]
      },
      id: "node/-10"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0736493,
          38.9096106
        ]
      },
      id: "node/-11"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07363917,
          38.90959557
        ]
      },
      id: "node/-12"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07361614,
          38.90956249
        ]
      },
      id: "node/-13"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07360572,
          38.90954787
        ]
      },
      id: "node/-14"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          name: "209",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        name: "209",
        room: "class",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07365996,
              38.90950489
            ],
            [
              -77.073643,
              38.90948143
            ],
            [
              -77.07359606,
              38.90950093
            ],
            [
              -77.07361126,
              38.90952421
            ],
            [
              -77.07365996,
              38.90950489
            ]
          ]
        ]
      },
      id: "way/-15"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "208"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "208",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364267,
              38.90948108
            ],
            [
              -77.07362507,
              38.90945866
            ],
            [
              -77.07358056,
              38.90948025
            ],
            [
              -77.07359588,
              38.90950055
            ],
            [
              -77.07364267,
              38.90948108
            ]
          ]
        ]
      },
      id: "way/-16"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "207"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "207",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07362452,
              38.90945814
            ],
            [
              -77.07360679,
              38.90943825
            ],
            [
              -77.07356522,
              38.90946473
            ],
            [
              -77.07357974,
              38.90947942
            ],
            [
              -77.07362452,
              38.90945814
            ]
          ]
        ]
      },
      id: "way/-17"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "206"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "206",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360625,
              38.90943769
            ],
            [
              -77.07358399,
              38.9094179
            ],
            [
              -77.07354544,
              38.90944555
            ],
            [
              -77.07356461,
              38.90946313
            ],
            [
              -77.07360625,
              38.90943769
            ]
          ]
        ]
      },
      id: "way/-18"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "205"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "205",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07358332,
              38.90941748
            ],
            [
              -77.07355977,
              38.90939898
            ],
            [
              -77.07352155,
              38.90942651
            ],
            [
              -77.07354464,
              38.90944516
            ],
            [
              -77.07358332,
              38.90941748
            ]
          ]
        ]
      },
      id: "way/-19"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "242"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "242",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07355889,
              38.90939869
            ],
            [
              -77.07350093,
              38.90943923
            ],
            [
              -77.07347788,
              38.90942162
            ],
            [
              -77.07353496,
              38.90937955
            ],
            [
              -77.07355889,
              38.90939869
            ]
          ]
        ]
      },
      id: "way/-20"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07360428,
          38.90951352
        ]
      },
      id: "node/-21"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359095,
          38.90949402
        ]
      },
      id: "node/-22"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07357303,
          38.90947263
        ]
      },
      id: "node/-23"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07355687,
          38.90945603
        ]
      },
      id: "node/-24"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07353245,
          38.90943531
        ]
      },
      id: "node/-25"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07348427,
          38.9094265
        ]
      },
      id: "node/-26"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "244"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "244",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07353444,
              38.90937927
            ],
            [
              -77.07351107,
              38.9093593
            ],
            [
              -77.07345424,
              38.90940101
            ],
            [
              -77.07347721,
              38.90941979
            ],
            [
              -77.07353444,
              38.90937927
            ]
          ]
        ]
      },
      id: "way/-28"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "246"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "246",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351048,
              38.90935897
            ],
            [
              -77.07348643,
              38.90933963
            ],
            [
              -77.0734291,
              38.90938183
            ],
            [
              -77.07345389,
              38.90940058
            ],
            [
              -77.07351048,
              38.90935897
            ]
          ]
        ]
      },
      id: "way/-29"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "248"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "248",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07348605,
              38.90933945
            ],
            [
              -77.07346204,
              38.90932003
            ],
            [
              -77.07340429,
              38.90936155
            ],
            [
              -77.07342887,
              38.90938152
            ],
            [
              -77.07348605,
              38.90933945
            ]
          ]
        ]
      },
      id: "way/-31"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "252"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "252",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07340366,
              38.90936093
            ],
            [
              -77.0734616,
              38.90931969
            ],
            [
              -77.07343681,
              38.90930017
            ],
            [
              -77.07338006,
              38.90934309
            ],
            [
              -77.07340366,
              38.90936093
            ]
          ]
        ]
      },
      id: "way/-32"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "254"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "254",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07337973,
              38.90934265
            ],
            [
              -77.07343633,
              38.90930006
            ],
            [
              -77.07341359,
              38.90928197
            ],
            [
              -77.073355,
              38.90932333
            ],
            [
              -77.07337973,
              38.90934265
            ]
          ]
        ]
      },
      id: "way/-33"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07347157,
          38.90941518
        ]
      },
      id: "node/-34"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07343605,
          38.90938709
        ]
      },
      id: "node/-35"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07342123,
          38.90937531
        ]
      },
      id: "node/-36"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07338677,
          38.90934816
        ]
      },
      id: "node/-37"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07337441,
          38.9093385
        ]
      },
      id: "node/-38"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "256"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "256",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07335429,
              38.90932271
            ],
            [
              -77.07341242,
              38.90928142
            ],
            [
              -77.07334188,
              38.90922283
            ],
            [
              -77.07326101,
              38.90928475
            ],
            [
              -77.07330412,
              38.90931563
            ],
            [
              -77.07332499,
              38.90930076
            ],
            [
              -77.07335429,
              38.90932271
            ]
          ]
        ]
      },
      id: "way/-39"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07334053,
          38.9093124
        ]
      },
      id: "node/-40"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "238"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "238",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.07378293,
              38.90967164
            ],
            [
              -77.07368324,
              38.90971075
            ],
            [
              -77.0737005,
              38.90973553
            ],
            [
              -77.07371693,
              38.90975901
            ],
            [
              -77.0738148,
              38.909718
            ]
          ]
        ]
      },
      id: "way/-41"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07369134,
          38.90970757
        ]
      },
      id: "node/-42"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          name: "240A",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        name: "240A",
        room: "class",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364267,
              38.90970084
            ],
            [
              -77.07362104,
              38.90967853
            ],
            [
              -77.07359288,
              38.90969327
            ],
            [
              -77.07360327,
              38.9097054
            ],
            [
              -77.07359975,
              38.90970788
            ],
            [
              -77.07361115,
              38.90971936
            ],
            [
              -77.07364267,
              38.90970084
            ]
          ]
        ]
      },
      id: "way/-43"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07362499,
          38.90971123
        ]
      },
      id: "node/-44"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Room",
        level_id: 2,
        alt_name: null,
        category: "Room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07368072,
              38.90968779
            ],
            [
              -77.07366027,
              38.90965596
            ],
            [
              -77.07362104,
              38.90967853
            ],
            [
              -77.07364887,
              38.90970592
            ],
            [
              -77.07368072,
              38.90968779
            ]
          ]
        ]
      },
      id: "way/-45"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "261A"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "261A",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07364753,
              38.90966392
            ],
            [
              -77.07359321,
              38.90960391
            ],
            [
              -77.07353387,
              38.90963679
            ],
            [
              -77.07358684,
              38.9096947
            ],
            [
              -77.07364753,
              38.90966392
            ]
          ]
        ]
      },
      id: "way/-46"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07356214,
          38.9096677
        ]
      },
      id: "node/-47"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "toilets",
          name: "Toilet"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Room",
        room: "toilets",
        name: "Toilet",
        level_id: 2,
        alt_name: null,
        category: "Room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07358886,
              38.90976749
            ],
            [
              -77.07357142,
              38.90974871
            ],
            [
              -77.07358181,
              38.9097414
            ],
            [
              -77.07357712,
              38.90973514
            ],
            [
              -77.07349864,
              38.90978055
            ],
            [
              -77.07352164,
              38.90980489
            ],
            [
              -77.07358886,
              38.90976749
            ]
          ]
        ]
      },
      id: "way/-48"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "264"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "264",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07357586,
              38.90973423
            ],
            [
              -77.07351476,
              38.90967057
            ],
            [
              -77.07343732,
              38.90971562
            ],
            [
              -77.07349845,
              38.90978035
            ],
            [
              -77.07357586,
              38.90973423
            ]
          ]
        ]
      },
      id: "way/-49"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "262"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "262",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07351308,
              38.90966933
            ],
            [
              -77.07343161,
              38.90958291
            ],
            [
              -77.07335567,
              38.90962661
            ],
            [
              -77.07343613,
              38.90971437
            ],
            [
              -77.07351308,
              38.90966933
            ]
          ]
        ]
      },
      id: "way/-50"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07356977,
          38.90972789
        ]
      },
      id: "node/-51"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07358278,
          38.90976094
        ]
      },
      id: "node/-52"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07350729,
          38.90966319
        ]
      },
      id: "node/-53"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "282"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "282",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07339339,
              38.90954261
            ],
            [
              -77.07328744,
              38.90943134
            ],
            [
              -77.07321201,
              38.90947519
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.07339339,
              38.90954261
            ]
          ]
        ]
      },
      id: "way/-55"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07338491,
          38.90953375
        ]
      },
      id: "node/-56"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07329404,
          38.90943872
        ]
      },
      id: "node/-57"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "284"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "284",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0732865,
              38.90943101
            ],
            [
              -77.07324838,
              38.90939024
            ],
            [
              -77.07317347,
              38.90943373
            ],
            [
              -77.07321064,
              38.90947372
            ],
            [
              -77.0732865,
              38.90943101
            ]
          ]
        ]
      },
      id: "way/-58"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "toilets",
          name: "Toilet"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Room",
        room: "toilets",
        name: "Toilet",
        level_id: 2,
        alt_name: null,
        category: "Room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07317208,
              38.90943223
            ],
            [
              -77.07323615,
              38.90939403
            ],
            [
              -77.07321268,
              38.90936963
            ],
            [
              -77.07314956,
              38.90940799
            ],
            [
              -77.07317208,
              38.90943223
            ]
          ]
        ]
      },
      id: "way/-59"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07325405,
          38.90939631
        ]
      },
      id: "node/-60"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0732212,
          38.90937849
        ]
      },
      id: "node/-61"
    },
    {
      type: "Feature",
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.0735299,
              38.9098069
            ],
            [
              -77.0735471,
              38.9098269
            ],
            [
              -77.0735593,
              38.9098412
            ],
            [
              -77.0735742,
              38.9098323
            ],
            [
              -77.0736484,
              38.9097878
            ],
            [
              -77.0736696,
              38.9097789
            ],
            [
              -77.0738148,
              38.909718
            ],
            [
              -77.073669,
              38.9095059
            ],
            [
              -77.0737392,
              38.909472
            ],
            [
              -77.073688,
              38.9094069
            ],
            [
              -77.0736214,
              38.9093478
            ],
            [
              -77.0735616,
              38.9093956
            ],
            [
              -77.0733444,
              38.9092209
            ],
            [
              -77.0732467,
              38.9092957
            ],
            [
              -77.0732088,
              38.9093248
            ],
            [
              -77.0731184,
              38.9093744
            ],
            [
              -77.0731426,
              38.9094005
            ],
            [
              -77.0733145,
              38.9095855
            ],
            [
              -77.0733092,
              38.9095886
            ],
            [
              -77.0732985,
              38.9095774
            ],
            [
              -77.0732577,
              38.9096012
            ],
            [
              -77.0732922,
              38.9096374
            ],
            [
              -77.0733222,
              38.9096689
            ],
            [
              -77.0733613,
              38.9096462
            ],
            [
              -77.073352,
              38.9096365
            ],
            [
              -77.0733589,
              38.9096326
            ],
            [
              -77.0735258,
              38.9098093
            ],
            [
              -77.0735299,
              38.9098069
            ]
          ]
        ]
      },
      properties: {
        tags: {
          indoor: "level",
          level: "0"
        },
        own: {
          "new": true,
          levels: [
            0
          ]
        },
        indoor: "level",
        level: "2",
        level_id: 2,
        alt_name: null,
        category: "level",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "level",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#e8e8e8",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      id: "way/-62"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "281"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "281",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07339456,
              38.90949499
            ],
            [
              -77.07347251,
              38.90945234
            ],
            [
              -77.07340747,
              38.90939898
            ],
            [
              -77.07337411,
              38.90941777
            ],
            [
              -77.07335802,
              38.90942651
            ],
            [
              -77.07333773,
              38.90943721
            ],
            [
              -77.07339456,
              38.90949499
            ]
          ]
        ]
      },
      id: "way/-63"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07342799,
          38.9094147
        ]
      },
      id: "node/-64"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07339048,
          38.90948975
        ]
      },
      id: "node/-65"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07335604,
          38.90945536
        ]
      },
      id: "node/-66"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "class",
          name: "283"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        room: "class",
        name: "283",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07340613,
              38.90939781
            ],
            [
              -77.07333036,
              38.90933833
            ],
            [
              -77.07327588,
              38.9093699
            ],
            [
              -77.07333715,
              38.9094359
            ],
            [
              -77.07340613,
              38.90939781
            ]
          ]
        ]
      },
      id: "way/-67"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.0733514,
          38.90935484
        ]
      },
      id: "node/-68"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07333163,
          38.90942995
        ]
      },
      id: "node/-69"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07329088,
          38.90938605
        ]
      },
      id: "node/-70"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          room: "stairs"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Room",
        room: "stairs",
        level_id: 2,
        alt_name: null,
        category: "Room",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07357109,
              38.90950739
            ],
            [
              -77.07355298,
              38.9094813
            ],
            [
              -77.07352817,
              38.90946147
            ],
            [
              -77.07345508,
              38.9095053
            ],
            [
              -77.07349397,
              38.90954548
            ],
            [
              -77.07357109,
              38.90950739
            ]
          ]
        ]
      },
      id: "way/-72"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          highway: "elevator",
          indoor: "room",
          room: "elevator"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        highway: "elevator",
        indoor: "Elevator",
        room: "elevator",
        level_id: 2,
        alt_name: null,
        category: "Elevator",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07349129,
              38.90954756
            ],
            [
              -77.07345693,
              38.90950721
            ],
            [
              -77.07342474,
              38.90952604
            ],
            [
              -77.07346028,
              38.90956465
            ],
            [
              -77.07349129,
              38.90954756
            ]
          ]
        ]
      },
      id: "way/-73"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          indoor: "room",
          name: "261",
          room: "class"
        },
        own: {
          "new": true,
          levels: [
            2
          ]
        },
        level: "2",
        indoor: "Classroom",
        name: "261",
        room: "class",
        level_id: 2,
        alt_name: null,
        category: "Classroom",
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "unit",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#f3f3f3",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1,
        extrude: true,
        "extrude-height": 2.5
      },
      geometry: {
        type: "Polygon",
        coordinates: [
          [
            [
              -77.07360595,
              38.90959661
            ],
            [
              -77.07358114,
              38.90956896
            ],
            [
              -77.07350571,
              38.90960939
            ],
            [
              -77.07353278,
              38.90963568
            ],
            [
              -77.07360595,
              38.90959661
            ]
          ]
        ]
      },
      id: "way/-74"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359323,
          38.90958243
        ]
      },
      id: "node/-75"
    },
    {
      type: "Feature",
      properties: {
        tags: {
          level: "2",
          door: "yes"
        },
        own: {
          "new": true,
          levels: [
            2
          ],
          onBuildingContour: false,
          fixed: true
        },
        level: "2",
        door: "yes",
        level_id: 2,
        alt_name: null,
        category: null,
        indoor: null,
        restriction: null,
        accessibility: null,
        display_point: null,
        feature_type: "corridor",
        show: "true",
        area: 0,
        building_id: "reiss",
        fill: "#d6d5d1",
        stroke: "#a6a5a2",
        "stroke-width": 1,
        "stroke-opacity": 1
      },
      geometry: {
        type: "Point",
        coordinates: [
          -77.07352071,
          38.90962396
        ]
      },
      id: "node/-76"
    }
  ]
};
const indoor_routes = {
  type: "FeatureCollection",
  features: [
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07369677999999,
            38.91127125
          ],
          [
            -77.07349839,
            38.91127125
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91110445
          ],
          [
            -77.07359758499999,
            38.91143805
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91142266555556
          ],
          [
            -77.0735006211111,
            38.91142266555556
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "101"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911385816666666
          ],
          [
            -77.07348873000001,
            38.911385816666666
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "102"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07350316799999,
            38.91127125
          ],
          [
            -77.07350316799999,
            38.911358506000006
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "103"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07350481999998,
            38.91127125
          ],
          [
            -77.07350481999998,
            38.91132749
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "104"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073517324,
            38.91127125
          ],
          [
            -77.073517324,
            38.911296676000006
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "105"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07351828499999,
            38.91127125
          ],
          [
            -77.07351828499999,
            38.911263553333335
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "106"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073520006,
            38.91127125
          ],
          [
            -77.073520006,
            38.911236362000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "107"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07350673166667,
            38.91127125
          ],
          [
            -77.07350673166667,
            38.91120723833333
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "108"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911175366
          ],
          [
            -77.073512638,
            38.911175366
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "109"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911144686
          ],
          [
            -77.073514242,
            38.911144686
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "109"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911106322222224
          ],
          [
            -77.07352622555555,
            38.911106322222224
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "111"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911081662
          ],
          [
            -77.073580622,
            38.911081662
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "112"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911082786
          ],
          [
            -77.07361965599999,
            38.911082786
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "113"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91109180625
          ],
          [
            -77.07366392375,
            38.91109180625
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "114"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07372493199999,
            38.91127125
          ],
          [
            -77.07372493199999,
            38.911210168000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "118"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07372608,
            38.91127125
          ],
          [
            -77.07372608,
            38.91118006
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "117"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073727138,
            38.91127125
          ],
          [
            -77.073727138,
            38.911150168
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "116"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911118626000004
          ],
          [
            -77.07372859799999,
            38.911118626000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "115"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073712592,
            38.91127125
          ],
          [
            -77.073712592,
            38.911264284
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "120"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371118799999,
            38.91127125
          ],
          [
            -77.07371118799999,
            38.911300234
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "112"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073720208,
            38.91127125
          ],
          [
            -77.073720208,
            38.911324782
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "122"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371923,
            38.91127125
          ],
          [
            -77.07371923,
            38.911361652
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "123"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371810599999,
            38.91127125
          ],
          [
            -77.07371810599999,
            38.911386276
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "124"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911419814
          ],
          [
            -77.073716406,
            38.911419814
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "125"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91145100000001
          ],
          [
            -77.073643702,
            38.91145100000001
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "126"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911449868000005
          ],
          [
            -77.073603052,
            38.911449868000005
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "127"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911448146000005
          ],
          [
            -77.07356211800001,
            38.911448146000005
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "128"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371348,
            38.91127125
          ],
          [
            -77.07371348,
            38.91123962200001
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "119"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07369677999999,
            38.91127125
          ],
          [
            -77.07349839,
            38.91127125
          ]
        ]
      },
      properties: {
        level: 2,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91110445
          ],
          [
            -77.07359758499999,
            38.91143805
          ]
        ]
      },
      properties: {
        level: 2,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91142366555556
          ],
          [
            -77.0734986211111,
            38.91142366555556
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "201"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91138681666666
          ],
          [
            -77.07348673000001,
            38.91138681666666
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "202"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07350116799999,
            38.91127125
          ],
          [
            -77.07350116799999,
            38.911359506000004
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "203"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07350281999999,
            38.91127125
          ],
          [
            -77.07350281999999,
            38.911328489999995
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "204"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073515324,
            38.91127125
          ],
          [
            -77.073515324,
            38.911297676000004
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "205"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073516285,
            38.91127125
          ],
          [
            -77.073516285,
            38.91126455333333
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "206"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073518006,
            38.91127125
          ],
          [
            -77.073518006,
            38.911237362
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "207"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07350473166667,
            38.91127125
          ],
          [
            -77.07350473166667,
            38.91120823833333
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "208"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911176366
          ],
          [
            -77.073510638,
            38.911176366
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "209"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911145686
          ],
          [
            -77.073512242,
            38.911145686
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "209"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91110732222222
          ],
          [
            -77.07352422555556,
            38.91110732222222
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "211"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911082662
          ],
          [
            -77.073578622,
            38.911082662
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "212"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911083786
          ],
          [
            -77.073617656,
            38.911083786
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "213"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91109280625
          ],
          [
            -77.07366192375001,
            38.91109280625
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "214"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073722932,
            38.91127125
          ],
          [
            -77.073722932,
            38.911211168
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "218"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07372408,
            38.91127125
          ],
          [
            -77.07372408,
            38.91118106
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "217"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073725138,
            38.91127125
          ],
          [
            -77.073725138,
            38.911151167999996
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "216"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911119626
          ],
          [
            -77.073726598,
            38.911119626
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "215"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371059200001,
            38.91127125
          ],
          [
            -77.07371059200001,
            38.911265283999995
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "220"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073709188,
            38.91127125
          ],
          [
            -77.073709188,
            38.911301234
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "212"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073718208,
            38.91127125
          ],
          [
            -77.073718208,
            38.911325782
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "222"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371723,
            38.91127125
          ],
          [
            -77.07371723,
            38.911362651999994
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "223"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371610599999,
            38.91127125
          ],
          [
            -77.07371610599999,
            38.911387276
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "224"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911420813999996
          ],
          [
            -77.07371440600001,
            38.911420813999996
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "225"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911452000000004
          ],
          [
            -77.073641702,
            38.911452000000004
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "226"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911450868
          ],
          [
            -77.073601052,
            38.911450868
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "227"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911449146
          ],
          [
            -77.07356011800002,
            38.911449146
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "228"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371148,
            38.91127125
          ],
          [
            -77.07371148,
            38.91124062200001
          ]
        ]
      },
      properties: {
        level: 2,
        type: "room_connection",
        room: "219"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07369677999999,
            38.91127125
          ],
          [
            -77.07349839,
            38.91127125
          ]
        ]
      },
      properties: {
        level: 3,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91110445
          ],
          [
            -77.07359758499999,
            38.91143805
          ]
        ]
      },
      properties: {
        level: 3,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91142466555556
          ],
          [
            -77.0734966211111,
            38.91142466555556
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "301"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91138781666666
          ],
          [
            -77.07348473000002,
            38.91138781666666
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "302"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073499168,
            38.91127125
          ],
          [
            -77.073499168,
            38.911360506
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "303"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07350081999999,
            38.91127125
          ],
          [
            -77.07350081999999,
            38.91132948999999
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "304"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073513324,
            38.91127125
          ],
          [
            -77.073513324,
            38.911298676
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "305"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073514285,
            38.91127125
          ],
          [
            -77.073514285,
            38.91126555333333
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "306"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073516006,
            38.91127125
          ],
          [
            -77.073516006,
            38.911238362
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "307"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07350273166668,
            38.91127125
          ],
          [
            -77.07350273166668,
            38.91120923833333
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "308"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911177366
          ],
          [
            -77.073508638,
            38.911177366
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "309"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911146685999995
          ],
          [
            -77.07351024200001,
            38.911146685999995
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "309"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91110832222222
          ],
          [
            -77.07352222555556,
            38.91110832222222
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "311"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911083661999996
          ],
          [
            -77.073576622,
            38.911083661999996
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "312"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911084785999996
          ],
          [
            -77.073615656,
            38.911084785999996
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "313"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911093806249994
          ],
          [
            -77.07365992375001,
            38.911093806249994
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "314"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073720932,
            38.91127125
          ],
          [
            -77.073720932,
            38.911212168
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "318"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07372208000001,
            38.91127125
          ],
          [
            -77.07372208000001,
            38.911182059999994
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "317"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073723138,
            38.91127125
          ],
          [
            -77.073723138,
            38.911152167999994
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "316"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911120626
          ],
          [
            -77.073724598,
            38.911120626
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "315"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07370859200002,
            38.91127125
          ],
          [
            -77.07370859200002,
            38.91126628399999
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "320"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073707188,
            38.91127125
          ],
          [
            -77.073707188,
            38.911302234
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "312"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371620800001,
            38.91127125
          ],
          [
            -77.07371620800001,
            38.911326781999996
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "322"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371523,
            38.91127125
          ],
          [
            -77.07371523,
            38.91136365199999
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "323"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911388276
          ],
          [
            -77.073714106,
            38.911388276
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "324"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91142181399999
          ],
          [
            -77.07371240600001,
            38.91142181399999
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "325"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911453
          ],
          [
            -77.07363970200001,
            38.911453
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "326"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911451868
          ],
          [
            -77.073599052,
            38.911451868
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "327"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911450146
          ],
          [
            -77.07355811800002,
            38.911450146
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "328"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07370948,
            38.91127125
          ],
          [
            -77.07370948,
            38.911241622000006
          ]
        ]
      },
      properties: {
        level: 3,
        type: "room_connection",
        room: "319"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07369677999999,
            38.91127125
          ],
          [
            -77.07349839,
            38.91127125
          ]
        ]
      },
      properties: {
        level: 4,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91110445
          ],
          [
            -77.07359758499999,
            38.91143805
          ]
        ]
      },
      properties: {
        level: 4,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91142566555556
          ],
          [
            -77.0734946211111,
            38.91142566555556
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "401"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911388816666665
          ],
          [
            -77.07348273000001,
            38.911388816666665
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "402"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07349716799999,
            38.91127125
          ],
          [
            -77.07349716799999,
            38.911361506000006
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "403"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07349881999998,
            38.91127125
          ],
          [
            -77.07349881999998,
            38.91133049
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "404"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073511324,
            38.91127125
          ],
          [
            -77.073511324,
            38.911299676000006
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "405"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07351228499999,
            38.91127125
          ],
          [
            -77.07351228499999,
            38.911266553333334
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "406"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073514006,
            38.91127125
          ],
          [
            -77.073514006,
            38.911239362
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "407"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07350073166667,
            38.91127125
          ],
          [
            -77.07350073166667,
            38.91121023833333
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "408"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911178366
          ],
          [
            -77.073506638,
            38.911178366
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "409"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911147686
          ],
          [
            -77.073508242,
            38.911147686
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "409"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911109322222224
          ],
          [
            -77.07352022555555,
            38.911109322222224
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "411"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911084662
          ],
          [
            -77.073574622,
            38.911084662
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "412"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911085786
          ],
          [
            -77.07361365599999,
            38.911085786
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "413"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91109480625
          ],
          [
            -77.07365792375,
            38.91109480625
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "414"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371893199999,
            38.91127125
          ],
          [
            -77.07371893199999,
            38.911213168
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "418"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07372008,
            38.91127125
          ],
          [
            -77.07372008,
            38.91118306
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "417"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073721138,
            38.91127125
          ],
          [
            -77.073721138,
            38.911153168
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "416"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911121626
          ],
          [
            -77.07372259799999,
            38.911121626
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "415"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07370659200001,
            38.91127125
          ],
          [
            -77.07370659200001,
            38.911267284
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "420"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07370518799999,
            38.91127125
          ],
          [
            -77.07370518799999,
            38.911303234
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "412"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073714208,
            38.91127125
          ],
          [
            -77.073714208,
            38.911327782
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "422"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371323,
            38.91127125
          ],
          [
            -77.07371323,
            38.911364651999996
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "423"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911389276
          ],
          [
            -77.07371210599999,
            38.911389276
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "424"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911422814
          ],
          [
            -77.073710406,
            38.911422814
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "425"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911454000000006
          ],
          [
            -77.073637702,
            38.911454000000006
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "426"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911452868000005
          ],
          [
            -77.073597052,
            38.911452868000005
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "427"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911451146000005
          ],
          [
            -77.07355611800001,
            38.911451146000005
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "428"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07370748,
            38.91127125
          ],
          [
            -77.07370748,
            38.91124262200001
          ]
        ]
      },
      properties: {
        level: 4,
        type: "room_connection",
        room: "419"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07369677999999,
            38.91127125
          ],
          [
            -77.07349839,
            38.91127125
          ]
        ]
      },
      properties: {
        level: 5,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91110445
          ],
          [
            -77.07359758499999,
            38.91143805
          ]
        ]
      },
      properties: {
        level: 5,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91142666555556
          ],
          [
            -77.0734926211111,
            38.91142666555556
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "501"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91138981666666
          ],
          [
            -77.07348073000001,
            38.91138981666666
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "502"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073495168,
            38.91127125
          ],
          [
            -77.073495168,
            38.911362506
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "503"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07349681999999,
            38.91127125
          ],
          [
            -77.07349681999999,
            38.911331489999995
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "504"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073509324,
            38.91127125
          ],
          [
            -77.073509324,
            38.911300676
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "505"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073510285,
            38.91127125
          ],
          [
            -77.073510285,
            38.91126755333333
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "506"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073512006,
            38.91127125
          ],
          [
            -77.073512006,
            38.911240362
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "507"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07349873166667,
            38.91127125
          ],
          [
            -77.07349873166667,
            38.91121123833333
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "508"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073504638,
            38.91127125
          ],
          [
            -77.073504638,
            38.911179366
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "509"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911148686
          ],
          [
            -77.07350624200001,
            38.911148686
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "509"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.91111032222222
          ],
          [
            -77.07351822555556,
            38.91111032222222
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "511"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911085662
          ],
          [
            -77.073572622,
            38.911085662
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "512"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911086786
          ],
          [
            -77.073611656,
            38.911086786
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "513"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911095806249996
          ],
          [
            -77.07365592375001,
            38.911095806249996
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "514"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073716932,
            38.91127125
          ],
          [
            -77.073716932,
            38.911214168
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "518"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371808,
            38.91127125
          ],
          [
            -77.07371808,
            38.91118406
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "517"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073719138,
            38.91127125
          ],
          [
            -77.073719138,
            38.911154167999996
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "516"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911122626
          ],
          [
            -77.073720598,
            38.911122626
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "515"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07370459200001,
            38.91127125
          ],
          [
            -77.07370459200001,
            38.911268283999995
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "520"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073703188,
            38.91127125
          ],
          [
            -77.073703188,
            38.911304234
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "512"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073712208,
            38.91127125
          ],
          [
            -77.073712208,
            38.911328782
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "522"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371123,
            38.91127125
          ],
          [
            -77.07371123,
            38.91136565199999
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "523"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911390276
          ],
          [
            -77.073710106,
            38.911390276
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "524"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911423813999996
          ],
          [
            -77.07370840600001,
            38.911423813999996
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "525"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911455000000004
          ],
          [
            -77.073635702,
            38.911455000000004
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "526"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911453868
          ],
          [
            -77.073595052,
            38.911453868
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "527"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359758499999,
            38.911452146
          ],
          [
            -77.07355411800002,
            38.911452146
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "528"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07370548,
            38.91127125
          ],
          [
            -77.07370548,
            38.91124362200001
          ]
        ]
      },
      properties: {
        level: 5,
        type: "room_connection",
        room: "519"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07369478,
            38.911272249999996
          ],
          [
            -77.07349639,
            38.911272249999996
          ]
        ]
      },
      properties: {
        level: 6,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.91110545
          ],
          [
            -77.07359558499999,
            38.91143905
          ]
        ]
      },
      properties: {
        level: 6,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.91142766555556
          ],
          [
            -77.0734906211111,
            38.91142766555556
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "601"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.91139081666666
          ],
          [
            -77.07347873000002,
            38.91139081666666
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "602"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073493168,
            38.911272249999996
          ],
          [
            -77.073493168,
            38.911363506
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "603"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07349482,
            38.911272249999996
          ],
          [
            -77.07349482,
            38.91133248999999
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "604"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073507324,
            38.911272249999996
          ],
          [
            -77.073507324,
            38.911301676
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "605"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073508285,
            38.911272249999996
          ],
          [
            -77.073508285,
            38.91126855333333
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "606"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073510006,
            38.911272249999996
          ],
          [
            -77.073510006,
            38.911241362
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "607"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07349673166668,
            38.911272249999996
          ],
          [
            -77.07349673166668,
            38.91121223833333
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "608"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07350263800001,
            38.911272249999996
          ],
          [
            -77.07350263800001,
            38.911180365999996
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "609"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.911149685999995
          ],
          [
            -77.07350424200001,
            38.911149685999995
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "609"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.91111132222222
          ],
          [
            -77.07351622555557,
            38.91111132222222
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "611"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.911086661999995
          ],
          [
            -77.073570622,
            38.911086661999995
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "612"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.911087785999996
          ],
          [
            -77.073609656,
            38.911087785999996
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "613"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.911096806249994
          ],
          [
            -77.07365392375002,
            38.911096806249994
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "614"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073714932,
            38.911272249999996
          ],
          [
            -77.073714932,
            38.911215168
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "618"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371608000001,
            38.911272249999996
          ],
          [
            -77.07371608000001,
            38.911185059999994
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "617"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073717138,
            38.911272249999996
          ],
          [
            -77.073717138,
            38.91115516799999
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "616"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.911123626
          ],
          [
            -77.073718598,
            38.911123626
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "615"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07370259200002,
            38.911272249999996
          ],
          [
            -77.07370259200002,
            38.91126928399999
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "620"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073701188,
            38.911272249999996
          ],
          [
            -77.073701188,
            38.911305234
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "612"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07371020800001,
            38.911272249999996
          ],
          [
            -77.07371020800001,
            38.911329781999996
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "622"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07370923,
            38.911272249999996
          ],
          [
            -77.07370923,
            38.91136665199999
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "623"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.911391275999996
          ],
          [
            -77.073708106,
            38.911391275999996
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "624"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.91142481399999
          ],
          [
            -77.07370640600001,
            38.91142481399999
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "625"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.911456
          ],
          [
            -77.07363370200001,
            38.911456
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "626"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.911454868
          ],
          [
            -77.073593052,
            38.911454868
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "627"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359558499999,
            38.911453146
          ],
          [
            -77.07355211800002,
            38.911453146
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "628"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07370348,
            38.911272249999996
          ],
          [
            -77.07370348,
            38.911244622000005
          ]
        ]
      },
      properties: {
        level: 6,
        type: "room_connection",
        room: "619"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073347017,
            38.909301905
          ],
          [
            -77.07323147299999,
            38.909301905
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360049500001,
            38.909518864999995
          ],
          [
            -77.073427575,
            38.909518864999995
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07359487,
            38.909379969
          ],
          [
            -77.07359487,
            38.909646281
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073759489,
            38.909726015000004
          ],
          [
            -77.073590201,
            38.909726015000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073589298,
            38.909534945000004
          ],
          [
            -77.073241042,
            38.909534945000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073481442,
            38.909300224999996
          ],
          [
            -77.073327538,
            38.909300224999996
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073347017,
            38.909301905
          ],
          [
            -77.073327538,
            38.909300224999996
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360049500001,
            38.909518864999995
          ],
          [
            -77.073589298,
            38.909534945000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073289245,
            38.909301905
          ],
          [
            -77.07340449,
            38.909300224999996
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073514035,
            38.909518864999995
          ],
          [
            -77.07359487,
            38.909513125000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073514035,
            38.909518864999995
          ],
          [
            -77.07341517,
            38.909534945000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "corridor"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07349874,
            38.90965847
          ],
          [
            -77.07359487,
            38.909646281
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "172A"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07340233,
            38.90955685
          ],
          [
            -77.07341517,
            38.909534945000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "172A"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07338096,
            38.90953433
          ],
          [
            -77.07341517,
            38.909534945000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "172"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07323293,
            38.9093783
          ],
          [
            -77.07323147299999,
            38.909301905
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "154"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07353292,
            38.90969449
          ],
          [
            -77.073590201,
            38.909726015000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "172A"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07346771,
            38.90946572
          ],
          [
            -77.073427575,
            38.909518864999995
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "172"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07345101,
            38.90947552
          ],
          [
            -77.073427575,
            38.909518864999995
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "172"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07356987,
            38.90958643
          ],
          [
            -77.073589298,
            38.909534945000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "172A"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.0736441,
            38.90952573
          ],
          [
            -77.07360049500001,
            38.909518864999995
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "172"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07362674,
            38.90947999
          ],
          [
            -77.07359487,
            38.909513125000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "172"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07358601,
            38.90943903
          ],
          [
            -77.07359487,
            38.909379969
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "152"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07376379,
            38.90969909
          ],
          [
            -77.073759489,
            38.909726015000004
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "172A"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07369923,
            38.90963064
          ],
          [
            -77.07359487,
            38.909646281
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "172A"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07352955,
            38.90940418
          ],
          [
            -77.07359487,
            38.909379969
          ]
        ]
      },
      properties: {
        level: 1,
        type: "room_connection",
        room: "152"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073384002,
            38.909419724
          ],
          [
            -77.07363645400001,
            38.909649308
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073384002,
            38.909419724
          ],
          [
            -77.07343444415551,
            38.90950118810136
          ],
          [
            -77.07338015308201,
            38.90953510811207
          ],
          [
            -77.073303898,
            38.90949408
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073384002,
            38.909419724
          ],
          [
            -77.07343756482604,
            38.90950198355921
          ],
          [
            -77.07340711555452,
            38.90952185990591
          ],
          [
            -77.07339571865298,
            38.90952351133774
          ],
          [
            -77.07337263459328,
            38.90950484706107
          ],
          [
            -77.0732491673662,
            38.909375658248706
          ],
          [
            -77.07321071443371,
            38.90936482441637
          ],
          [
            -77.073185052,
            38.909389227999995
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073384002,
            38.909419724
          ],
          [
            -77.07351166722445,
            38.90954077639964
          ],
          [
            -77.07350759513336,
            38.90960317316916
          ],
          [
            -77.07346804333334,
            38.90965922666667
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073384002,
            38.909419724
          ],
          [
            -77.07352079759949,
            38.90954371121714
          ],
          [
            -77.07351333865927,
            38.90960987073768
          ],
          [
            -77.07353261570412,
            38.90966450946391
          ],
          [
            -77.07354827833333,
            38.90974552666667
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073384002,
            38.909419724
          ],
          [
            -77.07344628576554,
            38.909499415511874
          ],
          [
            -77.07341398984877,
            38.9095233447764
          ],
          [
            -77.07339999,
            38.90958729
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073384002,
            38.909419724
          ],
          [
            -77.0734969132333,
            38.90945932405569
          ],
          [
            -77.07353123575531,
            38.90944136872636
          ],
          [
            -77.07353093654999,
            38.90940962102698
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073384002,
            38.909419724
          ],
          [
            -77.07354546096668,
            38.909521246943655
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073384002,
            38.909419724
          ],
          [
            -77.07357052087112,
            38.90955783372618
          ],
          [
            -77.07362523764137,
            38.909543786704916
          ],
          [
            -77.07374295857143,
            38.909652044285714
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073384002,
            38.909419724
          ],
          [
            -77.07357042994956,
            38.9095588414954
          ],
          [
            -77.07362329520859,
            38.90955505102673
          ],
          [
            -77.07367411242323,
            38.90961418868707
          ],
          [
            -77.07372696652845,
            38.90967962680335
          ],
          [
            -77.07378542199999,
            38.909708726000005
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07363645400001,
            38.909649308
          ],
          [
            -77.07355782684866,
            38.909569620249954
          ],
          [
            -77.07358595438384,
            38.909555343300326
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07363645400001,
            38.909649308
          ],
          [
            -77.07355085649534,
            38.90957719581806
          ],
          [
            -77.07349660890341,
            38.90960774667741
          ],
          [
            -77.07354786260109,
            38.909665126285375
          ],
          [
            -77.07354827833333,
            38.90974552666667
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07363645400001,
            38.909649308
          ],
          [
            -77.07353968686643,
            38.90957445534616
          ],
          [
            -77.07349744808334,
            38.909608391175794
          ],
          [
            -77.07346804333334,
            38.90965922666667
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07363645400001,
            38.909649308
          ],
          [
            -77.07350182614842,
            38.909573442339536
          ],
          [
            -77.07347531078172,
            38.90958076794706
          ],
          [
            -77.07339999,
            38.90958729
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07363645400001,
            38.909649308
          ],
          [
            -77.07351435981953,
            38.909569979564054
          ],
          [
            -77.07345775521355,
            38.90956463603388
          ],
          [
            -77.073389193929,
            38.90952525088693
          ],
          [
            -77.073303898,
            38.90949408
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07363645400001,
            38.909649308
          ],
          [
            -77.07343830739353,
            38.90956164062109
          ],
          [
            -77.0733687863565,
            38.90950426179245
          ],
          [
            -77.07323597009103,
            38.9093614011897
          ],
          [
            -77.073185052,
            38.909389227999995
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07363645400001,
            38.909649308
          ],
          [
            -77.07355905746205,
            38.9095718326771
          ],
          [
            -77.07362601255755,
            38.90954956839724
          ],
          [
            -77.07374295857143,
            38.909652044285714
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07363645400001,
            38.909649308
          ],
          [
            -77.07358301763787,
            38.9095735741212
          ],
          [
            -77.07362297116445,
            38.909546311021614
          ],
          [
            -77.07371986359608,
            38.909676304166936
          ],
          [
            -77.07378542199999,
            38.909708726000005
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07363645400001,
            38.909649308
          ],
          [
            -77.07352390125062,
            38.90953051039557
          ],
          [
            -77.07352759685706,
            38.90950139702966
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07354827833333,
            38.90974552666667
          ],
          [
            -77.07354244972834,
            38.909679231731474
          ],
          [
            -77.07350427484381,
            38.90964338208036
          ],
          [
            -77.07346804333334,
            38.90965922666667
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07354827833333,
            38.90974552666667
          ],
          [
            -77.07355087656501,
            38.90966675154246
          ],
          [
            -77.07342325667751,
            38.90954291203158
          ],
          [
            -77.07339999,
            38.90958729
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07354827833333,
            38.90974552666667
          ],
          [
            -77.07355011604682,
            38.90966557751494
          ],
          [
            -77.0733614207905,
            38.90949444396705
          ],
          [
            -77.073303898,
            38.90949408
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07354827833333,
            38.90974552666667
          ],
          [
            -77.07355146957295,
            38.909665597986304
          ],
          [
            -77.07338872476342,
            38.909513082961325
          ],
          [
            -77.07335550194382,
            38.90948116918281
          ],
          [
            -77.07327718610675,
            38.90940134915229
          ],
          [
            -77.07324111511078,
            38.90936157337043
          ],
          [
            -77.073185052,
            38.909389227999995
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07354827833333,
            38.90974552666667
          ],
          [
            -77.07355816456638,
            38.90967986348099
          ],
          [
            -77.07365688980768,
            38.909736088850394
          ],
          [
            -77.07378542199999,
            38.909708726000005
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07354827833333,
            38.90974552666667
          ],
          [
            -77.07356074609415,
            38.90967939043941
          ],
          [
            -77.07365634125877,
            38.909734039558856
          ],
          [
            -77.07372669071273,
            38.90970128898806
          ],
          [
            -77.07370518580899,
            38.909644552345014
          ],
          [
            -77.07374295857143,
            38.909652044285714
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07354827833333,
            38.90974552666667
          ],
          [
            -77.07355026465481,
            38.90966535929729
          ],
          [
            -77.07349531195258,
            38.90960826347069
          ],
          [
            -77.07353838941077,
            38.909574896288404
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07354827833333,
            38.90974552666667
          ],
          [
            -77.07355130319722,
            38.90966554813019
          ],
          [
            -77.07340393778843,
            38.90952831967951
          ],
          [
            -77.07346349827661,
            38.909487280867324
          ],
          [
            -77.0735367995038,
            38.909446687038866
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07346804333334,
            38.90965922666667
          ],
          [
            -77.07349926378782,
            38.90962480002827
          ],
          [
            -77.07341721083992,
            38.90955264866133
          ],
          [
            -77.07339999,
            38.90958729
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07346804333334,
            38.90965922666667
          ],
          [
            -77.07350552032085,
            38.90962538597989
          ],
          [
            -77.07338872775416,
            38.909516077662175
          ],
          [
            -77.073303898,
            38.90949408
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07346804333334,
            38.90965922666667
          ],
          [
            -77.07350278817754,
            38.90961626906733
          ],
          [
            -77.07323578535599,
            38.90935496181052
          ],
          [
            -77.073185052,
            38.909389227999995
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07346804333334,
            38.90965922666667
          ],
          [
            -77.07351129932215,
            38.909622805708295
          ],
          [
            -77.0736431221506,
            38.9097282559905
          ],
          [
            -77.07378542199999,
            38.909708726000005
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07346804333334,
            38.90965922666667
          ],
          [
            -77.07350686577315,
            38.90962641930014
          ],
          [
            -77.07350712879371,
            38.90959864592054
          ],
          [
            -77.07354442270085,
            38.90957758983063
          ],
          [
            -77.0736191125899,
            38.909545973207685
          ],
          [
            -77.07363849389124,
            38.9095529027847
          ],
          [
            -77.07368083014495,
            38.909624072993665
          ],
          [
            -77.07374295857143,
            38.909652044285714
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07346804333334,
            38.90965922666667
          ],
          [
            -77.07349740923327,
            38.909611437037285
          ],
          [
            -77.07352912350804,
            38.9095843786335
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07346804333334,
            38.90965922666667
          ],
          [
            -77.07349294203955,
            38.909610810978904
          ],
          [
            -77.07354568708546,
            38.909573773587056
          ],
          [
            -77.07352419584545,
            38.9095300611489
          ],
          [
            -77.07354480622728,
            38.90944149843551
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07339999,
            38.90958729
          ],
          [
            -77.07341234713343,
            38.90954190626334
          ],
          [
            -77.07337929891855,
            38.909511629790074
          ],
          [
            -77.073303898,
            38.90949408
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07339999,
            38.90958729
          ],
          [
            -77.07341509487215,
            38.90953702603434
          ],
          [
            -77.07329301863086,
            38.90941408880076
          ],
          [
            -77.07323457072317,
            38.909362294443895
          ],
          [
            -77.073185052,
            38.909389227999995
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07339999,
            38.90958729
          ],
          [
            -77.07341152504165,
            38.90953358622079
          ],
          [
            -77.07341031280016,
            38.90951942158284
          ],
          [
            -77.07346740827126,
            38.90948306454288
          ],
          [
            -77.07352471901794,
            38.90944967700739
          ],
          [
            -77.07353840802733,
            38.90940864116524
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07339999,
            38.90958729
          ],
          [
            -77.0734235733284,
            38.90954563300426
          ],
          [
            -77.07349202301386,
            38.90960449822353
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07339999,
            38.90958729
          ],
          [
            -77.07342581931866,
            38.909545960832304
          ],
          [
            -77.07350182018159,
            38.909602933802944
          ],
          [
            -77.07362768419112,
            38.90954725021098
          ],
          [
            -77.07366262639634,
            38.90959003369679
          ],
          [
            -77.07374295857143,
            38.909652044285714
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07339999,
            38.90958729
          ],
          [
            -77.0734312019266,
            38.909547302473385
          ],
          [
            -77.07349110845695,
            38.90959889843785
          ],
          [
            -77.07361471967401,
            38.90954127196966
          ],
          [
            -77.0736796865833,
            38.90962789508072
          ],
          [
            -77.07372217504205,
            38.90967940428129
          ],
          [
            -77.07378542199999,
            38.909708726000005
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073303898,
            38.90949408
          ],
          [
            -77.07335706863276,
            38.90948757768058
          ],
          [
            -77.07324622726348,
            38.909368489070374
          ],
          [
            -77.073185052,
            38.909389227999995
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073303898,
            38.90949408
          ],
          [
            -77.07336782451041,
            38.90949374781118
          ],
          [
            -77.073401722074,
            38.90952326649406
          ],
          [
            -77.0734792582003,
            38.90947732607398
          ],
          [
            -77.07353878498883,
            38.90951028810508
          ],
          [
            -77.07361292644511,
            38.909537904744894
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073303898,
            38.90949408
          ],
          [
            -77.0733985863532,
            38.90952155571625
          ],
          [
            -77.07344127175703,
            38.90950247845717
          ],
          [
            -77.07349715933914,
            38.909472965250984
          ],
          [
            -77.07353922636203,
            38.909440480034846
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073303898,
            38.90949408
          ],
          [
            -77.07340262334412,
            38.909523261353314
          ],
          [
            -77.07354554550639,
            38.90966456993195
          ],
          [
            -77.07361330931498,
            38.90973286509549
          ],
          [
            -77.07366257028085,
            38.90973477994322
          ],
          [
            -77.07378542199999,
            38.909708726000005
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073303898,
            38.90949408
          ],
          [
            -77.07340083637342,
            38.909521888940674
          ],
          [
            -77.07360850559577,
            38.90971644934464
          ],
          [
            -77.07367684956178,
            38.90973177870208
          ],
          [
            -77.07374018578665,
            38.909702043031075
          ],
          [
            -77.07371218332774,
            38.9096642997352
          ],
          [
            -77.07369679153561,
            38.909641031845865
          ],
          [
            -77.07374295857143,
            38.909652044285714
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073185052,
            38.909389227999995
          ],
          [
            -77.07324320255961,
            38.90934077877901
          ],
          [
            -77.07329552175811,
            38.90930210249158
          ],
          [
            -77.07336389611575,
            38.90926557463061
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073185052,
            38.909389227999995
          ],
          [
            -77.07329186979403,
            38.90930462214561
          ],
          [
            -77.07336172147481,
            38.90928850633102
          ],
          [
            -77.07346008782488,
            38.90936080372822
          ],
          [
            -77.07355156174948,
            38.90943560672838
          ],
          [
            -77.07361458291479,
            38.909518693472734
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073185052,
            38.909389227999995
          ],
          [
            -77.07329591850801,
            38.90930373738513
          ],
          [
            -77.07336551010461,
            38.909272621813415
          ],
          [
            -77.07352519403824,
            38.90941080608826
          ],
          [
            -77.07361206605613,
            38.9095029669117
          ],
          [
            -77.07364490190203,
            38.909553854675494
          ],
          [
            -77.07367090776991,
            38.90960841241167
          ],
          [
            -77.07374295857143,
            38.909652044285714
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073185052,
            38.909389227999995
          ],
          [
            -77.07323690054143,
            38.90936132603275
          ],
          [
            -77.07335530836126,
            38.909484831941285
          ],
          [
            -77.0734231524543,
            38.90954181821297
          ],
          [
            -77.07348263368486,
            38.909602192617086
          ],
          [
            -77.07354586546948,
            38.90965496638577
          ],
          [
            -77.07360938761941,
            38.909716421310605
          ],
          [
            -77.07364907805892,
            38.90973704531095
          ],
          [
            -77.07370659688928,
            38.90972826623886
          ],
          [
            -77.07378542199999,
            38.909708726000005
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07378542199999,
            38.909708726000005
          ],
          [
            -77.07373653974658,
            38.90968705650954
          ],
          [
            -77.07370474006791,
            38.90965925799094
          ],
          [
            -77.07374295857143,
            38.909652044285714
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360623,
            38.90946303
          ],
          [
            -77.07353539875851,
            38.90951775267732
          ],
          [
            -77.07363645400001,
            38.909649308
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360623,
            38.90946303
          ],
          [
            -77.0735042301759,
            38.909489784590704
          ],
          [
            -77.073384002,
            38.909419724
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360623,
            38.90946303
          ],
          [
            -77.07362437095482,
            38.909518977328815
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360623,
            38.90946303
          ],
          [
            -77.07355107350496,
            38.90943133136952
          ],
          [
            -77.07360623,
            38.90946303
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360623,
            38.90946303
          ],
          [
            -77.07360858561009,
            38.909517381434824
          ],
          [
            -77.07368902895874,
            38.90962701701281
          ],
          [
            -77.07374295857143,
            38.909652044285714
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360623,
            38.90946303
          ],
          [
            -77.07361486864644,
            38.90953012776555
          ],
          [
            -77.0736781521969,
            38.90962067474109
          ],
          [
            -77.07372581471208,
            38.909684906395285
          ],
          [
            -77.07378542199999,
            38.909708726000005
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360623,
            38.90946303
          ],
          [
            -77.07355206704804,
            38.9095305541002
          ],
          [
            -77.07349280376654,
            38.90957791483379
          ],
          [
            -77.0734130937565,
            38.90955862059252
          ],
          [
            -77.07339999,
            38.90958729
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360623,
            38.90946303
          ],
          [
            -77.07354323872285,
            38.90955350081151
          ],
          [
            -77.07347054044419,
            38.90960274022322
          ],
          [
            -77.07346804333334,
            38.90965922666667
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360623,
            38.90946303
          ],
          [
            -77.07352198745512,
            38.90957545614526
          ],
          [
            -77.073492031558,
            38.909606606146184
          ],
          [
            -77.07354835447141,
            38.909675195483544
          ],
          [
            -77.07354827833333,
            38.90974552666667
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360623,
            38.90946303
          ],
          [
            -77.07350813336502,
            38.909486747324166
          ],
          [
            -77.0734709237225,
            38.909477660892776
          ],
          [
            -77.07339175820886,
            38.90952609375273
          ],
          [
            -77.073303898,
            38.90949408
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.07360623,
            38.90946303
          ],
          [
            -77.07350161574429,
            38.909490462909844
          ],
          [
            -77.07344930098948,
            38.909490878023036
          ],
          [
            -77.07339638577164,
            38.9095170766725
          ],
          [
            -77.07334335309938,
            38.90947077691669
          ],
          [
            -77.07326061683939,
            38.90938713044201
          ],
          [
            -77.0732423092585,
            38.90936341338232
          ],
          [
            -77.073185052,
            38.909389227999995
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [
            -77.073185052,
            38.909389227999995
          ],
          [
            -77.07323505871913,
            38.909361851491894
          ],
          [
            -77.07348842878281,
            38.90960034917441
          ],
          [
            -77.07361884868554,
            38.90954177091865
          ],
          [
            -77.07367873781153,
            38.90962512148951
          ],
          [
            -77.07374295857143,
            38.909652044285714
          ]
        ]
      },
      properties: {
        level: 0,
        type: "room_connection",
        building: "reiss"
      }
    }
  ]
};
const pois = {
  type: "FeatureCollection",
  features: [
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07360052,
          38.91127836655173
        ],
        type: "Point"
      },
      properties: {
        id: 60,
        name: "Darnall Hall",
        type: "residence_hall",
        floor: 1,
        metadata: {
          description: "Student residence hall with detailed floor plans available"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.0734926211111,
          38.91142666555556
        ],
        type: "Point"
      },
      properties: {
        id: 100,
        name: "Room 501",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07348073000001,
          38.91138981666666
        ],
        type: "Point"
      },
      properties: {
        id: 101,
        name: "Room 502",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073495168,
          38.911362506
        ],
        type: "Point"
      },
      properties: {
        id: 102,
        name: "Room 503",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07349681999999,
          38.911331489999995
        ],
        type: "Point"
      },
      properties: {
        id: 103,
        name: "Room 504",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073509324,
          38.911300676
        ],
        type: "Point"
      },
      properties: {
        id: 104,
        name: "Room 505",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073510285,
          38.91126755333333
        ],
        type: "Point"
      },
      properties: {
        id: 105,
        name: "Room 506",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073512006,
          38.911240362
        ],
        type: "Point"
      },
      properties: {
        id: 106,
        name: "Room 507",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07349873166667,
          38.91121123833333
        ],
        type: "Point"
      },
      properties: {
        id: 107,
        name: "Room 508",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073504638,
          38.911179366
        ],
        type: "Point"
      },
      properties: {
        id: 108,
        name: "Room 509",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350624200001,
          38.911148686
        ],
        type: "Point"
      },
      properties: {
        id: 109,
        name: "Room 509",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07351822555556,
          38.91111032222222
        ],
        type: "Point"
      },
      properties: {
        id: 110,
        name: "Room 511",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073572622,
          38.911085662
        ],
        type: "Point"
      },
      properties: {
        id: 111,
        name: "Room 512",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073611656,
          38.911086786
        ],
        type: "Point"
      },
      properties: {
        id: 112,
        name: "Room 513",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07365592375001,
          38.911095806249996
        ],
        type: "Point"
      },
      properties: {
        id: 113,
        name: "Room 514",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073716932,
          38.911214168
        ],
        type: "Point"
      },
      properties: {
        id: 114,
        name: "Room 518",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371808,
          38.91118406
        ],
        type: "Point"
      },
      properties: {
        id: 115,
        name: "Room 517",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073719138,
          38.911154167999996
        ],
        type: "Point"
      },
      properties: {
        id: 116,
        name: "Room 516",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073720598,
          38.911122626
        ],
        type: "Point"
      },
      properties: {
        id: 117,
        name: "Room 515",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370459200001,
          38.911268283999995
        ],
        type: "Point"
      },
      properties: {
        id: 118,
        name: "Room 520",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073703188,
          38.911304234
        ],
        type: "Point"
      },
      properties: {
        id: 119,
        name: "Room 512",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073712208,
          38.911328782
        ],
        type: "Point"
      },
      properties: {
        id: 120,
        name: "Room 522",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371123,
          38.91136565199999
        ],
        type: "Point"
      },
      properties: {
        id: 121,
        name: "Room 523",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073710106,
          38.911390276
        ],
        type: "Point"
      },
      properties: {
        id: 122,
        name: "Room 524",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370840600001,
          38.911423813999996
        ],
        type: "Point"
      },
      properties: {
        id: 123,
        name: "Room 525",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073635702,
          38.911455000000004
        ],
        type: "Point"
      },
      properties: {
        id: 124,
        name: "Room 526",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073595052,
          38.911453868
        ],
        type: "Point"
      },
      properties: {
        id: 125,
        name: "Room 527",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07355411800002,
          38.911452146
        ],
        type: "Point"
      },
      properties: {
        id: 126,
        name: "Room 528",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370548,
          38.91124362200001
        ],
        type: "Point"
      },
      properties: {
        id: 127,
        name: "Room 519",
        type: "dorm_room",
        floor: 5,
        metadata: {
          description: "Student dorm room in Darnall Hall",
          access: "private",
          level: 5
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.0735006211111,
          38.91142266555556
        ],
        type: "Point"
      },
      properties: {
        id: 128,
        name: "Room 101",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07348873000001,
          38.911385816666666
        ],
        type: "Point"
      },
      properties: {
        id: 129,
        name: "Room 102",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350316799999,
          38.911358506000006
        ],
        type: "Point"
      },
      properties: {
        id: 130,
        name: "Room 103",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350481999998,
          38.91132749
        ],
        type: "Point"
      },
      properties: {
        id: 131,
        name: "Room 104",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073517324,
          38.911296676000006
        ],
        type: "Point"
      },
      properties: {
        id: 132,
        name: "Room 105",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07351828499999,
          38.911263553333335
        ],
        type: "Point"
      },
      properties: {
        id: 133,
        name: "Room 106",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073520006,
          38.911236362000004
        ],
        type: "Point"
      },
      properties: {
        id: 134,
        name: "Room 107",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350673166667,
          38.91120723833333
        ],
        type: "Point"
      },
      properties: {
        id: 135,
        name: "Room 108",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073512638,
          38.911175366
        ],
        type: "Point"
      },
      properties: {
        id: 136,
        name: "Room 109",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073514242,
          38.911144686
        ],
        type: "Point"
      },
      properties: {
        id: 137,
        name: "Room 109",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07352622555555,
          38.911106322222224
        ],
        type: "Point"
      },
      properties: {
        id: 138,
        name: "Room 111",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073580622,
          38.911081662
        ],
        type: "Point"
      },
      properties: {
        id: 139,
        name: "Room 112",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07361965599999,
          38.911082786
        ],
        type: "Point"
      },
      properties: {
        id: 140,
        name: "Room 113",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07366392375,
          38.91109180625
        ],
        type: "Point"
      },
      properties: {
        id: 141,
        name: "Room 114",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07372493199999,
          38.911210168000004
        ],
        type: "Point"
      },
      properties: {
        id: 142,
        name: "Room 118",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07372608,
          38.91118006
        ],
        type: "Point"
      },
      properties: {
        id: 143,
        name: "Room 117",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073727138,
          38.911150168
        ],
        type: "Point"
      },
      properties: {
        id: 144,
        name: "Room 116",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07372859799999,
          38.911118626000004
        ],
        type: "Point"
      },
      properties: {
        id: 145,
        name: "Room 115",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073712592,
          38.911264284
        ],
        type: "Point"
      },
      properties: {
        id: 146,
        name: "Room 120",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371118799999,
          38.911300234
        ],
        type: "Point"
      },
      properties: {
        id: 147,
        name: "Room 112",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073720208,
          38.911324782
        ],
        type: "Point"
      },
      properties: {
        id: 148,
        name: "Room 122",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371923,
          38.911361652
        ],
        type: "Point"
      },
      properties: {
        id: 149,
        name: "Room 123",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371810599999,
          38.911386276
        ],
        type: "Point"
      },
      properties: {
        id: 150,
        name: "Room 124",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073716406,
          38.911419814
        ],
        type: "Point"
      },
      properties: {
        id: 151,
        name: "Room 125",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073643702,
          38.91145100000001
        ],
        type: "Point"
      },
      properties: {
        id: 152,
        name: "Room 126",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073603052,
          38.911449868000005
        ],
        type: "Point"
      },
      properties: {
        id: 153,
        name: "Room 127",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07356211800001,
          38.911448146000005
        ],
        type: "Point"
      },
      properties: {
        id: 154,
        name: "Room 128",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371348,
          38.91123962200001
        ],
        type: "Point"
      },
      properties: {
        id: 155,
        name: "Room 119",
        type: "dorm_room",
        floor: 1,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 1",
          access: "private",
          level: 1
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.0734986211111,
          38.91142366555556
        ],
        type: "Point"
      },
      properties: {
        id: 156,
        name: "Room 201",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07348673000001,
          38.91138681666666
        ],
        type: "Point"
      },
      properties: {
        id: 157,
        name: "Room 202",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350116799999,
          38.911359506000004
        ],
        type: "Point"
      },
      properties: {
        id: 158,
        name: "Room 203",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350281999999,
          38.911328489999995
        ],
        type: "Point"
      },
      properties: {
        id: 159,
        name: "Room 204",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073515324,
          38.911297676000004
        ],
        type: "Point"
      },
      properties: {
        id: 160,
        name: "Room 205",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073516285,
          38.91126455333333
        ],
        type: "Point"
      },
      properties: {
        id: 161,
        name: "Room 206",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073518006,
          38.911237362
        ],
        type: "Point"
      },
      properties: {
        id: 162,
        name: "Room 207",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350473166667,
          38.91120823833333
        ],
        type: "Point"
      },
      properties: {
        id: 163,
        name: "Room 208",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073510638,
          38.911176366
        ],
        type: "Point"
      },
      properties: {
        id: 164,
        name: "Room 209",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073512242,
          38.911145686
        ],
        type: "Point"
      },
      properties: {
        id: 165,
        name: "Room 209",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07352422555556,
          38.91110732222222
        ],
        type: "Point"
      },
      properties: {
        id: 166,
        name: "Room 211",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073578622,
          38.911082662
        ],
        type: "Point"
      },
      properties: {
        id: 167,
        name: "Room 212",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073617656,
          38.911083786
        ],
        type: "Point"
      },
      properties: {
        id: 168,
        name: "Room 213",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07366192375001,
          38.91109280625
        ],
        type: "Point"
      },
      properties: {
        id: 169,
        name: "Room 214",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073722932,
          38.911211168
        ],
        type: "Point"
      },
      properties: {
        id: 170,
        name: "Room 218",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07372408,
          38.91118106
        ],
        type: "Point"
      },
      properties: {
        id: 171,
        name: "Room 217",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073725138,
          38.911151167999996
        ],
        type: "Point"
      },
      properties: {
        id: 172,
        name: "Room 216",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073726598,
          38.911119626
        ],
        type: "Point"
      },
      properties: {
        id: 173,
        name: "Room 215",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371059200001,
          38.911265283999995
        ],
        type: "Point"
      },
      properties: {
        id: 174,
        name: "Room 220",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073709188,
          38.911301234
        ],
        type: "Point"
      },
      properties: {
        id: 175,
        name: "Room 212",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073718208,
          38.911325782
        ],
        type: "Point"
      },
      properties: {
        id: 176,
        name: "Room 222",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371723,
          38.911362651999994
        ],
        type: "Point"
      },
      properties: {
        id: 177,
        name: "Room 223",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371610599999,
          38.911387276
        ],
        type: "Point"
      },
      properties: {
        id: 178,
        name: "Room 224",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371440600001,
          38.911420813999996
        ],
        type: "Point"
      },
      properties: {
        id: 179,
        name: "Room 225",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073641702,
          38.911452000000004
        ],
        type: "Point"
      },
      properties: {
        id: 180,
        name: "Room 226",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073601052,
          38.911450868
        ],
        type: "Point"
      },
      properties: {
        id: 181,
        name: "Room 227",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07356011800002,
          38.911449146
        ],
        type: "Point"
      },
      properties: {
        id: 182,
        name: "Room 228",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371148,
          38.91124062200001
        ],
        type: "Point"
      },
      properties: {
        id: 183,
        name: "Room 219",
        type: "dorm_room",
        floor: 2,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 2",
          access: "private",
          level: 2
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.0734966211111,
          38.91142466555556
        ],
        type: "Point"
      },
      properties: {
        id: 184,
        name: "Room 301",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07348473000002,
          38.91138781666666
        ],
        type: "Point"
      },
      properties: {
        id: 185,
        name: "Room 302",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073499168,
          38.911360506
        ],
        type: "Point"
      },
      properties: {
        id: 186,
        name: "Room 303",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350081999999,
          38.91132948999999
        ],
        type: "Point"
      },
      properties: {
        id: 187,
        name: "Room 304",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073513324,
          38.911298676
        ],
        type: "Point"
      },
      properties: {
        id: 188,
        name: "Room 305",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073514285,
          38.91126555333333
        ],
        type: "Point"
      },
      properties: {
        id: 189,
        name: "Room 306",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073516006,
          38.911238362
        ],
        type: "Point"
      },
      properties: {
        id: 190,
        name: "Room 307",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350273166668,
          38.91120923833333
        ],
        type: "Point"
      },
      properties: {
        id: 191,
        name: "Room 308",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073508638,
          38.911177366
        ],
        type: "Point"
      },
      properties: {
        id: 192,
        name: "Room 309",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07351024200001,
          38.911146685999995
        ],
        type: "Point"
      },
      properties: {
        id: 193,
        name: "Room 309",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07352222555556,
          38.91110832222222
        ],
        type: "Point"
      },
      properties: {
        id: 194,
        name: "Room 311",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073576622,
          38.911083661999996
        ],
        type: "Point"
      },
      properties: {
        id: 195,
        name: "Room 312",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073615656,
          38.911084785999996
        ],
        type: "Point"
      },
      properties: {
        id: 196,
        name: "Room 313",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07365992375001,
          38.911093806249994
        ],
        type: "Point"
      },
      properties: {
        id: 197,
        name: "Room 314",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073720932,
          38.911212168
        ],
        type: "Point"
      },
      properties: {
        id: 198,
        name: "Room 318",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07372208000001,
          38.911182059999994
        ],
        type: "Point"
      },
      properties: {
        id: 199,
        name: "Room 317",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073723138,
          38.911152167999994
        ],
        type: "Point"
      },
      properties: {
        id: 200,
        name: "Room 316",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073724598,
          38.911120626
        ],
        type: "Point"
      },
      properties: {
        id: 201,
        name: "Room 315",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370859200002,
          38.91126628399999
        ],
        type: "Point"
      },
      properties: {
        id: 202,
        name: "Room 320",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073707188,
          38.911302234
        ],
        type: "Point"
      },
      properties: {
        id: 203,
        name: "Room 312",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371620800001,
          38.911326781999996
        ],
        type: "Point"
      },
      properties: {
        id: 204,
        name: "Room 322",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371523,
          38.91136365199999
        ],
        type: "Point"
      },
      properties: {
        id: 205,
        name: "Room 323",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073714106,
          38.911388276
        ],
        type: "Point"
      },
      properties: {
        id: 206,
        name: "Room 324",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371240600001,
          38.91142181399999
        ],
        type: "Point"
      },
      properties: {
        id: 207,
        name: "Room 325",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07363970200001,
          38.911453
        ],
        type: "Point"
      },
      properties: {
        id: 208,
        name: "Room 326",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073599052,
          38.911451868
        ],
        type: "Point"
      },
      properties: {
        id: 209,
        name: "Room 327",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07355811800002,
          38.911450146
        ],
        type: "Point"
      },
      properties: {
        id: 210,
        name: "Room 328",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370948,
          38.911241622000006
        ],
        type: "Point"
      },
      properties: {
        id: 211,
        name: "Room 319",
        type: "dorm_room",
        floor: 3,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 3",
          access: "private",
          level: 3
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.0734946211111,
          38.91142566555556
        ],
        type: "Point"
      },
      properties: {
        id: 212,
        name: "Room 401",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07348273000001,
          38.911388816666665
        ],
        type: "Point"
      },
      properties: {
        id: 213,
        name: "Room 402",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07349716799999,
          38.911361506000006
        ],
        type: "Point"
      },
      properties: {
        id: 214,
        name: "Room 403",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07349881999998,
          38.91133049
        ],
        type: "Point"
      },
      properties: {
        id: 215,
        name: "Room 404",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073511324,
          38.911299676000006
        ],
        type: "Point"
      },
      properties: {
        id: 216,
        name: "Room 405",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07351228499999,
          38.911266553333334
        ],
        type: "Point"
      },
      properties: {
        id: 217,
        name: "Room 406",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073514006,
          38.911239362
        ],
        type: "Point"
      },
      properties: {
        id: 218,
        name: "Room 407",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350073166667,
          38.91121023833333
        ],
        type: "Point"
      },
      properties: {
        id: 219,
        name: "Room 408",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073506638,
          38.911178366
        ],
        type: "Point"
      },
      properties: {
        id: 220,
        name: "Room 409",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073508242,
          38.911147686
        ],
        type: "Point"
      },
      properties: {
        id: 221,
        name: "Room 409",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07352022555555,
          38.911109322222224
        ],
        type: "Point"
      },
      properties: {
        id: 222,
        name: "Room 411",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073574622,
          38.911084662
        ],
        type: "Point"
      },
      properties: {
        id: 223,
        name: "Room 412",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07361365599999,
          38.911085786
        ],
        type: "Point"
      },
      properties: {
        id: 224,
        name: "Room 413",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07365792375,
          38.91109480625
        ],
        type: "Point"
      },
      properties: {
        id: 225,
        name: "Room 414",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371893199999,
          38.911213168
        ],
        type: "Point"
      },
      properties: {
        id: 226,
        name: "Room 418",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07372008,
          38.91118306
        ],
        type: "Point"
      },
      properties: {
        id: 227,
        name: "Room 417",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073721138,
          38.911153168
        ],
        type: "Point"
      },
      properties: {
        id: 228,
        name: "Room 416",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07372259799999,
          38.911121626
        ],
        type: "Point"
      },
      properties: {
        id: 229,
        name: "Room 415",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370659200001,
          38.911267284
        ],
        type: "Point"
      },
      properties: {
        id: 230,
        name: "Room 420",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370518799999,
          38.911303234
        ],
        type: "Point"
      },
      properties: {
        id: 231,
        name: "Room 412",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073714208,
          38.911327782
        ],
        type: "Point"
      },
      properties: {
        id: 232,
        name: "Room 422",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371323,
          38.911364651999996
        ],
        type: "Point"
      },
      properties: {
        id: 233,
        name: "Room 423",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371210599999,
          38.911389276
        ],
        type: "Point"
      },
      properties: {
        id: 234,
        name: "Room 424",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073710406,
          38.911422814
        ],
        type: "Point"
      },
      properties: {
        id: 235,
        name: "Room 425",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073637702,
          38.911454000000006
        ],
        type: "Point"
      },
      properties: {
        id: 236,
        name: "Room 426",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073597052,
          38.911452868000005
        ],
        type: "Point"
      },
      properties: {
        id: 237,
        name: "Room 427",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07355611800001,
          38.911451146000005
        ],
        type: "Point"
      },
      properties: {
        id: 238,
        name: "Room 428",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370748,
          38.91124262200001
        ],
        type: "Point"
      },
      properties: {
        id: 239,
        name: "Room 419",
        type: "dorm_room",
        floor: 4,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 4",
          access: "private",
          level: 4
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.0734906211111,
          38.91142766555556
        ],
        type: "Point"
      },
      properties: {
        id: 240,
        name: "Room 601",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07347873000002,
          38.91139081666666
        ],
        type: "Point"
      },
      properties: {
        id: 241,
        name: "Room 602",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073493168,
          38.911363506
        ],
        type: "Point"
      },
      properties: {
        id: 242,
        name: "Room 603",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07349482,
          38.91133248999999
        ],
        type: "Point"
      },
      properties: {
        id: 243,
        name: "Room 604",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073507324,
          38.911301676
        ],
        type: "Point"
      },
      properties: {
        id: 244,
        name: "Room 605",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073508285,
          38.91126855333333
        ],
        type: "Point"
      },
      properties: {
        id: 245,
        name: "Room 606",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073510006,
          38.911241362
        ],
        type: "Point"
      },
      properties: {
        id: 246,
        name: "Room 607",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07349673166668,
          38.91121223833333
        ],
        type: "Point"
      },
      properties: {
        id: 247,
        name: "Room 608",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350263800001,
          38.911180365999996
        ],
        type: "Point"
      },
      properties: {
        id: 248,
        name: "Room 609",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350424200001,
          38.911149685999995
        ],
        type: "Point"
      },
      properties: {
        id: 249,
        name: "Room 609",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07351622555557,
          38.91111132222222
        ],
        type: "Point"
      },
      properties: {
        id: 250,
        name: "Room 611",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073570622,
          38.911086661999995
        ],
        type: "Point"
      },
      properties: {
        id: 251,
        name: "Room 612",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073609656,
          38.911087785999996
        ],
        type: "Point"
      },
      properties: {
        id: 252,
        name: "Room 613",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07365392375002,
          38.911096806249994
        ],
        type: "Point"
      },
      properties: {
        id: 253,
        name: "Room 614",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073714932,
          38.911215168
        ],
        type: "Point"
      },
      properties: {
        id: 254,
        name: "Room 618",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371608000001,
          38.911185059999994
        ],
        type: "Point"
      },
      properties: {
        id: 255,
        name: "Room 617",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073717138,
          38.91115516799999
        ],
        type: "Point"
      },
      properties: {
        id: 256,
        name: "Room 616",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073718598,
          38.911123626
        ],
        type: "Point"
      },
      properties: {
        id: 257,
        name: "Room 615",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370259200002,
          38.91126928399999
        ],
        type: "Point"
      },
      properties: {
        id: 258,
        name: "Room 620",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073701188,
          38.911305234
        ],
        type: "Point"
      },
      properties: {
        id: 259,
        name: "Room 612",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07371020800001,
          38.911329781999996
        ],
        type: "Point"
      },
      properties: {
        id: 260,
        name: "Room 622",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370923,
          38.91136665199999
        ],
        type: "Point"
      },
      properties: {
        id: 261,
        name: "Room 623",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073708106,
          38.911391275999996
        ],
        type: "Point"
      },
      properties: {
        id: 262,
        name: "Room 624",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370640600001,
          38.91142481399999
        ],
        type: "Point"
      },
      properties: {
        id: 263,
        name: "Room 625",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07363370200001,
          38.911456
        ],
        type: "Point"
      },
      properties: {
        id: 264,
        name: "Room 626",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073593052,
          38.911454868
        ],
        type: "Point"
      },
      properties: {
        id: 265,
        name: "Room 627",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07355211800002,
          38.911453146
        ],
        type: "Point"
      },
      properties: {
        id: 266,
        name: "Room 628",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07370348,
          38.911244622000005
        ],
        type: "Point"
      },
      properties: {
        id: 267,
        name: "Room 619",
        type: "dorm_room",
        floor: 6,
        metadata: {
          description: "Student dorm room in Darnall Hall - Floor 6",
          access: "private",
          level: 6
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359317555557,
          38.911382474444444
        ]
      },
      properties: {
        id: 268,
        name: "Restroom - Floor 5 (Accessible)",
        type: "restroom",
        floor: 5,
        metadata: {
          description: "Public restroom on floor 5",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359281363637,
          38.91116791545455
        ]
      },
      properties: {
        id: 269,
        name: "Restroom - Floor 5 (Accessible)",
        type: "restroom",
        floor: 5,
        metadata: {
          description: "Public restroom on floor 5",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07360117555555,
          38.91137847444444
        ]
      },
      properties: {
        id: 270,
        name: "Restroom - Floor 1 (Accessible)",
        type: "restroom",
        floor: 1,
        metadata: {
          description: "Public restroom on floor 1",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07360081363636,
          38.91116391545455
        ]
      },
      properties: {
        id: 271,
        name: "Restroom - Floor 1 (Accessible)",
        type: "restroom",
        floor: 1,
        metadata: {
          description: "Public restroom on floor 1",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359917555556,
          38.91137947444444
        ]
      },
      properties: {
        id: 272,
        name: "Restroom - Floor 2 (Accessible)",
        type: "restroom",
        floor: 2,
        metadata: {
          description: "Public restroom on floor 2",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359881363637,
          38.91116491545455
        ]
      },
      properties: {
        id: 273,
        name: "Restroom - Floor 2 (Accessible)",
        type: "restroom",
        floor: 2,
        metadata: {
          description: "Public restroom on floor 2",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359717555556,
          38.911380474444435
        ]
      },
      properties: {
        id: 274,
        name: "Restroom - Floor 3 (Accessible)",
        type: "restroom",
        floor: 3,
        metadata: {
          description: "Public restroom on floor 3",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359681363637,
          38.911165915454546
        ]
      },
      properties: {
        id: 275,
        name: "Restroom - Floor 3 (Accessible)",
        type: "restroom",
        floor: 3,
        metadata: {
          description: "Public restroom on floor 3",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359517555557,
          38.91138147444445
        ]
      },
      properties: {
        id: 276,
        name: "Restroom - Floor 4 (Accessible)",
        type: "restroom",
        floor: 4,
        metadata: {
          description: "Public restroom on floor 4",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359481363636,
          38.91116691545455
        ]
      },
      properties: {
        id: 277,
        name: "Restroom - Floor 4 (Accessible)",
        type: "restroom",
        floor: 4,
        metadata: {
          description: "Public restroom on floor 4",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359117555558,
          38.91138347444444
        ]
      },
      properties: {
        id: 278,
        name: "Restroom - Floor 6 (Accessible)",
        type: "restroom",
        floor: 6,
        metadata: {
          description: "Public restroom on floor 6",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07359081363637,
          38.911168915454546
        ]
      },
      properties: {
        id: 279,
        name: "Restroom - Floor 6 (Accessible)",
        type: "restroom",
        floor: 6,
        metadata: {
          description: "Public restroom on floor 6",
          wheelchair_accessible: true,
          access: "customers",
          amenity: "toilets"
        },
        building_id: "GU_DARNALL"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.0736,
          38.9112,
          0
        ],
        type: "Point"
      },
      properties: {
        id: 2e3,
        name: "Epicurean & Company",
        type: "restaurant",
        floor: "G",
        metadata: {
          description: "Restaurant on ground floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073576212,
          38.911244847999995,
          0
        ],
        type: "Point"
      },
      properties: {
        id: 2002,
        name: "G09I",
        type: "dorm_room",
        floor: "G",
        metadata: {
          description: "Dorm Room G09I"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07360435000001,
          38.911122590000005,
          0
        ],
        type: "Point"
      },
      properties: {
        id: 2003,
        name: "G09K",
        type: "dorm_room",
        floor: "G",
        metadata: {
          description: "Dorm Room G09K"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07366964799999,
          38.91143237399999,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1100,
        name: "M27",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M27 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073670862,
          38.91140588,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1101,
        name: "M26",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M26 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073671816,
          38.911383174,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1102,
        name: "M23",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M23 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07366999999999,
          38.911361868571426,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1103,
        name: "M21",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M21 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07367079857144,
          38.91134092714286,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1104,
        name: "M17",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M17 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07366843874999,
          38.91131497875,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1105,
        name: "M15",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M15 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073669062,
          38.911296522,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1106,
        name: "M13",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M13 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073676506,
          38.91127126,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1107,
        name: "M11",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M11 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073654202,
          38.911353126,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1108,
        name: "M19",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M19 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07363018999999,
          38.911432873,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1109,
        name: "M22",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M22 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07363199857141,
          38.91140055428572,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1110,
        name: "M20",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M20 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07362505,
          38.91133863142858,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1111,
        name: "M18A",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M18A on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07360548428572,
          38.91133824285714,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1112,
        name: "M18B",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M18B on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073584164,
          38.91130313,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1113,
        name: "M04",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M04 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07358311499999,
          38.91126339,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1114,
        name: "M10",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M10 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07363366428571,
          38.9112984,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1115,
        name: "M16",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M16 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073604276,
          38.911293958,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1116,
        name: "M18C",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M18C on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073637116,
          38.911273678,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1117,
        name: "M14",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M14 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07364015200001,
          38.911231076,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1118,
        name: "M09A",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M09A on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073606408,
          38.911252022,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1119,
        name: "M03A",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M03A on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.0736000942857,
          38.911222017142855,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1120,
        name: "M03",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M03 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07355852599999,
          38.911411022,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1121,
        name: "M07",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M07 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07361423,
          38.911091758,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1122,
        name: "M01",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M01 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073577582,
          38.911069794,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1123,
        name: "M02",
        type: "dorm_room",
        floor: "M",
        metadata: {
          description: "M02 on Mezzanine floor"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073605664,
          38.91142335800001,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1124,
        name: "Mezzanine Room 25",
        type: "restroom",
        floor: "M",
        metadata: {
          description: "Room on Mezzanine floor",
          amenity: "toilets"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07358319,
          38.911332872,
          1.5
        ],
        type: "Point"
      },
      properties: {
        id: 1125,
        name: "Mezzanine Room 26",
        type: "restroom",
        floor: "M",
        metadata: {
          description: "Room on Mezzanine floor",
          amenity: "toilets"
        },
        building_id: "darnall"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07354827833333,
          38.90974552666667
        ],
        type: "Point"
      },
      properties: {
        id: 2004,
        name: "Classroom 172A",
        type: "classroom",
        floor: 1,
        metadata: {
          description: "Classroom 172A in Reiss Science Building",
          room_number: "172A",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07346804333334,
          38.90965922666667
        ],
        type: "Point"
      },
      properties: {
        id: 2005,
        name: "Classroom 172",
        type: "classroom",
        floor: 1,
        metadata: {
          description: "Classroom 172 in Reiss Science Building",
          room_number: "172",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07339999,
          38.90958729
        ],
        type: "Point"
      },
      properties: {
        id: 2006,
        name: "Classroom 152",
        type: "classroom",
        floor: 1,
        metadata: {
          description: "Classroom 152 in Reiss Science Building",
          room_number: "152",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073303898,
          38.90949408
        ],
        type: "Point"
      },
      properties: {
        id: 2007,
        name: "Classroom 154",
        type: "classroom",
        floor: 1,
        metadata: {
          description: "Classroom 154 in Reiss Science Building",
          room_number: "154",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073185052,
          38.909389227999995
        ],
        type: "Point"
      },
      properties: {
        id: 2008,
        name: "Classroom 156",
        type: "classroom",
        floor: 1,
        metadata: {
          description: "Classroom 156 in Reiss Science Building",
          room_number: "156",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073384002,
          38.909419724
        ],
        type: "Point"
      },
      properties: {
        id: 2009,
        name: "Classroom 103",
        type: "classroom",
        floor: 1,
        metadata: {
          description: "Classroom 103 in Reiss Science Building",
          room_number: "103",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07363645400001,
          38.909649308
        ],
        type: "Point"
      },
      properties: {
        id: 2010,
        name: "Classroom 112",
        type: "classroom",
        floor: 1,
        metadata: {
          description: "Classroom 112 in Reiss Science Building",
          room_number: "112",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07378542199999,
          38.909708726000005
        ],
        type: "Point"
      },
      properties: {
        id: 2011,
        name: "Classroom 185",
        type: "classroom",
        floor: 1,
        metadata: {
          description: "Classroom 185 in Reiss Science Building",
          room_number: "185",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07374295857143,
          38.909652044285714
        ],
        type: "Point"
      },
      properties: {
        id: 2012,
        name: "Classroom 186",
        type: "classroom",
        floor: 1,
        metadata: {
          description: "Classroom 186 in Reiss Science Building",
          room_number: "186",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073485815,
          38.909537269
        ],
        type: "Point"
      },
      properties: {
        id: 2013,
        name: "Reiss Science Building",
        type: "academic_building",
        floor: 1,
        metadata: {
          description: "The Reiss Science Building contains classrooms, science labs, a nuclear accelerator vault and a greenhouse. The Blommer Science Library and the offices of the departments of biology, chemistry and physics are housed in the Reiss Science Building."
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      id: "reiss-room-172a",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07354827833333,
          38.90974552666667
        ]
      },
      properties: {
        id: "reiss-room-172a",
        name: "172A",
        type: "classroom",
        category: "academic",
        building: "reiss",
        floor: 1,
        description: "Room 172A in Reiss Science Building",
        access: "public",
        level: 1
      },
      building_id: "reiss"
    },
    {
      type: "Feature",
      id: "reiss-room-172",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07346804333334,
          38.90965922666667
        ]
      },
      properties: {
        id: "reiss-room-172",
        name: "172",
        type: "classroom",
        category: "academic",
        building: "reiss",
        floor: 1,
        description: "Room 172 in Reiss Science Building",
        access: "public",
        level: 1
      },
      building_id: "reiss"
    },
    {
      type: "Feature",
      id: "reiss-room-152",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07339999,
          38.90958729
        ]
      },
      properties: {
        id: "reiss-room-152",
        name: "152",
        type: "classroom",
        category: "academic",
        building: "reiss",
        floor: 1,
        description: "Room 152 in Reiss Science Building",
        access: "public",
        level: 1
      },
      building_id: "reiss"
    },
    {
      type: "Feature",
      id: "reiss-room-154",
      geometry: {
        type: "Point",
        coordinates: [
          -77.073303898,
          38.90949408
        ]
      },
      properties: {
        id: "reiss-room-154",
        name: "154",
        type: "classroom",
        category: "academic",
        building: "reiss",
        floor: 1,
        description: "Room 154 in Reiss Science Building",
        access: "public",
        level: 1
      },
      building_id: "reiss"
    },
    {
      type: "Feature",
      id: "reiss-room-156",
      geometry: {
        type: "Point",
        coordinates: [
          -77.073185052,
          38.909389227999995
        ]
      },
      properties: {
        id: "reiss-room-156",
        name: "156",
        type: "classroom",
        category: "academic",
        building: "reiss",
        floor: 1,
        description: "Room 156 in Reiss Science Building",
        access: "public",
        level: 1
      },
      building_id: "reiss"
    },
    {
      type: "Feature",
      id: "reiss-room-103",
      geometry: {
        type: "Point",
        coordinates: [
          -77.073384002,
          38.909419724
        ]
      },
      properties: {
        id: "reiss-room-103",
        name: "103",
        type: "classroom",
        category: "academic",
        building: "reiss",
        floor: 1,
        description: "Room 103 in Reiss Science Building",
        access: "public",
        level: 1
      },
      building_id: "reiss"
    },
    {
      type: "Feature",
      id: "reiss-room-112",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07363645400001,
          38.909649308
        ]
      },
      properties: {
        id: "reiss-room-112",
        name: "112",
        type: "classroom",
        category: "academic",
        building: "reiss",
        floor: 1,
        description: "Room 112 in Reiss Science Building",
        access: "public",
        level: 1
      },
      building_id: "reiss"
    },
    {
      type: "Feature",
      id: "reiss-room-185",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07378542199999,
          38.909708726000005
        ]
      },
      properties: {
        id: "reiss-room-185",
        name: "185",
        type: "classroom",
        category: "academic",
        building: "reiss",
        floor: 1,
        description: "Room 185 in Reiss Science Building",
        access: "public",
        level: 1
      },
      building_id: "reiss"
    },
    {
      type: "Feature",
      id: "reiss-room-186",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07374295857143,
          38.909652044285714
        ]
      },
      properties: {
        id: "reiss-room-186",
        name: "186",
        type: "classroom",
        category: "academic",
        building: "reiss",
        floor: 1,
        description: "Room 186 in Reiss Science Building",
        access: "public",
        level: 1
      },
      building_id: "reiss"
    },
    {
      type: "Feature",
      id: "reiss-exit-entrance",
      geometry: {
        type: "Point",
        coordinates: [
          -77.07360623,
          38.90946303
        ]
      },
      properties: {
        id: "reiss-exit-entrance",
        name: "Reiss Exit/Entrance",
        type: "entrance",
        category: "building",
        building: "reiss",
        floor: 1,
        description: "Main exit/entrance for Reiss Science Building",
        access: "public",
        level: 1,
        show: "true",
        fill: "#22c55e",
        stroke: "#16a34a",
        "stroke-width": 2,
        "stroke-opacity": 1
      },
      building_id: "reiss"
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07374697200001,
          38.909671918
        ],
        type: "Point"
      },
      properties: {
        id: 2014,
        name: "Classroom 234",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 234 in Reiss Science Building (2nd floor)",
          room_number: "234",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07372495833333,
          38.90965166666666
        ],
        type: "Point"
      },
      properties: {
        id: 2015,
        name: "Classroom 232",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 232 in Reiss Science Building (2nd floor)",
          room_number: "232",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073713026,
          38.909623006000004
        ],
        type: "Point"
      },
      properties: {
        id: 2016,
        name: "Classroom 230",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 230 in Reiss Science Building (2nd floor)",
          room_number: "230",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073696592,
          38.909599416
        ],
        type: "Point"
      },
      properties: {
        id: 2017,
        name: "Classroom 228",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 228 in Reiss Science Building (2nd floor)",
          room_number: "228",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07368045,
          38.909575708
        ],
        type: "Point"
      },
      properties: {
        id: 2018,
        name: "Classroom 226",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 226 in Reiss Science Building (2nd floor)",
          room_number: "226",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073663664,
          38.90955143
        ],
        type: "Point"
      },
      properties: {
        id: 2019,
        name: "Classroom 224",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 224 in Reiss Science Building (2nd floor)",
          room_number: "224",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07364733,
          38.909527837999995
        ],
        type: "Point"
      },
      properties: {
        id: 2020,
        name: "Classroom 222",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 222 in Reiss Science Building (2nd floor)",
          room_number: "222",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073634048,
          38.90950327
        ],
        type: "Point"
      },
      properties: {
        id: 2021,
        name: "Classroom 209",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 209 in Reiss Science Building (2nd floor)",
          room_number: "209",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07361737000001,
          38.909480324
        ],
        type: "Point"
      },
      properties: {
        id: 2022,
        name: "Classroom 208",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 208 in Reiss Science Building (2nd floor)",
          room_number: "208",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073600158,
          38.909459735999995
        ],
        type: "Point"
      },
      properties: {
        id: 2023,
        name: "Classroom 207",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 207 in Reiss Science Building (2nd floor)",
          room_number: "207",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073581308,
          38.909440392
        ],
        type: "Point"
      },
      properties: {
        id: 2024,
        name: "Classroom 206",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 206 in Reiss Science Building (2nd floor)",
          room_number: "206",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07355852,
          38.909421122
        ],
        type: "Point"
      },
      properties: {
        id: 2025,
        name: "Classroom 205",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 205 in Reiss Science Building (2nd floor)",
          room_number: "205",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07352631,
          38.909407556
        ],
        type: "Point"
      },
      properties: {
        id: 2026,
        name: "Classroom 242",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 242 in Reiss Science Building (2nd floor)",
          room_number: "242",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07350228,
          38.909387728
        ],
        type: "Point"
      },
      properties: {
        id: 2027,
        name: "Classroom 244",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 244 in Reiss Science Building (2nd floor)",
          room_number: "244",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07347807599999,
          38.909367996
        ],
        type: "Point"
      },
      properties: {
        id: 2028,
        name: "Classroom 246",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 246 in Reiss Science Building (2nd floor)",
          room_number: "246",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07345346,
          38.9093484
        ],
        type: "Point"
      },
      properties: {
        id: 2029,
        name: "Classroom 248",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 248 in Reiss Science Building (2nd floor)",
          room_number: "248",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073417158,
          38.909336962
        ],
        type: "Point"
      },
      properties: {
        id: 2030,
        name: "Classroom 252",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 252 in Reiss Science Building (2nd floor)",
          room_number: "252",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073392876,
          38.909318131999996
        ],
        type: "Point"
      },
      properties: {
        id: 2031,
        name: "Classroom 254",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 254 in Reiss Science Building (2nd floor)",
          room_number: "254",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07333614285714,
          38.909292972857145
        ],
        type: "Point"
      },
      properties: {
        id: 2032,
        name: "Classroom 256",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 256 in Reiss Science Building (2nd floor)",
          room_number: "256",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07375219999999,
          38.909718821666665
        ],
        type: "Point"
      },
      properties: {
        id: 2033,
        name: "Classroom 238",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 238 in Reiss Science Building (2nd floor)",
          room_number: "238",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07361620428573,
          38.90970087428572
        ],
        type: "Point"
      },
      properties: {
        id: 2034,
        name: "Classroom 240A",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 240A in Reiss Science Building (2nd floor)",
          room_number: "240A",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073601796,
          38.909652648000005
        ],
        type: "Point"
      },
      properties: {
        id: 2035,
        name: "Classroom 261A",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 261A in Reiss Science Building (2nd floor)",
          room_number: "261A",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07356119285713,
          38.909763667142855
        ],
        type: "Point"
      },
      properties: {
        id: 2036,
        name: "Room Toilet",
        type: "room",
        floor: 2,
        metadata: {
          description: "Room Toilet in Reiss Science Building (2nd floor)",
          room_number: "Toilet",
          room_type: "room",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07352045,
          38.909727
        ],
        type: "Point"
      },
      properties: {
        id: 2037,
        name: "Classroom 264",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 264 in Reiss Science Building (2nd floor)",
          room_number: "264",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07344991400001,
          38.90965251
        ],
        type: "Point"
      },
      properties: {
        id: 2038,
        name: "Classroom 262",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 262 in Reiss Science Building (2nd floor)",
          room_number: "262",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07332014599999,
          38.90951545
        ],
        type: "Point"
      },
      properties: {
        id: 2039,
        name: "Classroom 282",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 282 in Reiss Science Building (2nd floor)",
          room_number: "282",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073241098,
          38.909431942
        ],
        type: "Point"
      },
      properties: {
        id: 2040,
        name: "Classroom 284",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 284 in Reiss Science Building (2nd floor)",
          room_number: "284",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07318851,
          38.909407222
        ],
        type: "Point"
      },
      properties: {
        id: 2041,
        name: "Room Toilet",
        type: "room",
        floor: 2,
        metadata: {
          description: "Room Toilet in Reiss Science Building (2nd floor)",
          room_number: "Toilet",
          room_type: "room",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07339128,
          38.90944611285715
        ],
        type: "Point"
      },
      properties: {
        id: 2042,
        name: "Classroom 281",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 281 in Reiss Science Building (2nd floor)",
          room_number: "281",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.07335112999999,
          38.90938795
        ],
        type: "Point"
      },
      properties: {
        id: 2043,
        name: "Classroom 283",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 283 in Reiss Science Building (2nd floor)",
          room_number: "283",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    },
    {
      type: "Feature",
      geometry: {
        coordinates: [
          -77.073566306,
          38.90960145
        ],
        type: "Point"
      },
      properties: {
        id: 2044,
        name: "Classroom 261",
        type: "classroom",
        floor: 2,
        metadata: {
          description: "Classroom 261 in Reiss Science Building (2nd floor)",
          room_number: "261",
          room_type: "classroom",
          access: "public"
        },
        building_id: "reiss"
      }
    }
  ]
};
const building = {
  id,
  name,
  description,
  address,
  location: location$1,
  indoor_map,
  indoor_routes,
  pois
};
const useMapStore = create((set) => ({
  mapInstance: null,
  setMapInstance: (map) => set({ mapInstance: map })
}));
const useFloorStore = create((set) => ({
  currentFloor: 1,
  // Start at Floor 1 to match REISS building level
  setCurrentFloor: (floor) => set({ currentFloor: floor })
}));
var We = Object.defineProperty;
var Ae = (t, i, e) => i in t ? We(t, i, { enumerable: true, configurable: true, writable: true, value: e }) : t[i] = e;
var u = (t, i, e) => (Ae(t, typeof i != "symbol" ? i + "" : i, e), e);
class Ne {
  constructor(i) {
    u(this, "map");
    u(this, "listeners", {});
    u(this, "oneTimeListeners", {});
    this.map = i;
  }
  fire(i) {
    var n, o;
    i.target = this.map;
    const e = i.type;
    (n = this.listeners[e]) == null || n.forEach((s) => s(i)), (o = this.oneTimeListeners[e]) == null || o.forEach((s) => {
      var a, h;
      s(i);
      const r = (a = this.oneTimeListeners[e]) == null ? void 0 : a.indexOf(s);
      r !== void 0 && ~r && ((h = this.oneTimeListeners[e]) == null || h.splice(r, 1));
    });
  }
  /**
   * Registers an event listener.
   */
  on(i, e) {
    this.listeners[i] = this.listeners[i] ?? [], this.listeners[i].push(e);
  }
  /**
   * Un-registers an event listener.
   */
  off(i, e) {
    var o, s;
    const n = (o = this.listeners[i]) == null ? void 0 : o.indexOf(e);
    n !== void 0 && ~n && ((s = this.listeners[i]) == null || s.splice(n, 1));
  }
  /**
   * Registers an event listener to be invoked only once.
   */
  once(i, e) {
    this.oneTimeListeners[i] = this.oneTimeListeners[i] ?? [], this.oneTimeListeners[i].push(e);
  }
}
class $ {
  /**
   * @private
   */
  constructor(i, e, n) {
    u(this, "type");
    u(this, "target");
    u(this, "originalEvent");
    u(this, "data");
    this.type = i, this.originalEvent = e, this.data = n;
  }
}
class ae {
  /**
   * @private
   */
  constructor(i, e, n) {
    u(this, "type");
    u(this, "target");
    u(this, "originalEvent");
    u(this, "data");
    this.type = i, this.originalEvent = e, this.data = n;
  }
}
const xe = {
  api: "https://router.project-osrm.org/route/v1",
  profile: "driving",
  requestOptions: {},
  requestTimeout: null,
  // can't use Infinity here because of this: https://github.com/denysdovhan/wtfjs/issues/61#issuecomment-325321753
  makePostRequest: false,
  sourceName: "maplibre-gl-directions",
  pointsScalingFactor: 1,
  linesScalingFactor: 1,
  sensitiveWaypointLayers: ["maplibre-gl-directions-waypoint", "maplibre-gl-directions-waypoint-casing"],
  sensitiveSnappointLayers: ["maplibre-gl-directions-snappoint", "maplibre-gl-directions-snappoint-casing"],
  sensitiveRoutelineLayers: ["maplibre-gl-directions-routeline", "maplibre-gl-directions-routeline-casing"],
  sensitiveAltRoutelineLayers: ["maplibre-gl-directions-alt-routeline", "maplibre-gl-directions-alt-routeline-casing"],
  dragThreshold: 10,
  refreshOnMove: false,
  bearings: false
}, L = {
  snapline: "#34343f",
  altRouteline: "#9e91be",
  routelineFoot: "#3665ff",
  routelineBike: "#63c4ff",
  routeline: "#7b51f8",
  congestionLow: "#42c74c",
  congestionHigh: "#d72359",
  hoverpoint: "#30a856",
  snappoint: "#cb3373",
  snappointHighlight: "#e50d3f",
  waypointFoot: "#3665ff",
  waypointFootHighlight: "#0942ff",
  waypointBike: "#63c4ff",
  waypointBikeHighlight: "#0bb8ff",
  waypoint: "#7b51f8",
  waypointHighlight: "#6d26d7"
}, le = [
  "case",
  ["==", ["get", "profile", ["get", "arriveSnappointProperties"]], "foot"],
  L.routelineFoot,
  ["==", ["get", "profile", ["get", "arriveSnappointProperties"]], "bike"],
  L.routelineBike,
  [
    "interpolate-hcl",
    ["linear"],
    ["get", "congestion"],
    0,
    L.routeline,
    1,
    L.congestionLow,
    100,
    L.congestionHigh
  ]
], he = [
  "case",
  ["==", ["get", "profile"], "foot"],
  ["case", ["boolean", ["get", "highlight"], false], L.waypointFootHighlight, L.waypointFoot],
  ["==", ["get", "profile"], "bike"],
  ["case", ["boolean", ["get", "highlight"], false], L.waypointBikeHighlight, L.waypointBike],
  ["case", ["boolean", ["get", "highlight"], false], L.waypointHighlight, L.waypoint]
], pe = [
  "case",
  ["boolean", ["get", "highlight"], false],
  L.snappointHighlight,
  L.snappoint
];
function $e(t = 1, i = 1, e = "maplibre-gl-directions") {
  const n = [
    "interpolate",
    ["exponential", 1.5],
    ["zoom"],
    // don't forget it's the radius! The visible value is diameter (which is 2x)
    // on zoom levels 0-5 should be 5px more than the routeline casing. 7 + 5 = 12.
    // When highlighted should be +2px more. 12 + 2 = 14
    0,
    // highlighted to default ratio (epsilon) = 14 / 12 ~= 1.16
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      14 * t,
      12 * t
    ],
    5,
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      14 * t,
      12 * t
    ],
    // exponentially grows on zoom levels 5-18 finally becoming the same 5px wider than the routeline's casing on
    // the same zoom level: 23 + 5 = 28px
    18,
    // highlighted = default ~= 33
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      33 * t,
      28 * t
    ]
  ], o = [
    "interpolate",
    ["exponential", 1.5],
    ["zoom"],
    // on zoom levels 0-5 - 5px smaller than the casing. 12 - 5 = 7.
    0,
    // feature to casing ratio (psi) = 7 / 12 ~= 0.58
    // highlighted to default ratio (epsilon) = 9 / 7 ~= 1.28
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      9 * t,
      7 * t
    ],
    5,
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      9 * t,
      7 * t
    ],
    // exponentially grows on zoom levels 5-18 finally becoming psi times the casing
    18,
    // psi * 28 ~= 16
    // when highlighted multiply by epsilon ~= 21
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      21 * t,
      16 * t
    ]
  ], s = [
    "interpolate",
    ["exponential", 1.5],
    ["zoom"],
    // on zoom levels 0-5 - 4px smaller than the casing (2px on each side). 7 - 4 = 3.
    // Doesn't change when highlighted
    0,
    // feature to casing ratio (psi) = 3 / 7 ~= 0.42
    3 * i,
    5,
    3 * i,
    // exponentially grows on zoom levels 5-18 finally becoming psi times the casing
    18,
    // psi * 23  ~= 10
    10 * i
  ], r = [
    "interpolate",
    ["exponential", 1.5],
    ["zoom"],
    // on zoom levels 0-5 - 7px by default and 10px when highlighted
    0,
    // highlighted to default ratio (epsilon) = 10 / 7 ~= 1.42
    ["case", ["boolean", ["get", "highlight"], false], 10 * i, 7 * i],
    5,
    ["case", ["boolean", ["get", "highlight"], false], 10 * i, 7 * i],
    // exponentially grows on zoom levels 5-18 finally becoming 32px when highlighted
    18,
    // default = 32 / epsilon ~= 23
    ["case", ["boolean", ["get", "highlight"], false], 32 * i, 23 * i]
  ];
  return [
    {
      id: `${e}-snapline`,
      type: "line",
      source: e,
      layout: {
        "line-cap": "round",
        "line-join": "round"
      },
      paint: {
        "line-dasharray": [3, 3],
        "line-color": L.snapline,
        "line-opacity": 0.65,
        "line-width": 3
      },
      filter: ["==", ["get", "type"], "SNAPLINE"]
    },
    {
      id: `${e}-alt-routeline-casing`,
      type: "line",
      source: e,
      layout: {
        "line-cap": "butt",
        "line-join": "round"
      },
      paint: {
        "line-color": L.altRouteline,
        "line-opacity": 0.55,
        "line-width": r
      },
      filter: ["==", ["get", "route"], "ALT"]
    },
    {
      id: `${e}-alt-routeline`,
      type: "line",
      source: e,
      layout: {
        "line-cap": "butt",
        "line-join": "round"
      },
      paint: {
        "line-color": L.altRouteline,
        "line-opacity": 0.85,
        "line-width": s
      },
      filter: ["==", ["get", "route"], "ALT"]
    },
    {
      id: `${e}-routeline-casing`,
      type: "line",
      source: e,
      layout: {
        "line-cap": "butt",
        "line-join": "round"
      },
      paint: {
        "line-color": le,
        "line-opacity": 0.55,
        "line-width": r
      },
      filter: ["==", ["get", "route"], "SELECTED"]
    },
    {
      id: `${e}-routeline`,
      type: "line",
      source: e,
      layout: {
        "line-cap": "butt",
        "line-join": "round"
      },
      paint: {
        "line-color": le,
        "line-opacity": 0.85,
        "line-width": s
      },
      filter: ["==", ["get", "route"], "SELECTED"]
    },
    {
      id: `${e}-hoverpoint-casing`,
      type: "circle",
      source: e,
      paint: {
        "circle-radius": n,
        "circle-color": L.hoverpoint,
        "circle-opacity": 0.65
      },
      filter: ["==", ["get", "type"], "HOVERPOINT"]
    },
    {
      id: `${e}-hoverpoint`,
      type: "circle",
      source: e,
      paint: {
        // same as snappoint, but always hig(since it's always highlighted while present on the map)
        "circle-radius": o,
        "circle-color": L.hoverpoint
      },
      filter: ["==", ["get", "type"], "HOVERPOINT"]
    },
    {
      id: `${e}-snappoint-casing`,
      type: "circle",
      source: e,
      paint: {
        "circle-radius": n,
        "circle-color": pe,
        "circle-opacity": 0.65
      },
      filter: ["==", ["get", "type"], "SNAPPOINT"]
    },
    {
      id: `${e}-snappoint`,
      type: "circle",
      source: e,
      paint: {
        "circle-radius": o,
        "circle-color": pe
      },
      filter: ["==", ["get", "type"], "SNAPPOINT"]
    },
    {
      id: `${e}-waypoint-casing`,
      type: "circle",
      source: e,
      paint: {
        "circle-radius": n,
        "circle-color": he,
        "circle-opacity": 0.65
      },
      filter: ["==", ["get", "type"], "WAYPOINT"]
    },
    {
      id: `${e}-waypoint`,
      type: "circle",
      source: e,
      paint: {
        "circle-radius": o,
        "circle-color": he
      },
      filter: ["==", ["get", "type"], "WAYPOINT"]
    }
  ];
}
const je = "useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";
let we = (t = 21) => {
  let i = "", e = crypto.getRandomValues(new Uint8Array(t));
  for (; t--; )
    i += je[e[t] & 63];
  return i;
};
function ce(t) {
  return t & 1 ? ~(t >> 1) : t >> 1;
}
function de(t, i = 5) {
  const e = Math.pow(10, i);
  let n = 0, o = 0, s = 0;
  const r = [];
  let a = 0, h = 0, c = null, d, l;
  for (; n < t.length; ) {
    c = null, a = 0, h = 0;
    do
      c = t.charCodeAt(n++) - 63, h |= (c & 31) << a, a += 5;
    while (c >= 32);
    d = ce(h), a = h = 0;
    do
      c = t.charCodeAt(n++) - 63, h |= (c & 31) << a, a += 5;
    while (c >= 32);
    l = ce(h), o += d, s += l, r.push([s / e, o / e]);
  }
  return r;
}
function ze(t, i) {
  return t.geometries === "geojson" ? i.coordinates : t.geometries === "polyline6" ? de(i, 6) : de(i, 5);
}
function qe(t, i, e) {
  var n, o, s, r;
  if ((n = t.annotations) != null && n.includes("congestion_numeric"))
    return ((o = i == null ? void 0 : i.congestion_numeric) == null ? void 0 : o[e]) ?? 0;
  if ((s = t.annotations) != null && s.includes("congestion"))
    switch (((r = i == null ? void 0 : i.congestion) == null ? void 0 : r[e]) ?? "") {
      case "unknown":
        return 0;
      case "low":
        return 1;
      case "moderate":
        return 34;
      case "heavy":
        return 77;
      case "severe":
        return 100;
      default:
        return 0;
    }
  else
    return 0;
}
function Ue(t, i, e) {
  return !t.geometries || t.geometries === "polyline" ? Math.abs(i[0] - e[0]) <= 1e-5 && Math.abs(i[1] - e[1]) <= 1e-5 : i[0] === e[0] && i[1] === e[1];
}
function ge(t) {
  return t.map((i) => [i.geometry.coordinates[0], i.geometry.coordinates[1]]);
}
function ue(t) {
  return t.map((i) => {
    var e, n, o;
    return Array.isArray((e = i.properties) == null ? void 0 : e.bearing) ? [(n = i.properties) == null ? void 0 : n.bearing[0], (o = i.properties) == null ? void 0 : o.bearing[1]] : void 0;
  });
}
function De(t) {
  const i = $e(
    t == null ? void 0 : t.pointsScalingFactor,
    t == null ? void 0 : t.linesScalingFactor,
    t == null ? void 0 : t.sourceName
  );
  return Object.assign({}, xe, { layers: i }, t);
}
function Ee(t, i, e) {
  const n = t.makePostRequest ? "post" : "get";
  let o, s;
  if (n === "get")
    o = `${t.api}/${t.profile}/${i.join(";")}`, s = new URLSearchParams(t.requestOptions);
  else {
    o = `${t.api}/${t.profile}${t.requestOptions.access_token ? `?access_token=${t.requestOptions.access_token}` : ""}`;
    const r = new FormData();
    Object.entries(t.requestOptions).forEach(([a, h]) => {
      a !== "access_token" && r.set(a, h);
    }), r.set("coordinates", i.join(";")), s = new URLSearchParams(r);
  }
  return t.bearings && e && s.set(
    "bearings",
    e.map((r) => r ? `${r[0]},${r[1]}` : "").join(";")
  ), {
    method: n,
    url: o,
    payload: s
  };
}
function Le(t, i, e) {
  return {
    type: "Feature",
    geometry: {
      type: "Point",
      coordinates: t
    },
    properties: {
      type: i,
      id: we(),
      ...e ?? {}
    }
  };
}
function Me(t, i, e, n, o = false) {
  if (t.length !== i.length)
    return [];
  const s = t.map((r, a) => ({
    type: "Feature",
    geometry: {
      type: "LineString",
      coordinates: [
        [r[0], r[1]],
        [i[a][0], i[a][1]]
      ]
    },
    properties: {
      type: "SNAPLINE"
    }
  }));
  return ~n && e !== void 0 && o && (s.push({
    type: "Feature",
    geometry: {
      type: "LineString",
      coordinates: [
        [e[0], e[1]],
        [i[n][0], i[n][1]]
      ]
    },
    properties: {
      type: "SNAPLINE"
    }
  }), s.push({
    type: "Feature",
    geometry: {
      type: "LineString",
      coordinates: [
        [e[0], e[1]],
        [i[n + 1][0], i[n + 1][1]]
      ]
    },
    properties: {
      type: "SNAPLINE"
    }
  })), s;
}
function Se(t, i, e, n) {
  return i.map((o, s) => {
    const r = ze(t, o.geometry), a = n.map((m) => m.geometry.coordinates);
    let h = 0;
    const c = a.map((m, f) => {
      const E = r.slice(h).findIndex((v) => Ue(t, v, m)), D = f === a.length - 1;
      if (E !== -1)
        h += E;
      else if (D)
        return r.length - 1;
      return h;
    }).slice(1);
    let d = 0;
    const l = c.map((m) => r.slice(d, d = m + 1)), g = [];
    return l.forEach((m, f) => {
      const E = we();
      m.forEach((D, v) => {
        var b, R, T;
        const _ = g[g.length - 1], y = qe(t, (b = o.legs[f]) == null ? void 0 : b.annotation, v);
        if (f === ((R = _ == null ? void 0 : _.properties) == null ? void 0 : R.legIndex) && ((T = _.properties) == null ? void 0 : T.congestion) === y)
          _.geometry.coordinates.push(D);
        else {
          const x = n[f].properties ?? {}, W = n[f + 1].properties ?? {}, C = {
            type: "Feature",
            geometry: {
              type: "LineString",
              coordinates: []
            },
            properties: {
              id: E,
              // used to highlight the whole leg when hovered, not a single segment
              routeIndex: s,
              // used to switch between alternative and selected routes
              route: s === e ? "SELECTED" : "ALT",
              legIndex: f,
              // used across forEach iterations to check whether it's safe to continue a segment
              congestion: y,
              // the current segment's congestion level
              departSnappointProperties: x,
              // include depart and arrive snappoints' properties to allow customization...
              arriveSnappointProperties: W
              // ...of behavior via a subclass
            }
          };
          _ && C.geometry.coordinates.push(
            _.geometry.coordinates[_.geometry.coordinates.length - 1]
          ), C.geometry.coordinates.push(D), g.push(C);
        }
      });
    }), g;
  });
}
class _t extends Ne {
  constructor(e, n) {
    super(e);
    u(this, "configuration");
    u(this, "_interactive", false);
    u(this, "_hoverable", false);
    u(this, "buildRequest", Ee);
    u(this, "buildPoint", Le);
    u(this, "buildSnaplines", Me);
    u(this, "buildRoutelines", Se);
    u(this, "onMoveHandler");
    u(this, "onDragDownHandler");
    u(this, "onDragMoveHandler");
    u(this, "onDragUpHandler");
    u(this, "onClickHandler");
    u(this, "liveRefreshHandler");
    u(this, "profiles", []);
    u(this, "_waypoints", []);
    u(this, "snappoints", []);
    u(this, "routelines", []);
    u(this, "selectedRouteIndex", 0);
    u(this, "hoverpoint");
    u(this, "highlightedWaypoints", []);
    u(this, "highlightedSnappoints", []);
    u(this, "dragDownPosition", {
      x: 0,
      y: 0
    });
    u(this, "waypointBeingDragged");
    u(this, "waypointBeingDraggedInitialCoordinates");
    u(this, "departSnappointIndex", -1);
    u(this, "currentMousePosition", {
      x: 0,
      y: 0
    });
    u(this, "refreshOnMoveIsRefreshing", false);
    u(this, "noMouseMovementTimer");
    u(this, "lastRequestMousePosition", {
      x: 0,
      y: 0
    });
    u(this, "allowRouteSwitch", false);
    u(this, "abortController");
    this.map = e, this.configuration = De(n), this.onMoveHandler = this.onMove.bind(this), this.onDragDownHandler = this.onDragDown.bind(this), this.onDragMoveHandler = this.onDragMove.bind(this), this.onDragUpHandler = this.onDragUp.bind(this), this.onClickHandler = this.onClick.bind(this), this.liveRefreshHandler = this.liveRefresh.bind(this), this.init();
  }
  /**
   * @alias {@link waypoints}
   *
   * Aliased for the sakes of naming-consistency.
   */
  get waypointsCoordinates() {
    return ge(this._waypoints);
  }
  get snappointsCoordinates() {
    return this.snappoints.map((e) => [e.geometry.coordinates[0], e.geometry.coordinates[1]]);
  }
  get snaplines() {
    var e, n, o;
    return this.buildSnaplines(
      this.waypointsCoordinates,
      this.snappointsCoordinates,
      (e = this.hoverpoint) == null ? void 0 : e.geometry.coordinates,
      this.departSnappointIndex,
      (o = (n = this.hoverpoint) == null ? void 0 : n.properties) == null ? void 0 : o.showSnaplines
    );
  }
  init() {
    this.map.addSource(this.configuration.sourceName, {
      type: "geojson",
      data: {
        type: "FeatureCollection",
        features: []
      }
    }), this.configuration.layers.forEach((e) => {
      this.map.addLayer(e);
    });
  }
  async fetch({ method: e, url: n, payload: o }) {
    var r, a;
    const s = await (e === "get" ? await fetch(`${n}?${o}`, { signal: (r = this.abortController) == null ? void 0 : r.signal }) : await fetch(`${n}`, {
      signal: (a = this.abortController) == null ? void 0 : a.signal,
      method: "POST",
      headers: {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      body: o
    })).json();
    if (s.code !== "Ok")
      throw new Error(s.message ?? "An unexpected error occurred.");
    return s;
  }
  async fetchDirections(e) {
    var n;
    if ((n = this.abortController) == null || n.abort(), this._waypoints.length >= 2) {
      this.fire(new ae("fetchroutesstart", e)), this.abortController = new AbortController();
      let o;
      this.configuration.requestTimeout !== null && (o = setTimeout(() => {
        var l;
        return (l = this.abortController) == null ? void 0 : l.abort();
      }, this.configuration.requestTimeout)), this.profiles.length || (this.profiles = [this.configuration.profile]);
      const s = [], r = [];
      this.profiles.reduce((l, g, m) => {
        const f = m === this.profiles.length - 1, E = m > 0 ? this.profiles[m - 1] : void 0, D = g === E, v = f ? (
          /**
           * If it's the last supplied profile include all remaining waypoints
           */
          this._waypoints.length
        ) : D ? (
          /**
           * If profile is same as previous one add a slice of one element only
           */
          l + 1
        ) : (
          /**
           * If profile is different slice corresponding pair of coordinates
           */
          l + 2
        );
        return D ? r[r.length - 1].push(...this._waypoints.slice(l, v)) : (r.push(this._waypoints.slice(l, v)), s.push(g)), v;
      }, 0);
      const a = s.map((l, g) => this.buildRequest(
        { ...this.configuration, profile: l },
        ge(r[g]),
        this.configuration.bearings ? ue(r[g]) : void 0
      ));
      let h;
      try {
        h = await Promise.all(
          a.map(async (l) => {
            let g;
            try {
              g = await this.fetch(l);
            } finally {
              this.fire(new ae("fetchroutesend", e, g));
            }
            return g;
          })
        );
      } finally {
        clearTimeout(o);
      }
      const c = h.flatMap((l, g) => {
        const m = s[g], f = l.waypoints.map(
          (D, v) => this.buildPoint(D.location, "SNAPPOINT", {
            profile: m,
            waypointProperties: r[g][v].properties ?? {}
          })
        ), E = this.buildRoutelines(
          this.configuration.requestOptions,
          l.routes,
          this.selectedRouteIndex,
          f
        );
        return { snappoints: f, routelines: E };
      }), d = h.flatMap((l) => l.routes);
      this.snappoints = c.flatMap((l) => l.snappoints), this.routelines = c.flatMap((l) => l.routelines), d.length <= this.selectedRouteIndex && (this.selectedRouteIndex = 0);
    } else
      this.snappoints = [], this.routelines = [];
    this.draw(false);
  }
  draw(e = true) {
    const n = [
      ...this._waypoints,
      ...this.snappoints,
      ...this.snaplines,
      ...this.routelines.reduce((s, r) => e ? s.concat(...r) : s.concat(
        ...r.map((a) => (a.properties && (a.properties.route = a.properties.routeIndex === this.selectedRouteIndex ? "SELECTED" : "ALT"), a))
      ), [])
    ];
    this.hoverpoint && n.push(this.hoverpoint);
    const o = {
      type: "FeatureCollection",
      features: n
    };
    this.map.getSource(this.configuration.sourceName) && this.map.getSource(this.configuration.sourceName).setData(o);
  }
  deHighlight() {
    this.highlightedWaypoints.forEach((e) => {
      e != null && e.properties && (e.properties.highlight = false);
    }), this.highlightedSnappoints.forEach((e) => {
      e != null && e.properties && (e.properties.highlight = false);
    }), this.routelines.forEach((e) => {
      e.forEach((n) => {
        n.properties && (n.properties.highlight = false);
      });
    });
  }
  onMove(e) {
    var o, s, r, a;
    const n = this.map.queryRenderedFeatures(e.point, {
      layers: [
        ...this.configuration.sensitiveWaypointLayers,
        ...this.configuration.sensitiveSnappointLayers,
        ...this.configuration.sensitiveRoutelineLayers,
        ...this.configuration.sensitiveAltRoutelineLayers
      ]
    })[0];
    if (this.deHighlight(), this.configuration.sensitiveWaypointLayers.includes((n == null ? void 0 : n.layer.id) ?? "")) {
      this.map.getCanvas().style.cursor = "pointer", this.interactive && this.map.dragPan.disable();
      const h = this._waypoints.find((d) => {
        var l, g;
        return ((l = d.properties) == null ? void 0 : l.id) === ((g = n == null ? void 0 : n.properties) == null ? void 0 : g.id);
      }), c = h && this.snappoints.find(
        (d) => {
          var l, g, m;
          return ((g = (l = d.properties) == null ? void 0 : l.waypointProperties) == null ? void 0 : g.id) === ((m = h.properties) == null ? void 0 : m.id);
        }
      );
      h && (this.highlightedWaypoints = [h]), c && (this.highlightedSnappoints = [c]), (o = this.highlightedWaypoints[0]) != null && o.properties && (this.highlightedWaypoints[0].properties.highlight = true), (s = this.highlightedSnappoints[0]) != null && s.properties && (this.highlightedSnappoints[0].properties.highlight = true), this.hoverpoint && (this.hoverpoint = void 0);
    } else if (this.configuration.sensitiveSnappointLayers.includes((n == null ? void 0 : n.layer.id) ?? "")) {
      this.map.getCanvas().style.cursor = "pointer";
      const h = this.snappoints.findIndex((c) => {
        var d, l;
        return ((d = c.properties) == null ? void 0 : d.id) === ((l = n == null ? void 0 : n.properties) == null ? void 0 : l.id);
      });
      this.highlightedSnappoints = [this.snappoints[h]], this.highlightedWaypoints = [this._waypoints[h]], this.highlightedSnappoints[0].properties && (this.highlightedSnappoints[0].properties.highlight = true), this.highlightedWaypoints[0].properties && (this.highlightedWaypoints[0].properties.highlight = true), this.hoverpoint && (this.hoverpoint = void 0);
    } else
      this.configuration.sensitiveRoutelineLayers.includes((n == null ? void 0 : n.layer.id) ?? "") ? (this.map.getCanvas().style.cursor = "pointer", this.interactive && (this.map.dragPan.disable(), this.hoverpoint ? this.hoverpoint.geometry.coordinates = [e.lngLat.lng, e.lngLat.lat] : this.hoverpoint = this.buildPoint([e.lngLat.lng, e.lngLat.lat], "HOVERPOINT", {
        departSnappointProperties: {
          ...JSON.parse(((r = n == null ? void 0 : n.properties) == null ? void 0 : r.departSnappointProperties) ?? "{}")
        },
        arriveSnappointProperties: {
          ...JSON.parse(((a = n == null ? void 0 : n.properties) == null ? void 0 : a.arriveSnappointProperties) ?? "{}")
        }
      })), this.routelines.forEach((h) => {
        h.forEach((c) => {
          var d, l;
          c.properties && ((d = c.properties) == null ? void 0 : d.id) === ((l = n == null ? void 0 : n.properties) == null ? void 0 : l.id) && (c.properties.highlight = true);
        });
      })) : this.configuration.sensitiveAltRoutelineLayers.includes((n == null ? void 0 : n.layer.id) ?? "") ? (this.map.getCanvas().style.cursor = "pointer", this.routelines.forEach((h) => {
        h.forEach((c) => {
          var d, l;
          c.properties && ((d = c.properties) == null ? void 0 : d.id) === ((l = n == null ? void 0 : n.properties) == null ? void 0 : l.id) && (c.properties.highlight = true);
        });
      }), this.hoverpoint && (this.hoverpoint = void 0)) : (this.map.dragPan.enable(), this.map.getCanvas().style.cursor = "", this.hoverpoint = void 0);
    this.draw();
  }
  onDragDown(e) {
    var o, s, r, a, h, c;
    if (e.type === "touchstart" && e.originalEvent.touches.length !== 1 || e.type === "mousedown" && e.originalEvent.which !== 1)
      return;
    const n = this.map.queryRenderedFeatures(e.point);
    if (n.length && n[0].source === this.configuration.sourceName) {
      const d = n.filter((l) => this.configuration.sensitiveWaypointLayers.includes((l == null ? void 0 : l.layer.id) ?? "") || this.configuration.sensitiveSnappointLayers.includes((l == null ? void 0 : l.layer.id) ?? "") || this.configuration.sensitiveRoutelineLayers.includes((l == null ? void 0 : l.layer.id) ?? ""))[0];
      if (this.dragDownPosition = e.point, this.currentMousePosition = e.point, this.configuration.sensitiveWaypointLayers.includes((d == null ? void 0 : d.layer.id) ?? ""))
        this.waypointBeingDragged = this._waypoints.find((l) => {
          var g, m;
          return ((g = l.properties) == null ? void 0 : g.id) === ((m = d == null ? void 0 : d.properties) == null ? void 0 : m.id);
        }), this.waypointBeingDraggedInitialCoordinates = (o = this.waypointBeingDragged) == null ? void 0 : o.geometry.coordinates;
      else if (this.configuration.sensitiveRoutelineLayers.includes((d == null ? void 0 : d.layer.id) ?? "")) {
        if (this.departSnappointIndex = JSON.parse((s = d == null ? void 0 : d.properties) == null ? void 0 : s.legIndex), this.hoverpoint)
          if (this.configuration.refreshOnMove) {
            const l = this.departSnappointIndex !== void 0 ? this.departSnappointIndex + 1 : void 0;
            this._addWaypoint([e.lngLat.lng, e.lngLat.lat], l, e), this.waypointBeingDragged = l ? this._waypoints[l] : void 0, this.hoverpoint = void 0;
          } else
            this.hoverpoint.geometry.coordinates = [e.lngLat.lng, e.lngLat.lat];
        else
          this.hoverpoint = this.buildPoint([e.lngLat.lng, e.lngLat.lat], "HOVERPOINT", {
            departSnappointProperties: {
              ...JSON.parse(((r = d == null ? void 0 : d.properties) == null ? void 0 : r.departSnappointProperties) ?? "{}")
            },
            arriveSnappointProperties: {
              ...JSON.parse(((a = d == null ? void 0 : d.properties) == null ? void 0 : a.arriveSnappointProperties) ?? "{}")
            }
          });
        (h = this.hoverpoint) != null && h.properties && (this.hoverpoint.properties.showSnaplines = true), ~this.departSnappointIndex && ((c = this.snappoints[this.departSnappointIndex]) != null && c.properties) && (this.snappoints[this.departSnappointIndex].properties.highlight = true, this.highlightedSnappoints.push(this.snappoints[this.departSnappointIndex]), this.snappoints[this.departSnappointIndex + 1].properties.highlight = true, this.highlightedSnappoints.push(this.snappoints[this.departSnappointIndex + 1]));
      }
      this.map.off("touchstart", this.onMoveHandler), this.map.off("mousemove", this.onMoveHandler), e.type === "touchstart" ? (this.map.on("touchmove", this.onDragMoveHandler), this.map.on("touchend", this.onDragUpHandler)) : e.type === "mousedown" && (this.map.on("mousemove", this.onDragMoveHandler), this.map.on("mouseup", this.onDragUpHandler)), this.draw();
    }
  }
  onDragMove(e) {
    if (this.configuration.refreshOnMove && (clearTimeout(this.noMouseMovementTimer), this.noMouseMovementTimer = setTimeout(this.liveRefreshHandler, 300, e)), e.type === "touchmove" && e.originalEvent.touches.length !== 1)
      return e.originalEvent.preventDefault();
    e.type === "mousemove" && e.originalEvent.which !== 1 || (this.waypointBeingDragged ? this.waypointBeingDragged.geometry.coordinates = [e.lngLat.lng, e.lngLat.lat] : this.hoverpoint && (this.hoverpoint.geometry.coordinates = [e.lngLat.lng, e.lngLat.lat]), this.currentMousePosition = e.point, this.draw(), this.configuration.refreshOnMove && !this.refreshOnMoveIsRefreshing && this.liveRefreshHandler(e));
  }
  onDragUp(e) {
    var n, o, s;
    if (this.configuration.refreshOnMove && clearTimeout(this.noMouseMovementTimer), !(e.type === "mouseup" && e.originalEvent.which !== 1)) {
      if ((n = this.hoverpoint) != null && n.properties && (this.hoverpoint.properties.showSnaplines = false), Math.abs(e.point.x - ((o = this.dragDownPosition) == null ? void 0 : o.x)) > (this.configuration.dragThreshold >= 0 ? this.configuration.dragThreshold : 0) || Math.abs(e.point.y - ((s = this.dragDownPosition) == null ? void 0 : s.y)) > (this.configuration.dragThreshold >= 0 ? this.configuration.dragThreshold : 0))
        if (this.waypointBeingDragged) {
          this.waypointBeingDragged.geometry.coordinates = [e.lngLat.lng, e.lngLat.lat];
          const r = new $("movewaypoint", e, {
            index: this._waypoints.indexOf(this.waypointBeingDragged),
            initialCoordinates: this.waypointBeingDraggedInitialCoordinates
          });
          this.fire(r), this.fetchDirections(r).catch((a) => {
            a instanceof DOMException && a.name == "AbortError" || this.waypointBeingDragged && this.waypointBeingDraggedInitialCoordinates && (this.waypointBeingDragged.geometry.coordinates = this.waypointBeingDraggedInitialCoordinates);
          }), this.waypointBeingDragged = void 0, this.waypointBeingDraggedInitialCoordinates = void 0;
        } else
          this.hoverpoint && (this._addWaypoint(
            [e.lngLat.lng, e.lngLat.lat],
            this.departSnappointIndex !== void 0 ? this.departSnappointIndex + 1 : void 0,
            e
          ), this.hoverpoint = void 0);
      else
        this.waypointBeingDragged && this.waypointBeingDraggedInitialCoordinates ? (this.waypointBeingDragged.geometry.coordinates = this.waypointBeingDraggedInitialCoordinates, this.waypointBeingDragged = void 0, this.waypointBeingDraggedInitialCoordinates = void 0) : this.hoverpoint && (this.hoverpoint = void 0);
      this.deHighlight(), e.type === "touchend" ? (this.map.off("touchmove", this.onDragMoveHandler), this.map.off("touchend", this.onDragUpHandler)) : e.type === "mouseup" && (this.map.off("mousemove", this.onDragMoveHandler), this.map.off("mouseup", this.onDragUpHandler)), this.map.on("touchstart", this.onMoveHandler), this.map.on("mousemove", this.onMoveHandler), this.map.dragPan.enable(), this.draw(), this.map.once("idle", () => {
        this.onMove(e);
      });
    }
  }
  async liveRefresh(e) {
    var n, o, s, r;
    if (Math.abs(((n = this.lastRequestMousePosition) == null ? void 0 : n.x) - ((o = this.currentMousePosition) == null ? void 0 : o.x)) > (this.configuration.dragThreshold >= 0 ? this.configuration.dragThreshold : 0) || Math.abs(((s = this.lastRequestMousePosition) == null ? void 0 : s.y) - ((r = this.currentMousePosition) == null ? void 0 : r.y)) > (this.configuration.dragThreshold >= 0 ? this.configuration.dragThreshold : 0)) {
      if (this.refreshOnMoveIsRefreshing = true, this.lastRequestMousePosition = this.currentMousePosition, this.waypointBeingDragged) {
        const a = new $("movewaypoint", e, {
          index: this._waypoints.indexOf(this.waypointBeingDragged),
          initialCoordinates: this.waypointBeingDraggedInitialCoordinates
        });
        this.fire(a);
        try {
          await this.fetchDirections(a);
        } catch {
        }
      }
      this.refreshOnMoveIsRefreshing = false;
    }
  }
  onClick(e) {
    const n = this.map.queryRenderedFeatures(e.point, {
      layers: [
        ...this.configuration.sensitiveWaypointLayers,
        ...this.configuration.sensitiveSnappointLayers,
        ...this.configuration.sensitiveAltRoutelineLayers,
        ...this.configuration.sensitiveRoutelineLayers
      ]
    })[0];
    if (this.interactive && this.configuration.sensitiveWaypointLayers.includes((n == null ? void 0 : n.layer.id) ?? "")) {
      const o = this._waypoints.findIndex((s) => {
        var r, a;
        return ((r = s.properties) == null ? void 0 : r.id) === ((a = n == null ? void 0 : n.properties) == null ? void 0 : a.id);
      });
      ~o && this._removeWaypoint(o, e);
    } else if (this.interactive && this.configuration.sensitiveSnappointLayers.includes((n == null ? void 0 : n.layer.id) ?? "")) {
      const o = this.snappoints.findIndex((s) => {
        var r, a;
        return ((r = s.properties) == null ? void 0 : r.id) === ((a = n == null ? void 0 : n.properties) == null ? void 0 : a.id);
      });
      ~o && this._removeWaypoint(o, e);
    } else
      (this.interactive || this.allowRouteSwitch) && this.configuration.sensitiveAltRoutelineLayers.includes((n == null ? void 0 : n.layer.id) ?? "") ? this.selectedRouteIndex = this.routelines.findIndex((o) => !!o.find((s) => {
        var r, a;
        return ((r = s.properties) == null ? void 0 : r.id) === ((a = n == null ? void 0 : n.properties) == null ? void 0 : a.id);
      })) : this.interactive && !this.configuration.sensitiveRoutelineLayers.includes((n == null ? void 0 : n.layer.id) ?? "") && this._addWaypoint([e.lngLat.lng, e.lngLat.lat], void 0, e);
    this.draw(false), this.map.once("idle", () => {
      this.onMove(e);
    });
  }
  assignWaypointsCategories() {
    this._waypoints.forEach((e, n) => {
      const o = n === 0 ? "ORIGIN" : n === this._waypoints.length - 1 ? "DESTINATION" : void 0;
      e.properties && (e.properties.index = n, e.properties.category = o);
    });
  }
  async _addWaypoint(e, n, o) {
    var r;
    (r = this.abortController) == null || r.abort(), n = n ?? this._waypoints.length, this._waypoints.splice(
      n,
      0,
      this.buildPoint(
        e,
        "WAYPOINT",
        this.configuration.bearings ? {
          bearing: void 0
        } : void 0
      )
    ), this.assignWaypointsCategories();
    const s = new $("addwaypoint", o, {
      index: n
    });
    this.fire(s), this.draw();
    try {
      await this.fetchDirections(s);
    } catch {
    }
  }
  async _removeWaypoint(e, n) {
    var s;
    (s = this.abortController) == null || s.abort(), this._waypoints.splice(e, 1), this.snappoints.splice(e, 1), this.assignWaypointsCategories();
    const o = new $("removewaypoint", n, {
      index: e
    });
    this.fire(o), this.draw();
    try {
      await this.fetchDirections(o);
    } catch {
    }
  }
  // the public interface begins here
  /**
   * The interactivity state of the instance. When `true`, the user is allowed to interact with the features drawn on
   * the map and to add waypoints by clicking the map. Automatically set to `false` whenever there's an ongoing
   * routing request.
   */
  get interactive() {
    return this._interactive;
  }
  set interactive(e) {
    this._interactive = e, e ? (this.map.on("touchstart", this.onMoveHandler), this.map.on("touchstart", this.onDragDownHandler), this.map.on("mousedown", this.onDragDownHandler), this.map.on("click", this.onClickHandler), this.hoverable || (this.map.on("mousemove", this.onMoveHandler), this.map.on("click", this.onClickHandler))) : (this.map.off("touchstart", this.onMoveHandler), this.map.off("touchstart", this.onDragDownHandler), this.map.off("mousedown", this.onDragDownHandler), this.hoverable || (this.map.off("mousemove", this.onMoveHandler), this.map.off("click", this.onClickHandler)), this.map.dragPan.enable());
  }
  /**
   * Allows hover effects in non-interactive mode. Can be set to `true` while `interactive` is `false` for the features
   * to be highlighted when hovered over by the user. Does nothing when `interactive` is `true`.
   */
  get hoverable() {
    return this._hoverable;
  }
  set hoverable(e) {
    this._hoverable = e, e && !this.interactive ? (this.map.on("mousemove", this.onMoveHandler), this.map.on("click", this.onClickHandler)) : this.interactive || (this.map.off("mousemove", this.onMoveHandler), this.map.off("click", this.onClickHandler));
  }
  /**
   * Returns all the waypoints' coordinates in the order they appear.
   */
  get waypoints() {
    return this.waypointsCoordinates;
  }
  /**
   * @alias Synchronous analogue of {@link setWaypoints}.
   */
  set waypoints(e) {
    this.setWaypoints(e);
  }
  /**
   * Returns all the waypoints' bearings values or an empty array if the `bearings` configuration option is not
   * enabled.
   */
  get waypointsBearings() {
    return this.configuration.bearings ? ue(this._waypoints) : (console.warn(
      "The `waypointsBearings` getter was referred to, but the `bearings` configuration option is not enabled!"
    ), []);
  }
  /**
   * Sets the waypoints' bearings values. Does not produce any effect in case the `bearings` configuration option is
   * disabled.
   */
  set waypointsBearings(e) {
    if (!this.configuration.bearings) {
      console.warn(
        "The `waypointsBearings` setter was referred to, but the `bearings` configuration option is not enabled!"
      );
      return;
    }
    this._waypoints.forEach((o, s) => {
      (o.properties || (o.properties = {})).bearing = e[s];
    });
    const n = new $("rotatewaypoints", void 0);
    this.fire(n), this.draw();
    try {
      this.fetchDirections(n);
    } catch {
    }
  }
  /**
   * Replaces all the waypoints with the specified ones and re-fetches the routes.
   *
   * @param waypoints The coordinates at which the waypoints should be added
   * @param profiles Profiles for fetching directions between waypoints.
   * @return Resolved after the routing request has finished
   */
  async setWaypoints(e, n = []) {
    var s;
    (s = this.abortController) == null || s.abort(), this.profiles = n.slice(0, e.length - 1), this.profiles.length === 0 && this.profiles.push(this.configuration.profile), this._waypoints = this.profiles.flatMap((r, a) => {
      const h = a === this.profiles.length - 1, c = a > 0 ? this.profiles[a - 1] : void 0, l = r === c ? a + 1 : a, g = h ? e.length : a + 2;
      return e.slice(l, g).map((m, f) => this.buildPoint(m, "WAYPOINT", {
        profile: r,
        ...this.configuration.bearings ? {
          bearing: this.waypointsBearings[f]
        } : void 0
      }));
    }), this.assignWaypointsCategories();
    const o = new $("setwaypoints", void 0);
    this.fire(o), this.draw();
    try {
      await this.fetchDirections(o);
    } catch {
    }
  }
  /**
   * Adds a waypoint at the specified coordinates to the map and re-fetches the routes.
   *
   * @param waypoint The coordinates at which the waypoint should be added
   * @param index The index the waypoint should be inserted at. If omitted, the waypoint is inserted at the end
   * @return Resolved after the routing request has finished
   */
  async addWaypoint(e, n) {
    await this._addWaypoint(e, n);
  }
  /**
   * Removes a waypoint and its related snappoint by the waypoint's index from the map and re-fetches the routes.
   *
   * @param index The index of the waypoint to remove
   * @return Resolved after the routing request has finished
   */
  async removeWaypoint(e) {
    await this._removeWaypoint(e);
  }
  /**
   * Clears the map from all the instance's traces: waypoints, snappoints, routes, etc.
   */
  clear() {
    this.setWaypoints([]), this.routelines = [];
  }
  /**
   * Removes all the added `MapLibreGlDirections`-specific layers and sources. Must be called manually before
   * de-initializing the instance.
   */
  destroy() {
    var e;
    (e = this.abortController) == null || e.abort(), this.clear(), this.hoverable = false, this.interactive = false, this.configuration.layers.forEach((n) => {
      this.map.removeLayer(n.id);
    }), this.map.removeSource(this.configuration.sourceName);
  }
}
function N() {
}
function Pe(t) {
  return t();
}
function fe() {
  return /* @__PURE__ */ Object.create(null);
}
function J(t) {
  t.forEach(Pe);
}
function Re(t) {
  return typeof t == "function";
}
function Ie(t, i) {
  return t != t ? i == i : t !== i || t && typeof t == "object" || typeof t == "function";
}
function Ve(t) {
  return Object.keys(t).length === 0;
}
function w(t, i) {
  t.appendChild(i);
}
function B(t, i, e) {
  t.insertBefore(i, e || null);
}
function O(t) {
  t.parentNode && t.parentNode.removeChild(t);
}
function P(t) {
  return document.createElementNS("http://www.w3.org/2000/svg", t);
}
function X(t) {
  return document.createTextNode(t);
}
function Je() {
  return X("");
}
function p(t, i, e) {
  e == null ? t.removeAttribute(i) : t.getAttribute(i) !== e && t.setAttribute(i, e);
}
function Ye(t) {
  return Array.from(t.childNodes);
}
let G;
function V(t) {
  G = t;
}
const z = [], ee = [];
let q = [];
const me = [], Qe = /* @__PURE__ */ Promise.resolve();
let te = false;
function Ze() {
  te || (te = true, Qe.then(Te));
}
function ie(t) {
  q.push(t);
}
const Z = /* @__PURE__ */ new Set();
let j = 0;
function Te() {
  if (j !== 0)
    return;
  const t = G;
  do {
    try {
      for (; j < z.length; ) {
        const i = z[j];
        j++, V(i), et(i.$$);
      }
    } catch (i) {
      throw z.length = 0, j = 0, i;
    }
    for (V(null), z.length = 0, j = 0; ee.length; )
      ee.pop()();
    for (let i = 0; i < q.length; i += 1) {
      const e = q[i];
      Z.has(e) || (Z.add(e), e());
    }
    q.length = 0;
  } while (z.length);
  for (; me.length; )
    me.pop()();
  te = false, Z.clear(), V(t);
}
function et(t) {
  if (t.fragment !== null) {
    t.update(), J(t.before_update);
    const i = t.dirty;
    t.dirty = [-1], t.fragment && t.fragment.p(t.ctx, i), t.after_update.forEach(ie);
  }
}
function tt(t) {
  const i = [], e = [];
  q.forEach((n) => t.indexOf(n) === -1 ? i.push(n) : e.push(n)), e.forEach((n) => n()), q = i;
}
const it = /* @__PURE__ */ new Set();
function nt(t, i) {
  t && t.i && (it.delete(t), t.i(i));
}
function ot(t, i, e) {
  const { fragment: n, after_update: o } = t.$$;
  n && n.m(i, e), ie(() => {
    const s = t.$$.on_mount.map(Pe).filter(Re);
    t.$$.on_destroy ? t.$$.on_destroy.push(...s) : J(s), t.$$.on_mount = [];
  }), o.forEach(ie);
}
function st(t, i) {
  const e = t.$$;
  e.fragment !== null && (tt(e.after_update), J(e.on_destroy), e.fragment && e.fragment.d(i), e.on_destroy = e.fragment = null, e.ctx = []);
}
function rt(t, i) {
  t.$$.dirty[0] === -1 && (z.push(t), Ze(), t.$$.dirty.fill(0)), t.$$.dirty[i / 31 | 0] |= 1 << i % 31;
}
function Ce(t, i, e, n, o, s, r = null, a = [-1]) {
  const h = G;
  V(t);
  const c = t.$$ = {
    fragment: null,
    ctx: [],
    // state
    props: s,
    update: N,
    not_equal: o,
    bound: fe(),
    // lifecycle
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(i.context || (h ? h.$$.context : [])),
    // everything else
    callbacks: fe(),
    dirty: a,
    skip_bound: false,
    root: i.target || h.$$.root
  };
  r && r(c.root);
  let d = false;
  if (c.ctx = e ? e(t, i.props || {}, (l, g, ...m) => {
    const f = m.length ? m[0] : g;
    return c.ctx && o(c.ctx[l], c.ctx[l] = f) && (!c.skip_bound && c.bound[l] && c.bound[l](f), d && rt(t, l)), g;
  }) : [], c.update(), d = true, J(c.before_update), c.fragment = n ? n(c.ctx) : false, i.target) {
    if (i.hydrate) {
      const l = Ye(i.target);
      c.fragment && c.fragment.l(l), l.forEach(O);
    } else
      c.fragment && c.fragment.c();
    i.intro && nt(t.$$.fragment), ot(t, i.target, i.anchor), Te();
  }
  V(h);
}
class He {
  constructor() {
    u(this, "$$");
    u(this, "$$set");
  }
  /** @returns {void} */
  $destroy() {
    st(this, 1), this.$destroy = N;
  }
  /**
   * @template {Extract<keyof Events, string>} K
   * @param {K} type
   * @param {((e: Events[K]) => void) | null | undefined} callback
   * @returns {() => void}
   */
  $on(i, e) {
    if (!Re(e))
      return N;
    const n = this.$$.callbacks[i] || (this.$$.callbacks[i] = []);
    return n.push(e), () => {
      const o = n.indexOf(e);
      o !== -1 && n.splice(o, 1);
    };
  }
  /**
   * @param {Partial<Props>} props
   * @returns {void}
   */
  $set(i) {
    this.$$set && !Ve(i) && (this.$$.skip_bound = true, this.$$set(i), this.$$.skip_bound = false);
  }
}
const at = "4";
typeof window < "u" && (window.__svelte || (window.__svelte = { v: /* @__PURE__ */ new Set() })).v.add(at);
function ve(t) {
  let i, e, n, o, s, r, a, h, c, d, l, g, m, f, E, D;
  return {
    c() {
      i = P("svg"), e = P("circle"), o = P("path"), r = P("g"), a = P("path"), c = P("path"), l = P("path"), m = P("animateTransform"), p(e, "cx", "64.13"), p(e, "cy", "64.13"), p(e, "r", "27.63"), p(e, "fill", n = /*configuration*/
      t[0].fill), p(o, "d", "M64.13 18.5A45.63 45.63 0 1 1 18.5 64.13 45.63 45.63 0 0 1 64.13 18.5zm0 7.85a37.78 37.78 0 1 1-37.78 37.78 37.78 37.78 0 0 1 37.78-37.78z"), p(o, "fill-rule", "evenodd"), p(o, "fill", s = /*configuration*/
      t[0].fill), p(a, "d", "M95.25 17.4a56.26 56.26 0 0 0-76.8 13.23L12.1 26.2a64 64 0 0 1 87.6-15.17z"), p(a, "fill", h = /*configuration*/
      t[0].fill), p(c, "d", "M95.25 17.4a56.26 56.26 0 0 0-76.8 13.23L12.1 26.2a64 64 0 0 1 87.6-15.17z"), p(c, "fill", d = /*configuration*/
      t[0].fill), p(c, "transform", "rotate(120 64 64)"), p(l, "d", "M95.25 17.4a56.26 56.26 0 0 0-76.8 13.23L12.1 26.2a64 64 0 0 1 87.6-15.17z"), p(l, "fill", g = /*configuration*/
      t[0].fill), p(l, "transform", "rotate(240 64 64)"), p(m, "attributeName", "transform"), p(m, "type", "rotate"), p(m, "from", "0 64 64"), p(m, "to", "120 64 64"), p(m, "dur", "360ms"), p(m, "repeatCount", "indefinite"), p(i, "xmlns", "http://www.w3.org/2000/svg"), p(i, "width", f = /*configuration*/
      t[0].size), p(i, "height", E = /*configuration*/
      t[0].size), p(i, "viewBox", "0 0 128 128"), p(i, "xml:space", "preserve"), p(i, "class", D = /*configuration*/
      t[0].class);
    },
    m(v, _) {
      B(v, i, _), w(i, e), w(i, o), w(i, r), w(r, a), w(r, c), w(r, l), w(r, m);
    },
    p(v, _) {
      _ & /*configuration*/
      1 && n !== (n = /*configuration*/
      v[0].fill) && p(e, "fill", n), _ & /*configuration*/
      1 && s !== (s = /*configuration*/
      v[0].fill) && p(o, "fill", s), _ & /*configuration*/
      1 && h !== (h = /*configuration*/
      v[0].fill) && p(a, "fill", h), _ & /*configuration*/
      1 && d !== (d = /*configuration*/
      v[0].fill) && p(c, "fill", d), _ & /*configuration*/
      1 && g !== (g = /*configuration*/
      v[0].fill) && p(l, "fill", g), _ & /*configuration*/
      1 && f !== (f = /*configuration*/
      v[0].size) && p(i, "width", f), _ & /*configuration*/
      1 && E !== (E = /*configuration*/
      v[0].size) && p(i, "height", E), _ & /*configuration*/
      1 && D !== (D = /*configuration*/
      v[0].class) && p(i, "class", D);
    },
    d(v) {
      v && O(i);
    }
  };
}
function lt(t) {
  let i, e = (
    /*loading*/
    t[1] && ve(t)
  );
  return {
    c() {
      e && e.c(), i = Je();
    },
    m(n, o) {
      e && e.m(n, o), B(n, i, o);
    },
    p(n, [o]) {
      n[1] ? e ? e.p(n, o) : (e = ve(n), e.c(), e.m(i.parentNode, i)) : e && (e.d(1), e = null);
    },
    i: N,
    o: N,
    d(n) {
      n && O(i), e && e.d(n);
    }
  };
}
function ht(t, i, e) {
  let { directions: n } = i, { configuration: o } = i, s;
  return n.on("fetchroutesstart", () => {
    e(1, s = true);
  }), n.on("fetchroutesend", () => {
    e(1, s = false);
  }), t.$$set = (r) => {
    "directions" in r && e(2, n = r.directions), "configuration" in r && e(0, o = r.configuration);
  }, [o, s, n];
}
class pt extends He {
  constructor(i) {
    super(), Ce(this, i, ht, lt, Ie, { directions: 2, configuration: 0 });
  }
}
const ct = {
  fill: "#6d26d7",
  size: "24px",
  class: ""
};
class wt {
  constructor(i, e) {
    u(this, "controlElement");
    u(this, "directions");
    u(this, "configuration");
    this.directions = i, this.configuration = Object.assign({}, ct, e);
  }
  /**
   * @private
   */
  onAdd() {
    return this.controlElement = document.createElement("div"), new pt({
      target: this.controlElement,
      props: {
        directions: this.directions,
        configuration: this.configuration
      }
    }), this.controlElement;
  }
  /**
   * @private
   */
  onRemove() {
    this.controlElement.remove();
  }
}
class Graph {
  constructor() {
    __publicField(this, "adjacencyList", /* @__PURE__ */ new Map());
  }
  addVertex(Vertex2) {
    if (!this.adjacencyList.has(Vertex2)) {
      this.adjacencyList.set(Vertex2, []);
    }
  }
  addEdge(from, to, weight) {
    var _a, _b;
    this.addVertex(from);
    this.addVertex(to);
    (_a = this.adjacencyList.get(from)) == null ? void 0 : _a.push({ to, weight });
    (_b = this.adjacencyList.get(to)) == null ? void 0 : _b.push({ to: from, weight });
  }
  getVertexs() {
    return [...this.adjacencyList.keys()];
  }
  getEdges(Vertex2) {
    return this.adjacencyList.get(Vertex2) || [];
  }
  hasVertex(Vertex2) {
    return this.adjacencyList.has(Vertex2);
  }
}
class Pathfinder {
  //TODO: private options;
  constructor(graph) {
    __publicField(this, "graph");
    this.graph = graph ?? new Graph();
  }
  dijkstra(start, end) {
    start = JSON.stringify(start);
    end = JSON.stringify(end);
    start = this.validateVertex(start);
    end = this.validateVertex(end);
    const distances = {};
    const previous = {};
    const queue = this.graph.getVertexs();
    this.graph.getVertexs().forEach((Vertex2) => {
      distances[Vertex2] = Infinity;
      previous[Vertex2] = null;
    });
    distances[start] = 0;
    while (queue.length > 0) {
      const current2 = queue.sort((a, b) => distances[a] - distances[b]).shift();
      if (current2 === end) break;
      this.graph.getEdges(current2).forEach(({ to, weight }) => {
        const alt = distances[current2] + weight;
        if (alt < distances[to]) {
          distances[to] = alt;
          previous[to] = current2;
        }
      });
    }
    const path = [];
    let current = end;
    while (current) {
      path.unshift(current);
      current = previous[current];
    }
    const pathCoords = path.map((coord) => JSON.parse(coord));
    return pathCoords;
  }
  validateVertex(position) {
    if (this.graph.hasVertex(position)) {
      return position;
    } else {
      throw new Error(`Vertex not found in navigation graph: ${position}`);
    }
  }
  setGraph(graph) {
    this.graph = graph;
  }
}
class IndoorDirectionsEvented {
  constructor(map) {
    __publicField(this, "map");
    __publicField(this, "listeners", {});
    __publicField(this, "oneTimeListeners", {});
    this.map = map;
  }
  fire(event) {
    var _a, _b;
    event.target = this.map;
    const type = event.type;
    (_a = this.listeners[type]) == null ? void 0 : _a.forEach((listener) => listener(event));
    (_b = this.oneTimeListeners[type]) == null ? void 0 : _b.forEach((listener) => {
      var _a2, _b2;
      listener(event);
      const index = (_a2 = this.oneTimeListeners[type]) == null ? void 0 : _a2.indexOf(listener);
      if (index !== void 0 && ~index)
        (_b2 = this.oneTimeListeners[type]) == null ? void 0 : _b2.splice(index, 1);
    });
  }
  /**
   * Registers an event listener.
   */
  on(type, listener) {
    this.listeners[type] = this.listeners[type] ?? [];
    this.listeners[type].push(listener);
  }
  /**
   * Un-registers an event listener.
   */
  off(type, listener) {
    var _a, _b;
    const index = (_a = this.listeners[type]) == null ? void 0 : _a.indexOf(listener);
    if (index !== void 0 && ~index) (_b = this.listeners[type]) == null ? void 0 : _b.splice(index, 1);
  }
  /**
   * Registers an event listener to be invoked only once.
   */
  once(type, listener) {
    this.oneTimeListeners[type] = this.oneTimeListeners[type] ?? [];
    this.oneTimeListeners[type].push(listener);
  }
}
class IndoorDirectionsWaypointEvent {
  /**
   * @private
   */
  constructor(type, originalEvent, data) {
    __publicField(this, "type");
    __publicField(this, "target");
    __publicField(this, "originalEvent");
    __publicField(this, "data");
    this.type = type;
    this.originalEvent = originalEvent;
    this.data = data;
  }
}
class IndoorDirectionsRoutingEvent {
  /**
   * @private
   */
  constructor(type, originalEvent, data) {
    __publicField(this, "type");
    __publicField(this, "target");
    __publicField(this, "originalEvent");
    /**
     * The server's response.
     *
     * Only presents when it's the {@link IndoorDirectionsEventType.fetchroutesend|`fetchroutesend`} event, but might
     * be `undefined` in case the request to fetch directions failed.
     *
     * @see http://project-osrm.org/docs/v5.24.0/api/#responses
     */
    __publicField(this, "data");
    this.type = type;
    this.originalEvent = originalEvent;
    this.data = data;
  }
}
const MapLibreGlIndoorDirectionsDefaultConfiguration = {
  api: "https://router.project-osrm.org/route/v1",
  profile: "driving",
  requestOptions: {},
  requestTimeout: null,
  // can't use Infinity here because of this: https://github.com/denysdovhan/wtfjs/issues/61#issuecomment-325321753
  makePostRequest: false,
  sourceName: "maplibre-gl-indoor-directions",
  pointsScalingFactor: 1,
  linesScalingFactor: 1,
  sensitiveWaypointLayers: [
    "maplibre-gl-indoor-directions-waypoint",
    "maplibre-gl-indoor-directions-waypoint-casing"
  ],
  sensitiveSnappointLayers: [
    "maplibre-gl-indoor-directions-snappoint",
    "maplibre-gl-indoor-directions-snappoint-casing"
  ],
  sensitiveRoutelineLayers: [
    "maplibre-gl-indoor-directions-routeline",
    "maplibre-gl-indoor-directions-routeline-casing"
  ],
  sensitiveAltRoutelineLayers: [
    "maplibre-gl-indoor-directions-alt-routeline",
    "maplibre-gl-indoor-directions-alt-routeline-casing"
  ],
  dragThreshold: 10,
  refreshOnMove: false,
  bearings: false
};
const colors = {
  snapline: "#85858B",
  altRouteline: "#9e91be",
  routelineFoot: "#3665ff",
  routelineBike: "#63c4ff",
  routeline: "#3665ff",
  congestionLow: "#42c74c",
  congestionHigh: "#d72359",
  hoverpoint: "#30a856",
  snappoint: "#3665ff",
  snappointHighlight: "#e50d3f",
  waypointFoot: "#3665ff",
  waypointFootHighlight: "#0942ff",
  waypointBike: "#63c4ff",
  waypointBikeHighlight: "#0bb8ff",
  waypoint: "#3665ff",
  waypointHighlight: "#6d26d7"
};
const routelineColor = [
  "case",
  ["==", ["get", "profile", ["get", "arriveSnappointProperties"]], "foot"],
  colors.routelineFoot,
  ["==", ["get", "profile", ["get", "arriveSnappointProperties"]], "bike"],
  colors.routelineBike,
  [
    "interpolate-hcl",
    ["linear"],
    ["get", "congestion"],
    0,
    colors.routeline,
    1,
    colors.congestionLow,
    100,
    colors.congestionHigh
  ]
];
const waypointColor = [
  "case",
  ["==", ["get", "profile"], "foot"],
  [
    "case",
    ["boolean", ["get", "highlight"], false],
    colors.waypointFootHighlight,
    colors.waypointFoot
  ],
  ["==", ["get", "profile"], "bike"],
  [
    "case",
    ["boolean", ["get", "highlight"], false],
    colors.waypointBikeHighlight,
    colors.waypointBike
  ],
  [
    "case",
    ["boolean", ["get", "highlight"], false],
    colors.waypointHighlight,
    colors.waypoint
  ]
];
const snappointColor = [
  "case",
  ["boolean", ["get", "highlight"], false],
  colors.snappointHighlight,
  colors.snappoint
];
function layersFactory(pointsScalingFactor = 0.3, linesScalingFactor = 0.3, sourceName = "maplibre-gl-indoor-directions") {
  const pointCasingCircleRadius = [
    "interpolate",
    ["exponential", 1.5],
    ["zoom"],
    // don't forget it's the radius! The visible value is diameter (which is 2x)
    // on zoom levels 0-5 should be 5px more than the routeline casing. 7 + 5 = 12.
    // When highlighted should be +2px more. 12 + 2 = 14
    0,
    // highlighted to default ratio (epsilon) = 14 / 12 ~= 1.16
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      14 * pointsScalingFactor,
      12 * pointsScalingFactor
    ],
    5,
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      14 * pointsScalingFactor,
      12 * pointsScalingFactor
    ],
    // exponentially grows on zoom levels 5-18 finally becoming the same 5px wider than the routeline's casing on
    // the same zoom level: 23 + 5 = 28px
    18,
    // highlighted = default ~= 33
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      33 * pointsScalingFactor,
      28 * pointsScalingFactor
    ]
  ];
  const pointCircleRadius = [
    "interpolate",
    ["exponential", 1.5],
    ["zoom"],
    // on zoom levels 0-5 - 5px smaller than the casing. 12 - 5 = 7.
    0,
    // feature to casing ratio (psi) = 7 / 12 ~= 0.58
    // highlighted to default ratio (epsilon) = 9 / 7 ~= 1.28
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      9 * pointsScalingFactor,
      7 * pointsScalingFactor
    ],
    5,
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      9 * pointsScalingFactor,
      7 * pointsScalingFactor
    ],
    // exponentially grows on zoom levels 5-18 finally becoming psi times the casing
    18,
    // psi * 28 ~= 16
    // when highlighted multiply by epsilon ~= 21
    [
      "case",
      ["boolean", ["get", "highlight"], ["==", ["get", "type"], "HOVERPOINT"]],
      21 * pointsScalingFactor,
      16 * pointsScalingFactor
    ]
  ];
  const lineWidth = [
    "interpolate",
    ["exponential", 1.5],
    ["zoom"],
    // on zoom levels 0-5 - 4px smaller than the casing (2px on each side). 7 - 4 = 3.
    // Doesn't change when highlighted
    0,
    // feature to casing ratio (psi) = 3 / 7 ~= 0.42
    3 * linesScalingFactor,
    5,
    3 * linesScalingFactor,
    // exponentially grows on zoom levels 5-18 finally becoming psi times the casing
    18,
    // psi * 23  ~= 10
    10 * linesScalingFactor
  ];
  const lineCasingWidth = [
    "interpolate",
    ["exponential", 1.5],
    ["zoom"],
    // on zoom levels 0-5 - 7px by default and 10px when highlighted
    0,
    // highlighted to default ratio (epsilon) = 10 / 7 ~= 1.42
    [
      "case",
      ["boolean", ["get", "highlight"], false],
      10 * linesScalingFactor,
      7 * linesScalingFactor
    ],
    5,
    [
      "case",
      ["boolean", ["get", "highlight"], false],
      10 * linesScalingFactor,
      7 * linesScalingFactor
    ],
    // exponentially grows on zoom levels 5-18 finally becoming 32px when highlighted
    18,
    // default = 32 / epsilon ~= 23
    [
      "case",
      ["boolean", ["get", "highlight"], false],
      32 * linesScalingFactor,
      23 * linesScalingFactor
    ]
  ];
  return [
    {
      id: `${sourceName}-snapline`,
      type: "line",
      source: sourceName,
      layout: {
        "line-cap": "round",
        "line-join": "round"
      },
      paint: {
        "line-dasharray": [3, 3],
        "line-color": colors.snapline,
        "line-opacity": 0.65,
        "line-width": 3
      },
      filter: ["==", ["get", "type"], "SNAPLINE"]
    },
    {
      id: `${sourceName}-alt-routeline-casing`,
      type: "line",
      source: sourceName,
      layout: {
        "line-cap": "butt",
        "line-join": "round"
      },
      paint: {
        "line-color": colors.altRouteline,
        "line-opacity": 0.55,
        "line-width": lineCasingWidth
      },
      filter: ["==", ["get", "route"], "ALT"]
    },
    {
      id: `${sourceName}-alt-routeline`,
      type: "line",
      source: sourceName,
      layout: {
        "line-cap": "butt",
        "line-join": "round"
      },
      paint: {
        "line-color": colors.altRouteline,
        "line-opacity": 0.85,
        "line-width": lineWidth
      },
      filter: ["==", ["get", "route"], "ALT"]
    },
    {
      id: `${sourceName}-routeline-casing`,
      type: "line",
      source: sourceName,
      layout: {
        "line-cap": "butt",
        "line-join": "round"
      },
      paint: {
        "line-color": routelineColor,
        "line-opacity": 0.55,
        "line-width": lineCasingWidth
      },
      filter: ["==", ["get", "route"], "SELECTED"]
    },
    {
      id: `${sourceName}-routeline`,
      type: "line",
      source: sourceName,
      layout: {
        "line-cap": "butt",
        "line-join": "round"
      },
      paint: {
        "line-color": routelineColor,
        "line-opacity": 0.85,
        "line-width": lineWidth
      },
      filter: ["==", ["get", "route"], "SELECTED"]
    },
    {
      id: `${sourceName}-hoverpoint-casing`,
      type: "circle",
      source: sourceName,
      paint: {
        "circle-radius": pointCasingCircleRadius,
        "circle-color": colors.hoverpoint,
        "circle-opacity": 0.65
      },
      filter: ["==", ["get", "type"], "HOVERPOINT"]
    },
    {
      id: `${sourceName}-hoverpoint`,
      type: "circle",
      source: sourceName,
      paint: {
        // same as snappoint, but always hig(since it's always highlighted while present on the map)
        "circle-radius": pointCircleRadius,
        "circle-color": colors.hoverpoint
      },
      filter: ["==", ["get", "type"], "HOVERPOINT"]
    },
    {
      id: `${sourceName}-snappoint-casing`,
      type: "circle",
      source: sourceName,
      paint: {
        "circle-radius": pointCasingCircleRadius,
        "circle-color": snappointColor,
        "circle-opacity": 0.65
      },
      filter: ["==", ["get", "type"], "SNAPPOINT"]
    },
    {
      id: `${sourceName}-snappoint`,
      type: "circle",
      source: sourceName,
      paint: {
        "circle-radius": pointCircleRadius,
        "circle-color": snappointColor
      },
      filter: ["==", ["get", "type"], "SNAPPOINT"]
    },
    {
      id: `${sourceName}-waypoint-casing`,
      type: "circle",
      source: sourceName,
      paint: {
        "circle-radius": pointCasingCircleRadius,
        "circle-color": waypointColor,
        "circle-opacity": 0.65
      },
      filter: ["==", ["get", "type"], "WAYPOINT"]
    },
    {
      id: `${sourceName}-waypoint`,
      type: "circle",
      source: sourceName,
      paint: {
        "circle-radius": pointCircleRadius,
        "circle-color": waypointColor
      },
      filter: ["==", ["get", "type"], "WAYPOINT"]
    }
  ];
}
function buildConfiguration(customConfiguration) {
  const layers = layersFactory(
    customConfiguration == null ? void 0 : customConfiguration.pointsScalingFactor,
    customConfiguration == null ? void 0 : customConfiguration.linesScalingFactor,
    customConfiguration == null ? void 0 : customConfiguration.sourceName
  );
  return Object.assign(
    {},
    MapLibreGlIndoorDirectionsDefaultConfiguration,
    { layers },
    customConfiguration
  );
}
function buildPoint(coordinate, type, properties) {
  return {
    type: "Feature",
    geometry: {
      type: "Point",
      coordinates: coordinate
    },
    properties: {
      type,
      id: nanoid(),
      ...properties
    }
  };
}
function buildRouteLines(coordinates, routeIndex = 0, legIndex = 0, origin, destination) {
  var _a, _b;
  return [
    {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates
      },
      properties: {
        id: nanoid(),
        route: "SELECTED",
        routeIndex,
        legIndex,
        congestion: 0,
        departSnappointProperties: {
          type: "SNAPPOINT",
          id: nanoid(),
          profile: "walking",
          waypointProperties: {
            type: "WAYPOINT",
            id: ((_a = origin == null ? void 0 : origin.properties) == null ? void 0 : _a.id) || nanoid(),
            profile: "walking",
            index: 0,
            category: "ORIGIN"
          }
        },
        arriveSnappointProperties: {
          type: "SNAPPOINT",
          id: nanoid(),
          profile: "walking",
          waypointProperties: {
            type: "WAYPOINT",
            id: ((_b = destination == null ? void 0 : destination.properties) == null ? void 0 : _b.id) || nanoid(),
            profile: "walking",
            index: 1,
            category: "DESTINATION"
          }
        }
      }
    }
  ];
}
function buildSnaplines(waypointsCoordinates, snappointsCoordinates) {
  const snaplines = waypointsCoordinates.map((waypointCoordinates, index) => {
    return {
      type: "Feature",
      geometry: {
        type: "LineString",
        coordinates: [
          [waypointCoordinates[0], waypointCoordinates[1]],
          [snappointsCoordinates[index][0], snappointsCoordinates[index][1]]
        ]
      },
      properties: {
        type: "SNAPLINE"
      }
    };
  });
  return snaplines;
}
class IndoorDirections extends IndoorDirectionsEvented {
  constructor(map, configuration) {
    super(map);
    __publicField(this, "pathFinder");
    __publicField(this, "configuration");
    __publicField(this, "buildPoint", buildPoint);
    __publicField(this, "buildSnaplines", buildSnaplines);
    __publicField(this, "buildRouteLines", buildRouteLines);
    __publicField(this, "_waypoints", []);
    __publicField(this, "snappoints", []);
    __publicField(this, "routelines", []);
    __publicField(this, "coordMap", /* @__PURE__ */ new Map());
    __publicField(this, "animationFrameId", null);
    __publicField(this, "fullRouteCoordinates", []);
    this.map = map;
    this.configuration = buildConfiguration(configuration);
    this.pathFinder = new Pathfinder();
    this.init();
  }
  init() {
    this.map.addSource(this.configuration.sourceName, {
      type: "geojson",
      data: {
        type: "FeatureCollection",
        features: []
      }
    });
    this.configuration.layers.forEach((layer) => {
      this.map.addLayer(layer);
    });
  }
  get waypointsCoordinates() {
    return this._waypoints.map((waypoint) => {
      return [
        waypoint.geometry.coordinates[0],
        waypoint.geometry.coordinates[1]
      ];
    });
  }
  get snappointsCoordinates() {
    return this.snappoints.map((snappoint) => {
      return [
        snappoint.geometry.coordinates[0],
        snappoint.geometry.coordinates[1]
      ];
    });
  }
  get routelinesCoordinates() {
    return this.routelines;
  }
  get fullRoute() {
    return this.fullRouteCoordinates;
  }
  get snaplines() {
    return this.snappoints.length > 1 ? this.buildSnaplines(
      this.waypointsCoordinates,
      this.snappointsCoordinates
    ) : [];
  }
  calculateDistance(coord1, coord2) {
    const [lon1, lat1] = coord1;
    const [lon2, lat2] = coord2;
    const R = 6371;
    const dLat = (lat2 - lat1) * Math.PI / 180;
    const dLon = (lon2 - lon1) * Math.PI / 180;
    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
  }
  findNearestGraphPoint(point, coordMap) {
    let nearest = null;
    let minDistance = Infinity;
    coordMap.forEach((_, coordStr) => {
      const coord = JSON.parse(coordStr);
      const distance = this.calculateDistance(point, coord);
      if (distance < minDistance) {
        minDistance = distance;
        nearest = coord;
      }
    });
    return nearest;
  }
  updateSnapPoints() {
    this.snappoints = this._waypoints.map((waypoint) => {
      const nearest = this.findNearestGraphPoint(
        waypoint.geometry.coordinates,
        this.coordMap
      );
      return this.buildPoint(
        nearest || waypoint.geometry.coordinates,
        "SNAPPOINT"
      );
    });
  }
  loadMapData(geoJson) {
    const coordMap = /* @__PURE__ */ new Map();
    const graph = new Graph();
    this.coordMap = coordMap;
    const walkableFeatures = geoJson.features.filter((feature) => {
      if (feature.geometry.type !== "LineString" || !feature.properties) {
        return false;
      }
      const routeType = feature.properties.type;
      const featureType = feature.properties.feature_type;
      return routeType === "corridor" || routeType === "room_connection" || featureType === "corridor" || featureType === "walkway" || featureType === "path" || featureType === "footway" || featureType === "sidewalk" || featureType === "unknown" && feature.properties.accessibility !== "no";
    });
    console.log("ðŸš¶â€â™€ï¸ Walkable features found:", walkableFeatures.length);
    const typeCounts = walkableFeatures.reduce((acc, f) => {
      var _a, _b;
      const type = ((_a = f.properties) == null ? void 0 : _a.type) || ((_b = f.properties) == null ? void 0 : _b.feature_type) || "unknown";
      acc[type] = (acc[type] || 0) + 1;
      return acc;
    }, {});
    console.log("ðŸ“Š Feature types:", JSON.stringify(typeCounts, null, 2));
    walkableFeatures.forEach((feature) => {
      const coordinates = feature.geometry.coordinates;
      coordinates.forEach((coord) => {
        var _a;
        const key = JSON.stringify(coord);
        if (!coordMap.has(key)) {
          coordMap.set(key, /* @__PURE__ */ new Set());
        }
        (_a = coordMap.get(key)) == null ? void 0 : _a.add(coordinates);
      });
    });
    walkableFeatures.forEach((feature) => {
      var _a, _b;
      const coordinates = feature.geometry.coordinates;
      const routeType = (_a = feature.properties) == null ? void 0 : _a.type;
      const featureType = (_b = feature.properties) == null ? void 0 : _b.feature_type;
      for (let i = 0; i < coordinates.length - 1; i++) {
        const from = JSON.stringify(coordinates[i]);
        const to = JSON.stringify(coordinates[i + 1]);
        const distance = this.calculateDistance(
          coordinates[i],
          coordinates[i + 1]
        );
        let weight = distance;
        if (routeType === "corridor") {
          weight *= 0.5;
        } else if (routeType === "room_connection") {
          weight *= 10;
        } else if (featureType === "corridor") {
          weight *= 0.6;
        } else if (featureType === "walkway" || featureType === "footway" || featureType === "path") {
          weight *= 0.7;
        } else if (featureType === "sidewalk") {
          weight *= 0.8;
        } else {
          weight *= 1.5;
        }
        graph.addEdge(from, to, weight);
        const fromOverlaps = coordMap.get(from);
        if (fromOverlaps && fromOverlaps.size > 1) {
          fromOverlaps.forEach((otherCoords) => {
            if (otherCoords == coordinates) {
              const idx = otherCoords.findIndex(
                (c) => JSON.stringify(c) === from
              );
              if (idx !== -1) {
                if (idx > 0) {
                  graph.addEdge(
                    from,
                    JSON.stringify(otherCoords[idx - 1]),
                    weight
                  );
                }
                if (idx < otherCoords.length - 1) {
                  graph.addEdge(
                    from,
                    JSON.stringify(otherCoords[idx + 1]),
                    weight
                  );
                }
              }
            }
          });
        }
      }
    });
    this.pathFinder.setGraph(graph);
  }
  /**
   * Replaces all the waypoints with the specified ones and re-fetches the routes.
   *
   * @param waypoints The coordinates at which the waypoints should be added
   */
  setWaypoints(waypoints) {
    if (this.animationFrameId) {
      cancelAnimationFrame(this.animationFrameId);
      this.animationFrameId = null;
    }
    this._waypoints = waypoints.map((coord) => buildPoint(coord, "WAYPOINT"));
    this.assignWaypointsCategories();
    const waypointEvent = new IndoorDirectionsWaypointEvent(
      "setwaypoints",
      void 0
    );
    this.updateSnapPoints();
    this.fire(waypointEvent);
    try {
      this.calculateDirections(waypointEvent);
    } catch (error) {
      console.error(error);
    }
  }
  calculateDirections(originalEvent) {
    const routes2 = [];
    if (this.snappoints.length >= 2) {
      this.fire(
        new IndoorDirectionsRoutingEvent("calculateroutesstart", originalEvent)
      );
      console.log("ðŸ—ºï¸ Calculating route between:", this.snappoints[0].geometry.coordinates, "and", this.snappoints[1].geometry.coordinates);
      for (let i = 0; i < this.snappoints.length - 1; i++) {
        const start = this.snappoints[i].geometry.coordinates;
        const end = this.snappoints[i + 1].geometry.coordinates;
        const segmentRoute = this.pathFinder.dijkstra(start, end);
        console.log("ðŸ›¤ï¸ Segment route found:", segmentRoute.length, "points");
        if (segmentRoute.length > 0) {
          console.log("ðŸ“ Route starts at:", segmentRoute[0]);
          console.log("ðŸ“ Route ends at:", segmentRoute[segmentRoute.length - 1]);
          if (segmentRoute.length > 2) {
            console.log("ðŸ“ Route passes through:", segmentRoute.slice(1, Math.min(4, segmentRoute.length - 1)));
          }
        }
        if (i === 0) {
          routes2.push(...segmentRoute);
        } else {
          routes2.push(...segmentRoute.slice(1));
        }
      }
      console.log("ðŸŽ¯ Final route has", routes2.length, "points");
      this.fire(
        new IndoorDirectionsRoutingEvent("calculateroutesend", originalEvent)
      );
      this.fullRouteCoordinates = routes2;
      this.routelines = [];
      this.animateRouteLine();
    } else {
      this.routelines = [];
      this.fullRouteCoordinates = [];
      this.draw();
    }
  }
  simplifyRoute(coordinates, maxPoints = 20) {
    if (coordinates.length <= maxPoints) {
      return coordinates;
    }
    const simplified = [coordinates[0]];
    const step = Math.max(1, Math.floor((coordinates.length - 2) / (maxPoints - 2)));
    for (let i = step; i < coordinates.length - 1; i += step) {
      simplified.push(coordinates[i]);
    }
    simplified.push(coordinates[coordinates.length - 1]);
    return simplified;
  }
  animateRouteLine() {
    if (this.animationFrameId) {
      cancelAnimationFrame(this.animationFrameId);
      this.animationFrameId = null;
    }
    if (this.fullRouteCoordinates.length < 2) {
      return;
    }
    const simplifiedRoute = this.simplifyRoute(this.fullRouteCoordinates, 15);
    console.log(`ðŸŽ¬ Animating route: ${this.fullRouteCoordinates.length} â†’ ${simplifiedRoute.length} points`);
    this.routelines = [];
    this.draw();
    const totalDuration = Math.min(2e3, 800 + simplifiedRoute.length * 50);
    const startTime = Date.now();
    let lastFrameTime = startTime;
    const animate = () => {
      const now = Date.now();
      const elapsed = now - startTime;
      const deltaTime = now - lastFrameTime;
      lastFrameTime = now;
      if (deltaTime < 16) {
        this.animationFrameId = requestAnimationFrame(animate);
        return;
      }
      const progress = Math.min(elapsed / totalDuration, 1);
      const easedProgress = progress * progress * (3 - 2 * progress);
      if (simplifiedRoute.length === 2) {
        const [start, end] = simplifiedRoute;
        const currentEnd = [
          start[0] + (end[0] - start[0]) * easedProgress,
          start[1] + (end[1] - start[1]) * easedProgress
        ];
        this.routelines = [this.buildRouteLines([start, currentEnd])];
      } else {
        const targetIndex = easedProgress * (simplifiedRoute.length - 1);
        const pointIndex = Math.floor(targetIndex);
        const fraction = targetIndex - pointIndex;
        if (pointIndex >= simplifiedRoute.length - 1) {
          this.routelines = [this.buildRouteLines(simplifiedRoute)];
        } else {
          const coordinates = simplifiedRoute.slice(0, pointIndex + 1);
          if (fraction > 0 && pointIndex + 1 < simplifiedRoute.length) {
            const current = simplifiedRoute[pointIndex];
            const next = simplifiedRoute[pointIndex + 1];
            const interpolated = [
              current[0] + (next[0] - current[0]) * fraction,
              current[1] + (next[1] - current[1]) * fraction
            ];
            coordinates.push(interpolated);
          }
          this.routelines = [this.buildRouteLines(coordinates)];
        }
      }
      this.draw();
      if (progress < 1) {
        this.animationFrameId = requestAnimationFrame(animate);
      } else {
        this.routelines = [this.buildRouteLines(this.fullRouteCoordinates)];
        this.draw();
        this.animationFrameId = null;
      }
    };
    this.animationFrameId = requestAnimationFrame(animate);
  }
  draw() {
    const features = [
      ...this._waypoints,
      ...this.snappoints,
      ...this.snaplines,
      ...this.routelines.flat()
    ];
    const geoJson = {
      type: "FeatureCollection",
      features
    };
    if (this.map.getSource(this.configuration.sourceName)) {
      this.map.getSource(
        this.configuration.sourceName
      ).setData(geoJson);
    }
  }
  assignWaypointsCategories() {
    this._waypoints.forEach((waypoint, index) => {
      let category;
      if (index === 0) {
        category = "ORIGIN";
      } else if (index === this._waypoints.length - 1) {
        category = "DESTINATION";
      } else {
        category = void 0;
      }
      if (waypoint.properties) {
        waypoint.properties.index = index;
        waypoint.properties.category = category;
      }
    });
  }
  /**
   * Clears the map from all the instance's traces: waypoints, snappoints, routes, etc.
   */
  clear() {
    if (this.animationFrameId) {
      cancelAnimationFrame(this.animationFrameId);
      this.animationFrameId = null;
    }
    this.setWaypoints([]);
    this.routelines = [];
    this.fullRouteCoordinates = [];
  }
}
function useDirections(map) {
  const directionsRef = useRef(null);
  const indoorDirectionsRef = useRef(null);
  useEffect(() => {
    if (!map) return;
    const handleLoad = () => {
      directionsRef.current = new _t(map, {
        api: config.routingApi,
        requestOptions: { overview: "full", steps: "true" }
      });
      map.addControl(new wt(directionsRef.current));
      indoorDirectionsRef.current = new IndoorDirections(map);
      if (building.indoor_routes && indoorDirectionsRef.current) {
        console.log("ðŸ—ºï¸ Loading indoor routes data into IndoorDirections:", building.indoor_routes.features.length, "features");
        try {
          indoorDirectionsRef.current.loadMapData(building.indoor_routes);
          console.log("âœ… Indoor routes data loaded successfully");
        } catch (error) {
          console.error("âŒ Failed to load indoor routes data:", error);
        }
      }
    };
    map.on("load", handleLoad);
    return () => {
      map.off("load", handleLoad);
      directionsRef.current = null;
      indoorDirectionsRef.current = null;
    };
  }, [map]);
  return {
    directions: directionsRef.current,
    indoorDirections: indoorDirectionsRef.current
  };
}
class EnhancedIndoorGeocoder {
  constructor(pois2, cutoffThreshold = 0.3) {
    __publicField(this, "miniSearch");
    __publicField(this, "cutoffThreshold");
    __publicField(this, "osmCache", /* @__PURE__ */ new Map());
    this.cutoffThreshold = cutoffThreshold;
    this.miniSearch = new MiniSearch({
      fields: ["name"],
      storeFields: ["name", "type", "geometry", "id", "source"]
    });
    const searchablePOIs = pois2.filter((poi) => poi.properties.type !== "dorm_room");
    const flattenPOIs = searchablePOIs.map((feature) => ({
      ...feature.properties,
      geometry: feature.geometry,
      source: "indoor"
      // Mark as indoor POI
    }));
    this.miniSearch.addAll(flattenPOIs);
  }
  /**
   * Search for locations using both indoor POIs and OpenStreetMap
   */
  async getEnhancedAutocompleteResults(query, maxResults = 8, includeOSM = true) {
    if (!query) return [];
    const indoorResults = this.getIndoorResults(query);
    let osmResults = [];
    if (includeOSM) {
      osmResults = await this.getOSMResults(query);
    }
    const combinedResults = [
      ...indoorResults.map((poi) => ({ ...poi, source: "indoor" })),
      ...osmResults
    ];
    const sortedResults = combinedResults.sort((a, b) => {
      if (a.source === "indoor" && b.source !== "indoor") return -1;
      if (b.source === "indoor" && a.source !== "indoor") return 1;
      const aMatch = a.name.toLowerCase().includes(query.toLowerCase());
      const bMatch = b.name.toLowerCase().includes(query.toLowerCase());
      if (aMatch && !bMatch) return -1;
      if (bMatch && !aMatch) return 1;
      return 0;
    });
    return sortedResults.slice(0, maxResults);
  }
  /**
   * Get indoor POI results (original functionality)
   */
  getIndoorResults(query, maxResults = 3) {
    const results = this.miniSearch.search(query, { prefix: true });
    if (results.length === 0) return [];
    const topScore = results[0].score;
    const cutoffIndex = this.getCutoffIndex(results, topScore);
    const relevantResults = cutoffIndex > 0 ? results.slice(0, cutoffIndex) : results.slice(0, 3);
    return relevantResults.map((result) => ({
      id: result.id,
      name: result.name,
      coordinates: result.geometry.coordinates
    })).slice(0, maxResults);
  }
  /**
   * Get OpenStreetMap location results
   */
  async getOSMResults(query) {
    if (this.osmCache.has(query)) {
      const cached = this.osmCache.get(query);
      return this.convertOSMToPOI(cached);
    }
    try {
      const params = new URLSearchParams({
        q: query
      });
      const response = await fetch(`/api/geocode?${params}`);
      if (!response.ok) {
        console.warn("OSM geocoding failed:", response.status);
        return [];
      }
      const data = await response.json();
      this.osmCache.set(query, data);
      return this.convertOSMToPOI(data);
    } catch (error) {
      console.error("Error fetching OSM results:", error);
      return [];
    }
  }
  /**
   * Convert OSM locations to POI format
   */
  convertOSMToPOI(locations) {
    return locations.map((location2, index) => ({
      id: location2.place_id || index,
      name: this.formatOSMName(location2),
      coordinates: [parseFloat(location2.lon), parseFloat(location2.lat)],
      source: "osm",
      address: location2.display_name
    }));
  }
  /**
   * Format OSM location name for display
   */
  formatOSMName(location2) {
    const parts = location2.display_name.split(",");
    let name2 = parts[0].trim();
    if (location2.type && !name2.toLowerCase().includes(location2.type.toLowerCase())) {
      const typeMap = {
        "restaurant": "ðŸ½ï¸",
        "cafe": "â˜•",
        "fast_food": "ðŸ”",
        "pub": "ðŸº",
        "bar": "ðŸ¸",
        "shop": "ðŸª",
        "supermarket": "ðŸ›’",
        "convenience": "ðŸª",
        "school": "ðŸ«",
        "university": "ðŸŽ“",
        "hospital": "ðŸ¥",
        "clinic": "âš•ï¸",
        "park": "ðŸŒ³",
        "hotel": "ðŸ¨",
        "bank": "ðŸ¦",
        "atm": "ðŸ’³",
        "pharmacy": "ðŸ’Š",
        "gas_station": "â›½",
        "library": "ðŸ“š",
        "museum": "ðŸ›ï¸",
        "church": "â›ª",
        "post_office": "ðŸ“®",
        "gym": "ðŸ’ª",
        "subway_entrance": "ðŸš‡",
        "bus_stop": "ðŸšŒ"
      };
      const icon = typeMap[location2.type] || "";
      name2 = `${icon} ${name2}`.trim();
    }
    if (!name2.toLowerCase().includes("georgetown") && location2.display_name.toLowerCase().includes("georgetown")) {
      name2 += " (Georgetown)";
    }
    return name2;
  }
  /**
   * Enhanced geocoding that supports both indoor and OSM locations
   */
  async indoorGeocodeInput(input) {
    try {
      const indoorResults = this.miniSearch.search(input);
      if (indoorResults.length > 0) {
        const topResult = indoorResults[0];
        return {
          id: topResult.id,
          name: topResult.name,
          coordinates: topResult.geometry.coordinates,
          source: "indoor"
        };
      }
    } catch (error) {
      console.log("Indoor geocoding failed, trying OSM...");
    }
    const osmResults = await this.getOSMResults(input);
    if (osmResults.length > 0) {
      const osmResult = osmResults[0];
      return {
        ...osmResult,
        coordinates: [parseFloat(osmResult.coordinates[0].toString()), parseFloat(osmResult.coordinates[1].toString())]
      };
    }
    throw new Error("No results found.");
  }
  /**
   * Legacy method for backwards compatibility
   */
  getAutocompleteResults(query, maxResults = 3) {
    return this.getIndoorResults(query, maxResults);
  }
  /**
   * Get cutoff index for filtering results
   */
  getCutoffIndex(results, topScore) {
    for (let i = 1; i < results.length; i++) {
      const scoreDiff = topScore - results[i].score;
      if (scoreDiff > this.cutoffThreshold) {
        return i;
      }
    }
    return 0;
  }
  /**
   * Clear OSM cache
   */
  clearOSMCache() {
    this.osmCache.clear();
  }
}
function useEnhancedIndoorGeocoder() {
  return useMemo(() => {
    const poisFeatureCollection = building.pois;
    return new EnhancedIndoorGeocoder(poisFeatureCollection.features);
  }, []);
}
const toggleVariants = cva(
  "inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",
  {
    variants: {
      variant: {
        default: "bg-transparent",
        outline: "border-2 bg-transparent hover:bg-accent hover:text-accent-foreground"
      },
      size: {
        default: "h-10 min-w-10 px-3",
        sm: "h-9 min-w-9 px-2.5",
        lg: "h-11 min-w-11 px-5",
        icon: "size-10"
      }
    },
    defaultVariants: {
      variant: "default",
      size: "default"
    }
  }
);
const Toggle = React.forwardRef(({ className, variant, size, ...props }, ref) => /* @__PURE__ */ jsx(
  TogglePrimitive.Root,
  {
    ref,
    className: cn(toggleVariants({ variant, size, className })),
    ...props
  }
));
Toggle.displayName = TogglePrimitive.Root.displayName;
function NavigationSettings() {
  const [includeOutdoor, setIncludeOutdoor] = useState(false);
  const [theme, setTheme] = useTheme$1();
  const handleThemeChange = (event) => {
    const selectedTheme = event.target.value;
    if (selectedTheme === Theme.DARK || selectedTheme === Theme.LIGHT) {
      setTheme(selectedTheme);
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "mt-4 flex flex-col gap-2 rounded-lg bg-gray-100 p-4 dark:bg-gray-900", children: [
    /* @__PURE__ */ jsx("span", { className: "text-sm font-medium dark:text-gray-200", children: "Theme" }),
    /* @__PURE__ */ jsxs(
      "select",
      {
        className: "w-full rounded-md bg-white px-4 py-2 text-sm focus:border-blue-500 focus:outline-none dark:bg-gray-700 dark:text-gray-200",
        value: theme == null ? void 0 : theme.toString(),
        onChange: handleThemeChange,
        children: [
          /* @__PURE__ */ jsx("option", { value: Theme.LIGHT, children: "Light" }),
          /* @__PURE__ */ jsx("option", { value: Theme.DARK, children: "Dark" })
        ]
      }
    ),
    /* @__PURE__ */ jsx("span", { className: "text-sm font-medium dark:text-gray-200", children: "Navigation Type" }),
    /* @__PURE__ */ jsxs("div", { className: "flex gap-2", children: [
      /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: () => {
            setIncludeOutdoor(false);
          },
          className: "flex w-full items-center gap-2 rounded-l-md bg-blue-500 px-4 py-2 text-white transition-colors hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700",
          title: "Search only indoor locations",
          children: [
            /* @__PURE__ */ jsx(Building2, { size: 18 }),
            /* @__PURE__ */ jsx("span", { children: "Indoor" })
          ]
        }
      ),
      /* @__PURE__ */ jsxs(
        "button",
        {
          onClick: () => {
            setIncludeOutdoor(!includeOutdoor);
          },
          className: `flex w-full items-center gap-2 rounded-r-md px-4 py-2 transition-colors ${includeOutdoor ? "bg-blue-500 text-white hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700" : "bg-white text-gray-600 hover:bg-gray-50 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"}`,
          title: "Include outdoor navigation",
          disabled: true,
          children: [
            /* @__PURE__ */ jsx(Map$1, { size: 18 }),
            /* @__PURE__ */ jsx("span", { children: "Outdoor" })
          ]
        }
      )
    ] }),
    /* @__PURE__ */ jsx("span", { className: "text-sm font-medium dark:text-gray-200", children: "Language" }),
    /* @__PURE__ */ jsxs(
      "select",
      {
        className: "w-full rounded-md bg-white px-4 py-2 text-sm focus:border-blue-500 focus:outline-none dark:bg-gray-700 dark:text-gray-200",
        disabled: true,
        children: [
          /* @__PURE__ */ jsx("option", { value: "en", children: "English" }),
          /* @__PURE__ */ jsx("option", { value: "de", children: "Deutsch" }),
          /* @__PURE__ */ jsx("option", { value: "es", children: "EspaÃ±ol" })
        ]
      }
    )
  ] });
}
const Input = React.forwardRef(
  ({ className, type, ...props }, ref) => {
    return /* @__PURE__ */ jsx(
      "input",
      {
        type,
        className: cn(
          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className
        ),
        ref,
        ...props
      }
    );
  }
);
Input.displayName = "Input";
function SearchBar({
  isSearching,
  searchQuery,
  onChange,
  onFocus,
  onBack
}) {
  return /* @__PURE__ */ jsxs("div", { className: "relative grow", children: [
    isSearching ? /* @__PURE__ */ jsx(
      Button,
      {
        size: "sm",
        variant: "ghost",
        className: "absolute left-3 top-1/2 -translate-y-1/2 p-0",
        onClick: onBack,
        children: /* @__PURE__ */ jsx(ArrowLeft, { size: 18, className: "text-gray-500" })
      }
    ) : /* @__PURE__ */ jsx(
      Search,
      {
        className: "absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",
        size: 18
      }
    ),
    /* @__PURE__ */ jsx(
      Input,
      {
        type: "text",
        placeholder: "Search indoor locations...",
        value: searchQuery,
        onChange,
        onFocus,
        className: "h-10 w-full min-w-72 rounded-full px-10 py-4 text-lg shadow-sm"
      }
    )
  ] });
}
function SuggestionsList({
  suggestions,
  searchQuery,
  onSuggestionClick
}) {
  return /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
    suggestions.map((suggestion) => /* @__PURE__ */ jsx(
      Button,
      {
        variant: "ghost",
        className: "w-full justify-start text-left text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",
        onMouseDown: () => onSuggestionClick(suggestion),
        children: suggestion.name
      },
      suggestion.id
    )),
    suggestions.length === 0 && searchQuery && /* @__PURE__ */ jsx("p", { className: "p-2 text-sm text-gray-500 dark:text-gray-300", children: "No results found" })
  ] });
}
function DiscoveryView({
  indoorGeocoder,
  onSelectPOI
}) {
  const [searchQuery, setSearchQuery] = useState("");
  const [isSearching, setIsSearching] = useState(false);
  const [suggestions, setSuggestions] = useState([]);
  const [isSettingsOpen, setIsSettingsOpen] = useState(false);
  const handleBackClick = () => {
    setIsSearching(false);
    setSearchQuery("");
  };
  useEffect(() => {
    const newSuggestions = indoorGeocoder.getAutocompleteResults(searchQuery);
    setSuggestions(newSuggestions);
  }, [searchQuery, indoorGeocoder]);
  function handleSuggestionClick(suggestion) {
    setSearchQuery(suggestion.name);
    setIsSearching(false);
    onSelectPOI(suggestion);
  }
  return /* @__PURE__ */ jsxs(Fragment, { children: [
    /* @__PURE__ */ jsxs("div", { className: "relative flex items-center md:mb-6", children: [
      /* @__PURE__ */ jsx("div", { className: "relative grow", children: /* @__PURE__ */ jsx(
        SearchBar,
        {
          isSearching,
          searchQuery,
          onChange: (e) => setSearchQuery(e.target.value),
          onFocus: () => setIsSearching(true),
          onBack: handleBackClick
        }
      ) }),
      !isSearching && /* @__PURE__ */ jsx(
        Toggle,
        {
          variant: "outline",
          size: "icon",
          pressed: isSettingsOpen,
          onPressedChange: setIsSettingsOpen,
          className: "ml-2 rounded-full",
          children: /* @__PURE__ */ jsx(SlidersVertical, { size: 16 })
        }
      )
    ] }),
    isSearching && /* @__PURE__ */ jsx(
      SuggestionsList,
      {
        suggestions,
        searchQuery,
        onSuggestionClick: handleSuggestionClick
      }
    ),
    isSettingsOpen && /* @__PURE__ */ jsx(NavigationSettings, {})
  ] });
}
const DropdownMenu = DropdownMenuPrimitive.Root;
const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;
const DropdownMenuSubTrigger = React.forwardRef(({ className, inset, children, ...props }, ref) => /* @__PURE__ */ jsxs(
  DropdownMenuPrimitive.SubTrigger,
  {
    ref,
    className: cn(
      "flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
      inset && "pl-8",
      className
    ),
    ...props,
    children: [
      children,
      /* @__PURE__ */ jsx(ChevronRight, { className: "ml-auto" })
    ]
  }
));
DropdownMenuSubTrigger.displayName = DropdownMenuPrimitive.SubTrigger.displayName;
const DropdownMenuSubContent = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  DropdownMenuPrimitive.SubContent,
  {
    ref,
    className: cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    ),
    ...props
  }
));
DropdownMenuSubContent.displayName = DropdownMenuPrimitive.SubContent.displayName;
const DropdownMenuContent = React.forwardRef(({ className, sideOffset = 4, ...props }, ref) => /* @__PURE__ */ jsx(DropdownMenuPrimitive.Portal, { children: /* @__PURE__ */ jsx(
  DropdownMenuPrimitive.Content,
  {
    ref,
    sideOffset,
    className: cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className
    ),
    ...props
  }
) }));
DropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;
const DropdownMenuItem = React.forwardRef(({ className, inset, ...props }, ref) => /* @__PURE__ */ jsx(
  DropdownMenuPrimitive.Item,
  {
    ref,
    className: cn(
      "relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
      inset && "pl-8",
      className
    ),
    ...props
  }
));
DropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;
const DropdownMenuCheckboxItem = React.forwardRef(({ className, children, checked, ...props }, ref) => /* @__PURE__ */ jsxs(
  DropdownMenuPrimitive.CheckboxItem,
  {
    ref,
    className: cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    ),
    checked,
    ...props,
    children: [
      /* @__PURE__ */ jsx("span", { className: "absolute left-2 flex size-3.5 items-center justify-center", children: /* @__PURE__ */ jsx(DropdownMenuPrimitive.ItemIndicator, { children: /* @__PURE__ */ jsx(Check, { className: "size-4" }) }) }),
      children
    ]
  }
));
DropdownMenuCheckboxItem.displayName = DropdownMenuPrimitive.CheckboxItem.displayName;
const DropdownMenuRadioItem = React.forwardRef(({ className, children, ...props }, ref) => /* @__PURE__ */ jsxs(
  DropdownMenuPrimitive.RadioItem,
  {
    ref,
    className: cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className
    ),
    ...props,
    children: [
      /* @__PURE__ */ jsx("span", { className: "absolute left-2 flex size-3.5 items-center justify-center", children: /* @__PURE__ */ jsx(DropdownMenuPrimitive.ItemIndicator, { children: /* @__PURE__ */ jsx(Circle, { className: "size-2 fill-current" }) }) }),
      children
    ]
  }
));
DropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;
const DropdownMenuLabel = React.forwardRef(({ className, inset, ...props }, ref) => /* @__PURE__ */ jsx(
  DropdownMenuPrimitive.Label,
  {
    ref,
    className: cn(
      "px-2 py-1.5 text-sm font-semibold",
      inset && "pl-8",
      className
    ),
    ...props
  }
));
DropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;
const DropdownMenuSeparator = React.forwardRef(({ className, ...props }, ref) => /* @__PURE__ */ jsx(
  DropdownMenuPrimitive.Separator,
  {
    ref,
    className: cn("-mx-1 my-1 h-px bg-muted", className),
    ...props
  }
));
DropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;
function LocationDetail({
  selectedPOI,
  handleBackClick,
  handleDirectionsClick
}) {
  const isDarnallHall = selectedPOI.name.toLowerCase().includes("darnall") || selectedPOI.building === "darnall" || selectedPOI.building === "GU_DARNALL";
  const isReissScienceBuilding = selectedPOI.name.toLowerCase().includes("reiss") || selectedPOI.building === "reiss";
  return /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
    /* @__PURE__ */ jsxs("div", { className: "mb-4 flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs("div", { children: [
        /* @__PURE__ */ jsx("h2", { className: "text-xl font-semibold", children: isDarnallHall ? "Darnall Hall" : isReissScienceBuilding ? "Reiss Science Building" : selectedPOI.name }),
        !isDarnallHall && !isReissScienceBuilding && /* @__PURE__ */ jsx("p", { className: "text-xs text-gray-600 dark:text-gray-400", children: selectedPOI.floor ? `Floor ${selectedPOI.floor}` : "1st Floor" })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex space-x-2", children: [
        /* @__PURE__ */ jsxs(DropdownMenu, { children: [
          /* @__PURE__ */ jsx(DropdownMenuTrigger, { asChild: true, children: /* @__PURE__ */ jsx(
            Button,
            {
              variant: "ghost",
              size: "icon",
              className: "rounded-full p-2 hover:bg-gray-200 dark:hover:bg-gray-700",
              children: /* @__PURE__ */ jsx(Share2, { size: 16 })
            }
          ) }),
          /* @__PURE__ */ jsxs(DropdownMenuContent, { children: [
            /* @__PURE__ */ jsxs(DropdownMenuItem, { onClick: () => console.log("TODO: QR Code"), children: [
              /* @__PURE__ */ jsx(QrCode, { className: "mr-2 size-4" }),
              /* @__PURE__ */ jsx("span", { children: "QR Code" })
            ] }),
            /* @__PURE__ */ jsxs(DropdownMenuItem, { onClick: () => console.log("TODO: Copy Link"), children: [
              /* @__PURE__ */ jsx(Link, { className: "mr-2 size-4" }),
              /* @__PURE__ */ jsx("span", { children: "Copy Link" })
            ] })
          ] })
        ] }),
        /* @__PURE__ */ jsx(
          Button,
          {
            variant: "ghost",
            onClick: handleBackClick,
            size: "icon",
            className: "rounded-full p-2 hover:bg-gray-200 dark:hover:bg-gray-700",
            children: /* @__PURE__ */ jsx(X$1, { size: 16 })
          }
        )
      ] })
    ] }),
    isDarnallHall && /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("div", { className: "w-full", children: /* @__PURE__ */ jsx(
        "img",
        {
          src: "/images/darnall.jpeg",
          alt: "Darnall Hall",
          className: "w-full h-48 object-cover rounded-lg shadow-md",
          onError: (e) => {
            e.currentTarget.style.display = "none";
          }
        }
      ) }),
      /* @__PURE__ */ jsxs("div", { className: "space-y-3", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold", children: "About" }),
        /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-700 dark:text-gray-300 leading-relaxed", children: "Darnall Hall is a residence hall for first-year students. The hall also features a restaurant, Epicurean, the Student Health Center, the Office of Institutional Diversity and Equity, and Counseling and Psychiatric Services." }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2 text-sm", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("span", { className: "font-medium", children: "Construction Date:" }),
            /* @__PURE__ */ jsx("span", { className: "ml-2 text-gray-600 dark:text-gray-400", children: "1964" })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("span", { className: "font-medium", children: "Address:" }),
            /* @__PURE__ */ jsx("span", { className: "ml-2 text-gray-600 dark:text-gray-400", children: "1625 TONDORF ROAD NW" })
          ] })
        ] }),
        /* @__PURE__ */ jsx("div", { className: "pt-2", children: /* @__PURE__ */ jsxs("p", { className: "text-sm text-gray-600 dark:text-gray-400", children: [
          "For more information please visit:",
          " ",
          /* @__PURE__ */ jsx(
            "a",
            {
              href: "https://residentialliving.georgetown.edu/communities/firstyear/darnall/",
              target: "_blank",
              rel: "noopener noreferrer",
              className: "text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 underline",
              children: "residentialliving.georgetown.edu"
            }
          )
        ] }) })
      ] })
    ] }),
    isReissScienceBuilding && /* @__PURE__ */ jsxs("div", { className: "space-y-4", children: [
      /* @__PURE__ */ jsx("div", { className: "w-full", children: /* @__PURE__ */ jsx(
        "img",
        {
          src: "/images/reiss.jpeg",
          alt: "Reiss Science Building",
          className: "w-full h-48 object-cover rounded-lg shadow-md",
          onError: (e) => {
            e.currentTarget.style.display = "none";
          }
        }
      ) }),
      /* @__PURE__ */ jsxs("div", { className: "space-y-3", children: [
        /* @__PURE__ */ jsx("h3", { className: "text-lg font-semibold", children: "About" }),
        /* @__PURE__ */ jsx("p", { className: "text-sm text-gray-700 dark:text-gray-300 leading-relaxed", children: "The Reiss Science Building contains classrooms, science labs, a nuclear accelerator vault and a greenhouse. The Blommer Science Library and the offices of the departments of biology, chemistry and physics are housed in the Reiss Science Building." }),
        /* @__PURE__ */ jsxs("div", { className: "space-y-2 text-sm", children: [
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("span", { className: "font-medium", children: "Construction Date:" }),
            /* @__PURE__ */ jsx("span", { className: "ml-2 text-gray-600 dark:text-gray-400", children: "1962" })
          ] }),
          /* @__PURE__ */ jsxs("div", { children: [
            /* @__PURE__ */ jsx("span", { className: "font-medium", children: "Address:" }),
            /* @__PURE__ */ jsx("span", { className: "ml-2 text-gray-600 dark:text-gray-400", children: "1551 TONDORF ROAD NW" })
          ] })
        ] })
      ] })
    ] }),
    /* @__PURE__ */ jsxs(
      Button,
      {
        className: "w-full rounded-full",
        onClick: handleDirectionsClick,
        variant: "primary",
        children: [
          /* @__PURE__ */ jsx(Navigation2, { className: "mr-2", size: 18 }),
          "Directions"
        ]
      }
    )
  ] });
}
function EnhancedSuggestionsList({
  suggestions,
  searchQuery,
  onSuggestionClick
}) {
  const getSourceIcon = (source) => {
    switch (source) {
      case "indoor":
        return /* @__PURE__ */ jsx(Building, { className: "h-3 w-3 text-green-600" });
      case "osm":
        return /* @__PURE__ */ jsx(Globe, { className: "h-3 w-3 text-blue-600" });
      default:
        return /* @__PURE__ */ jsx(MapPin, { className: "h-3 w-3 text-gray-600" });
    }
  };
  const getSourceLabel = (source) => {
    switch (source) {
      case "indoor":
        return "Indoor";
      case "osm":
        return "OpenStreetMap";
      default:
        return "Location";
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "space-y-2", children: [
    suggestions.map((suggestion, index) => /* @__PURE__ */ jsx(
      Button,
      {
        variant: "ghost",
        className: "w-full justify-start text-left text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800",
        onMouseDown: () => onSuggestionClick(suggestion),
        children: /* @__PURE__ */ jsxs("div", { className: "flex items-start gap-2 w-full", children: [
          /* @__PURE__ */ jsx("div", { className: "mt-1 flex-shrink-0", children: getSourceIcon(suggestion.source) }),
          /* @__PURE__ */ jsxs("div", { className: "flex-1 min-w-0", children: [
            /* @__PURE__ */ jsx("div", { className: "font-medium truncate", children: suggestion.name }),
            suggestion.address && /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-500 truncate mt-1", children: suggestion.address }),
            /* @__PURE__ */ jsx("div", { className: "text-xs text-gray-400 mt-1", children: getSourceLabel(suggestion.source) })
          ] })
        ] })
      },
      `${suggestion.source}-${suggestion.id}-${index}`
    )),
    suggestions.length === 0 && searchQuery && /* @__PURE__ */ jsxs("div", { className: "p-4 text-sm text-gray-500 dark:text-gray-300 text-center", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-center gap-2 mb-2", children: [
        /* @__PURE__ */ jsx(MapPin, { className: "h-4 w-4" }),
        /* @__PURE__ */ jsx("span", { children: "No results found" })
      ] }),
      /* @__PURE__ */ jsx("p", { className: "text-xs", children: "Try a different search term or enable OpenStreetMap locations" })
    ] })
  ] });
}
class CrossBuildingNavigationService {
  constructor(routingApiBase, indoorDirections) {
    __publicField(this, "routingApiBase");
    __publicField(this, "indoorDirections");
    __publicField(this, "buildingEntrances");
    this.routingApiBase = routingApiBase;
    this.indoorDirections = indoorDirections;
    this.buildingEntrances = this.loadBuildingEntrances();
  }
  /**
   * Find route between two points that may be in different buildings
   */
  async findCrossBuildingRoute(start, end, options = {}) {
    console.log("findCrossBuildingRoute called with:", { start, end, options });
    const startCoord = Array.isArray(start) ? start : start.coordinates;
    const endCoord = Array.isArray(end) ? end : end.coordinates;
    const startBuilding = Array.isArray(start) ? null : start.building;
    const endBuilding = Array.isArray(end) ? null : end.building;
    console.log("Processed coordinates:", { startCoord, endCoord, startBuilding, endBuilding });
    const detectedStartBuilding = startBuilding || this.detectBuildingFromCoordinate(startCoord);
    const detectedEndBuilding = endBuilding || this.detectBuildingFromCoordinate(endCoord);
    console.log("Building detection:", { detectedStartBuilding, detectedEndBuilding });
    if (detectedStartBuilding && detectedEndBuilding && detectedStartBuilding === detectedEndBuilding) {
      console.log(`Same building detected (${detectedStartBuilding}), using indoor-only route`);
      return this.getIndoorOnlyRoute(start, end);
    }
    const startIsIndoor = detectedStartBuilding;
    const endIsIndoor = detectedEndBuilding;
    console.log("Building detection:", { startIsIndoor, endIsIndoor });
    if (!startIsIndoor && !endIsIndoor) {
      console.log("Both points are outdoor, using direct outdoor route");
      try {
        const outdoorRoute2 = await this.getOutdoorRoute(startCoord, endCoord, options);
        return {
          indoor: {},
          outdoor: outdoorRoute2,
          transition: {},
          totalDistance: outdoorRoute2.distance,
          totalDuration: outdoorRoute2.duration,
          instructions: this.createOutdoorInstructions(outdoorRoute2)
        };
      } catch (error) {
        console.error("Failed to get outdoor route between outdoor points:", error);
        throw new Error("Unable to calculate outdoor route. Please check your internet connection and try again.");
      }
    }
    let routeStartCoord = startCoord;
    let routeEndCoord = endCoord;
    if (startIsIndoor) {
      const startEntrance = this.findNearestEntrance(startCoord, startIsIndoor);
      routeStartCoord = startEntrance.coordinates;
    }
    if (endIsIndoor) {
      const endEntrance = this.findNearestEntrance(endCoord, endIsIndoor);
      routeEndCoord = endEntrance.coordinates;
    }
    console.log("Route coordinates:", { routeStartCoord, routeEndCoord });
    let outdoorRoute;
    try {
      outdoorRoute = await this.getOutdoorRoute(routeStartCoord, routeEndCoord, options);
    } catch (error) {
      console.error("Failed to get outdoor route for cross-building navigation:", error);
      throw new Error("Unable to calculate outdoor route between buildings. Please check your internet connection and try again.");
    }
    const route = {
      indoor: {},
      outdoor: outdoorRoute,
      transition: {},
      totalDistance: 0,
      totalDuration: 0,
      instructions: []
    };
    console.log("Outdoor route calculated:", route.outdoor);
    let displayedIndoorRoute = null;
    if (endIsIndoor && routeEndCoord !== endCoord) {
      try {
        const indoorEnd = this.getIndoorRoute(routeEndCoord, endCoord);
        if (indoorEnd) {
          route.indoor.end = indoorEnd;
          displayedIndoorRoute = "end";
          const outdoorEndCoord = outdoorRoute.geometry.coordinates[outdoorRoute.geometry.coordinates.length - 1];
          route.transition.toIndoor = this.createTransitionLine(outdoorEndCoord, routeEndCoord);
          route.instructions.push({
            type: "transition",
            text: `Enter ${endIsIndoor}`
          });
          route.instructions.push({
            type: "indoor",
            text: `Navigate inside ${endIsIndoor} to your destination`,
            building: endIsIndoor,
            floor: Array.isArray(end) ? void 0 : end.floor,
            geometry: indoorEnd
          });
        }
      } catch (error) {
        console.warn("Could not generate indoor end route:", error);
      }
    }
    if (startIsIndoor && routeStartCoord !== startCoord && displayedIndoorRoute === null) {
      try {
        console.log("ðŸ  Indoor start route debug:", {
          startCoord,
          routeStartCoord,
          startIsIndoor,
          message: "Should route FROM startCoord TO routeStartCoord (room to entrance)"
        });
        const indoorStart = this.getIndoorRoute(startCoord, routeStartCoord);
        if (indoorStart) {
          route.indoor.start = indoorStart;
          displayedIndoorRoute = "start";
          route.instructions.unshift({
            type: "indoor",
            text: `Navigate inside ${startIsIndoor} to building exit`,
            building: startIsIndoor,
            floor: Array.isArray(start) ? void 0 : start.floor,
            geometry: indoorStart
          });
          const outdoorStartCoord = outdoorRoute.geometry.coordinates[0];
          route.transition.toOutdoor = this.createTransitionLine(routeStartCoord, outdoorStartCoord);
        }
      } catch (error) {
        console.warn("Could not generate indoor start route:", error);
      }
    } else if (startIsIndoor && routeStartCoord !== startCoord && displayedIndoorRoute === "end") {
      try {
        console.log("ðŸ“ Calculating start indoor route geometry without displaying (end route has priority)");
        const outdoorStartCoord = outdoorRoute.geometry.coordinates[0];
        route.transition.toOutdoor = this.createTransitionLine(routeStartCoord, outdoorStartCoord);
        route.instructions.unshift({
          type: "indoor",
          text: `Navigate inside ${startIsIndoor} to building exit`,
          building: startIsIndoor,
          floor: Array.isArray(start) ? void 0 : start.floor,
          geometry: void 0
          // Don't include geometry since we're not displaying this route
        });
      } catch (error) {
        console.warn("Could not generate transition for indoor start route:", error);
      }
    }
    if (startIsIndoor && !route.instructions.some((i) => i.type === "transition" && i.text.includes("Exit"))) {
      const transitionIndex = route.instructions.findIndex((i) => i.type === "outdoor");
      if (transitionIndex > 0) {
        route.instructions.splice(transitionIndex, 0, {
          type: "transition",
          text: `Exit ${startIsIndoor || "building"} and head towards ${endIsIndoor ? endIsIndoor : "destination"}`
        });
      }
    }
    const outdoorInstructionIndex = route.instructions.findIndex((i) => i.type === "outdoor");
    if (outdoorInstructionIndex === -1) {
      route.instructions.push(...this.createOutdoorInstructions(route.outdoor));
    }
    console.log(`ðŸ“ Indoor route display priority: ${displayedIndoorRoute || "none"}`);
    console.log(`ðŸ“‹ Instructions generated: ${route.instructions.length} total`);
    let transitionDistance = 0;
    if (route.transition.toOutdoor) {
      transitionDistance += this.calculateDistance(route.transition.toOutdoor.coordinates);
    }
    if (route.transition.toIndoor) {
      transitionDistance += this.calculateDistance(route.transition.toIndoor.coordinates);
    }
    route.totalDistance = route.outdoor.distance + (route.indoor.start ? this.calculateDistance(route.indoor.start.coordinates) : 0) + (route.indoor.end ? this.calculateDistance(route.indoor.end.coordinates) : 0) + transitionDistance;
    const transitionTime = (route.transition.toOutdoor ? 30 : 0) + (route.transition.toIndoor ? 30 : 0);
    route.totalDuration = route.outdoor.duration + (route.indoor.start ? this.estimateIndoorDuration(route.indoor.start) : 0) + (route.indoor.end ? this.estimateIndoorDuration(route.indoor.end) : 0) + transitionTime;
    console.log("Final route calculated:", {
      totalDistance: route.totalDistance,
      totalDuration: route.totalDuration,
      outdoorDistance: route.outdoor.distance,
      outdoorDuration: route.outdoor.duration,
      instructionsCount: route.instructions.length
    });
    return route;
  }
  /**
   * Create outdoor route instructions from OSRM route
   */
  createOutdoorInstructions(outdoorRoute) {
    const instructions = [];
    if (outdoorRoute.legs) {
      outdoorRoute.legs.forEach((leg, legIndex) => {
        leg.steps.forEach((step, stepIndex) => {
          instructions.push({
            type: "outdoor",
            text: step.maneuver.instruction,
            distance: step.distance,
            duration: step.duration,
            geometry: step.geometry
          });
        });
      });
    }
    return instructions;
  }
  /**
   * Get outdoor route using OpenStreetMap routing service
   */
  async getOutdoorRoute(start, end, options = {}) {
    var _a;
    const profile = "walking";
    const baseUrl = `${this.routingApiBase}/${profile}`;
    const params = new URLSearchParams({
      overview: options.overview || "full",
      geometries: "geojson",
      steps: "true",
      continue_straight: ((_a = options.continue_straight) == null ? void 0 : _a.toString()) || "default",
      // Don't request alternatives - they can cause contamination and random extra sections
      alternatives: "false",
      // Use annotations to get more detailed route info
      annotations: "true"
      // Remove exclude parameter - let OSRM use its default walking routing
      // approaches: 'unrestricted;unrestricted' // Also remove this as it might cause issues
    });
    const url = `${baseUrl}/${start[0]},${start[1]};${end[0]},${end[1]}?${params}`;
    console.log("Fetching pedestrian-friendly outdoor route from:", url);
    try {
      const response = await fetch(url);
      console.log("OSRM API response status:", response.status);
      if (!response.ok) {
        const errorText = await response.text();
        console.error("OSRM API error response:", errorText);
        console.log("ðŸš¨ OSRM API failed, throwing error instead of fallback");
        throw new Error(`Routing API error: ${response.status} - ${errorText}`);
      }
      const data = await response.json();
      console.log("OSRM API response data:", data);
      if (!data.routes || data.routes.length === 0) {
        console.error("No routes found in response:", data);
        console.log("ðŸš¨ No routes in response, throwing error instead of fallback");
        throw new Error("No route found");
      }
      console.log("âœ… OSRM API succeeded, processing primary route...");
      let route = data.routes[0];
      console.log(`ï¿½ Using primary route: distance=${route.distance}m, duration=${route.duration}s`);
      if (!route.geometry || !route.geometry.coordinates || route.geometry.coordinates.length < 2) {
        console.error("Invalid route geometry received:", route.geometry);
        throw new Error("Invalid route geometry");
      }
      const straightLineDistance = this.calculateHaversineDistance(start, end);
      if (route.distance < straightLineDistance * 0.9) {
        console.warn("Route distance suspiciously short compared to straight-line distance:", {
          routeDistance: route.distance,
          straightLineDistance
        });
      }
      route = this.adjustRouteTimingForRealism(route);
      console.log("Selected route with adjusted timing:", route);
      return route;
    } catch (error) {
      console.error("Error fetching outdoor route:", error);
      throw new Error(`Failed to get outdoor route: ${error}`);
    }
  }
  /**
   * Adjust OSRM route timing to be more realistic for walking
   */
  adjustRouteTimingForRealism(route) {
    const baseSpeedAdjustment = 1.4;
    const bufferTime = 300;
    const adjustedDuration = route.duration * baseSpeedAdjustment + bufferTime;
    const durationMultiplier = adjustedDuration / route.duration;
    const adjustedLegs = route.legs.map((leg) => ({
      ...leg,
      duration: leg.duration * durationMultiplier,
      steps: leg.steps.map((step) => ({
        ...step,
        duration: step.duration * durationMultiplier
      }))
    }));
    return {
      ...route,
      duration: adjustedDuration,
      legs: adjustedLegs,
      weight: adjustedDuration
    };
  }
  /**
   * Get indoor-only route for same building navigation
   */
  async getIndoorOnlyRoute(start, end) {
    var _a;
    const startCoord = Array.isArray(start) ? start : start.coordinates;
    const endCoord = Array.isArray(end) ? end : end.coordinates;
    console.log("ðŸ  Getting indoor-only route from", startCoord, "to", endCoord);
    const indoorRoute = this.getIndoorRoute(startCoord, endCoord);
    if (!indoorRoute) {
      console.warn("âŒ No indoor route found between coordinates");
    } else {
      console.log("âœ… Indoor route found with geometry:", indoorRoute);
    }
    const totalDistance = indoorRoute ? this.calculateDistance(indoorRoute.coordinates) : 0;
    const totalDuration = indoorRoute ? this.estimateIndoorDuration(indoorRoute) : 0;
    console.log("ðŸ›¤ï¸ Indoor route calculated:", {
      hasRoute: !!indoorRoute,
      distance: totalDistance,
      duration: totalDuration,
      coordinateCount: ((_a = indoorRoute == null ? void 0 : indoorRoute.coordinates) == null ? void 0 : _a.length) || 0
    });
    return {
      indoor: {
        start: indoorRoute || void 0
      },
      outdoor: {
        distance: 0,
        duration: 0,
        geometry: { type: "LineString", coordinates: [] },
        legs: [],
        weight: 0,
        weight_name: "duration"
      },
      transition: {},
      totalDistance,
      totalDuration,
      instructions: [{
        type: "indoor",
        text: "Navigate to your destination",
        distance: totalDistance,
        duration: totalDuration,
        geometry: indoorRoute || void 0
      }]
    };
  }
  /**
   * Create a simple transition line between two points (for dotted line display)
   */
  createTransitionLine(start, end) {
    return {
      type: "LineString",
      coordinates: [start, end]
    };
  }
  /**
   * Get indoor route using existing indoor directions system
   * NOTE: This will display the route visually via the IndoorDirections instance
   */
  getIndoorRoute(start, end) {
    var _a, _b, _c, _d;
    try {
      if (!this.indoorDirections) {
        console.warn("Indoor directions instance not available");
        return null;
      }
      console.log("ðŸ  Setting waypoints for indoor navigation (this will be displayed):", { start, end });
      this.indoorDirections.clear();
      this.indoorDirections.setWaypoints([start, end]);
      const fullRouteCoordinates = this.indoorDirections.fullRoute;
      console.log("ðŸ›¤ï¸ Full route coordinates:", {
        fullRouteLength: fullRouteCoordinates == null ? void 0 : fullRouteCoordinates.length,
        coordinates: fullRouteCoordinates
      });
      const routeLines = this.indoorDirections.routelinesCoordinates;
      console.log("ðŸ“Š Route lines status:", {
        routeLinesLength: routeLines == null ? void 0 : routeLines.length,
        firstRouteLines: (_a = routeLines == null ? void 0 : routeLines[0]) == null ? void 0 : _a.length
      });
      if (fullRouteCoordinates && fullRouteCoordinates.length >= 2) {
        const routeGeometry2 = {
          type: "LineString",
          coordinates: fullRouteCoordinates
        };
        console.log("ðŸ“ Created route geometry from fullRoute:", routeGeometry2);
        console.log("âœ… Indoor route should now be visible on map");
        return routeGeometry2;
      }
      const routeCoordinates = this.indoorDirections.routelinesCoordinates;
      console.log("ðŸ›¤ï¸ Indoor route coordinates result (fallback):", {
        routeCoordinatesLength: routeCoordinates == null ? void 0 : routeCoordinates.length,
        firstRoute: (_b = routeCoordinates == null ? void 0 : routeCoordinates[0]) == null ? void 0 : _b.length,
        fullResult: routeCoordinates
      });
      const routeGeometry = (_d = (_c = routeCoordinates[0]) == null ? void 0 : _c[0]) == null ? void 0 : _d.geometry;
      console.log("ðŸ“ Indoor route geometry (fallback):", routeGeometry);
      if (routeGeometry) {
        console.log("âœ… Indoor route should now be visible on map (fallback method)");
      } else {
        console.warn("âŒ No indoor route geometry found");
      }
      return routeGeometry || null;
    } catch (error) {
      console.error("Indoor routing failed with error:", error);
      return null;
    }
  }
  /**
   * Find the nearest building entrance for a given coordinate
   */
  findNearestEntrance(coord, buildingId) {
    let availableEntrances = this.buildingEntrances;
    if (!buildingId) {
      const detectedBuilding = this.detectBuildingFromCoordinate(coord);
      if (detectedBuilding) {
        buildingId = detectedBuilding;
      }
      console.log(`Detected building "${buildingId || "none"}" for coordinate [${coord[0]}, ${coord[1]}]`);
    }
    if (buildingId) {
      const buildingEntrances = availableEntrances.filter((e) => e.building_id === buildingId);
      if (buildingEntrances.length > 0) {
        availableEntrances = buildingEntrances;
        console.log(`Using ${buildingEntrances.length} entrances for building ${buildingId}`);
      } else {
        console.log(`No entrances found for building ${buildingId}, using all entrances`);
      }
    }
    let closest = availableEntrances[0];
    let minDistance = this.getDistanceToEntrance(coord, closest.coordinates);
    for (const entrance of availableEntrances.slice(1)) {
      const distance = this.getDistanceToEntrance(coord, entrance.coordinates);
      if (distance < minDistance) {
        minDistance = distance;
        closest = entrance;
      }
    }
    console.log(`Selected entrance: ${closest.name} (${closest.id}) for building ${closest.building_id}`);
    return closest;
  }
  /**
   * Detect which building a coordinate belongs to based on proximity and known locations
   * Returns null for outdoor/external coordinates
   */
  detectBuildingFromCoordinate(coord) {
    const longitude = coord[0];
    const latitude = coord[1];
    console.log(`ðŸ—ï¸ Building detection for coordinate [${longitude.toFixed(6)}, ${latitude.toFixed(6)}]`);
    if (longitude > -77.0723 && longitude < -77.0715 && latitude > 38.9072 && latitude < 38.908) {
      console.log("âœ… Detected as Healy Hall");
      return "healy";
    }
    if (longitude > -77.074 && longitude < -77.073 && latitude > 38.911 && latitude < 38.9118) {
      console.log("âœ… Detected as Darnall Hall");
      return "darnall";
    }
    if (longitude > -77.0745 && longitude < -77.0725 && latitude > 38.9092 && latitude < 38.9105) {
      console.log("âœ… Detected as Reiss Science Building");
      return "reiss";
    }
    if (longitude > -77.073 && longitude < -77.072 && latitude > 38.9076 && latitude < 38.9084) {
      console.log("âœ… Detected as Lauinger Library");
      return "lauinger";
    }
    console.log("âŒ No building detected - treating as outdoor coordinate");
    return null;
  }
  /**
   * Calculate distance between two coordinates (simple Euclidean for short distances)
   */
  getDistanceToEntrance(coord1, coord2) {
    const dx = coord1[0] - coord2[0];
    const dy = coord1[1] - coord2[1];
    return Math.sqrt(dx * dx + dy * dy);
  }
  /**
   * Calculate Haversine distance between two coordinates in meters
   */
  calculateHaversineDistance(coord1, coord2) {
    const R = 6371e3;
    const Ï†1 = coord1[1] * Math.PI / 180;
    const Ï†2 = coord2[1] * Math.PI / 180;
    const Î”Ï† = (coord2[1] - coord1[1]) * Math.PI / 180;
    const Î”Î» = (coord2[0] - coord1[0]) * Math.PI / 180;
    const a = Math.sin(Î”Ï† / 2) * Math.sin(Î”Ï† / 2) + Math.cos(Ï†1) * Math.cos(Ï†2) * Math.sin(Î”Î» / 2) * Math.sin(Î”Î» / 2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
  }
  /**
   * Calculate bearing between two coordinates
   */
  calculateBearing(coord1, coord2) {
    const Ï†1 = coord1[1] * Math.PI / 180;
    const Ï†2 = coord2[1] * Math.PI / 180;
    const Î”Î» = (coord2[0] - coord1[0]) * Math.PI / 180;
    const y = Math.sin(Î”Î») * Math.cos(Ï†2);
    const x = Math.cos(Ï†1) * Math.sin(Ï†2) - Math.sin(Ï†1) * Math.cos(Ï†2) * Math.cos(Î”Î»);
    const Î¸ = Math.atan2(y, x);
    return (Î¸ * 180 / Math.PI + 360) % 360;
  }
  /**
   * Calculate total distance of a line string in meters
   */
  calculateDistance(coordinates) {
    let total = 0;
    for (let i = 1; i < coordinates.length; i++) {
      total += this.calculateHaversineDistance(coordinates[i - 1], coordinates[i]);
    }
    return total;
  }
  /**
   * Estimate indoor walking duration (assuming 1.0 m/s walking speed + buffer)
   */
  estimateIndoorDuration(route) {
    const distance = this.calculateDistance(route.coordinates);
    const baseDuration = distance / 1;
    return baseDuration + 60;
  }
  /**
   * Load building entrances (this should come from your data)
   */
  loadBuildingEntrances() {
    return [
      // Darnall Hall
      {
        id: "darnall_main",
        name: "Darnall Hall Main Entrance",
        coordinates: [-77.07349839, 38.91127125],
        // Well-connected corridor coordinate from indoor routes
        building_id: "darnall",
        floor: "G",
        accessibility: true
      },
      {
        id: "darnall_side",
        name: "Darnall Hall Side Entrance",
        coordinates: [-77.0735, 38.9115],
        building_id: "darnall",
        floor: "G",
        accessibility: false
      },
      // Reiss Science Building
      {
        id: "reiss_main",
        name: "Reiss Science Building Main Entrance",
        coordinates: [-77.07360623, 38.90946303],
        // Use the actual entrance POI coordinates
        building_id: "reiss",
        floor: "G",
        accessibility: true
      },
      {
        id: "reiss_north",
        name: "Reiss Science Building North Entrance",
        coordinates: [-77.07360623, 38.90946303],
        // Use the working exit/entrance POI coordinates
        building_id: "reiss",
        floor: "G",
        accessibility: false
      }
    ];
  }
  /**
   * Add a new building entrance
   */
  addBuildingEntrance(entrance) {
    this.buildingEntrances.push(entrance);
  }
  /**
   * Get route bounds for map viewport adjustment
   */
  getRouteBounds(route) {
    var _a, _b;
    const coordinates = [];
    if (route.outdoor.geometry.coordinates.length > 0) {
      coordinates.push(...route.outdoor.geometry.coordinates);
    }
    if ((_a = route.indoor.start) == null ? void 0 : _a.coordinates.length) {
      coordinates.push(...route.indoor.start.coordinates);
    }
    if ((_b = route.indoor.end) == null ? void 0 : _b.coordinates.length) {
      coordinates.push(...route.indoor.end.coordinates);
    }
    if (coordinates.length === 0) {
      throw new Error("No route coordinates available");
    }
    let bounds = new maplibreGlExports.LngLatBounds(coordinates[0], coordinates[0]);
    for (const coord of coordinates) {
      bounds = bounds.extend(coord);
    }
    return bounds;
  }
}
function useEnhancedDirections(map, indoorDirections = null) {
  const navigateToLocation = useCallback(async (start, end, options = {}) => {
    console.log("navigateToLocation called:", { start, end, options, map });
    if (!map) {
      console.error("Map not available");
      return null;
    }
    try {
      const navigationService = new CrossBuildingNavigationService(config.routingApi, indoorDirections);
      const route = await navigationService.findCrossBuildingRoute(start, end, options);
      if (route) {
        if (route.outdoor && route.outdoor.geometry && route.outdoor.geometry.coordinates) {
          const coords = route.outdoor.geometry.coordinates;
          console.log("Route validation:", {
            hasGeometry: !!route.outdoor.geometry,
            coordinateCount: coords.length,
            distance: route.outdoor.distance,
            firstCoord: coords[0],
            lastCoord: coords[coords.length - 1]
          });
        }
        displayRouteOnMap(route);
      }
      return route;
    } catch (error) {
      console.error("Navigation failed:", error);
      const errorMessage = error instanceof Error ? error.message : String(error);
      const isDisplayError = errorMessage.includes("display") || errorMessage.includes("layer") || errorMessage.includes("source");
      if (isDisplayError) {
        console.warn("Route display error, preserving any existing indoor routes");
      } else {
        console.log("Route calculation failed, clearing all routes");
        clearRouteFromMap();
      }
      if (error instanceof Error) {
        if (error.message.includes("internet connection")) {
          console.error("Network error during navigation");
        } else if (error.message.includes("No route found")) {
          console.error("No valid route could be calculated");
        } else {
          console.error("Unexpected navigation error:", error.message);
        }
      }
      return null;
    }
  }, [map]);
  const navigateFromCurrentLocation = useCallback(async (destination, options = {}) => {
    console.log("navigateFromCurrentLocation called:", { destination, options });
    return new Promise((resolve, reject) => {
      if (!navigator.geolocation) {
        console.error("Geolocation not supported");
        reject(new Error("Geolocation not supported"));
        return;
      }
      navigator.geolocation.getCurrentPosition(
        async (position) => {
          const start = [
            position.coords.longitude,
            position.coords.latitude
          ];
          try {
            const route = await navigateToLocation(start, destination, options);
            resolve(route);
          } catch (error) {
            reject(error);
          }
        },
        (error) => {
          console.error("Geolocation error:", error);
          reject(error);
        },
        {
          enableHighAccuracy: true,
          timeout: 1e4,
          maximumAge: 6e4
        }
      );
    });
  }, [navigateToLocation]);
  const displayRouteOnMap = useCallback((route) => {
    var _a, _b;
    console.log("displayRouteOnMap called:", route);
    if (!map) return;
    const hasIndoorSegments = route.indoor.start || route.indoor.end;
    const isIndoorOnly = route.indoor.start && (!route.outdoor.geometry || !route.outdoor.geometry.coordinates || route.outdoor.geometry.coordinates.length === 0);
    console.log("Route type detection:", {
      hasIndoorStart: !!route.indoor.start,
      hasIndoorEnd: !!route.indoor.end,
      hasOutdoorGeometry: !!route.outdoor.geometry,
      outdoorCoordinatesLength: ((_b = (_a = route.outdoor.geometry) == null ? void 0 : _a.coordinates) == null ? void 0 : _b.length) || 0,
      hasIndoorSegments,
      isIndoorOnly
    });
    if (hasIndoorSegments) {
      console.log("Route has indoor segments, preserving indoor directions");
      clearRouteFromMap(true);
    } else {
      console.log("Route has no indoor segments, clearing all routes");
      clearRouteFromMap(false);
    }
    if (hasIndoorSegments) {
      console.log("Displaying indoor routes via IndoorDirections");
      const indoorSource = map.getSource("maplibre-gl-indoor-directions");
      if (indoorSource && "getData" in indoorSource) {
        const sourceData = indoorSource.getData();
        console.log("ðŸ—ºï¸ Indoor directions source data:", sourceData);
      } else {
        console.warn("âŒ Indoor directions source not found or has no data");
      }
      const indoorLayers = ["maplibre-gl-indoor-directions-routeline", "maplibre-gl-indoor-directions-routeline-casing"];
      indoorLayers.forEach((layerId) => {
        const layer = map.getLayer(layerId);
        if (layer) {
          console.log(`âœ… Indoor layer ${layerId} exists:`, layer);
          const visibility = map.getLayoutProperty(layerId, "visibility");
          console.log(`ðŸ‘ï¸ Layer ${layerId} visibility:`, visibility || "visible");
        } else {
          console.warn(`âŒ Indoor layer ${layerId} not found`);
        }
      });
      if (isIndoorOnly) {
        console.log("Indoor-only route, skipping outdoor display");
        return;
      }
    }
    const transitionFeatures = [];
    if (route.transition.toOutdoor) {
      transitionFeatures.push({
        type: "Feature",
        geometry: route.transition.toOutdoor,
        properties: {
          route_type: "transition",
          transition_type: "exit_to_road",
          description: "Walking from building exit to main road"
        }
      });
    }
    if (route.transition.toIndoor) {
      transitionFeatures.push({
        type: "Feature",
        geometry: route.transition.toIndoor,
        properties: {
          route_type: "transition",
          transition_type: "road_to_entrance",
          description: "Walking from main road to building entrance"
        }
      });
    }
    if (transitionFeatures.length > 0) {
      const transitionData = {
        type: "FeatureCollection",
        features: transitionFeatures
      };
      if (!map.getSource("transition-route")) {
        map.addSource("transition-route", {
          type: "geojson",
          data: transitionData
        });
        map.addLayer({
          id: "transition-route-line",
          type: "line",
          source: "transition-route",
          layout: {
            "line-join": "round",
            "line-cap": "round"
          },
          paint: {
            "line-color": "#8b5cf6",
            // Purple color for transitions
            "line-width": 3,
            "line-opacity": 0.8,
            "line-dasharray": [2, 3]
            // Dotted line pattern
          }
        });
      } else {
        map.getSource("transition-route").setData(transitionData);
      }
    }
    if (route.outdoor.geometry && route.outdoor.distance > 0) {
      const coordinates = route.outdoor.geometry.coordinates;
      if (!coordinates || coordinates.length < 2) {
        console.warn("Invalid outdoor route geometry, skipping display");
        return;
      }
      const cleanCoordinates = coordinates.map((coord) => {
        if (Array.isArray(coord) && coord.length >= 2) {
          return [Number(coord[0]), Number(coord[1])];
        }
        return null;
      }).filter((coord) => coord !== null);
      const validCoordinates = cleanCoordinates.filter((coord) => {
        return Array.isArray(coord) && coord.length >= 2 && typeof coord[0] === "number" && typeof coord[1] === "number" && !isNaN(coord[0]) && !isNaN(coord[1]) && Math.abs(coord[0]) <= 180 && Math.abs(coord[1]) <= 90;
      });
      if (validCoordinates.length !== cleanCoordinates.length) {
        console.warn("Found invalid coordinates in route geometry, filtered out", {
          original: coordinates.length,
          clean: cleanCoordinates.length,
          valid: validCoordinates.length
        });
      }
      if (validCoordinates.length < 2) {
        console.warn("Not enough valid coordinates to display route");
        return;
      }
      console.log("Displaying outdoor route with validated coordinates:", {
        originalCount: coordinates.length,
        validCount: validCoordinates.length,
        firstCoord: validCoordinates[0],
        lastCoord: validCoordinates[validCoordinates.length - 1]
      });
      const geojsonData = {
        type: "FeatureCollection",
        features: [{
          type: "Feature",
          geometry: {
            type: "LineString",
            coordinates: validCoordinates
          },
          properties: {
            route_type: "outdoor",
            distance: route.outdoor.distance,
            duration: route.outdoor.duration
          }
        }]
      };
      if (!map.getSource("outdoor-route")) {
        map.addSource("outdoor-route", {
          type: "geojson",
          data: geojsonData
        });
        map.addLayer({
          id: "outdoor-route-line",
          type: "line",
          source: "outdoor-route",
          layout: {
            "line-join": "round",
            "line-cap": "round"
          },
          paint: {
            "line-color": "#3b82f6",
            "line-width": 4,
            "line-opacity": 0.8
          }
        });
      } else {
        map.getSource("outdoor-route").setData(geojsonData);
      }
    }
    const allCoordinates = [];
    if (route.outdoor.geometry && route.outdoor.geometry.coordinates.length > 0) {
      allCoordinates.push(...route.outdoor.geometry.coordinates);
    }
    if (route.transition.toOutdoor) {
      allCoordinates.push(...route.transition.toOutdoor.coordinates);
    }
    if (route.transition.toIndoor) {
      allCoordinates.push(...route.transition.toIndoor.coordinates);
    }
    if (route.indoor.start && route.indoor.start.coordinates.length > 0) {
      const startCoords = route.indoor.start.coordinates;
      allCoordinates.push(startCoords[0], startCoords[startCoords.length - 1]);
    }
    if (route.indoor.end && route.indoor.end.coordinates.length > 0) {
      const endCoords = route.indoor.end.coordinates;
      allCoordinates.push(endCoords[0], endCoords[endCoords.length - 1]);
    }
    if (allCoordinates.length > 0) {
      try {
        const bounds = allCoordinates.reduce((bounds2, coord) => {
          return bounds2.extend(coord);
        }, new maplibreGlExports.LngLatBounds(allCoordinates[0], allCoordinates[0]));
        map.fitBounds(bounds, {
          padding: 80,
          // More padding for complex routes
          duration: 1e3
        });
      } catch (error) {
        console.error("Error fitting bounds to route:", error);
      }
    }
  }, [map]);
  const clearRouteFromMap = useCallback((preserveIndoor = false) => {
    var _a;
    console.log("clearRouteFromMap called with preserveIndoor:", preserveIndoor);
    console.trace("clearRouteFromMap call stack:");
    if (!map) return;
    if (map.getLayer("outdoor-route-line")) {
      console.log("Removing outdoor-route-line layer");
      map.removeLayer("outdoor-route-line");
    }
    if (map.getSource("outdoor-route")) {
      console.log("Removing outdoor-route source");
      map.removeSource("outdoor-route");
    }
    if (map.getLayer("transition-route-line")) {
      console.log("Removing transition-route-line layer");
      map.removeLayer("transition-route-line");
    }
    if (map.getSource("transition-route")) {
      console.log("Removing transition-route source");
      map.removeSource("transition-route");
    }
    if (!preserveIndoor && indoorDirections) {
      console.log("Clearing indoor directions");
      indoorDirections.clear();
    } else if (preserveIndoor) {
      console.log("Preserving indoor directions as requested");
    }
    try {
      const layers = ((_a = map.getStyle()) == null ? void 0 : _a.layers) || [];
      const routeLayers = layers.filter(
        (layer) => layer.id.includes("route") || layer.id.includes("maplibre-gl-directions")
      );
      console.log("Found potential route layers on map:", routeLayers.map((l) => l.id));
    } catch (error) {
      console.warn("Could not check for conflicting layers:", error);
    }
  }, [map, indoorDirections]);
  return {
    navigateToLocation,
    navigateFromCurrentLocation,
    displayRouteOnMap,
    clearRouteFromMap
  };
}
function EnhancedNavigationView({
  handleBackClick,
  selectedPOI,
  indoorGeocoder,
  indoorDirections
}) {
  const [activeInput, setActiveInput] = useState(null);
  const [departureLocation, setDepartureLocation] = useState("");
  const [destinationLocation, setDestinationLocation] = useState(
    (selectedPOI == null ? void 0 : selectedPOI.name) || ""
  );
  const [suggestions, setSuggestions] = useState([]);
  const [isAccessibleRoute, setIsAccessibleRoute] = useState(false);
  const [currentRoute, setCurrentRoute] = useState(null);
  const [isNavigating, setIsNavigating] = useState(false);
  const [routeInstructions, setRouteInstructions] = useState([]);
  const [useCurrentLocation, setUseCurrentLocation] = useState(false);
  const [includeOSM, setIncludeOSM] = useState(true);
  const map = useMapStore((state) => state.mapInstance);
  const { currentFloor, setCurrentFloor } = useFloorStore();
  const {
    navigateToLocation,
    navigateFromCurrentLocation,
    clearRouteFromMap
  } = useEnhancedDirections(map, indoorDirections);
  const activeQuery = activeInput === "departure" ? departureLocation : destinationLocation;
  useEffect(() => {
    if (!activeInput || !activeQuery || activeQuery.trim().length <= 2) {
      setSuggestions([]);
      return;
    }
    const timeoutId = setTimeout(async () => {
      try {
        console.log("Fetching suggestions for:", activeQuery, "includeOSM:", includeOSM);
        const newSuggestions = await indoorGeocoder.getEnhancedAutocompleteResults(activeQuery, 3, includeOSM);
        console.log("Got suggestions:", newSuggestions);
        setSuggestions(newSuggestions);
      } catch (error) {
        console.error("Error fetching suggestions:", error);
        setSuggestions([]);
      }
    }, 1e3);
    return () => clearTimeout(timeoutId);
  }, [activeInput, activeQuery, indoorGeocoder, includeOSM]);
  const handleSuggestionClick = (suggestion) => {
    const newDeparture = activeInput === "departure" ? suggestion.name : departureLocation;
    const newDestination = activeInput === "destination" ? suggestion.name : destinationLocation;
    if (activeInput === "departure") {
      setDepartureLocation(suggestion.name);
    } else if (activeInput === "destination") {
      setDestinationLocation(suggestion.name);
    }
    setSuggestions([]);
    setActiveInput(null);
    if (newDeparture || useCurrentLocation) {
      handleCrossBuildingRouting(newDeparture, newDestination);
    }
  };
  const handleSwapLocations = () => {
    const temp = departureLocation;
    setDepartureLocation(destinationLocation);
    setDestinationLocation(temp);
    if ((departureLocation || useCurrentLocation) && destinationLocation) {
      handleCrossBuildingRouting(destinationLocation, temp);
    }
  };
  const handleCurrentLocationToggle = (enabled) => {
    console.log("Current location toggle:", enabled);
    setUseCurrentLocation(enabled);
    if (enabled) {
      setDepartureLocation("Current Location");
      if (destinationLocation) {
        handleNavigateFromCurrentLocation();
      }
    } else {
      setDepartureLocation("");
    }
  };
  const handleNavigateFromCurrentLocation = async () => {
    if (!destinationLocation) return;
    setIsNavigating(true);
    try {
      const destinationGeo = await indoorGeocoder.indoorGeocodeInput(destinationLocation);
      if (!(destinationGeo == null ? void 0 : destinationGeo.coordinates)) {
        throw new Error("Invalid destination");
      }
      const destination = destinationGeo.coordinates;
      const route = await navigateFromCurrentLocation(destination, {
        profile: "walking",
        overview: "full",
        accessibleRoute: isAccessibleRoute
      });
      if (route) {
        setCurrentRoute(route);
        setRouteInstructions(route.instructions);
      }
    } catch (error) {
      console.error("Navigation from current location failed:", error);
      alert("Could not get your current location or find a route.");
    } finally {
      setIsNavigating(false);
    }
  };
  const handleCrossBuildingRouting = async (departureValue, destinationValue) => {
    console.log("ðŸš€ handleCrossBuildingRouting called:", { departureValue, destinationValue, useCurrentLocation });
    if (!departureValue && !useCurrentLocation || !destinationValue) {
      console.log("âŒ Missing departure or destination:", { departureValue: !!departureValue, destinationValue: !!destinationValue, useCurrentLocation });
      return;
    }
    if (useCurrentLocation) {
      await handleNavigateFromCurrentLocation();
      return;
    }
    setIsNavigating(true);
    try {
      let departureGeo, destinationGeo;
      try {
        console.log("ðŸ” Geocoding departure value:", departureValue);
        departureGeo = await indoorGeocoder.indoorGeocodeInput(departureValue);
        console.log("âœ… Departure geocoded:", departureGeo);
      } catch (error) {
        console.error(`Geocoding failed for departure "${departureValue}":`, error);
        const suggestions2 = await indoorGeocoder.getEnhancedAutocompleteResults(departureValue, 3, includeOSM);
        console.log("Available suggestions for departure:", suggestions2);
        throw new Error(`Could not find location "${departureValue}". Check spelling or try a different name.`);
      }
      try {
        console.log("ðŸ” Geocoding destination value:", destinationValue);
        destinationGeo = await indoorGeocoder.indoorGeocodeInput(destinationValue);
        console.log("âœ… Destination geocoded:", destinationGeo);
      } catch (error) {
        console.error(`Geocoding failed for destination "${destinationValue}":`, error);
        const suggestions2 = await indoorGeocoder.getEnhancedAutocompleteResults(destinationValue, 3, includeOSM);
        console.log("Available suggestions for destination:", suggestions2);
        throw new Error(`Could not find location "${destinationValue}". Check spelling or try a different name.`);
      }
      if (!(departureGeo == null ? void 0 : departureGeo.coordinates) || !(destinationGeo == null ? void 0 : destinationGeo.coordinates)) {
        throw new Error("Invalid geocoding results");
      }
      const start = [
        Number(departureGeo.coordinates[0]),
        Number(departureGeo.coordinates[1])
      ];
      const end = [
        Number(destinationGeo.coordinates[0]),
        Number(destinationGeo.coordinates[1])
      ];
      console.log("Final coordinates for routing:", { start, end });
      let isReissRoute = departureGeo.building === "reiss" && destinationGeo.building === "reiss";
      if (!isReissRoute) {
        const isStartInReiss = start[0] > -77.074281 && start[0] < -77.072698 && start[1] > 38.908721 && start[1] < 38.910237;
        const isEndInReiss = end[0] > -77.074281 && end[0] < -77.072698 && end[1] > 38.908721 && end[1] < 38.910237;
        isReissRoute = isStartInReiss && isEndInReiss;
      }
      if (!isReissRoute) {
        isReissRoute = departureValue.toLowerCase().includes("reiss") && destinationValue.toLowerCase().includes("reiss");
      }
      if (isReissRoute && currentFloor !== 1) {
        console.log("REISS navigation detected, switching to floor 1");
        setCurrentFloor(1);
      }
      const route = await navigateToLocation(start, end, {
        profile: "walking",
        overview: "full",
        accessibleRoute: isAccessibleRoute
      });
      if (route) {
        setCurrentRoute(route);
        setRouteInstructions(route.instructions);
      }
    } catch (error) {
      console.error("Cross-building navigation failed:", error);
      alert("Could not find a route between these locations.");
    } finally {
      setIsNavigating(false);
    }
  };
  const clearRoute = () => {
    clearRouteFromMap(false);
    setCurrentRoute(null);
    setRouteInstructions([]);
  };
  const formatDuration = (seconds) => {
    const minutes = Math.round(seconds / 60);
    return minutes < 60 ? `${minutes} min` : `${Math.floor(minutes / 60)}h ${minutes % 60}m`;
  };
  const formatDistance = (meters) => {
    return meters < 1e3 ? `${Math.round(meters)} m` : `${(meters / 1e3).toFixed(1)} km`;
  };
  const getInstructionIcon = (instruction) => {
    switch (instruction.type) {
      case "indoor":
        return /* @__PURE__ */ jsx(Building, { className: "h-4 w-4 text-green-600" });
      case "outdoor":
        return /* @__PURE__ */ jsx(Route, { className: "h-4 w-4 text-blue-600" });
      case "transition":
        return /* @__PURE__ */ jsx(ArrowUpDown, { className: "h-4 w-4 text-orange-600" });
      default:
        return /* @__PURE__ */ jsx(Navigation, { className: "h-4 w-4" });
    }
  };
  return /* @__PURE__ */ jsxs("div", { className: "flex h-full w-full flex-col overflow-hidden", children: [
    /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-3 border-b p-4", children: [
      /* @__PURE__ */ jsx(
        Button,
        {
          variant: "ghost",
          size: "icon",
          onClick: handleBackClick,
          className: "h-8 w-8",
          children: /* @__PURE__ */ jsx(ArrowLeft, { className: "h-4 w-4" })
        }
      ),
      /* @__PURE__ */ jsxs("div", { className: "flex flex-1 items-center gap-2", children: [
        /* @__PURE__ */ jsx(Navigation, { className: "h-5 w-5 text-blue-600" }),
        /* @__PURE__ */ jsx("span", { className: "font-semibold", children: "Enhanced Navigation" })
      ] }),
      currentRoute && /* @__PURE__ */ jsx(
        Button,
        {
          variant: "ghost",
          size: "sm",
          onClick: clearRoute,
          className: "text-red-600",
          children: "Clear Route"
        }
      )
    ] }),
    currentRoute && /* @__PURE__ */ jsx("div", { className: "border-b bg-blue-50 p-4 dark:bg-blue-950", children: /* @__PURE__ */ jsxs("div", { className: "flex items-center justify-between", children: [
      /* @__PURE__ */ jsxs("div", { children: [
        /* @__PURE__ */ jsx("div", { className: "text-lg font-semibold text-blue-900 dark:text-blue-100", children: formatDistance(currentRoute.totalDistance) }),
        /* @__PURE__ */ jsx("div", { className: "text-sm text-blue-700 dark:text-blue-300", children: formatDuration(currentRoute.totalDuration) })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex gap-2", children: [
        currentRoute.indoor.start && /* @__PURE__ */ jsx("div", { className: "rounded bg-green-100 px-2 py-1 text-xs text-green-800 dark:bg-green-900 dark:text-green-200", children: "Indoor Start" }),
        currentRoute.outdoor.distance > 0 && /* @__PURE__ */ jsx("div", { className: "rounded bg-blue-100 px-2 py-1 text-xs text-blue-800 dark:bg-blue-900 dark:text-blue-200", children: "Outdoor" }),
        currentRoute.indoor.end && /* @__PURE__ */ jsx("div", { className: "rounded bg-red-100 px-2 py-1 text-xs text-red-800 dark:bg-red-900 dark:text-red-200", children: "Indoor End" })
      ] })
    ] }) }),
    /* @__PURE__ */ jsx("div", { className: "border-b p-4", children: /* @__PURE__ */ jsxs("div", { className: "space-y-3", children: [
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx(
          Toggle,
          {
            pressed: useCurrentLocation,
            onPressedChange: handleCurrentLocationToggle,
            size: "sm",
            children: /* @__PURE__ */ jsx(MapPin, { className: "h-4 w-4" })
          }
        ),
        /* @__PURE__ */ jsx("span", { className: "text-sm", children: "Use current location" })
      ] }),
      !useCurrentLocation && /* @__PURE__ */ jsxs("div", { className: "relative", children: [
        /* @__PURE__ */ jsx("div", { className: "absolute left-3 top-1/2 -translate-y-1/2", children: /* @__PURE__ */ jsx(Dot, { className: "h-4 w-4 text-green-600" }) }),
        /* @__PURE__ */ jsx(
          Input,
          {
            placeholder: "From...",
            value: departureLocation,
            onChange: (e) => setDepartureLocation(e.target.value),
            onFocus: () => setActiveInput("departure"),
            className: "pl-10"
          }
        )
      ] }),
      !useCurrentLocation && /* @__PURE__ */ jsx("div", { className: "flex justify-center", children: /* @__PURE__ */ jsx(
        Button,
        {
          variant: "ghost",
          size: "icon",
          onClick: handleSwapLocations,
          className: "h-8 w-8",
          children: /* @__PURE__ */ jsx(ArrowUpDown, { className: "h-4 w-4" })
        }
      ) }),
      /* @__PURE__ */ jsxs("div", { className: "relative", children: [
        /* @__PURE__ */ jsx("div", { className: "absolute left-3 top-1/2 -translate-y-1/2", children: /* @__PURE__ */ jsx(Dot, { className: "h-4 w-4 text-red-600" }) }),
        /* @__PURE__ */ jsx(
          Input,
          {
            placeholder: "To...",
            value: destinationLocation,
            onChange: (e) => setDestinationLocation(e.target.value),
            onFocus: () => setActiveInput("destination"),
            className: "pl-10"
          }
        )
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx(
          Toggle,
          {
            pressed: includeOSM,
            onPressedChange: setIncludeOSM,
            size: "sm",
            children: /* @__PURE__ */ jsx(Globe, { className: "h-4 w-4" })
          }
        ),
        /* @__PURE__ */ jsx("span", { className: "text-sm", children: "Include OpenStreetMap locations" })
      ] }),
      /* @__PURE__ */ jsxs("div", { className: "flex items-center gap-2", children: [
        /* @__PURE__ */ jsx(
          Toggle,
          {
            pressed: isAccessibleRoute,
            onPressedChange: setIsAccessibleRoute,
            size: "sm",
            children: /* @__PURE__ */ jsx(Accessibility, { className: "h-4 w-4" })
          }
        ),
        /* @__PURE__ */ jsx("span", { className: "text-sm", children: "Accessible route" })
      ] }),
      /* @__PURE__ */ jsx(
        Button,
        {
          onClick: () => {
            console.log("Get Directions button clicked");
            handleCrossBuildingRouting(departureLocation, destinationLocation);
          },
          disabled: isNavigating || !departureLocation && !useCurrentLocation || !destinationLocation,
          className: "w-full",
          children: isNavigating ? "Finding Route..." : "Get Directions"
        }
      )
    ] }) }),
    suggestions.length > 0 && /* @__PURE__ */ jsx("div", { className: "border-b", children: /* @__PURE__ */ jsx(
      EnhancedSuggestionsList,
      {
        suggestions,
        searchQuery: activeQuery,
        onSuggestionClick: handleSuggestionClick
      }
    ) }),
    routeInstructions.length > 0 && /* @__PURE__ */ jsx("div", { className: "flex-1 overflow-y-auto", children: /* @__PURE__ */ jsxs("div", { className: "p-4", children: [
      /* @__PURE__ */ jsx("h3", { className: "mb-3 font-semibold", children: "Turn-by-turn directions" }),
      /* @__PURE__ */ jsx("div", { className: "space-y-3", children: routeInstructions.map((instruction, index) => /* @__PURE__ */ jsxs("div", { className: "flex gap-3", children: [
        /* @__PURE__ */ jsx("div", { className: "mt-1 flex-shrink-0", children: getInstructionIcon(instruction) }),
        /* @__PURE__ */ jsxs("div", { className: "flex-1", children: [
          /* @__PURE__ */ jsx("div", { className: "text-sm", children: instruction.text }),
          instruction.distance && /* @__PURE__ */ jsxs("div", { className: "text-xs text-gray-500", children: [
            formatDistance(instruction.distance),
            instruction.duration && ` â€¢ ${formatDuration(instruction.duration)}`
          ] }),
          instruction.building && /* @__PURE__ */ jsxs("div", { className: "text-xs text-blue-600", children: [
            instruction.building,
            instruction.floor && ` â€¢ Floor ${instruction.floor}`
          ] })
        ] })
      ] }, index)) })
    ] }) })
  ] });
}
function isPolygonFeature(feature) {
  var _a, _b;
  return ((_a = feature == null ? void 0 : feature.geometry) == null ? void 0 : _a.type) === "Polygon" && ((_b = feature == null ? void 0 : feature.properties) == null ? void 0 : _b.feature_type) === "unit";
}
const indoorMap = building.indoor_map;
const unitFeatures = indoorMap.features.filter(
  (element) => isPolygonFeature(element)
);
const poiMap = /* @__PURE__ */ new Map();
unitFeatures.forEach((unitFeature) => {
  const featureId = unitFeature.id;
  if (featureId !== null && featureId !== void 0) {
    poiMap.set(featureId, []);
  }
});
building.pois.features.forEach(
  (poiFeature) => {
    var _a;
    const poiCoordinates = poiFeature.geometry.coordinates;
    for (const unitFeature of unitFeatures) {
      if (booleanPointInPolygon(
        poiCoordinates,
        unitFeature
      ) && unitFeature.id !== null && unitFeature.id !== void 0) {
        (_a = poiMap.get(unitFeature.id)) == null ? void 0 : _a.push(poiFeature);
        break;
      }
    }
  }
);
function DiscoveryPanel() {
  const map = useMapStore((state) => state.mapInstance);
  const [mode2, setMode] = useState("discovery");
  const [selectedPOI, setSelectedPOI] = useState(null);
  const { indoorDirections } = useDirections(map);
  const indoorGeocoder = useEnhancedIndoorGeocoder();
  indoorDirections == null ? void 0 : indoorDirections.loadMapData(
    building.indoor_routes
  );
  const navigateToPOI = useCallback(
    (coordinates) => {
      map == null ? void 0 : map.flyTo({
        center: coordinates,
        zoom: 20,
        duration: 1300
      });
    },
    [map]
  );
  function handleSelectPOI(poi) {
    setSelectedPOI(poi);
    setMode("detail");
    navigateToPOI(poi.coordinates);
  }
  function handleBackClick() {
    setMode("discovery");
    setSelectedPOI(null);
    indoorDirections == null ? void 0 : indoorDirections.clear();
  }
  useEffect(() => {
    const handleMapClick = (event) => {
      var _a, _b, _c, _d, _e, _f;
      const { features } = event;
      if (!(features == null ? void 0 : features.length)) return;
      const clickedFeature = features[0];
      const unitId = clickedFeature.id;
      const featureProps = clickedFeature.properties;
      const isReissFeature = (featureProps == null ? void 0 : featureProps.building_id) === "reiss";
      let isDarnallFeature = (featureProps == null ? void 0 : featureProps.building_id) === "darnall" || (featureProps == null ? void 0 : featureProps.building_id) === "GU_DARNALL";
      if (!isDarnallFeature && ((_a = clickedFeature.geometry) == null ? void 0 : _a.type) === "Polygon") {
        const coords = clickedFeature.geometry.coordinates[0][0];
        if (coords && Array.isArray(coords) && coords.length >= 2) {
          const [lng, lat] = coords;
          if (lng >= -77.075 && lng <= -77.072 && lat >= 38.91 && lat <= 38.912) {
            isDarnallFeature = true;
          }
        }
      }
      if (isReissFeature || isDarnallFeature) {
        const coordinates = [event.lngLat.lng, event.lngLat.lat];
        let displayName = featureProps.name;
        if (!displayName) {
          if (isDarnallFeature) {
            displayName = "Darnall Hall";
          } else if (isReissFeature) {
            displayName = "Reiss Science Building";
          }
        }
        const poi = {
          id: `feature-${unitId || "unknown"}`,
          name: displayName,
          type: featureProps.category || featureProps.feature_type || "room",
          coordinates,
          building: isDarnallFeature ? featureProps.building_id || "darnall" : featureProps.building_id,
          floor: featureProps.level_id
        };
        setSelectedPOI(poi);
        if (mode2 === "discovery" || mode2 === "detail") {
          navigateToPOI(poi.coordinates);
          if (mode2 === "discovery") {
            setMode("detail");
          }
        }
      } else if (unitId !== null && unitId !== void 0) {
        const relatedPOIs = poiMap.get(unitId);
        if (relatedPOIs && relatedPOIs[0]) {
          const firstPOI = relatedPOIs[0];
          const poi = {
            id: (_b = firstPOI.properties) == null ? void 0 : _b.id,
            name: (_c = firstPOI.properties) == null ? void 0 : _c.name,
            type: (_d = firstPOI.properties) == null ? void 0 : _d.type,
            coordinates: firstPOI.geometry.coordinates,
            building: (_e = firstPOI.properties) == null ? void 0 : _e.building_id,
            floor: (_f = firstPOI.properties) == null ? void 0 : _f.floor
          };
          setSelectedPOI(poi);
          if (mode2 === "discovery" || mode2 === "detail") {
            navigateToPOI(poi.coordinates);
            if (mode2 === "discovery") {
              setMode("detail");
            }
          }
        }
      }
    };
    map == null ? void 0 : map.on("click", "indoor-map-extrusion", handleMapClick);
    return () => {
      map == null ? void 0 : map.off("click", "indoor-map-extrusion", handleMapClick);
    };
  }, [map, mode2, navigateToPOI]);
  return /* @__PURE__ */ jsx(Card, { className: "absolute z-10 w-full rounded-xl shadow-lg md:absolute md:left-4 md:top-4 md:max-w-[28rem]", children: /* @__PURE__ */ jsxs(CardContent, { className: "p-4", children: [
    mode2 === "discovery" && /* @__PURE__ */ jsx(
      DiscoveryView,
      {
        indoorGeocoder,
        onSelectPOI: handleSelectPOI
      }
    ),
    mode2 === "detail" && selectedPOI && /* @__PURE__ */ jsx(
      LocationDetail,
      {
        selectedPOI,
        handleDirectionsClick: () => setMode("navigation"),
        handleBackClick
      }
    ),
    mode2 === "navigation" && /* @__PURE__ */ jsx(
      EnhancedNavigationView,
      {
        handleBackClick,
        selectedPOI,
        indoorGeocoder,
        indoorDirections
      }
    )
  ] }) });
}
function FloorSelector({ indoorMapLayer, poisLayer }) {
  const { currentFloor, setCurrentFloor } = useFloorStore();
  const availableFloors = [
    { value: 6, label: "Floor 6" },
    { value: 5, label: "Floor 5" },
    { value: 4, label: "Floor 4" },
    { value: 3, label: "Floor 3" },
    { value: 2, label: "Floor 2" },
    { value: 1, label: "Floor 1" },
    { value: "M", label: "Mezzanine" },
    { value: "G", label: "Ground" },
    { value: "B", label: "Basement" }
  ];
  const handleFloorChange = (event) => {
    const floor = event.target.value;
    const floorValue = /^\d+$/.test(floor) ? Number.parseInt(floor) : floor;
    setCurrentFloor(floorValue);
    indoorMapLayer.setFloorLevel(floorValue);
    poisLayer.setFloorLevel(floorValue);
  };
  return /* @__PURE__ */ jsx("div", { className: "absolute right-2 top-2 z-10", children: /* @__PURE__ */ jsx(
    "select",
    {
      value: currentFloor,
      onChange: handleFloorChange,
      className: "rounded-md border bg-white px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:outline-none dark:bg-gray-900",
      children: availableFloors.map((floor) => /* @__PURE__ */ jsx("option", { value: floor.value, children: floor.label }, floor.value))
    }
  ) });
}
function FloorUpDownControl({
  indoorMapLayer,
  poisLayer
}) {
  const map = useMapStore((state) => state.mapInstance);
  const { currentFloor, setCurrentFloor } = useFloorStore();
  useEffect(() => {
    const floorControl = new maplibreGlExports.NavigationControl({
      showCompass: false,
      showZoom: false,
      visualizePitch: false
    });
    map == null ? void 0 : map.addControl(floorControl, "bottom-right");
    const upButton = document.createElement("button");
    upButton.className = "maplibregl-ctrl-icon maplibregl-ctrl-floor-up dark:text-black";
    upButton.innerHTML = "&#8593;";
    upButton.addEventListener("click", () => {
      const floorOrder = ["B", "G", "M", 1, 2, 3, 4, 5, 6];
      const currentIndex = floorOrder.indexOf(currentFloor);
      if (currentIndex >= 0 && currentIndex < floorOrder.length - 1) {
        const nextFloor = floorOrder[currentIndex + 1];
        setCurrentFloor(nextFloor);
        indoorMapLayer.setFloorLevel(nextFloor);
        poisLayer.setFloorLevel(nextFloor);
      }
    });
    const downButton = document.createElement("button");
    downButton.className = "maplibregl-ctrl-icon maplibregl-ctrl-floor-down dark:text-black";
    downButton.innerHTML = "&#8595;";
    downButton.addEventListener("click", () => {
      const floorOrder = ["B", "G", "M", 1, 2, 3, 4, 5, 6];
      const currentIndex = floorOrder.indexOf(currentFloor);
      if (currentIndex > 0) {
        const nextFloor = floorOrder[currentIndex - 1];
        setCurrentFloor(nextFloor);
        indoorMapLayer.setFloorLevel(nextFloor);
        poisLayer.setFloorLevel(nextFloor);
      }
    });
    floorControl._container.append(upButton);
    floorControl._container.append(downButton);
    return () => {
      map == null ? void 0 : map.removeControl(floorControl);
    };
  }, [map, currentFloor, setCurrentFloor, indoorMapLayer, poisLayer]);
  return null;
}
function MapComponent() {
  const mapContainer = useRef(null);
  const [theme] = useTheme();
  const { currentFloor } = useFloorStore();
  const setMapInstance = useMapStore((state) => state.setMapInstance);
  const indoorMapLayer = useMemo(
    () => new IndoorMapLayer(
      building.indoor_map,
      theme
    ),
    [theme]
  );
  const poisLayer = useMemo(
    () => new POIsLayer(building.pois, theme),
    [theme]
  );
  useEffect(() => {
    if (!mapContainer.current) return;
    const map = new maplibregl.Map({
      ...config.mapConfig,
      style: config.mapStyles[theme],
      container: mapContainer.current
    });
    setMapInstance(map);
    map.on("load", () => {
      try {
        map.addLayer(indoorMapLayer);
        map.addLayer(poisLayer);
        indoorMapLayer.setFloorLevel(currentFloor);
        poisLayer.setFloorLevel(currentFloor);
      } catch (error) {
        console.error("Failed to initialize map layers:", error);
      }
    });
    map.addControl(new maplibreGlExports.NavigationControl(), "bottom-right");
    map.addControl(new maplibreGlExports.FullscreenControl(), "bottom-right");
    if (process.env.NODE_ENV === "development") {
      map.addControl(
        new MaplibreInspect({
          popup: new maplibregl.Popup({
            closeOnClick: false
          }),
          blockHoverPopupOnClick: true
        }),
        "bottom-right"
      );
    }
    return () => {
      map.remove();
    };
  }, [indoorMapLayer, poisLayer, setMapInstance, theme]);
  useEffect(() => {
    indoorMapLayer.setFloorLevel(currentFloor);
    poisLayer.setFloorLevel(currentFloor);
  }, [currentFloor, indoorMapLayer, poisLayer]);
  return /* @__PURE__ */ jsxs("div", { className: "flex size-full flex-col", children: [
    /* @__PURE__ */ jsx(DiscoveryPanel, {}),
    /* @__PURE__ */ jsx(FloorSelector, { indoorMapLayer, poisLayer }),
    /* @__PURE__ */ jsx(FloorUpDownControl, { indoorMapLayer, poisLayer }),
    /* @__PURE__ */ jsx("div", { ref: mapContainer, className: "relative size-full", children: /* @__PURE__ */ jsx("div", { className: "absolute bottom-4 left-4 z-10 pointer-events-none", children: /* @__PURE__ */ jsx(
      "img",
      {
        src: "/floormap_large.png",
        alt: "Floor map overlay",
        className: "max-w-48 opacity-30 rounded-lg shadow-lg"
      }
    ) }) })
  ] });
}
function CoordinateOverlay() {
  var _a, _b, _c, _d, _e;
  const map = useMapStore((state) => state.mapInstance);
  const [coordinates, setCoordinates] = useState(null);
  const [zoom, setZoom] = useState(0);
  const [clickedFeature, setClickedFeature] = useState(null);
  useEffect(() => {
    if (!map) return;
    const handleMouseMove = (e) => {
      setCoordinates({
        lng: e.lngLat.lng,
        lat: e.lngLat.lat
      });
      setZoom(map.getZoom());
    };
    const handleClick = (e) => {
      const features = map.queryRenderedFeatures(e.point);
      if (features.length > 0) {
        setClickedFeature(features[0]);
      } else {
        setClickedFeature(null);
      }
    };
    map.on("mousemove", handleMouseMove);
    map.on("click", handleClick);
    return () => {
      map.off("mousemove", handleMouseMove);
      map.off("click", handleClick);
    };
  }, [map]);
  if (process.env.NODE_ENV !== "development") {
    return null;
  }
  if (!coordinates) return null;
  return /* @__PURE__ */ jsxs("div", { className: "fixed top-20 right-4 z-50 bg-black bg-opacity-90 text-white p-4 rounded-lg text-xs font-mono max-w-80 space-y-2", children: [
    /* @__PURE__ */ jsxs("div", { className: "border-b border-gray-600 pb-2", children: [
      /* @__PURE__ */ jsx("div", { className: "text-yellow-400 font-bold mb-1", children: "COORDINATES" }),
      /* @__PURE__ */ jsxs("div", { children: [
        "Lng: ",
        coordinates.lng.toFixed(8)
      ] }),
      /* @__PURE__ */ jsxs("div", { children: [
        "Lat: ",
        coordinates.lat.toFixed(8)
      ] }),
      /* @__PURE__ */ jsxs("div", { children: [
        "Zoom: ",
        zoom.toFixed(2)
      ] })
    ] }),
    clickedFeature && /* @__PURE__ */ jsxs("div", { className: "border-b border-gray-600 pb-2", children: [
      /* @__PURE__ */ jsx("div", { className: "text-green-400 font-bold mb-1", children: "CLICKED FEATURE" }),
      /* @__PURE__ */ jsxs("div", { children: [
        "ID: ",
        clickedFeature.id || "null"
      ] }),
      /* @__PURE__ */ jsxs("div", { children: [
        "Layer: ",
        ((_a = clickedFeature.layer) == null ? void 0 : _a.id) || "unknown"
      ] }),
      /* @__PURE__ */ jsxs("div", { children: [
        "Source: ",
        clickedFeature.source || "unknown"
      ] }),
      ((_b = clickedFeature.properties) == null ? void 0 : _b.name) && /* @__PURE__ */ jsxs("div", { children: [
        "Name: ",
        clickedFeature.properties.name
      ] }),
      ((_c = clickedFeature.properties) == null ? void 0 : _c.building_id) && /* @__PURE__ */ jsxs("div", { children: [
        "Building: ",
        clickedFeature.properties.building_id
      ] }),
      ((_d = clickedFeature.properties) == null ? void 0 : _d.level_id) && /* @__PURE__ */ jsxs("div", { children: [
        "Level: ",
        clickedFeature.properties.level_id
      ] }),
      ((_e = clickedFeature.properties) == null ? void 0 : _e.feature_type) && /* @__PURE__ */ jsxs("div", { children: [
        "Type: ",
        clickedFeature.properties.feature_type
      ] })
    ] }),
    /* @__PURE__ */ jsxs("div", { className: "pt-1", children: [
      /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => {
            const coordText = `[${coordinates.lng.toFixed(8)}, ${coordinates.lat.toFixed(8)}]`;
            navigator.clipboard.writeText(coordText);
          },
          className: "bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded text-xs",
          children: "Copy Coords"
        }
      ),
      clickedFeature && /* @__PURE__ */ jsx(
        "button",
        {
          onClick: () => {
            const featureInfo = JSON.stringify(clickedFeature, null, 2);
            navigator.clipboard.writeText(featureInfo);
          },
          className: "bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs ml-2",
          children: "Copy Feature"
        }
      )
    ] })
  ] });
}
const meta = () => {
  return [
    { title: "OpenIndoorMaps" },
    {
      name: "description",
      content: "OpenIndoorMaps is a community-based tool that helps people navigate large indoor spaces like malls, airports, hospitals, and universities. Collaborate and add your building to help others find their way."
    }
  ];
};
function Index() {
  return /* @__PURE__ */ jsxs("div", { className: "flex h-svh items-center justify-center", children: [
    /* @__PURE__ */ jsx(Analytics, {}),
    /* @__PURE__ */ jsx(CoordinateOverlay, {}),
    /* @__PURE__ */ jsx(MapComponent, {})
  ] });
}
const route3 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  default: Index,
  meta
}, Symbol.toStringTag, { value: "Module" }));
const serverManifest = { "entry": { "module": "/assets/entry.client-CVo1IFVb.js", "imports": ["/assets/single-fetch-KR4tGc5K.js", "/assets/components-Bxeh3RjV.js"], "css": [] }, "routes": { "root": { "id": "root", "parentId": void 0, "path": "", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasErrorBoundary": false, "module": "/assets/root-BYTJKZi_.js", "imports": ["/assets/single-fetch-KR4tGc5K.js", "/assets/components-Bxeh3RjV.js", "/assets/card-CeN47jPX.js"], "css": ["/assets/root-D5t4LkCF.css"] }, "routes/action.set-theme": { "id": "routes/action.set-theme", "parentId": "root", "path": "action/set-theme", "index": void 0, "caseSensitive": void 0, "hasAction": true, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasErrorBoundary": false, "module": "/assets/action.set-theme-l0sNRNKZ.js", "imports": [], "css": [] }, "routes/api.geocode": { "id": "routes/api.geocode", "parentId": "root", "path": "api/geocode", "index": void 0, "caseSensitive": void 0, "hasAction": false, "hasLoader": true, "hasClientAction": false, "hasClientLoader": false, "hasErrorBoundary": false, "module": "/assets/api.geocode-l0sNRNKZ.js", "imports": [], "css": [] }, "routes/_index": { "id": "routes/_index", "parentId": "root", "path": void 0, "index": true, "caseSensitive": void 0, "hasAction": false, "hasLoader": false, "hasClientAction": false, "hasClientLoader": false, "hasErrorBoundary": false, "module": "/assets/_index-SW9k_6rO.js", "imports": ["/assets/single-fetch-KR4tGc5K.js", "/assets/card-CeN47jPX.js"], "css": ["/assets/_index-CNw_BWqJ.css"] } }, "url": "/assets/manifest-b3a86cd5.js", "version": "b3a86cd5" };
const mode = "production";
const assetsBuildDirectory = "build/client";
const basename = "/";
const future = { "v3_fetcherPersist": true, "v3_relativeSplatPath": true, "v3_throwAbortReason": true, "v3_routeConfig": false, "v3_singleFetch": true, "v3_lazyRouteDiscovery": true, "unstable_optimizeDeps": false };
const isSpaMode = false;
const publicPath = "/";
const entry = { module: entryServer };
const routes = {
  "root": {
    id: "root",
    parentId: void 0,
    path: "",
    index: void 0,
    caseSensitive: void 0,
    module: route0
  },
  "routes/action.set-theme": {
    id: "routes/action.set-theme",
    parentId: "root",
    path: "action/set-theme",
    index: void 0,
    caseSensitive: void 0,
    module: route1
  },
  "routes/api.geocode": {
    id: "routes/api.geocode",
    parentId: "root",
    path: "api/geocode",
    index: void 0,
    caseSensitive: void 0,
    module: route2
  },
  "routes/_index": {
    id: "routes/_index",
    parentId: "root",
    path: void 0,
    index: true,
    caseSensitive: void 0,
    module: route3
  }
};
export {
  serverManifest as assets,
  assetsBuildDirectory,
  basename,
  entry,
  future,
  isSpaMode,
  mode,
  publicPath,
  routes
};
